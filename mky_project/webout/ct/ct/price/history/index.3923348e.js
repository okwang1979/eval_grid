!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["ct/ct/price/history/index"]=t(require("nc-lightapp-front"),require("react")):e["ct/ct/price/history/index"]=t(e["nc-lightapp-front"],e.React)}(window,function(e,t){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=170)}({0:function(t,a){t.exports=e},10:function(e,a){e.exports=t},170:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.History=void 0;var r,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(10),i=(r=o)&&r.__esModule?r:{default:r},l=a(8),s=a(0),d=a(171),c=a(59);var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"setTableBodyData",value:function(e,t){var a=this;if(!t){var r={pks:[e.pk_ct_price.value],pageId:l.PAGECODE.history,areacode:l.AREA.history_body};(0,s.ajax)({url:l.ACTION_URL.queryHistoryBody,data:r,success:function(t){var r=t.success,n=t.data;r?(a.props.insertTable.setChildTableData(l.AREA.history_head,e,n[l.AREA.history_body],l.FIELDS.pk_ct_price_b),c.handleDynamicColumn.call(a,a.props,e.pk_ct_price.value,e.pk_pricetemplet.value,l.AREA.history_body)):a.props.insertTable.setChildTableData(l.AREA.history_head,e,{rows:[]},l.FIELDS.pk_ct_price_b)}})}}},{key:"getData",value:function(){var e=this,t={pk_oid:[this.props.pk_oid],pageId:l.PAGECODE.history,areacode:l.AREA.history_head};(0,s.ajax)({url:l.ACTION_URL.queryHistory,data:t,success:function(t){t.success&&t.data?e.props.insertTable.setInsertTableValue(l.AREA.history_head,t.data[l.AREA.history_head],l.FIELDS.pk_ct_price):e.props.insertTable.setInsertTableValue(l.AREA.history_head,{rows:[]},l.FIELDS.pk_ct_price)}})}},{key:"render",value:function(){var e=this.props.insertTable.createInsertTable;return i.default.createElement("div",{className:"scm-wrap"},i.default.createElement("div",{className:"table-area"},e({headTableId:l.AREA.history_head,bodyTableId:l.AREA.history_body,comType:"normal",setTableBodyData:this.setTableBodyData.bind(this)})))}}]),t}();t.History=u=(0,s.createPage)({initTemplate:d.initTemplate})(u),t.History=u},171:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var r,n=a(172),o=(r=n)&&r.__esModule?r:{default:r};t.initTemplate=o.default},172:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={pagecode:n.PAGECODE.history};(0,r.ajax)({url:n.ACTION_URL.merge,data:t,success:function(t){var a=t.data;e.meta.setMeta(a)}})};var r=a(0),n=a(8)},2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLangByResId=t.initLang=void 0;var r=a(0);t.initLang=function(e,t,a,n){e.lang=null,e.inlt=null,(0,r.getMultiLang)({moduleId:t,domainName:a,callback:function(t,a,r){a&&(e.lang=t,e.inlt=r),n&&n()},needInlt:!0})},t.getLangByResId=function(e,t,a){return function(e,t){if(!e)throw(0,r.toast)({color:"danger",content:"请检查代码中this是否能够取到！当前为undifined,位置："+t}),new Error("请检查代码中this是否能够取到！当前为undifined,位置："+t)}(e,t),a?e.inlt?e.inlt.get(t,a)||t:"":e.lang?e.lang[t]||t:""}},3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showQuitTransferWarningDialog=t.showBackWarningDialog=t.showBatchOprReturnMessage=t.showQueryResultInfoForNoPage=t.showSaveInfo=t.showRefreshInfo=t.showNoQueryResultInfo=t.showHasQueryResultInfo=t.showChangeOrgDialog=t.showDeleteDialog=t.showSingleDeleteDialog=t.showCancelDialog=t.showBatchOperateInfo=t.showBatchOprMessage=t.showWarningDialog=t.showErrorDialog=t.showInfoDialog=t.showSuccessDialog=t.showInfoInfo=t.showErrorInfo=t.showWarningInfo=t.showSuccessInfo=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(0);var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lang=null,this.inlt=null,console.log("LangContainer初始化"),(0,n.getMultiLang)({moduleId:"4001pubmessage",domainName:"scmpub",callback:this.init.bind(this),needInlt:!0})}return r(e,[{key:"init",value:function(e,t,a){t&&(this.lang=e,this.inlt=a)}},{key:"getLangByResId",value:function(e,t){return t?this.inlt.get(e,t)||e:this.lang&&this.lang[e]||e}}]),e}());function i(e,t,a){s(e,t,a)}function l(e,t,a){s(e,t,a,"warning")}function s(e,t,a,r,o,i,l,s,d){(0,n.toast)({duration:a,color:r,title:e,content:t,groupOperation:o,TextArr:i,groupOperationMsg:l,onExpand:s,onClose:d})}function d(e,t){c(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"warning")}function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];(0,n.promptBox)({color:r,title:e,content:t,noFooter:a.noFooter,noCancelBtn:a.noCancelBtn,beSureBtnName:a.beSureBtnName,cancelBtnName:a.cancelBtnName,beSureBtnClick:a.beSureBtnClick,cancelBtnClick:a.cancelBtnClick,closeBtnClick:a.closeBtnClick,closeByClickBackDrop:a.closeByClickBackDrop})}function u(){l(null,o.getLangByResId("4001PUBMESSAGE-000016"))}t.showSuccessInfo=i,t.showWarningInfo=l,t.showErrorInfo=function(e,t){s(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"infinity","danger")},t.showInfoInfo=function(e,t,a){s(e,t,a,"info")},t.showSuccessDialog=function(e,t){c(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},t.showInfoDialog=function(e,t){c(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"info")},t.showErrorDialog=function(e,t){c(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"danger")},t.showWarningDialog=d,t.showBatchOprMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.getLangByResId("4001PUBMESSAGE-000003"),t=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=t.failedNum,s=t.sucessNum;if(0==l)i(o.getLangByResId("4001PUBMESSAGE-000018",{0:r}),o.getLangByResId("4001PUBMESSAGE-000022",{0:t.sucessNum}));else if(0==s){e=o.getLangByResId("4001PUBMESSAGE-000019",{0:r});var d=o.getLangByResId("4001PUBMESSAGE-000020",{0:t.failedNum,1:t.failedNum});(0,n.toast)({duration:"infinity",color:"danger",title:e,content:d,groupOperation:!0,TextArr:[o.getLangByResId("4001PUBMESSAGE-000000"),o.getLangByResId("4001PUBMESSAGE-000001"),o.getLangByResId("4001PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose})}else{e=o.getLangByResId("4001PUBMESSAGE-000019",{0:r});var c=o.getLangByResId("4001PUBMESSAGE-000021",{0:Number(t.sucessNum)+Number(t.failedNum),1:t.sucessNum,2:t.failedNum});(0,n.toast)({duration:"infinity",color:"danger",title:e,content:c,groupOperation:!0,TextArr:[o.getLangByResId("4001PUBMESSAGE-000000"),o.getLangByResId("4001PUBMESSAGE-000001"),o.getLangByResId("4001PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose})}},t.showBatchOperateInfo=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};s(e,t,"infinity","danger",!0,[o.getLangByResId("4001PUBMESSAGE-000000"),o.getLangByResId("4001PUBMESSAGE-000001"),o.getLangByResId("4001PUBMESSAGE-000002")],a,r.onExpand,r.onClose)},t.showCancelDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(o.getLangByResId("4001PUBMESSAGE-000007"),o.getLangByResId("4001PUBMESSAGE-000008"),e)},t.showSingleDeleteDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(o.getLangByResId("4001PUBMESSAGE-000009"),o.getLangByResId("4001PUBMESSAGE-000010"),e)},t.showDeleteDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(o.getLangByResId("4001PUBMESSAGE-000009"),o.getLangByResId("4001PUBMESSAGE-000011"),e)},t.showChangeOrgDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(o.getLangByResId("4001PUBMESSAGE-000012"),o.getLangByResId("4001PUBMESSAGE-000013"),e)},t.showHasQueryResultInfo=function(e){i(null,e?o.getLangByResId("4001PUBMESSAGE-000015",{1:e}):o.getLangByResId("4001PUBMESSAGE-000014"))},t.showNoQueryResultInfo=u,t.showRefreshInfo=function(){i(o.getLangByResId("4001PUBMESSAGE-000017"))},t.showSaveInfo=function(){i(o.getLangByResId("4001PUBMESSAGE-000023"))},t.showQueryResultInfoForNoPage=function(e){e?i(null,o.getLangByResId("4001PUBMESSAGE-000015",{1:e})):u()},t.showBatchOprReturnMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.getLangByResId("4001PUBMESSAGE-000003"),t=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l="",s=t.failedNum,d=t.sucessNum;if(0==s)i(o.getLangByResId("4001PUBMESSAGE-000018",{0:r}),o.getLangByResId("4001PUBMESSAGE-000022",{0:t.sucessNum})),l=o.getLangByResId("4001PUBMESSAGE-000022",{0:t.sucessNum});else if(0==d){e=o.getLangByResId("4001PUBMESSAGE-000019",{0:r});var c=o.getLangByResId("4001PUBMESSAGE-000020",{0:t.failedNum,1:t.failedNum});(0,n.toast)({duration:"infinity",color:"danger",title:e,content:c,groupOperation:!0,TextArr:[o.getLangByResId("4001PUBMESSAGE-000000"),o.getLangByResId("4001PUBMESSAGE-000001"),o.getLangByResId("4001PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose,customBtn:a.customBtn}),t.errorMessages.forEach(function(e){l+=e})}else{e=o.getLangByResId("4001PUBMESSAGE-000019",{0:r});var u=o.getLangByResId("4001PUBMESSAGE-000021",{0:Number(t.sucessNum)+Number(t.failedNum),1:t.sucessNum,2:t.failedNum});(0,n.toast)({duration:"infinity",color:"danger",title:e,content:u,groupOperation:!0,TextArr:[o.getLangByResId("4001PUBMESSAGE-000000"),o.getLangByResId("4001PUBMESSAGE-000001"),o.getLangByResId("4001PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose,customBtn:a.customBtn}),t.errorMessages.forEach(function(e){l+=e})}return l},t.showBackWarningDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(o.getLangByResId("4001PUBMESSAGE-000024"),o.getLangByResId("4001PUBMESSAGE-000025"),e,"warning")},t.showQuitTransferWarningDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(o.getLangByResId("4001PUBMESSAGE-000026"),o.getLangByResId("4001PUBMESSAGE-000027"),e,"warning")}},43:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processExtBillCardHeadEditResult=t.createExtBillHeadAfterEventData=t.processExtBillCardBodyEditResult=t.processGridEditResult=t.processBillCardBodyEditResultNotAddRow=t.processBillCardBodyEditResult=t.processBillCardHeadEditResult=t.createExtBodyAfterEventData=t.createHeadAfterEventData=t.createBodyAfterEventData=t.createGridAfterEventData=void 0;var r=a(48);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.createGridAfterEventData=function(e,t,a,o,i,l,s,d){var c=e.meta.getMeta(),u=e.editTable.getAllRows(a,!1),f=n({templetid:c.pageid,pageid:t},a,{areaType:"table",areacode:a,rows:[u[s]]});return f[a]=(0,r.simplifyData)(f[a]),{attrcode:i,changedrows:l,grid:f,index:0,userobject:d}},t.createBodyAfterEventData=function(e,t,a,n,o,i,l,s,d){var c=e.createBodyAfterEventData(t,a,n,o,i,l);c.index=0;var u=c.card.body[n].rows,f=[u[s]];c.card.body[n].rows=f,c.card.head[a]=(0,r.simplifyData)(c.card.head[a]),c.card.body[n]=(0,r.simplifyData)(c.card.body[n]),d=d||{};var p=[];return u.map(function(e){"3"!=e.status&&p.push(e.values.crowno?e.values.crowno.value:null)}),d.scm_originindex=s+"",d.scm_allrownos=p,c.userobject=d,c},t.createHeadAfterEventData=function(e,t,a,n,o,i,l,s,d){var c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],u=e.createHeadAfterEventData(t,a,n,o,i,l);return u.card.head[a]=(0,r.simplifyData)(u.card.head[a]),u.card.body[n]=d?(0,r.simplifyDataByFields)(u.card.body[n],!0,d,c):(0,r.simplifyData)(u.card.body[n]),s=s||{},u.userobject=s,u},t.createExtBodyAfterEventData=function(e,t,a,n,o,i,l,s,d){var c=e.createBodyAfterEventData(t,a,n,o,i,l);c.index=0;var u=c.card.bodys[o].rows,f=[u[s]];c.card.bodys[o].rows=f,c.card.head[a]=(0,r.simplifyData)(c.card.head[a]),c.card.bodys[o]=(0,r.simplifyData)(c.card.bodys[o]),d=d||{};var p=[];return u.map(function(e){"3"!=e.status&&p.push(e.values.crowno?e.values.crowno.value:null)}),d.scm_originindex=s+"",d.scm_allrownos=p,c.userObject=d,c},t.processBillCardHeadEditResult=function(e,t,a,r){r&&r.billCard&&(r.billCard.head&&e.form.setAllFormValue(n({},t,r.billCard.head[t])),r.billCard.body&&e.cardTable.updateDiffDataByRowId(a,r.billCard.body[a]))},t.processBillCardBodyEditResult=function(e,t,a,r){if(a&&a.billCard&&a.billCard.body&&a.billCard.body[t]&&a.billCard.body[t].rows.length>0){for(var n=a.billCard.body[t].rows,o=[],i=[],l=0;l<n.length;l++){var s={index:r+l,data:n[l]};0==l?i.push(s):o.push(s)}i.length>0&&e.cardTable.updateDataByIndexs(t,i),o.length>0&&e.cardTable.insertDataByIndexs(t,o,!0)}},t.processBillCardBodyEditResultNotAddRow=function(e,t,a,r){if(a&&a.billCard&&a.billCard.body&&a.billCard.body[t]&&a.billCard.body[t].rows.length>0){for(var n=a.billCard.body[t].rows,o=[],i=[],l=0;l<n.length;l++){var s={index:r+l,data:n[l]};i.push(s)}i.length>0&&e.cardTable.updateDataByIndexs(t,i),o.length>0&&e.cardTable.insertDataByIndexs(t,o,!0)}},t.processGridEditResult=function(e,t,a,r){if(a&&a.grid&&a.grid[t]){for(var n=a.grid[t].rows,o=[],i=[],l=0;l<n.length;l++){var s={index:r+l,data:n[l]};0==l?i.push(s):o.push(s)}i.length>0&&e.editTable.updateDataByIndexs(t,i),o.length>0&&e.editTable.insertDataByIndexs(t,o,!0)}},t.processExtBillCardBodyEditResult=function(e,t,a){if(a.extbillcard&&a.extbillcard.bodys&&a.extbillcard.bodys[t]){var r=[],n=[],o=a.userObject&&a.userObject.scm_originindex?parseInt(a.userObject.scm_originindex):1;a.extbillcard.bodys[t].rows.forEach(function(e,t){e.rowid?r.push(e):n.push({index:t+o,data:e})}),e.cardTable.updateDataByRowId(t,{rows:r},!1,!1),e.cardTable.insertDataByIndexs(t,n,!0)}},t.createExtBillHeadAfterEventData=function(e,t,a,n,o,i,l,s){var d=e.createHeadAfterEventData(t,a,n,o,i,l);return d.card.head[a]=(0,r.simplifyData)(d.card.head[a],!1),n instanceof Array&&n.forEach(function(e){d.card.bodys[e]=(0,r.simplifyData)(d.card.bodys[e],!1)}),s=s||{},d.userobject=s,d},t.processExtBillCardHeadEditResult=function(e,t,a,r){r&&r.extbillcard&&(r.extbillcard.head&&e.form.setAllFormValue(n({},t,r.extbillcard.head[t])),r.extbillcard.bodys&&(a instanceof Array?a.forEach(function(t){r.extbillcard.bodys[t]&&e.cardTable.updateDiffDataByRowId(t,r.extbillcard.bodys[t])}):e.cardTable.updateDiffDataByRowId(a,r.extbillcard.bodys[a])))}},44:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RownoUtils=t.rowCopyPasteUtils=void 0;var r=a(60),n=a(46);t.rowCopyPasteUtils=r.rowCopyPasteUtils,t.RownoUtils=n.RownoUtils},45:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.togglePageStatus=void 0;var r=a(47),n=a(8);t.togglePageStatus=function(e,t,a){this.UIStatus=t,r.buttonController.call(this,e,t);var o=e.cardTable,i=e.form.setFormStatus,l=o.setStatus;i(n.AREA.card_head,t),l(n.AREA.card_body,t),a&&"function"==typeof a&&a.call(this,e)}},46:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RownoUtils=void 0;var r=a(0),n=0,o=8,i="crowno";function l(e,t,a,i,l){var s=i-l.length-1,d=(e.cardTable.getValByKeyAndIndex(t,s,a)||{}).value;d=d||n;var u=(e.cardTable.getValByKeyAndIndex(t,i,a)||{}).value,f=l.length,p=[];l.forEach(function(e){p.push(e)});for(var y=o;;){var g={};g[d]=!0,g[u]=!0;for(var v=0;v<f;v++){var b=p[v];if(new Number(d)-new Number(b)>=0||new Number(u)-new Number(b)<=0)break;g[b]=!0}if(Object.getOwnPropertyNames(g).length!==f+2)break;for(var A=0;A<f;A++)l[A]=p[A];if(y<=0)break;--y;for(var h=0;h<f;h++){var _=c((0,r.formatAcuracy)(p[h],y));p[h]="0.00000000"==_?"0.00000001":_}}return l}function s(e,t,a,r){for(var o=e.cardTable.getNumberOfRows(t),i=function(e,t,a,r){if(1===r)return n;for(var o=n,i=null,l=0;l<r;l++)(i=e.cardTable.getValByKeyAndIndex(t,l,a).value)&&Number(o)<Number(i)&&(o=Number(i));return o}(e,t,a,o),l=new Array(r.length),s=0;s<r.length;s++)l[s]=10*(s+1)+Number(i);return l}function d(e,t,a,i,l){var s=function(e,t,a,r){if(1==e.cardTable.getNumberOfRows(t))return n;for(var o=r-1;o>=0;o--){var i=(e.cardTable.getValByKeyAndIndex(t,o,a)||{}).value;if(""!=i&&null!=i)return i}return n}(e,t,a,i),d=e.cardTable.getValByKeyAndIndex(t,i,a).value,u=new Array(l.length);if(s===d)for(var f=0;f<l.length;f++)u[f]=s;else if(null==d||""==d)for(var p=0;p<l.length;p++)u[p]=10*(p+1)+Number(s);else for(var y=(d-s)/(l.length+1),g=s,v=0;v<l.length;v++){g=Number(g)+Number(y);var b=c((0,r.formatAcuracy)(g,o));u[v]="0.00000000"==b?"0.00000001":b}return u}function c(e){return e?e.toString().replace(/\,/gi,""):e}var u={setRowMaterilNo:function(e,t,a,r){null==a&&(a=i);for(var n=e.cardTable.getNumberOfRows(t),o=!0;n>0&&o;){for(var c=[],u=-1,f=0;f<n;f++){f==n-1&&(o=!1);var p=(e.cardTable.getValByKeyAndIndex(t,f,a)||{}).value,y=(e.cardTable.getValByKeyAndIndex(t,f,r)||{}).value;if(p||y){if(0==c.length)continue;u=f;break}c.push(f),u=-1}var g=null;g=-1!=u?l(e,t,a,u,g=d(e,t,a,u,c)):s(e,t,a,c);for(var v=0;v<c.length;v++){var b=c[v];e.cardTable.setValByKeyAndIndex(t,b,a,{value:g[v].toString(),display:g[v].toString()})}}},setRowNo:function(e,t,a){null==a&&(a=i);for(var r=e.cardTable.getNumberOfRows(t),n=!0;r>0&&n;){for(var o=[],c=-1,u=0;u<r;u++){if(u==r-1&&(n=!1),(e.cardTable.getValByKeyAndIndex(t,u,a)||{}).value){if(0==o.length)continue;c=u;break}o.push(u),c=-1}var f=null;f=-1!=c?l(e,t,a,c,f=d(e,t,a,c,o)):s(e,t,a,o);for(var p=0;p<o.length;p++){var y=o[p];e.cardTable.setValByKeyAndIndex(t,y,a,{value:f[p].toString(),display:f[p].toString()})}}},resetRowNo:function(e,t,a){null==a&&(a=i);for(var r=e.cardTable.getNumberOfRows(t),n=0;n<r;n++){var o=10*n+10;e.cardTable.setValByKeyAndIndex(t,n,a,{value:o.toString(),display:o.toString()})}}};t.RownoUtils=u},47:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exitCopyStatus=t.intoCopyStatus=t.resetBodyButtons=t.buttonController=void 0;var r=a(8);function n(e){var t=e.button.setButtonVisible,a=this.bvalidateflag;t([r.BUTTON_CARD.Validate],!a),t([r.BUTTON_CARD.UnValidate],a),t(r.BUTTON_CARD.Delete,!a);var n=1==this.iversion;t([r.BUTTON_CARD.History],!n)}function o(e){e.button.setButtonDisabled([r.BUTTON_CARD.AddLine,r.BUTTON_CARD.DeleteLine,r.BUTTON_CARD.CopyLine,r.BUTTON_CARD.ReorderLineNumber],!0),e.form.getFormItemsValue(r.AREA.card_head,r.FIELDS.pk_org).value?e.button.setButtonDisabled([r.BUTTON_CARD.AddLine,r.BUTTON_CARD.ReorderLineNumber],!1):e.button.setButtonDisabled([r.BUTTON_CARD.AddLine,r.BUTTON_CARD.ReorderLineNumber],!0)}t.buttonController=function(e,t){var a=e.button.setButtonVisible;if(t==r.UISTATUS.browse){e.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0});var i=e.form.getFormItemsValue(r.AREA.card_head,r.FIELDS.pk_ct_price).value;if(!(i=i||e.getUrlParam(r.FIELDS.pk_ct_price)))return a(r.BUTTON_CARD_BROWSE,!1),a(r.BUTTON_CARD_EDIT,!1),void a(r.BUTTON_CARD.Add,!0);a(r.BUTTON_CARD_EDIT,!1),a(r.BUTTON_CARD_BROWSE,!0),a([r.BUTTON_CARD.Validate,r.BUTTON_CARD.UnValidate,r.BUTTON_CARD.History],!1),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0),n.call(this,e)}else t==r.UISTATUS.edit&&(a(r.BUTTON_CARD_BROWSE,!1),a(r.BUTTON_CARD_EDIT,!0),a([r.BUTTON_CARD.Validate,r.BUTTON_CARD.UnValidate,r.BUTTON_CARD.History,r.BUTTON_CARD.PasteThere,r.BUTTON_CARD.PasteToLast,r.BUTTON_CARD.CancelPaste],!1),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),e.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1}),o.call(this,e))},t.resetBodyButtons=o,t.intoCopyStatus=function(e){var t=e.button.setButtonVisible;t([r.BUTTON_CARD.AddLine,r.BUTTON_CARD.DeleteLine,r.BUTTON_CARD.CopyLine,r.BUTTON_CARD.ReorderLineNumber,r.BUTTON_CARD.InsertLineInner,r.BUTTON_CARD.DeleteLineInner],!1),t([r.BUTTON_CARD.PasteThere,r.BUTTON_CARD.PasteToLast,r.BUTTON_CARD.CancelPaste],!0)},t.exitCopyStatus=function(e){var t=e.button.setButtonVisible;t([r.BUTTON_CARD.PasteThere,r.BUTTON_CARD.PasteToLast,r.BUTTON_CARD.CancelPaste],!1),t([r.BUTTON_CARD.AddLine,r.BUTTON_CARD.DeleteLine,r.BUTTON_CARD.CopyLine,r.BUTTON_CARD.ReorderLineNumber,r.BUTTON_CARD.InsertLineInner,r.BUTTON_CARD.DeleteLineInner],!0),e.button.setButtonDisabled([r.BUTTON_CARD.CopyLine,r.BUTTON_CARD.DeleteLine],!0)}},48:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function n(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return!(null!=e&&""!==e&&!a.find(function(t){return t==e}))}t.simplifyData=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&Array.isArray(e.rows)&&e.rows.length){var a=r({},e,{rows:[]});return e.rows.forEach(function(e){if(e.values){var o={};for(var i in e.values)e.values[i]&&(n(e.values[i].value)?t||-1==e.values[i].scale||(o[i]={scale:e.values[i].scale}):(o[i]={value:e.values[i].value},t||-1==e.values[i].scale||(o[i].scale=e.values[i].scale)));a.rows.push(r({},e,{values:o}))}}),a}return e},t.simplifyDataByFields=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e&&Array.isArray(e.rows)&&e.rows.length){var i=r({},e,{rows:[]});return e.rows.forEach(function(e){if(e.values){var l={};for(var s in e.values)a?o?a.includes(s)&&(l[s]={value:e.values[s].value}):a.includes(s)||(l[s]={value:e.values[s].value}):n(e.values[s].value)?t||-1==e.values[s].scale||(l[s]={scale:e.values[s].scale}):(l[s]={value:e.values[s].value},t||-1==e.values[s].scale||(l[s].scale=e.values[s].scale));i.rows.push(r({},e,{values:l}))}}),i}return e}},59:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleDynamicColumn=function(e,t,a,r){i.call(this,e,t,a,r)},t.doAddDynamicColumn=i,t.resetPriceItems=l;var r=a(8),n=a(0),o=a(89);function i(e,t,a,i){var s=this,d={pk_ct_price:t,pk_pricetemplet:a};(0,n.ajax)({url:r.ACTION_URL.dynamicColumn,data:d,success:function(t){if(t.success&&(o.hiddenPriceItems.call(s,e),t.data)){var r=t.data;l(e,r[a],i)}}})}function l(e,t,a){var r=e.meta.getMeta(),n=function(e){return e.forEach(function(e){e.itemtype="input",e.disabled=!1,e.visible=!0}),e}(t),o=r[a].items;o.findIndex(function(e,t){return"npriceitem1"==e.attrcode});!function(e,t){var a=new Map,r=t.map(function(e){return a.set(e.attrCode,e.label),e.attrCode});e.forEach(function(e){r.includes(e.attrcode)&&(e.disabled=!1,e.visible=!0,e.label=a.get(e.attrcode))})}(o,n),e.meta.setMeta(r)}},60:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rowCopyPasteUtils=void 0;var r=a(0),n=!0,o=!1;function i(e,t,a,o,i,d){!function(e,t,a,n,o){var i=(0,r.deepClone)(a);if(i)if(i instanceof Array){for(var s=i.length,d=[],c=0;c<s;c++){var u=i[c].data;l(u,o),d.push(u)}e.cardTable.insertRowsAfterIndex(t,d,n)}else l(i,o),e.cardTable.insertRowsAfterIndex(t,i,n)}(e,t,this.state.copyRowDatas,a-1,d),this.setState({copyRowDatas:null}),s(e,o,i,n),e.cardTable.selectAllRows(t,!1),e.cardTable.setAllCheckboxAble(t,!0)}function l(e,t){t&&t instanceof Array&&(e instanceof Array?e.forEach(function(e){t.forEach(function(t){e.values[t]={value:null,display:null,scale:-1}})}):t.forEach(function(t){e.values[t]={value:null,display:null,scale:-1}}))}function s(e,t,a,r){t&&e.button.setButtonVisible(t,r),a&&e.button.setButtonVisible(a,!r)}var d={copyRow:function(e,t,a,r,n){return this.setState({copyRowDatas:a}),s(e,r,n,o),e.cardTable.setAllCheckboxAble(t,!1),a},copyRows:function(e,t,a,r){var n=e.cardTable.getCheckedRows(t);if(n&&n.length>0)return this.setState({copyRowDatas:n}),s(e,a,r,o),e.cardTable.setAllCheckboxAble(t,!1),n},pasteRowsToIndex:i,pasteRowsToTail:function(e,t,a,r,n){var o=e.cardTable.getNumberOfRows(t);i.call(this,e,t,o,a,r,n)},cancel:function(e,t,a,r){this.setState({copyRowDatas:null}),s(e,a,r,n),e.cardTable.selectAllRows(t,!1),e.cardTable.setAllCheckboxAble(t,!0)}};t.rowCopyPasteUtils=d},8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={list_group1:"list_group1",Add_list:"Add_list",Delete_list:"Delete_list",Validate:"Validate",UnValidate:"UnValidate",list_print:"list_print",Refresh:"Refresh",Validate_inner:"Validate_inner",UnValidate_inner:"UnValidate_inner",Edit_inner:"Edit_inner",Delete_inner:"Delete_inner",History_inner:"History_inner",Copy_inner:"Copy_inner"},n={Add:"Add",card_group:"card_group",Edit:"Edit",Copy:"Copy",Validate:"Validate",UnValidate:"UnValidate",Print:"Print",Refresh:"Refresh",History:"History",Save:"Save",Cancel:"Cancel",AddLine:"AddLine",DeleteLine:"DeleteLine",CopyLine:"CopyLine",Delete:"Delete",ReorderLineNumber:"ReorderLineNumber",DeleteLineInner:"DeleteLineInner",InsertLineInner:"InsertLineInner",PasteToLast:"PasteToLast",PasteThere:"PasteThere",CancelPaste:"CancelPaste"},o=[n.Save,n.Cancel,n.DeleteLineInner,n.InsertLineInner,n.AddLine,n.DeleteLine,n.CopyLine,n.ReorderLineNumber,n.PasteToLast,n.PasteThere,n.CancelPaste],i=[n.Add,n.card_group,n.Delete,n.Edit,n.Copy,n.Validate,n.UnValidate,n.History,n.Print,n.Refresh],l=[r.list_group1,r.Add_list,r.Delete_list,r.Validate,r.UnValidate,r.list_print,r.Refresh];t.APPCODE=400400602,t.PAGECODE={list:"400400602_list",card:"400400602_card",history:"400400602_history"},t.AREA={searchArea:"searchArea",list_head:"list_head",list_inner:"list_inner",card_head:"card_head",card_body:"card_body",card_body_inner:"card_body_inner",history_head:"history_head",history_body:"history_body"},t.BUTTON=r,t.ACTION_URL={query:"/nccloud/ct/price/query.do",save:"/nccloud/ct/price/save.do",delete:"/nccloud/ct/price/delete.do",groupQuery:"/nccloud/ct/price/groupQuery.do",update:"/nccloud/ct/price/update.do",validate:"/nccloud/ct/price/validate.do",unvalidate:"/nccloud/ct/price/unvalidate.do",pageQuery:"/nccloud/ct/price/pageQuery.do",dynamicColumn:"/nccloud/ct/price/dynamicColumn.do",cardSetUp:"/nccloud/ct/price/cardSetUp.do",queryByPu:"/nccloud/ct/price/queryByPu.do",queryHistory:"/nccloud/ct/price/queryHistory.do",queryHistoryBody:"/nccloud/ct/price/queryHistoryBody.do",print:"/nccloud/ct/price/print.do",merge:"/nccloud/platform/templet/querypage.do",cardHeadAfter:"/nccloud/ct/price/cardHeadAfter.do",cardBodyAfter:"/nccloud/ct/price/cardBodyAfter.do",cardBefore:"/nccloud/ct/price/cardBefore.do",cardHeadBefore:"/nccloud/ct/price/cardHeadBefore.do"},t.UISTATUS={browse:"browse",edit:"edit"},t.BUTTON_BROWSE_LIST=l,t.BUTTON_CARD=n,t.BUTTON_CARD_EDIT=o,t.BUTTON_CARD_BROWSE=i,t.PriceCache={PriceCacheKey:"scm.ct.price.datasource",Searchval:"PriceList_serachVal"},t.FIELDS={pk_group:"pk_group",iversion:"iversion",pk_org:"pk_org",pk_puorg:"pk_puorg",bvalidateflag:"bvalidateflag",blatest:"blatest",cvendorid:"cvendorid",pk_marbasclass:"pk_marbasclass",pk_material:"pk_material","pk_material.materialspec":"pk_material.materialspec",pk_ct_price:"pk_ct_price",pk_ct_price_b:"pk_ct_price_b",ts:"ts",pk_oid:"pk_oid",pk_pricetemplet:"pk_pricetemplet",corigcurrencyid:"corigcurrencyid",orgregion:"orgregion",castunitid:"castunitid",crowno:"crowno",vcode:"vcode",totalprice:"totalprice",baseprice:"baseprice"},t.NPRICEITEMS=["npriceitem1","npriceitem2","npriceitem3","npriceitem4","npriceitem5","npriceitem6","npriceitem7","npriceitem8","npriceitem9","npriceitem10","npriceitem11","npriceitem12","npriceitem13","npriceitem14","npriceitem15","npriceitem16","npriceitem17","npriceitem18","npriceitem19","npriceitem20","npriceitem21","npriceitem22","npriceitem23","npriceitem24","npriceitem25","npriceitem26","npriceitem27","npriceitem28","npriceitem29","npriceitem30"],t.VOSTATUS={DELETE:"3"}},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cvendorid_after=function(e,t,a,i,l){var s=(0,o.createHeadAfterEventData)(e,n.PAGECODE.card,n.AREA.card_head,n.AREA.card_body,t,a,i,{},[n.FIELDS.pk_org,n.FIELDS.cvendorid]);(0,r.ajax)({url:n.ACTION_URL.cardHeadAfter,data:s,success:function(t){t.success&&(console.log(t.data),(0,o.processBillCardHeadEditResult)(e,n.AREA.card_head,n.AREA.card_body,t.data),f(e))}})},t.material_after=function(e,t,a,i,l){var s=(0,o.createHeadAfterEventData)(e,n.PAGECODE.card,n.AREA.card_head,n.AREA.card_body,t,a,i,{},[n.FIELDS.pk_org,n.FIELDS.pk_marbasclass,n.FIELDS.pk_material]);(0,r.ajax)({url:n.ACTION_URL.cardHeadAfter,data:s,success:function(t){if(t.success){var a=t.data.billCard.head[n.AREA.card_head].rows[0].values.pk_marbasclass;a&&a.value||e.form.setFormItemsValue(n.AREA.card_head,{"pk_marbasclass.name":{value:null,display:null}}),(0,o.processBillCardHeadEditResult)(e,n.AREA.card_head,n.AREA.card_body,t.data)}}})},t.marbasclass_after=function(e,t,a,i,l){var s=(0,o.createHeadAfterEventData)(e,n.PAGECODE.card,n.AREA.card_head,n.AREA.card_body,t,a,i,{},[n.FIELDS.pk_org,n.FIELDS.pk_marbasclass,n.FIELDS.pk_material]);(0,r.ajax)({url:n.ACTION_URL.cardHeadAfter,data:s,success:function(t){var a;e.form.setFormItemsValue(n.AREA.card_head,(u(a={},n.FIELDS.pk_material,{display:null,value:null}),u(a,"pk_material.name",{display:null,value:null}),u(a,"pk_material.materialspec",{display:null,value:null}),u(a,"pk_material.materialtype",{display:null,value:null}),a));var r=e.form.getFormItemsValue(n.AREA.card_head,n.FIELDS.pk_marbasclass);r&&r.value&&(e.form.setFormItemsValue(n.AREA.card_head,u({},n.FIELDS.castunitid,{display:null,value:null})),e.form.setFormItemsDisabled(n.AREA.card_head,u({},n.FIELDS.castunitid,!0))),(0,o.processBillCardHeadEditResult)(e,n.AREA.card_head,n.AREA.card_body,t.data)}})},t.pricetemplet_after=function(e,t,a,r,o){if(o.value&&o.value!=r.value)(0,l.showWarningDialog)((0,c.getLangByResId)(this,"4004PRICE-000000"),(0,c.getLangByResId)(this,"4004PRICE-000001"),{beSureBtnClick:function(){var t=r.value,a=e.form.getFormItemsValue(n.AREA.card_head,n.FIELDS.pk_ct_price).value;p(e,a,t)},cancelBtnClick:function(){e.form.setFormItemsValue(n.AREA.card_head,u({},n.FIELDS.pk_pricetemplet,{display:o.display,value:o.value}))}});else if(o.value!=r.value){var i=r.value,s=e.form.getFormItemsValue(n.AREA.card_head,n.FIELDS.pk_ct_price).value;p(e,s,i)}},t.corigcurrencyid_after=function(e,t,a,i,l){var s=(0,o.createHeadAfterEventData)(e,n.PAGECODE.card,n.AREA.card_head,n.AREA.card_body,t,a,i,{},[n.FIELDS.pk_group,n.FIELDS.corigcurrencyid].concat(n.NPRICEITEMS));(0,r.ajax)({url:n.ACTION_URL.cardHeadAfter,data:s,success:function(t){t.success&&(0,o.processBillCardHeadEditResult)(e,n.AREA.card_head,n.AREA.card_body,t.data)}})},t.pk_org_after=function(e,t,a,r,o){var i=this;o.value?o.value!=r.value&&(0,l.showWarningDialog)((0,c.getLangByResId)(this,"4004PRICE-000000"),(0,c.getLangByResId)(this,"4004PRICE-000002"),{beSureBtnClick:function(){d.add.call(i,e,r.value),s.resetBodyButtons.call(i,e)},cancelBtnClick:function(){e.form.setFormItemsValue(n.AREA.card_head,u({},n.FIELDS.pk_org,{display:o.display,value:o.value}))}}):(d.add.call(this,e,r.value),s.resetBodyButtons.call(this,e))},t.clearPriceItems=f,t.hiddenPriceItems=function(e){e.cardTable.setColVisibleByKey(n.AREA.card_body,{hideKeys:n.NPRICEITEMS})};var r=a(0),n=a(8),o=a(43),i=a(59),l=a(3),s=a(47),d=a(90),c=a(2);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){for(var t=e.cardTable.getNumberOfRows(n.AREA.card_body),a=function(t){n.NPRICEITEMS.forEach(function(a){e.cardTable.setValByKeyAndIndex(n.AREA.card_body,t,a,{value:null,display:null,scale:2})})},r=0;r<t;r++)a(r)}function p(e,t,a){f(e),(0,i.doAddDynamicColumn)(e,t,a,n.AREA.card_body)}},90:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add=void 0;var r=a(8),n=a(45),o=a(0),i=(a(47),a(44));function l(e,t){var a={pk_org:t,pageId:r.PAGECODE.card};(0,o.ajax)({url:r.ACTION_URL.groupQuery,data:a,async:!1,success:function(t){if(t.success){var a=t.data;if(e.form.setAllFormValue((o={},i=r.AREA.card_head,l=a.head[r.AREA.card_head],i in o?Object.defineProperty(o,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[i]=l,o)),e.form.getFormItemsValue(r.AREA.card_head,r.FIELDS.pk_org).value){var n=a.body[r.AREA.card_body];e.cardTable.setTableData(r.AREA.card_body,n,null,!0,!0),e.cardTable.setColVisibleByKey(r.AREA.card_body,{hideKeys:r.NPRICEITEMS})}}var o,i,l}})}t.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainOrg,a=e.form,o=e.cardTable,s=(a.setFormStatus,a.EmptyAllFormValue),d=(o.setStatus,o.setTableData);s(r.AREA.card_head),d(r.AREA.card_body,{rows:[]}),l.call(this,e,t),i.RownoUtils.setRowNo(e,r.AREA.card_body),this.isAdd=!0,this.save_url=r.ACTION_URL.save,n.togglePageStatus.call(this,e,r.UISTATUS.edit)}}})});
//# sourceMappingURL=index.3923348e.js.map