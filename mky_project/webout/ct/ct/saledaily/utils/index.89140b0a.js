!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["ct/ct/saledaily/utils/index"]=t(require("nc-lightapp-front")):e["ct/ct/saledaily/utils/index"]=t(e["nc-lightapp-front"])}(window,(function(e){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=340)}({0:function(t,a){t.exports=e},13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearTransferCache=t.rewriteTransferSrcBids=t.updateCacheDataForList=t.deleteCacheDataForList=t.getNextId=t.getCurrentLastId=t.getDefData=t.setDefData=t.hasListCache=t.addCacheData=t.getCacheDataByPk=t.deleteCacheData=t.updateCacheData=t.changeUrlParam=void 0;var r=a(0);t.changeUrlParam=function(e,t){e.setUrlParam(t)},t.updateCacheData=function(e,t,a,o,l,n){r.cardCache.addCache;var i=r.cardCache.updateCache;r.cardCache.getCacheById,i(t,a,o,l,n)},t.deleteCacheData=function(e,t,a,o){var l=r.cardCache.deleteCacheById;r.cardCache.getNextId,l(t,a,o)},t.getCacheDataByPk=function(e,t,a){return(0,r.cardCache.getCacheById)(a,t)},t.addCacheData=function(e,t,a,o,l,n){(0,r.cardCache.addCache)(a,o,l,n)},t.hasListCache=function(e,t){return e.table.hasCacheData(t)},t.setDefData=function(e,t,a){(0,r.cardCache.setDefData)(t,e,a)},t.getDefData=function(e,t){return(0,r.cardCache.getDefData)(t,e)},t.getCurrentLastId=function(e){return(0,r.cardCache.getCurrentLastId)(e)},t.getNextId=function(e,t,a){return(0,r.cardCache.getNextId)(t,a)},t.deleteCacheDataForList=function(e,t,a){a instanceof Array?a.forEach((function(a){e.table.deleteCacheId(t,a)})):e.table.deleteCacheId(t,a)},t.updateCacheDataForList=function(e,t,a,r,o){var l=r.sucessVOs;if(null!=l&&0!=l.length){var n=[];if(null==o){var i={};e.table.getCheckedRows(t).forEach((function(e){var t=e.data.values[a].value;i[t]=e.index})),l[t].rows.forEach((function(e,t){var r=e.values[a].value,o={index:i[r],data:{values:e.values}};n.push(o)}))}else{var s={index:o,data:{values:l[t].rows[0].values}};n.push(s)}e.table.updateDataByIndexs(t,n)}},t.rewriteTransferSrcBids=function(e,t,a){if(a){var r=[];a.forEach((function(e){r.push(e.values[t].value)})),e.transferTable.setSavedTransferTableDataPk(r)}},t.clearTransferCache=function(e,t){e.transferTable.deleteCache(t)}},17:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.updateExtBillDataForCompareByPk=function(e,t,a,o){var l=a.headAreaId,n=a.bodyIdAndPkMap,i=a.baseBack;return e.form.setAllFormValue(r({},l,t.head[l])),n.forEach((function(a,r){var l=t.bodys[a];if(l){var n=void 0;if(i&&"saledaily_exec"==a||"validate"==o){var s=e.cardTable.getVisibleRows(a),A=new Map;s.forEach((function(e){var t=e.values[r].value;A.set(t,e.rowid)})),l.rows.forEach((function(e){if("{}"!=JSON.stringify(e.values)||i){var t=e.rowid,a=A.get(t);e.rowid=a}})),n=e.cardTable.updateDiffDataByRowId(a,l,!0,!0,!1)}else n=e.cardTable.updateDataByRowId(a,l,!0);t.bodys[a]=n}})),t},t.updateExtBillDataForCompare=function(e,t,a){var o=a.headAreaId,l=a.bodyIdAndPkMap;return e.form.setAllFormValue(r({},o,t.head[o])),l.forEach((function(a,r){var o=t.bodys[a];if(o){var l=e.cardTable.setTableData(a,o);t.bodys[a]=l}})),t}},3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CARDTABLEAREAIDS=t.FIELDS=t.SALEDAILY_URL=t.BILL_STATUS=t.CARD_HEAD_BUTTONS=t.CARD_BODY_INNER_BUTTONS=t.CARD_BODY_BUTTONS=t.SALEDAILY_CONST=void 0;var r=a(67);t.SALEDAILY_CONST=r.SALEDAILY_CONST,t.CARD_BODY_BUTTONS=r.CARD_BODY_BUTTONS,t.CARD_BODY_INNER_BUTTONS=r.CARD_BODY_INNER_BUTTONS,t.CARD_HEAD_BUTTONS=r.CARD_HEAD_BUTTONS,t.BILL_STATUS=r.BILL_STATUS,t.SALEDAILY_URL=r.SALEDAILY_URL,t.FIELDS=r.FIELDS,t.CARDTABLEAREAIDS=r.CARDTABLEAREAIDS},34:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(this.props.getUrlParam("status")!=r.SALEDAILY_CONST.STATUS_BROWSE){var t=this.props.cardTable.getCheckedRows(e),a=(this.props.form.getFormItemsValue(r.SALEDAILY_CONST.FORMID,"pk_payterm")||{}).value,o=void 0;e?e==r.SALEDAILY_CONST.CARDTABLE_TERM?o=["Term_DeleteLine","Term_CopyLine"]:e==r.SALEDAILY_CONST.CARDTABLE_PAYTERM&&a?o=["Payterm_DeleteLine","Payterm_CopyLine"]:e==r.SALEDAILY_CONST.CARDTABLE_MEMORA?o=["Memora_DeleteLine","Memora_CopyLine"]:e==r.SALEDAILY_CONST.CARDTABLE_EXP?o=["Exp_DeleteLine","Exp_CopyLine"]:e==r.SALEDAILY_CONST.CARDTABLEID&&(o=["DeleteLine","CopyLine"]):o=["DeleteLine","CopyLine","Exp_DeleteLine","Exp_CopyLine","Term_DeleteLine","Term_CopyLine","Payterm_DeleteLine","Payterm_CopyLine","Memora_DeleteLine","Memora_CopyLine"],null!=t&&t.length>0?this.props.button.setButtonDisabled(o,!1):this.props.button.setButtonDisabled(o,!0);var l=(this.props.form.getFormItemsValue(r.SALEDAILY_CONST.FORMID,"pk_org_v")||{}).value;this.props.button.setButtonDisabled(["AddLine","Term_AddLine","Exp_AddLine","Payterm_AddLine","Memora_AddLine"],!l)}this.props.getUrlParam("status")!=r.SALEDAILY_CONST.STATUS_BROWSE&&((this.props.form.getFormItemsValue(r.SALEDAILY_CONST.FORMID,"pk_payterm")||{}).value&&this.props.getUrlParam("status")!=r.SALEDAILY_CONST.STATUS_MODIFY?this.props.button.setButtonVisible("Payterm_InsertLine",!0):this.props.button.setButtonVisible("Payterm_InsertLine",!1))};var r=a(3)},340:function(e,t,a){e.exports=a(341)},341:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cardPageUtil=void 0;var r,o=a(80),l=(r=o)&&r.__esModule?r:{default:r};t.cardPageUtil=l.default},5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearTransferCache=t.rewriteTransferSrcBids=t.updateCacheDataForList=t.deleteCacheDataForList=t.getNextId=t.getCurrentLastId=t.getDefData=t.setDefData=t.hasListCache=t.addCacheData=t.getCacheDataByPk=t.deleteCacheData=t.updateCacheData=t.changeUrlParam=void 0;var r=a(13);t.changeUrlParam=r.changeUrlParam,t.updateCacheData=r.updateCacheData,t.deleteCacheData=r.deleteCacheData,t.getCacheDataByPk=r.getCacheDataByPk,t.addCacheData=r.addCacheData,t.hasListCache=r.hasListCache,t.setDefData=r.setDefData,t.getDefData=r.getDefData,t.getCurrentLastId=r.getCurrentLastId,t.getNextId=r.getNextId,t.deleteCacheDataForList=r.deleteCacheDataForList,t.updateCacheDataForList=r.updateCacheDataForList,t.rewriteTransferSrcBids=r.rewriteTransferSrcBids,t.clearTransferCache=r.clearTransferCache},67:function(e,t,a){"use strict";var r;function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l={FORMID:"head",CARDTABLEID:"saledaily_base",CARDTABLE_TERM:"saledaily_term",CARDTABLE_EXP:"saledaily_exp",CARDTABLE_MEMORA:"saledaily_memora",CARDTABLE_CHANGE:"saledaily_change",CARDTABLE_EXEC:"saledaily_exec",CARDTABLE_PAYTERM:"saledaily_payterm",CARDPAGEID:"400600200_card",LISTPAGEID:"400600200_list",HISPAGECODE:"400600200_history",SEARCHID:"400600200",MODULEID:"4006",LISTTABLEID:"ct_saledaily",LISTHEADBUTTONAREA:"list_head",LISTINNERBUTTONAREA:"list_inner",CARDHEADBUTTONAREA:"card_head",CARDBODYBUTTONAREA:"card_body",CARDBODYTERMBUTTONAREA:"card_body_term",CARDBODYEXPBUTTONAREA:"card_body_exp",CARDBODYMEMORABUTTONAREA:"card_body_memora",CARDBODYPAYTERMBUTTONAREA:"card_body_payterm",CARDBODYINNERBUTTONAREA:"card_body_inner",CARDBODYMEMORAINNERBUTTONAREA:"card_memora_inner",CARDBODYTERMINNERBUTTONAREA:"card_term_inner",CARDBODYPAYTERMINNERBUTTONAREA:"card_payterm_inner",CARDBODYEXPINNERBUTTONAREA:"card_exp_inner",CARD_BODY_EDIT_BUTTONS:["Spread","DeleteLine","CopyLine","ResetRowNo"],CARD_BODY_PASTE_BUTTONS:["PasteLineToTail","CanelCopy"],STATUS_BROWSE:"browse",STATUS_EDIT:"edit",STATUS_MODIFY:"modify",STATUS_ADD:"add",DATA_SOURCE:"ct.ct.saledaily.saledailycache",extendAttribute:"extendAttribute",transTypeCacheKey:"transTypeCacheKey"},n=[l.CARDTABLEID,l.CARDTABLE_TERM,l.CARDTABLE_EXP,l.CARDTABLE_MEMORA,l.CARDTABLE_CHANGE,l.CARDTABLE_EXEC,l.CARDTABLE_PAYTERM],i=(o(r={pk_ct_sale:"pk_ct_sale",fstatusflag:"fstatusflag",version:"version",vchangecode:"vchangecode",pk_org_v:"pk_org_v",controltype:"controltype",pk_org:"pk_org",ctrantypeid:"ctrantypeid",vbillcode:"vbillcode",blatest:"blatest"},"fstatusflag","fstatusflag"),o(r,"vtrantypecode","vtrantypecode"),o(r,"marbasclassbound","marbasclassbound"),o(r,"pk_marbasclass","pk_ct_sale_b.pk_marbasclass"),r);t.SALEDAILY_CONST=l,t.CARD_BODY_BUTTONS={ALL:["AddLine","ResetRowNo","CopyLine","CancelCopy","PasteToTail","DeleteLine","Term_AddLine","Term_CopyLine","Term_DeleteLine","Term_PasteToTail","Term_ResetRowNo","Term_CancelCopy","Exp_AddLine","Exp_CopyLine","Exp_CancelCopy","Exp_DeleteLine","Exp_PasteToTail","Exp_ResetRowNo","Memora_AddLine","Memora_CopyLine","Memora_CancelCopy","Memora_DeleteLine","Memora_PasteToTail","Memora_ResetRowNo","Payterm_AddLine","Payterm_CopyLine","Payterm_CancelCopy","Payterm_DeleteLine","Payterm_PasteToTail","Payterm_ResetRowNo"],BROWSE:[],EDIT:["DeleteLine","CopyLine","ResetRowNo","AddLine"],EDIT_COPYING:["PasteToTail","CancelCopy"],TERM_EDIT:["Term_DeleteLine","Term_CopyLine","Term_AddLine"],TERM_EDIT_COPYING:["Term_PasteToTail","Term_CancelCopy"],MEMORA_EDIT:["Memora_DeleteLine","Memora_CopyLine","Memora_AddLine"],MEMORA_EDIT_COPYING:["Memora_PasteToTail","Memora_CancelCopy"],EXP_EDIT:["Exp_DeleteLine","Exp_CopyLine","Exp_AddLine"],EXP_EDIT_COPYING:["Exp_PasteToTail","Exp_CancelCopy"],PAYTERM_EDIT:["Payterm_DeleteLine","Payterm_CopyLine","Payterm_AddLine"],PAYTERM_EDIT_COPYING:["Payterm_PasteToTail","Payterm_CancelCopy"]},t.CARD_BODY_INNER_BUTTONS={ALL:["CloseOut","OpenOut","CheckBill","PriceChange","Spread","PasteLine"],BROWSE:["Spread"]},t.CARD_HEAD_BUTTONS={ALL:["Copy","Cancel","CancelValidate","End","ModiDelete","Output","Save","SaveCommit","Receive","Excute","File","Print","Validate","Freeze","UnFreeze","CTUnEnd","ReceivePlan","Ref4310","Edit","Delete","Commit","UnCommit","Modify","StructuredFile","ModifyHistory","ApproveInfo","ReceiveStartControl","Add","BillLinkQuery","QueryAboutBusiness","Refresh","QuitTransfer","ImageScan","ImageView","ReSend"],EDIT:["Save","Cancel","SaveCommit"],EDIT_APPROVING:["Save","Cancel"],EDIT_TRANSFER:["Save","Cancel","SaveCommit","QuitTransfer"],EDIT_RECEIVE:["Save","Cancel"],BROWSE_FREE:["Copy","Output","Excute","File","Print","Ref4310","Edit","Delete","Commit","StructuredFile","QueryAboutBusiness","ApproveInfo","Add","BillLinkQuery","Refresh","ImageScan","ImageView"],BROWSE_FREE_VERSIONED:["Copy","ModiDelete","Output","Excute","File","Print","Ref4310","Edit","Commit","StructuredFile","QueryAboutBusiness","ModifyHistory","Modify","ApproveInfo","Add","BillLinkQuery","Refresh","ImageScan","ImageView"],BROWSE_VALIDATE:["Add","Ref4310","Copy","CancelValidate","Freeze","End","Modify","StructuredFile","File","Receive","BillLinkQuery","QueryAboutBusiness","Print","Output","ApproveInfo","Refresh","ImageScan","ImageView","ReSend"],BROWSE_APPROVING:["Add","UnCommit","Copy","Ref4310","StructuredFile","File","ModifyHistory","Print","Output","QueryAboutBusiness","ApproveInfo","Refresh","ImageScan","ImageView"],BROWSE_APPROVED:["Add","UnCommit","Copy","Ref4310","Validate","StructuredFile","File","Print","Output","QueryAboutBusiness","ApproveInfo","Refresh","ImageScan","ImageView"],BROWSE_APPROVED_VERSIONED:["Add","UnCommit","Copy","Ref4310","Validate","StructuredFile","File","ModifyHistory","Print","Output","QueryAboutBusiness","ApproveInfo","Refresh","ImageScan","ImageView"],BROWSE_END:["Add","CTUnEnd","Copy","Ref4310","StructuredFile","File","ModifyHistory","Print","Output","QueryAboutBusiness","ReceivePlan","ApproveInfo","Refresh"],BROWSE_FREEZE:["Add","UnFreeze","Copy","Ref4310","StructuredFile","File","Print","Output","QueryAboutBusiness","ReceivePlan","ApproveInfo","Refresh"],BROWSE_FREEZE_VERSIONED:["Add","UnFreeze","Copy","Ref4310","StructuredFile","File","ModifyHistory","Print","Output","QueryAboutBusiness","ReceivePlan","ApproveInfo","Refresh"],BROWSE_NOPASS:["Add","Edit","Copy","Ref4310","StructuredFile","File","Print","Output","QueryAboutBusiness","ApproveInfo","Refresh"],BROWSE_NOPASS_VERSIONED:["Add","Copy","Ref4310","Modify","ModiDelete","StructuredFile","File","ModifyHistory","Print","Output","QueryAboutBusiness","ApproveInfo","Refresh","ImageScan","ImageView"],BROWSE_EMPTY:["Add","Ref4310"],BROWSE_APPROVECENTER_APPROVING:["Edit","QueryAboutBusiness","CreditQuery","FileManage","Print","Output","SplitPrint"]},t.BILL_STATUS={I_FREE:"1",I_AUDITING:"7",I_AUDIT:"2",I_CLOSED:"4",I_NOPASS:"8"},t.SALEDAILY_URL={CARD_URL:"/ct/ct/saledaily/card/index.html",LIST_URL:"/ct/ct/saledaily/list/index.html",LIST_QUERY_URL:"/nccloud/ct/saledaily/listquery.do",CARD_QUERY_URL:"/nccloud/ct/saledaily/cardquery.do",CARD_EDIT_URL:"/nccloud/ct/saledaily/cardedit.do",CARD_DELETE_URL:"/nccloud/ct/saledaily/carddelete.do",CARD_MODIFY_URL:"/nccloud/ct/saledaily/cardmodify.do",CARD_MODIDELETE_URL:"/nccloud/ct/saledaily/cardmodidelete.do",CARD_SAVE_URL:"/nccloud/ct/saledaily/cardsave.do",CARD_MODIFYSAVE_URL:"/nccloud/ct/saledaily/cardmodifysave.do",CARD_COMMIT_URL:"/nccloud/ct/saledaily/cardcommit.do",CARD_VALIDATE_URL:"/nccloud/ct/saledaily/cardvalidate.do",CARD_UNVALIDATE_URL:"/nccloud/ct/saledaily/cardunvalidate.do",CARD_RESEND_URL:"/nccloud/ct/purdaily/resale.do",CARD_UNCOMMIT_URL:"/nccloud/ct/saledaily/carduncommit.do",CARD_END_URL:"/nccloud/ct/saledaily/cardend.do",CARD_UNEND_URL:"/nccloud/ct/saledaily/cardunend.do",CARD_FREEZE_URL:"/nccloud/ct/saledaily/cardfreeze.do",CARD_UNFREEZE_URL:"/nccloud/ct/saledaily/cardunfreeze.do",CARD_COPY_URL:"/nccloud/ct/saledaily/cardcopy.do",CARD_ADDLINE_URL:"/nccloud/ct/saledaily/bodyaddline.do",LIST_DELETE_URL:"/nccloud/ct/saledaily/listdelete.do",LIST_COMMIT_URL:"/nccloud/ct/saledaily/listcommit.do",LIST_UNCOMMIT_URL:"/nccloud/ct/saledaily/listuncommit.do",LIST_EDIT_URL:"/nccloud/ct/saledaily/listedit.do",LIST_END_URL:"/nccloud/ct/saledaily/listend.do",LIST_UNEND_URL:"/nccloud/ct/saledaily/listunend.do",LIST_FREEZE_URL:"/nccloud/ct/saledaily/listfreeze.do",LIST_UNFREEZE_URL:"/nccloud/ct/saledaily/listunfreeze.do",LIST_VALIDATE_URL:"/nccloud/ct/saledaily/listvalidate.do",LIST_UNVALIDATE_URL:"/nccloud/ct/saledaily/listunvalidate.do",LIST_MODIDELETE_URL:"/nccloud/ct/saledaily/listmodidelete.do",LIST_GATHERMNY_URL:"/nccloud/ct/saledaily/listgathermny.do",LIST_QUERYBYPKS_URL:"/nccloud/ct/saledaily/listquerybypks.do",CARD_HEAD_BEFORE_URL:"/nccloud/ct/saledaily/headbefore.do",CARD_BODY_BEFORE_URL:"/nccloud/ct/saledaily/bodybefore.do",CARD_HEAD_AFTER_URL:"/nccloud/ct/saledaily/headafter.do",CARD_BODY_AFTER_URL:"/nccloud/ct/saledaily/bodyafter.do",PRINT_URL:"/nccloud/ct/saledaily/print.do",printdatapermission:"/nccloud/ct/saledaily/checkPrintDataPermission.do",TRANSFER4310_URL:"/nccloud/ct/saledaily/tranfer4310.do",RECEIVE_URL:"/nccloud/ct/saledaily/receive.do",MODIFYHISTORY_URL:"/nccloud/ct/saledaily/modifyhistory.do",queryTranstype:"/nccloud/ct/saledaily/queryTranstype.do",queryTranstypeBypk:"/nccloud/ct/saledaily/queryTranstypeBypk.do"},t.FIELDS=i,t.CARDTABLEAREAIDS=n},68:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(a,o){var l=t.key,n=t.areahid,i=t.areabid,s=t.index,A=t.cmaterialid,d=e.form.getFormItemsValue(n,"pk_org");d||a(!1);var _=e.cardTable.getValByKeyAndIndex(i,s,A);if(_&&_.value){var c={key:l,params:{cmaterialvid:_.value,pk_org:d.value,key:l}};(0,r.ajax)({url:"/nccloud/ct/saledaily/vfreebefore.do",data:c,success:function(e){if(e.data){var t=e.data.isedit;t?a(t):e.data.message&&(0,r.toast)({color:"warning",content:e.data.message}),a(!1)}},error:function(e){(0,r.toast)({color:"warning",content:e.message}),a(!1)}})}else a(!1)}))};var r=a(0)},69:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getUrlParam("status");null==t&&(t=e.form.getFormStatus(o.SALEDAILY_CONST.FORMID)),null==t&&(t=o.SALEDAILY_CONST.STATUS_BROWSE),i.call(this,e,t);var a=t===o.SALEDAILY_CONST.STATUS_BROWSE;s.call(this,e,t,a),d.call(this,e,a),_.call(this,e,a)};var r,o=a(3),l=a(34),n=(r=l)&&r.__esModule?r:{default:r};a(9);function i(e,t){var a=t,r=null;r=t==o.SALEDAILY_CONST.STATUS_BROWSE?o.SALEDAILY_CONST.STATUS_BROWSE:o.SALEDAILY_CONST.STATUS_EDIT,t==o.SALEDAILY_CONST.STATUS_MODIFY&&(a=o.SALEDAILY_CONST.STATUS_EDIT),e.form.setFormStatus(o.SALEDAILY_CONST.FORMID,a),e.cardTable.setStatus(o.SALEDAILY_CONST.CARDTABLEID,r),e.cardTable.setStatus(o.SALEDAILY_CONST.CARDTABLE_CHANGE,r),e.cardTable.setStatus(o.SALEDAILY_CONST.CARDTABLE_EXEC,r),e.cardTable.setStatus(o.SALEDAILY_CONST.CARDTABLE_EXP,r),e.cardTable.setStatus(o.SALEDAILY_CONST.CARDTABLE_MEMORA,r),e.cardTable.setStatus(o.SALEDAILY_CONST.CARDTABLE_PAYTERM,r),e.cardTable.setStatus(o.SALEDAILY_CONST.CARDTABLE_TERM,r)}function s(e,t,a){if(a){e.button.setButtonVisible(o.CARD_HEAD_BUTTONS.ALL,!1);var r=A.call(this,e),l=e.getUrlParam("scene");l&&"approvesce"==l&&r&&r.indexOf("ApproveInfo")>-1&&(r=r.filter((function(e){return"ApproveInfo"!=e}))),e.button.setButtonVisible(r,!0),"ref4310"==this.props.getUrlParam("type")?(e.button.setButtonVisible("QuitTransfer",!0),e.button.setButtonVisible(["Add","Ref4310","Copy"],!1)):(e.button.setButtonVisible("QuitTransfer",!1),e.button.setButtonVisible(["Add","Ref4310","Copy"],!0));var i=(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"version")||{}).value;parseInt(i)>1?(e.button.setButtonVisible("Edit",!1),e.button.setButtonVisible("ModifyHistory",!0)):e.button.setButtonVisible("ModifyHistory",!1)}else e.button.setButtonVisible(o.CARD_HEAD_BUTTONS.ALL,!1),e.button.setButtonVisible(function(e){var t=e.getUrlParam("type");if("ref4310"==t)return o.CARD_HEAD_BUTTONS.EDIT_TRANSFER;if("receive"==t)return o.CARD_HEAD_BUTTONS.EDIT_RECEIVE;var a=e.getUrlParam("scene");if(a&&("approvesce"==a||"zycl"==a))return o.CARD_HEAD_BUTTONS.EDIT_APPROVING;return o.CARD_HEAD_BUTTONS.EDIT}(e),!0);if(o.SALEDAILY_CONST.STATUS_EDIT!=e.getUrlParam("status")&&"ref4310"!=e.getUrlParam("type")||e.form.setFormItemsDisabled(o.SALEDAILY_CONST.FORMID,{pk_org_v:!0}),e.button.setButtonVisible(o.CARD_BODY_BUTTONS.ALL,!1),!a&&"receive"!=this.props.getUrlParam("type")){var s=!!this.state.copyRowDatas;if(s?e.button.setButtonVisible(o.CARD_BODY_BUTTONS.EDIT_COPYING,!0):e.button.setButtonVisible(o.CARD_BODY_BUTTONS.EDIT,!0),(s=!!this.state.termCopyRowDatas)?e.button.setButtonVisible(o.CARD_BODY_BUTTONS.TERM_EDIT_COPYING,!0):e.button.setButtonVisible(o.CARD_BODY_BUTTONS.TERM_EDIT,!0),s=!!this.state.paytermCopyRowDatas)e.button.setButtonVisible(o.CARD_BODY_BUTTONS.PAYTERM_EDIT_COPYING,!0);else(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"pk_payterm")||{}).value&&this.props.getUrlParam("status")!=o.SALEDAILY_CONST.STATUS_MODIFY?e.button.setButtonVisible(o.CARD_BODY_BUTTONS.PAYTERM_EDIT,!0):e.button.setButtonVisible(o.CARD_BODY_BUTTONS.PAYTERM_EDIT,!1);(s=!!this.state.expCopyRowDatas)?e.button.setButtonVisible(o.CARD_BODY_BUTTONS.EXP_EDIT_COPYING,!0):e.button.setButtonVisible(o.CARD_BODY_BUTTONS.EXP_EDIT,!0),(s=!!this.state.memoraCopyRowDatas)?e.button.setButtonVisible(o.CARD_BODY_BUTTONS.MEMORA_EDIT_COPYING,!0):e.button.setButtonVisible(o.CARD_BODY_BUTTONS.MEMORA_EDIT,!0)}"receive"!=this.props.getUrlParam("type")&&n.default.call(this)}function A(e){var t=(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"fstatusflag")||{}).value,a=(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"version")||{}).value,r=((e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"ctrantypeid")||{}).value,(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"pk_payterm")||{}).value);switch(t){case null:case void 0:return o.CARD_HEAD_BUTTONS.BROWSE_EMPTY;case"0":return 1==a?o.CARD_HEAD_BUTTONS.BROWSE_FREE:o.CARD_HEAD_BUTTONS.BROWSE_FREE_VERSIONED;case"1":var l=JSON.parse(JSON.stringify(o.CARD_HEAD_BUTTONS.BROWSE_VALIDATE));return this.state.showPayTerm&&r&&l.push("ReceiveStartControl"),this.state.showPayTerm||l.push("ReceivePlan"),1!=a&&l.push("ModifyHistory"),l;case"2":var n=JSON.parse(JSON.stringify(o.CARD_HEAD_BUTTONS.BROWSE_APPROVING)),i=e.getUrlParam("scene");return!i||"approvesce"!=i&&"zycl"!=i||n.push("Edit"),n;case"3":return 1==a?o.CARD_HEAD_BUTTONS.BROWSE_APPROVED:o.CARD_HEAD_BUTTONS.BROWSE_APPROVED_VERSIONED;case"4":return 1==a?o.CARD_HEAD_BUTTONS.BROWSE_NOPASS:o.CARD_HEAD_BUTTONS.BROWSE_NOPASS_VERSIONED;case"5":return 1==a?o.CARD_HEAD_BUTTONS.BROWSE_FREEZE:o.CARD_HEAD_BUTTONS.BROWSE_FREEZE_VERSIONED;case"6":return o.CARD_HEAD_BUTTONS.BROWSE_END;default:return o.CARD_HEAD_BUTTONS.BROWSE_EMPTY}}function d(e,t){var a=!0,r=e.getUrlParam("scene");t&&"zycl"!=r&&"zycx"!=r&&"approvesce"!=r||(a=!1),"ref4310"==e.getUrlParam("type")&&(a=!0),e.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:a,showBillCode:!0,billCode:(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"vbillcode")||{}).value})}function _(e,t){var a=t,r=e.getUrlParam("scene"),l=(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,"fstatusflag")||{}).value,n=this.props.getUrlParam("type");l?"approvesce"==r||"zycl"==r?(a=!1,e.form.setFormItemsDisabled(o.SALEDAILY_CONST.FORMID,{ctrantypeid:!0})):"ref4310"==n&&(a=!1):a=!1,e.cardPagination.setCardPaginationVisible("cardPaginationBtn",a)}},77:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rowCopyPasteUtils=void 0;var r=a(0),o=a(3);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t,a,o,n){var A=s(t);!function(e,t,a,o,l){var n=(0,r.deepClone)(a);if(n)if(n instanceof Array)for(var s=n.length,A=0;A<s;A++){var d=n[A].data;i(d,l),e.cardTable.insertRowsAfterIndex(t,d,o+A)}else i(n,l),e.cardTable.insertRowsAfterIndex(t,n,o)}(e,t,this.state[A],a-1,o),this.setState(l({},A,null),n),e.cardTable.selectAllRows(t,!1),e.cardTable.setAllCheckboxAble(t,!0)}function i(e,t){t&&t instanceof Array&&(e instanceof Array?e.forEach((function(e){t.forEach((function(t){e.values[t]={value:null,display:null,scale:-1}}))})):t.forEach((function(t){e.values[t]={value:null,display:null,scale:-1}})))}function s(e){var t=void 0;return e==o.SALEDAILY_CONST.CARDTABLEID?t="copyRowDatas":e==o.SALEDAILY_CONST.CARDTABLE_EXP?t="expCopyRowDatas":e==o.SALEDAILY_CONST.CARDTABLE_MEMORA?t="memoraCopyRowDatas":e==o.SALEDAILY_CONST.CARDTABLE_TERM?t="termCopyRowDatas":e==o.SALEDAILY_CONST.CARDTABLE_PAYTERM&&(t="paytermCopyRowDatas"),t}var A={copyRow:function(e,t,a,r){var o=s(t);return this.setState(l({},o,a),r),e.cardTable.setAllCheckboxAble(t,!1),a},copyRows:function(e,t,a){var r=s(t),o=e.cardTable.getCheckedRows(t);if(o&&o.length>0)return this.setState(l({},r,o),a),e.cardTable.setAllCheckboxAble(t,!1),o},pasteRowsToIndex:n,pasteRowsToTail:function(e,t,a,r){var o=e.cardTable.getNumberOfRows(t);n.call(this,e,t,o,a,r)},cancel:function(e,t,a){var r=s(t);this.setState(l({},r,null),a),e.cardTable.selectAllRows(t,!1),e.cardTable.setAllCheckboxAble(t,!0)},getEditButtonsByTableId:function(e){return e==o.SALEDAILY_CONST.CARDTABLEID&&o.CARD_BODY_BUTTONS.EDIT||e==o.SALEDAILY_CONST.CARDTABLE_EXP&&o.CARD_BODY_BUTTONS.EXP_EDIT||e==o.SALEDAILY_CONST.CARDTABLE_MEMORA&&o.CARD_BODY_BUTTONS.MEMORA_EDIT||e==o.SALEDAILY_CONST.CARDTABLE_TERM&&o.CARD_BODY_BUTTONS.TERM_EDIT||e==o.SALEDAILY_CONST.CARDTABLE_PAYTERM&&o.CARD_BODY_BUTTONS.PAYTERM_EDIT||o.CARD_BODY_BUTTONS.EDIT},getCopyingButtonsByTableId:function(e){return e==o.SALEDAILY_CONST.CARDTABLEID&&o.CARD_BODY_BUTTONS.EDIT_COPYING||e==o.SALEDAILY_CONST.CARDTABLE_EXP&&o.CARD_BODY_BUTTONS.EXP_EDIT_COPYING||e==o.SALEDAILY_CONST.CARDTABLE_MEMORA&&o.CARD_BODY_BUTTONS.MEMORA_EDIT_COPYING||e==o.SALEDAILY_CONST.CARDTABLE_TERM&&o.CARD_BODY_BUTTONS.TERM_EDIT_COPYING||e==o.SALEDAILY_CONST.CARDTABLE_PAYTERM&&o.CARD_BODY_BUTTONS.PAYTERM_EDIT_COPYING||o.CARD_BODY_BUTTONS.EDIT_COPYING},getCopyDataNameByTableId:s};t.rowCopyPasteUtils=A},78:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=void 0;var r=a(3);t.getConfig=function(){var e=new Map;return e.set("pk_ct_sale_b",r.SALEDAILY_CONST.CARDTABLEID),e.set("pk_ct_sale_term",r.SALEDAILY_CONST.CARDTABLE_TERM),e.set("pk_ct_sale_exec",r.SALEDAILY_CONST.CARDTABLE_EXEC),e.set("pk_ct_sale_exp",r.SALEDAILY_CONST.CARDTABLE_EXP),e.set("pk_ct_sale_memora",r.SALEDAILY_CONST.CARDTABLE_MEMORA),e.set("pk_ct_sale_change",r.SALEDAILY_CONST.CARDTABLE_CHANGE),e.set("pk_ct_sale_payterm",r.SALEDAILY_CONST.CARDTABLE_PAYTERM),{headAreaId:r.SALEDAILY_CONST.FORMID,bodyIdAndPkMap:e,baseBack:!0}}},79:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryZ3TransType=void 0;var r=a(0),o=a(3);t.queryZ3TransType=function(e,t){var a=this,l=this.z3trantypevo;return new Promise((function(n,i){if("{}"!=JSON.stringify(l||{})&&t)n(l);else{var s={pk:e};(0,r.ajax)({url:o.SALEDAILY_URL.queryTranstypeBypk,data:s,success:function(e){e.success&&e.data&&(n(e.data),a.z3trantypevo=e.data)}})}}))}},80:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCardTable=t.addRowForModify=t.setCardCompareData=t.setCardPage=t.clearCardData=t.cardBodyAreas=void 0;var r,o=a(3),l=a(5),n=a(69),i=(r=n)&&r.__esModule?r:{default:r},s=a(17);function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=[o.SALEDAILY_CONST.CARDTABLEID,o.SALEDAILY_CONST.CARDTABLE_CHANGE,o.SALEDAILY_CONST.CARDTABLE_EXEC,o.SALEDAILY_CONST.CARDTABLE_EXP,o.SALEDAILY_CONST.CARDTABLE_MEMORA,o.SALEDAILY_CONST.CARDTABLE_PAYTERM,o.SALEDAILY_CONST.CARDTABLE_TERM];t.cardBodyAreas=d,t.clearCardData=function(e){e.form.EmptyAllFormValue(o.SALEDAILY_CONST.FORMID),d.forEach((function(t){e.cardTable.setTableData(t,{rows:[]})})),e.initMetaByPkorg(o.FIELDS.pk_org_v)},t.setCardPage=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.beforeUpdatePage();var r=null;t.head&&t.head.head&&(e.form.setAllFormValue(A({},o.SALEDAILY_CONST.FORMID,t.head.head)),r=t.head.head.rows[0].values[o.FIELDS.pk_ct_sale].value),t.bodys&&d.forEach((function(r){t.bodys[r]?(a?t.bodys[r]=e.cardTable.updateDataByRowId(r,t.bodys[r],!0):e.cardTable.setTableData(r,t.bodys[r],null,!0,!0),e.cardTable.selectAllRows(r,!1)):e.cardTable.setTableData(r,{rows:[]})})),(0,l.updateCacheData)(e,o.FIELDS.pk_ct_sale,r,t,o.SALEDAILY_CONST.FORMID,DATASOURCECACHE.dataSourceCacheKey),i.default.call(this,e),e.updatePage(o.SALEDAILY_CONST.FORMID,d)},t.setCardCompareData=function(e,t,a){e.beforeUpdatePage(),(0,s.updateExtBillDataForCompareByPk)(e,t,a),i.default.call(this,e),(0,l.updateCacheData)(e,o.FIELDS.pk_ct_sale,e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,o.FIELDS.pk_ct_sale).value,t,o.SALEDAILY_CONST.FORMID,DATASOURCECACHE.dataSourceCacheKey),e.updatePage(o.SALEDAILY_CONST.FORMID,d)},t.addRowForModify=function(e){var t=e.getUrlParam("status"),a=e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,o.FIELDS.fstatusflag).value;if(t==UISTATUS.modify&&a==FSTATUSFLAG.validate){var r=parseInt(e.form.getFormItemsValue(o.SALEDAILY_CONST.FORMID,o.FIELDS.version).value)+1;e.form.setFormItemsValue(o.SALEDAILY_CONST.FORMID,A({},o.FIELDS.version,{value:r}));var l=e.cardTable.getNumberOfRows(o.SALEDAILY_CONST.CARDTABLE_CHANGE);e.cardTable.addRow(o.SALEDAILY_CONST.CARDTABLE_CHANGE,l,A({},o.FIELDS.vchangecode,{value:r}),!0)}},t.toggleCardTable=function(e){e.cardTable.toggleCardTable(o.SALEDAILY_CONST.CARDTABLEID,!0),e.cardTable.toggleCardTable([o.SALEDAILY_CONST.CARDTABLE_CHANGE,o.SALEDAILY_CONST.CARDTABLE_EXEC,o.SALEDAILY_CONST.CARDTABLE_EXP,o.SALEDAILY_CONST.CARDTABLE_MEMORA,o.SALEDAILY_CONST.CARDTABLE_TERM],!1)}},9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryZ3TransType=t.vfreeBeforeEvent=t.getConfig=t.rowCopyPasteUtils=void 0;var r,o=a(77),l=a(78),n=a(68),i=(r=n)&&r.__esModule?r:{default:r},s=a(79);t.rowCopyPasteUtils=o.rowCopyPasteUtils,t.getConfig=l.getConfig,t.vfreeBeforeEvent=i.default,t.queryZ3TransType=s.queryZ3TransType}})}));