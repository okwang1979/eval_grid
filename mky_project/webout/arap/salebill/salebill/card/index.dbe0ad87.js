!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("nc-lightapp-front"),require("react"),require("sscrp/rppub/components/image/index")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","sscrp/rppub/components/image/index"],r):"object"==typeof exports?exports["arap/salebill/salebill/card/index"]=r(require("nc-lightapp-front"),require("react"),require("sscrp/rppub/components/image/index")):e["arap/salebill/salebill/card/index"]=r(e["nc-lightapp-front"],e.React,e["sscrp/rppub/components/image/index"])}(window,(function(e,r,t){return function(e){var r={};function t(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(a,o,function(r){return e[r]}.bind(null,o));return a},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="../../../../",t(t.s=519)}({1:function(r,t){r.exports=e},11:function(e,r){e.exports=function(e){var r="undefined"!=typeof window&&window.location;if(!r)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=r.protocol+"//"+r.host,a=t+r.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,r){var o,l=r.trim().replace(/^"(.*)"$/,(function(e,r){return r})).replace(/^'(.*)'$/,(function(e,r){return r}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(l)?e:(o=0===l.indexOf("//")?l:0===l.indexOf("/")?t+l:a+l.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},12:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.OperationColumn="180px"},16:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bodyBeforeEvent=void 0;var a=t(1),o=t(9);r.bodyBeforeEvent=function(e,r,t,l,n,i,s){var d=this;if(["money_bal","money_de","money_cr","notax_de","notax_cr","occupationmny","nosubtax","nosubtaxrate","local_money_bal","local_money_de","local_money_cr","local_notax_de","local_notax_cr","local_tax_de","local_tax_cr","groupbalance","groupdebit","groupcrebit","groupnotax_de","groupnotax_cre","groupagentreceivelocal","grouptax_de","grouptax_cre","globalbalance","globaldebit","globalcrebit","globalnotax_de","globalnotax_cre","globalagentreceivelocal","globaltax_de","globaltax_cre","price","taxprice","postprice","postpricenotax","local_price","local_taxprice","taxrate","taxtype","quantity_bal"].indexOf(t)>-1)return!0;"model"==s&&(r="bodys_edit");var u=!0,c=e.meta.getMeta(),p=i.values.pk_tradetype?i.values.pk_tradetype.value:null,f=e.form.getFormItemsValue(this.formId,"pk_billtype")?e.form.getFormItemsValue(this.formId,"pk_billtype").value:null,m={model:{areaType:"table",areacode:null,rows:[i]},pageid:this.pageId},b={model:e.form.getAllFormValue(this.formId),pageid:this.pageId},y={itemKey:"",isHead:!1,crossRuleConditionsVO:JSON.stringify(b),crossRuleTableConditionsVO:JSON.stringify(m),tradeType:p,DataPowerOperationCode:"",isDataPowerEnable:"Y",pk_org:"",busifuncode:"",AppCode:"",orgType:"",refnodename:"",accclass:"",pk_cust:"",pk_currtype:"",pkOrgs:"",parentbilltype:"",datestr:"",pk_accountingbook:"",dateStr:"",GridRefActionExt:"",TreeRefActionExt:"",supplier:"",customer:"",pretype:"",customSupplier:"",pk_psndoc:""};return c[r].items.map((function(n){n.isShowUnit=!1,n.isShowDisabledData=!1;var s=n.attrcode;if("refer"==n.itemtype&&(n.isMultiSelectedEnabled=!1,n.unitValueIsNeeded=!1),s==t)switch(s){case"objtype":if("objtype"==s){for(var c=-1,p=0;p<n.options.length;p++)if(""==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}if("objtype"==s&&"23E1"==f)if("0"==l.value)u=!1,e.cardTable.setEditableByIndex(r,c,"objtype",!1);else{for(c=-1,p=0;p<n.options.length;p++)if("0"==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}else if("objtype"==s&&"23E0"==f)if("1"==l.value)u=!1,e.cardTable.setEditableByIndex(r,c,"objtype",!1);else{for(c=-1,p=0;p<n.options.length;p++)if("1"==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}break;case"pk_org":n.queryCondition=function(r){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_org_v":n.queryCondition=function(r){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_fiorg":n.queryCondition=function(r){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_fiorg_v":n.queryCondition=function(r){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"sett_org":n.queryCondition=function(r){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"sett_org_v":n.queryCondition=function(r){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"scomment":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y};break;case"material":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.matcustcode=i.values.matcustcode?i.values.matcustcode.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"matcustcode":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.pk_customer=i.values.customer?i.values.customer.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"pk_payterm":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"supplier":case"customer":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"pk_deptid":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"pk_deptid_v":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"pk_psndoc":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"taxcodeid":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder",y.itemKey=t,y.taxcountryid=e.form.getFormItemsValue(d.formId,"taxcountryid")?e.form.getFormItemsValue(d.formId,"taxcountryid").value:null,y.buysellflag=i.values.buysellflag?i.values.buysellflag.value:null,y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_deptid":n.isShowUnit=!1,n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_deptid_v":n.isShowUnit=!1,n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_psndoc":n.isShowUnit=!1,n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"cashitem":case"pk_subjcode":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org?i.values.pk_org.value:null,y};break;case"payaccount":if("F0"==f||"F2"==f||"23E0"==f)"1"==(m=i.values.objtype).value?(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000147"]):"3"==m.value?(n.itemType="refer",n.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",n.refName=d.state.json["public-000148"]):(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000149"]);n.queryCondition=function(r){if("F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"23E1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value)return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.refnodename=d.state.json["public-000150"],y.pk_org=e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y;var o=i.values.objtype.value,l=i.values.supplier?i.values.supplier.value:null,n=i.values.customer?i.values.customer.value:null,s=i.values.pk_psndoc?i.values.pk_psndoc.value:(0,a.getBusinessInfo)().userId,u=null,c=null;return l&&"1"==o?(u=l,c=3):!n||"0"!=o&&"2"!=o?s&&(y.pk_psndoc=s):(u=n,c=1),"3"==o?(y.pk_psndoc=s,y.pk_cust=null,y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.accclass=c,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y.pk_org=e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,y.pk_cust=u,y};break;case"recaccount":var m;if("F1"==f||"F3"==f||"23E1"==f)"1"==(m=i.values.objtype).value||"2"==m.value?(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000147"]):"3"==m.value?(n.itemType="refer",n.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",n.refName=d.state.json["public-000148"]):(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000149"]);n.queryCondition=function(r){if("F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value)return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.refnodename=d.state.json["public-000150"],y.pk_org=e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y;var o=i.values.objtype.value,l=i.values.supplier?i.values.supplier.value:null,n=i.values.customer?i.values.customer.value:null,s=i.values.pk_psndoc?i.values.pk_psndoc.value:(0,a.getBusinessInfo)().userId,u=null,c=null;return!l||"1"!=o&&"2"!=o?n&&"0"==o?(u=n,c=1):s&&(y.pk_psndoc=s):(u=l,c=3),"3"==o?(y.pk_psndoc=s,y.pk_cust=null,y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.pk_cust=u,y.itemKey=t,y.DataPowerOperationCode="fi",y.accclass=c,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y};break;case"ordercubasdoc":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"freecust":var b=i.values.supplier?i.values.supplier.value:null,g=i.values.customer?i.values.customer.value:null;null==b&&null==g||(0,a.ajax)({url:"/nccloud/arap/ref/freecustcontrol.do",async:!1,data:{supplier:b,customer:g},success:function(e){e.success&&(u=e.data)}}),u&&(n.queryCondition=function(e){if(u)return y.GridRefActionExt="nccloud.web.arap.ref.before.FreeCustSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.customSupplier=null!=b?b:g,y.supplier=y.customSupplier,y.customer=y.customSupplier,y.crossRuleTableConditionsVO="",y});break;case"checkelement":var v=i.values.pk_pcorg?i.values.pk_pcorg.value:null;v||(u=!1),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=v,y};break;case"project_task":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.project=i.values.project?i.values.project.value:null,y};break;case"costcenter":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_pcorg?i.values.pk_pcorg.value:null,y};break;case"project":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"material_src":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.matcustcode=i.values.matcustcode?i.values.matcustcode.value:null,y};break;case"checktype":if(e.form.getFormItemsValue(d.formId,"isinit")?e.form.getFormItemsValue(d.formId,"isinit").value:null){u=!1;break}n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"checkno":u=!1;break;case"checkno_display":if(e.form.getFormItemsValue(d.formId,"isinit")?e.form.getFormItemsValue(d.formId,"isinit").value:null){u=!1;break}var _=i.values.checktype.value;if(!_){u=!1;break}var I=e.form.getFormItemsValue(d.formId,"billclass")?e.form.getFormItemsValue(d.formId,"billclass").value:null,h=(0,o.isChecknoRef)(_,i.values.pk_org.value);h&&"refer"!=n.itemtype?(n.itemtype="refer","fk"==I?n.refcode="fbm/refer/fbm/Bill4CmpPayGridRef/index.js":"sk"==I&&(n.refcode="fbm/refer/fbm/Bill4CmpReceiveGridRef/index.js"),(0,o.reWriteCheckno)(e,r),n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,y.fbmbilltype=i.values.checktype.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y}):h&&"refer"==n.itemtype?n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,y.fbmbilltype=i.values.checktype.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y}:(n.itemtype="input",n.refcode=null);break;case"cbs":(i.values.project?i.values.project.value:null)?(u=!0,n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_project=i.values.project.value,y.pk_org=i.values.pk_org.value,y}):u=!1;break;case"rate":case"grouprate":case"globalrate":(0,a.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",data:{pk_org:i.values.pk_org?i.values.pk_org.value:null,pk_currtype:i.values.pk_currtype?i.values.pk_currtype.value:null,ratekey:t},async:!1,success:function(t){t.success&&(u=t.data,setTimeout((function(){e.cardTable.setEditableByIndex(r,c,"rate",u)}),0))}});break;case"settlemoney":var k=i.values.settlecurr?i.values.settlecurr.value:null,w=i.values.pk_billtype?i.values.pk_billtype.value:null,T=i.values.top_billtype?i.values.top_billtype.value:null;u=!!(k&&w&&T),n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y};break;case"refuse_reason":var C=i.values.commpaytype?i.values.commpaytype.value:null;(0==C||1==C||2==C)&&(u=!1),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y};break;case"caltaxmny":var R=i.values.buysellflag?i.values.buysellflag.value:null;R&&(u=4==R||3==R),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y};break;case"so_deptid":n.isShowUnit=!1,n.unitCondition=function(){return{pkOrgs:i.values.so_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all","F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_deptid_v":n.isShowUnit=!1,n.unitCondition=function(){return{pkOrgs:i.values.so_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all",y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_psndoc":n.isShowUnit=!1,n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all","F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_balatype":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.pk_billtype=i.values.pk_billtype?i.values.pk_billtype.value:null,y};break;case"pu_org":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=t,y.pkOrgs=i.values.pk_org.value,y};break;case"pu_org_v":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"bankrollprojet":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):(y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"so_deptid":n.isShowUnit=!1,n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.pk_org=i.values.so_org?i.values.so_org.value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_deptid_v":n.isShowUnit=!1,n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.busifuncode="all",y.pk_org=i.values.so_org?i.values.so_org.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_org":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=t,y.pkOrgs=i.values.pk_org.value,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_org_v":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=t,y.pkOrgs=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"sendcountryid":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"rececountryid":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_pcorg":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"pk_pcorg_v":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"productline":case"pk_currtype":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"cashaccount":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"commpayer":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"facard":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"payman":n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_tradetypeid":n.refName=d.state.json["public-000151"],n.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.parentbilltype=e.form.getFormItemsValue(d.formId,"pk_billtype").value,y};break;case"so_ordertype":n.refName=d.state.json["public-000151"],n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.parentbilltype="30,32,38,4310,4331",y};break;case"subjcode":n.queryCondition=function(r){var o=null;return(0,a.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:i.values.pk_org.value},async:!1,success:function(e){e.success&&(o=e.data)}}),y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y.pk_accountingbook=o,y.dateStr=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value.substring(0,10):null,y.DataPowerOperationCode="fi",y};break;default:n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=t,y.pk_org=i.values.pk_org.value,y}}})),e.meta.setMeta(c),e.renderItem("table",r,"checkno",null),u}},184:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,o,l,n){var i=[];n?t.forEach((function(e){i.push({pk_bill:e.data.values[o].value,billType:e.data.values.pk_billtype.value})})):i=t;(0,a.ajax)({url:"/nccloud/arap/arappub/madebill.do",data:i,success:function(t){t.success&&(a.cacheTools.set(l+t.data.cachekey,t.data.pklist),r.openTo(t.data.url,{status:"edit",n:e.state.json["public-000233"],appcode:t.data.appcode,pagecode:t.data.pagecode,scene:l+t.data.cachekey}))}})};var a=t(1)},187:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.copyBill=r.listCopyBill=void 0;var a=t(1),o=t(188);function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var n=function(e,r,t){for(var l=new Map,n=0;n<o.headkey.length;n++)l.set(o.headkey[n],e.values[o.headkey[n]].value);var i=r[0].values.direction.value,s=new Map;if(1==i)for(var d=o.bodykey.concat(o.deBodykey),u=0;u<r.length;u++){for(var c=new Map,f=0;f<d.length;f++)c.set(d[f],r[u].values[d[f]]?r[u].values[d[f]].value:null);s.set(u,c)}if(-1==i)for(var m=o.bodykey.concat(o.crBodykey),b=0;b<r.length;b++){for(var y=new Map,g=0;g<m.length;g++)y.set(m[g],r[b].values[m[g]]?r[b].values[m[g]].value:null);s.set(b,y)}(0,a.ajax)({url:"/nccloud/arap/arappub/processImpMoney.do",async:!1,data:{BillClass:t,head:l,bodys:s},success:function(t){var a=t.data.parent;Object.keys(a).map((function(r){if(a[r]&&e.values[r]&&!e.values[r].display){var t=e.values[r].scale;e.values[r].value=t&&-1!=t?p(a[r],t):a[r]}}));for(var o=t.data.children[0],l=function(e){var t=o[e],a=r[e];Object.keys(t).map((function(e){if(t[e]&&a.values[e]&&!a.values[e].display){var r=a.values[e].scale;a.values[e].value=r&&-1!=r?p(t[e],r):t[e]}}))},n=0;n<o.length;n++)l(n)}})},i=function(e,r,t,a,l,n){var i=a.userId,s=a.userName,d=a.groupId,c=a.groupName,p=a.businessDate;Object.keys(r.values).map((function(e){-1!=o.parentItemKey.indexOf(e)&&(r.values[e].value=null,r.values[e].display=null)})),l==o.IBillFieldGet.YS||l==o.IBillFieldGet.SK||l==o.IBillFieldGet.ZF?(r.values.src_syscode.value=o.FromSystem.AR,r.values.src_syscode.display=e.state.json["public-000218"]):(r.values.src_syscode.value=o.FromSystem.AP,r.values.src_syscode.display=e.state.json["public-000219"]);var f=u(l);if(r.values[f].value=null,l!=o.IBillFieldGet.FK&&l!=o.IBillFieldGet.SK||(r.values.settletype.value=o.ArapBillVOConsts.m_intJSZXZF_NONE,r.values.settletype.display=e.state.json["public-000220"],r.values.settleflag.value=o.ArapBillVOConsts.m_intDJZzzt_Default,r.values.settleflag.display=e.state.json["public-000221"]),r.values.isreded.value=!1,r.values.isrefund.value="N",r.values.pk_group.value=d,r.values.pk_group.display=c,r.values.creator.value=i,r.values.creator.display=s,r.values.creationtime.value=p,r.values.billdate.value=p,r.values.busidate.value=p,r.values.billmaker.value=i,r.values.billmaker.display=s,t){var m=n.billdate;r.values.billdate.value=m,r.values.busidate.value=m,r.values.billstatus.value=o.billstatus.AUDIT,r.values.billstatus.display=e.state.json["public-000222"],r.values.effectdate.value=m,r.values.effectstatus.value=o.effectstatus.EXECUTED,r.values.effectstatus.display=e.state.json["public-000223"],r.values.effectuser.value=i,r.values.effectuser.display=s,r.values.approvestatus.value=o.approvestatus.PASSING,r.values.approvestatus.display=e.state.json["public-000222"],r.values.approver.value=i,r.values.approver.display=s,r.values.approvedate.value=m}else r.values.billstatus.display=e.state.json["public-000224"],r.values.billstatus.value=o.billstatus.SAVE,r.values.effectstatus.value=o.effectstatus.INVALID,r.values.effectstatus.display=e.state.json["public-000225"],r.values.approvestatus.value=o.approvestatus.NOSTATE,r.values.approvestatus.display=e.state.json["public-000226"];var b=n.pk_busitype,y=n.pk_busitypeName;r.values.pk_busitype.value=b,r.values.pk_busitype.display=y},s=function(e,r,t,a,l,n){for(var i=a.groupId,s=a.groupName,d=a.businessDate,f=function(e){var a=r[e];a.status="2",Object.keys(a.values).map((function(e){-1!=o.childrenItemKey.indexOf(e)&&(a.values[e].value=null,a.values[e].display=null)}));var f=c(l);a.values[f].value=o.INDEX_PK+a.values.rowno.value;var m=u(l);if(a.values[m].value=null,a.values.settlemoney.value=p(0,a.values.settlemoney.scale),a.values.settlecurr.value=null,a.values.settlecurr.display=null,a.values.rate.value=p(0,a.values.settlemoney.scale),a.values.grouprate.value=p(0,a.values.settlemoney.scale),a.values.globalrate.value=p(0,a.values.settlemoney.scale),t){var b=n.billdate;a.values.billdate.value=b,a.values.busidate.value=b}else a.values.billdate.value=d,a.values.busidate.value=d;a.values.pk_group.value=i,a.values.pk_group.display=s,l==o.IBillFieldGet.YS||l==o.IBillFieldGet.FK?(a.values.money_bal.value=a.values.money_de.value,a.values.occupationmny.value=a.values.money_de.value,a.values.local_money_bal.value=a.values.local_money_de.value):l!=o.IBillFieldGet.YF&&l!=o.IBillFieldGet.SK||(a.values.money_bal.value=a.values.money_cr.value,a.values.occupationmny.value=a.values.money_cr.value,a.values.local_money_bal.value=a.values.local_money_cr.value)},m=0;m<r.length;m++)f(m)},d=function(e,r,t,l){for(var n=0;n<r.length;n++){if(t==o.ArapConstant.ARAP_FK_BILLCLASS&&r[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_CUSTOMER&&l)return(0,a.toast)({color:"danger",content:e.state.json["public-000240"]}),!0;if(t==o.ArapConstant.ARAP_AP_BILLCLASS&&r[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_CUSTOMER&&l)return(0,a.toast)({color:"danger",content:e.state.json["public-000239"]}),!0;if(t==o.ArapConstant.ARAP_SK_BILLCLASS&&r[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_SUPPLIER&&l)return(0,a.toast)({color:"danger",content:e.state.json["public-000241"]}),!0}return!1},u=function(e){return e==o.IBillFieldGet.YS?"pk_recbill":e==o.IBillFieldGet.YF?"pk_payablebill":e==o.IBillFieldGet.FK?"pk_paybill":e==o.IBillFieldGet.SK?"pk_gatherbill":e==o.IBillFieldGet.ZF?"pk_estipayablebill":e==o.IBillFieldGet.ZS?"pk_estirecbill":void 0},c=function(e){return e==o.IBillFieldGet.YS?"pk_recitem":e==o.IBillFieldGet.YF?"pk_payableitem":e==o.IBillFieldGet.FK?"pk_payitem":e==o.IBillFieldGet.SK?"pk_gatheritem":e==o.IBillFieldGet.ZF?"pk_estipayableitem":e==o.IBillFieldGet.ZS?"pk_estirecitem":void 0},p=function(e,r){if(isNaN(Number(e))||!e)return null;var t=e.toString();if(r>0){var a=t.split(".")[0],o=t.split(".")[1];return o||(o=""),a+"."+(o=o.length<r?o.padEnd(r,"0"):o.substr(0,r))}return t};r.listCopyBill=function(e){(0,a.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:e.props.getUrlParam("id"),pageId:e.getPagecode(),billType:e.billType,type:1,tradeType:e.getPagecode()},success:function(r){e.props.beforeUpdatePage(),r.data&&(r.data.head&&e.props.form.setAllFormValue(l({},e.formId,r.data.head[e.formId])),r.data.body&&e.props.cardTable.setTableData(e.tableId,r.data.body[e.tableId])),e.state.buttonfalg=!0,e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.updatePage(e.formId,e.tableId),e.toggleShow()},error:function(r){e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setTableData(e.tableId,{rows:[]}),e.props.setUrlParam({status:"browse"}),e.props.cardTable.setStatus(e.tableId,"browse"),e.props.form.setFormStatus(e.formId,"browse"),e.toggleShow();var t=String(r),o=t.substring(6,t.length);(0,a.toast)({color:"danger",content:o})}})},r.copyBill=function(e,r){var t=e.props.createMasterChildData(r,e.formId,e.tableId),o=t.head[e.formId].rows[0],u=t.body[e.tableId].rows,c=o.values.billclass.value,p=o.values.isrefund.value;if(!d(e,u,c,p)){var f=(0,a.getBusinessInfo)(),m=o.values.isinit.value,b="";(0,a.ajax)({url:"/nccloud/arap/arappub/getBusitypeAndBilldate.do",async:!1,data:{isInit:m,pk_org:o.values.pk_org.value,pk_billtype:o.values.pk_billtype.value,pk_tradetype:o.values.pk_tradetype.value,creator:o.values.creator.value},success:function(e){b=e.data}}),e.props.beforeUpdatePage(),i(e,o,m,f,c,b),s(e,u,m,f,c,b),n(o,u,c),e.props.form.setAllFormValue(l({},e.formId,t.head[e.formId])),e.props.cardTable.setTableData(e.tableId,t.body[e.tableId]),e.props.setUrlParam({status:"add",type:"copy"}),e.state.buttonfalg=!0,e.props.resMetaAfterPkorgEdit(),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!1}),e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.updatePage(e.formId,e.tableId),e.toggleShow()}}},188:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ArapConstant={ARAP_POWER_CODE:"fi",ARAP_AR_BILLCLASS:"ys",ARAP_AP_BILLCLASS:"yf",ARAP_SK_BILLCLASS:"sk",ARAP_FK_BILLCLASS:"fk",ARAP_ZS_BILLCLASS:"zs",ARAP_ZF_BILLCLASS:"zf",ASSO_OBJ_CUSTOMER:"0",ASSO_OBJ_SUPPLIER:"1",ASSO_OBJ_DEPT:"2",ASSO_OBJ_BUSIMAN:"3",ASSO_OBJ_ALL:"9"},r.parentItemKey=["isreded","outbusitype","payman","paydate","isonlinepay","officialprintuser","officialprintdate","settlenum","approvenote","modifiedtime","creationtime","creator","modifier","isflowbill","confirmuser","billno","billdate","billstatus","operator","approver","approvestatus","approvedate","lastapproveid","isnetpayready","lastadjustuser","signuser","signyear","signperiod","settleflag","settletype","effectstatus","effectuser","effectdate","src_syscode","approvedate","signuser","busidate","signdate","isforce","commpayenddate","commpaybegindate","isfromindependent","invoiceno","sddreversalflag","reversalreason","payreason","failurereason","sddreversaler","sddreversaldate","creditrefstd","ts","coordflag","isrefund"],r.childrenItemKey=["payflag","top_tradetype","src_tradetype","checkdirection","transferdate","src_itemid","rowtype","top_itemid","top_billid","billno","coordflag","ispaytermmodified","pk_ssitem","top_billtype","transferflag","src_billid","src_billtype","dstlsubcs","isverifyfinished","pausetransact","billdate","payman","paydate","verifyfinisheddate","innerorderno","purchaseorder","invoiceno","occupationmny","busidate","contractno","commpaystatus","commpaytype","refuse_reason","paystaus","commpaytype","commpaystatus","refuse_reason","commpayer","isrefused","confernum","checkno","checkno_display","checktype","bankrelated_code","payreason","batchcode","pk_batchcode","settlemoney","settlecurr","ts","transerial"],r.IBillFieldGet={YS:"ys",YF:"yf",SK:"sk",FK:"fk",ZS:"zs",ZF:"zf",F0:"F0",F1:"F1",F2:"F2",F3:"F3",DE:"DE",DF:"DF",F0S:"23F0",F1C:"23F1",F2S:"23F2",F3C:"23F3",E0:"23E0",E1:"23E1"},r.FromSystem={AR:"0",AP:"1",CMP:"2",SO:"3",PO:"4",FTS:"5",NET:"6",CFBM:"8",XTDJ:"9",CDMA:"10",XBGL:"12",TB:"13",TO:"16",WBJHPT:"17",ZJJX:"18",IC:"19",CT:"20",YS:"24",PS:"7",AM:"104",WSBX:"105",CR09:"109"},r.ArapBillVOConsts={m_intJSZXZF_NetBank:"5",m_intJSZXZF_NONE:"0",m_intJSZXZF_HAND:"3",m_intJSZXZF_BCenter:"10",m_intDJZzzt_Default:"0",m_intDJZzzt_Succeed:"1",m_intDJZzzt_Fail:"-1",m_intDJZzzt_Ongoing:"2",m_intDJZzzt_partly:"11"},r.billstatus={UNCOMFIRM:"9",SAVE:"-1",AUDIT:"1",AUDITING:"2",TEMPEORARY:"-99",SIGN:"8"},r.effectstatus={EXECUTED:"10",INVALID:"0"},r.approvestatus={NOSTATE:"-1",NOPASS:"0",PASSING:"1",GOINGON:"2",COMMIT:"3"},r.INDEX_PK="index_0",r.headkey=["pk_org","pk_group","billdate","pk_currtype","billclass"],r.bodykey=["pk_org","pk_group","buysellflag","top_billtype","pk_currtype","taxprice","direction","taxrate","occupationmny","money_bal","local_money_bal"],r.crBodykey=["globalcrebit","globalnotax_cre","globaltax_cre","groupcrebit","groupnotax_cre","grouptax_cre","local_money_cr","local_notax_cr","local_tax_cr","money_cr","notax_cr","quantity_cr"],r.deBodykey=["globaldebit","globalnotax_de","globaltax_de","groupdebit","groupnotax_de","grouptax_de","local_money_de","local_notax_de","local_tax_de","money_de","notax_de","quantity_de"]},189:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.autoAddLineKeys=["money_de","money_cr"]},2:function(e,t){e.exports=r},20:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formBeforeEvent=void 0;var a=t(1);r.formBeforeEvent=function(e,r,t,o){var l=this,n=!0,i=e.meta.getMeta(),s=e.form.getFormItemsValue(this.formId,"pk_tradetype")?e.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,d={model:e.form.getAllFormValue(this.formId),pageid:this.pageId},u={model:{areaType:"table",areacode:null,rows:[e.cardTable.getVisibleRows(this.tableId)[0]]},pageid:this.pageId},c=JSON.stringify(d),p=JSON.stringify(u),f={itemKey:t,isHead:!0,crossRuleConditionsVO:c,crossRuleTableConditionsVO:p,tradeType:s,DataPowerOperationCode:"",isDataPowerEnable:"Y",pk_org:"",busifuncode:"",AppCode:"",orgType:"",refnodename:"",accclass:"",pk_cust:"",pk_currtype:"",pkOrgs:"",parentbilltype:"",dateStr:"",pk_accountingbook:"",GridRefActionExt:"",TreeRefActionExt:"",isadj:"",pk_psndoc:""},m=e.form.getFormItemsValue(this.formId,"pk_billtype")?e.form.getFormItemsValue(this.formId,"pk_billtype").value:null;return i[r].items.map((function(i){i.isShowUnit=!1,i.isShowDisabledData=!1;var d=i.attrcode;if("objtype"==d){for(var u=-1,c=0;c<i.options.length;c++)if(""==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}if("objtype"==d&&"23E1"==m){if("0"==o.value)return n=!1,e.form.setFormItemsDisabled(r,{objtype:!0}),n;for(u=-1,c=0;c<i.options.length;c++)if("0"==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}else if("objtype"==d&&"23E0"==m){if("1"==o.value)return n=!1,e.form.setFormItemsDisabled(r,{objtype:!0}),n;for(u=-1,c=0;c<i.options.length;c++)if("1"==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}if("refer"==i.itemtype&&(i.isMultiSelectedEnabled=!1,i.unitValueIsNeeded=!1),d==t)switch(d){case"pk_org":i.queryCondition=function(r){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"pk_org_v":i.isShowUnit=!1,i.queryCondition=function(r){return i.isShowUnit=!1,f.data="",f.crossRuleConditionsVO="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"supplier":i.queryCondition=function(r){return r?"grid"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==r.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"customer":i.queryCondition=function(r){return r?"grid"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==r.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.tradeType=s,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_deptid":i.isShowUnit=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(r){return r?"grid"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==r.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.busifuncode="all",f};break;case"pk_deptid_v":i.isShowUnit=!0,i.unitCondition=function(){return{isDataPowerEnable:"N",pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(r){return f.busifuncode="all",f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.VersionStartDate=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value:null,r?"grid"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder":"tree"==r.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder":"gridTree"==r.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"pk_psndoc":i.isShowUnit=!0,i.isShowDimission=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(r){return r?"grid"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==r.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.busifuncode="all",f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_fiorg":i.queryCondition=function(r){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"pk_fiorg_v":i.isShowUnit=!1,i.queryCondition=function(r){return i.isShowUnit=!1,f.AppCode=e.getSearchParam("c"),f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f.data="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"sett_org":i.queryCondition=function(r){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"sett_org_v":i.isShowUnit=!1,i.queryCondition=function(r){return i.isShowUnit=!1,f.AppCode=e.getSearchParam("c"),f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f.data="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"pu_deptid":i.isShowUnit=!1,i.queryCondition=function(r){return r?"grid"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==r.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_deptid_v":i.isShowUnit=!1,i.queryCondition=function(r){return f.busifuncode="all",r?"grid"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==r.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_org_v":i.queryCondition=function(r){return i.isShowUnit=!1,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=t,f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder","F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_psndoc":i.isShowUnit=!1,i.queryCondition=function(r){return f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"checkelement":if(!(e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null)){n=!1;break}i.queryCondition=function(r){var a=e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null;if(r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,a)return e.form.setFormItemsDisabled(l.formId,{checkelement:!1}),f.DataPowerOperationCode="fi",f.pk_org=a,f;e.form.setFormItemsDisabled(l.formId,{checkelement:!0})};break;case"cashitem":i.queryCondition=function(r){return f.DataPowerOperationCode="fi",r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_subjcode":i.queryCondition=function(r){return f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"costcenter":i.queryCondition=function(r){return f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null,f.orgType="pk_profitcenter",r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder",f.itemKey=t,f};break;case"payaccount":var p=e.form.getFormItemsValue(l.formId,"objtype").value;"F0"!=m&&"F2"!=m&&"23E0"!=m||("1"==p?(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000147"]):"3"==p?(i.itemType="refer",i.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",i.refName=l.state.json["public-000148"]):(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000149"])),i.queryCondition=function(r){if("F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"23E1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value)return f.DataPowerOperationCode="fi",f.refnodename=l.state.json["public-000150"],f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",f.itemKey=t,f;var o=e.form.getFormItemsValue(l.formId,"objtype").value,n=e.form.getFormItemsValue(l.formId,"supplier")?e.form.getFormItemsValue(l.formId,"supplier").value:null,i=e.form.getFormItemsValue(l.formId,"customer")?e.form.getFormItemsValue(l.formId,"customer").value:null,s=e.form.getFormItemsValue(l.formId,"pk_psndoc")?e.form.getFormItemsValue(l.formId,"pk_psndoc").value:(0,a.getBusinessInfo)().userId,d=null,u=null;return n&&"1"==o?(d=n,u=3):i&&"0"==o?(d=i,u=1):s&&(f.pk_psndoc=s),f.DataPowerOperationCode="fi",f.accclass=u,f.pk_cust=d,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,"3"==o?(f.pk_psndoc=s,f.pk_cust=null,f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"recaccount":if("F1"==m||"F3"==m||"23E1"==m){var b=e.form.getFormItemsValue(l.formId,"objtype").value;"1"==b||"2"==b?(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000147"]):"3"==b?(i.itemType="refer",i.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",i.refName=l.state.json["public-000148"]):(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000149"])}i.queryCondition=function(r){if("F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value)return f.DataPowerOperationCode="fi",f.refnodename=l.state.json["public-000150"],f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",f.itemKey=t,f;var o=e.form.getFormItemsValue(l.formId,"objtype").value,n=e.form.getFormItemsValue(l.formId,"supplier")?e.form.getFormItemsValue(l.formId,"supplier").value:null,i=e.form.getFormItemsValue(l.formId,"customer")?e.form.getFormItemsValue(l.formId,"customer").value:null,s=e.form.getFormItemsValue(l.formId,"pk_psndoc")?e.form.getFormItemsValue(l.formId,"pk_psndoc").value:(0,a.getBusinessInfo)().userId,d=null,u=null;return n&&"1"==o?(d=n,u=3):i&&"0"==o?(d=i,u=1):s&&(f.pk_psndoc=s),f.DataPowerOperationCode="fi",f.accclass=u,f.pk_cust=d,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"3"==o?(f.pk_psndoc=s,f.pk_cust=null,f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"cashaccount":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder",f.itemKey=t,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rate":case"grouprate":case"globalrate":(0,a.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",async:!1,data:{pk_org:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,pk_currtype:e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,ratekey:t},success:function(r){r.success&&(n=r.data,setTimeout((function(){e.form.setFormItemsDisabled(l.formId,{key:!r.data})}),0))}});break;case"pk_balatype":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder",f.itemKey=t,f};break;case"bankrollprojet":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",r?"grid"==r.refType||"gridTree"==r.refType?(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.GridRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"),f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"pu_org":i.queryCondition=function(r){return f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=t,"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_currtype":case"pk_busitype":i.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f};break;case"pk_pcorg":i.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_pcorg_v":i.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.VersionStartDate=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_org":i.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=t,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_org_v":i.queryCondition=function(r){return i.isShowUnit=!1,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_deptid":case"so_deptid_v":i.isShowUnit=!1,i.queryCondition=function(r){return i.isShowUnit=!0,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"so_org")?e.form.getFormItemsValue(l.formId,"so_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_psndoc":i.isShowUnit=!1,i.queryCondition=function(r){return i.isShowUnit=!0,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"so_org")?e.form.getFormItemsValue(l.formId,"so_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rececountryid":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"sendcountryid":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rececountryid":case"taxcountryid":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"approver":case"billmaker":case"confirmuser":case"creator":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"consignagreement":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"effectuser":case"lastadjustuser":case"lastapproveid":case"modifier":case"officialprintuser":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"ordercubasdoc":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"outbusitype":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"payman":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_deptid_res":case"pk_rescenter":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"sddreversaler":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"signuser":i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_tradetypeid":i.refName=l.state.json["public-000151"],i.queryCondition=function(r){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.parentbilltype=e.form.getFormItemsValue(l.formId,"pk_billtype").value,r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"subjcode":i.fieldDisplayed="dispname",i.queryCondition=function(r){var o=null;return(0,a.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null},async:!1,success:function(e){e.success&&(o=e.data)}}),f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.pk_accountingbook=o,f.dateStr=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value.substring(0,10):null,f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f};break;case"objtype":break;case"start_period":i.queryCondition=function(r){return r?"grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.isadj="N",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.itemKey=t,f};break;default:i.isShowUnit=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(r){return r&&("grid"==r.refType||"gridTree"==r.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==r.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=t,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f}}})),e.meta.setMeta(i),n}},201:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.contactButton=function(e,r){var t=void 0,a=void 0;(t=function e(r,t){if(r)return r;var a=!0,o=!1,l=void 0;try{for(var n,i=t[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var s=n.value;if("Add"==s.key)r=s;else if(0==s.children.length){if("Add"==s.key){r=s;break}}else if(r=e(r,s.children))break}}catch(e){o=!0,l=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw l}}return r}(t,e))&&(t.children&&t.children.length>0&&(a=t.children[0]),a&&r&&r.length>0&&(a.children=a.children.concat(r)))},r.getTransferInfo=function(e,r){var t=e.Info.pullBillInfoVOAry,a=void 0;if(t)for(var o=0;o<t.length;o++){var l=t[o];if(l.src_billtype===r){a=l;break}}return a}},202:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,o,l){var n=void 0,i=void 0,s=void 0,d=void 0,u=void 0,c=void 0;t.data?(n=t.data.values.pk_org.value,i=t.data.values.pk_group.value,s=t.data.values.pk_billtype.value,d=t.data.values.pk_tradetype.value,u=t.data.values.billdate.value,c=t.data.values.isrefund?t.data.values.isrefund.value:null):(n=t.rows[0].values.pk_org.value,i=t.rows[0].values.pk_group.value,s=t.rows[0].values.pk_billtype.value,d=t.rows[0].values.pk_tradetype.value,u=t.rows[0].values.billdate.value,c=t.rows[0].values.isrefund?t.rows[0].values.isrefund.value:null);if(c&&1==c){if(s&&"F1"==s)return void(0,a.toast)({color:"warning",content:e.state.json["public-000239"]});if(s&&"F3"==s)return void(0,a.toast)({color:"warning",content:e.state.json["public-000240"]})}var p="2006"==l.substring(0,4)?"AR":"AP",f=[{pk_group:i,pk_org:n,relationID:o,pk_billtype:d}],m={messagevo:[{pk_system:p,relationid:o,busidate:u,pk_org:n,pk_group:i,pk_billtype:d}],desbilltype:["C0"],srcbilltype:d};(0,a.ajax)({url:"/nccloud/arap/arappub/linkvouchar.do",data:f,async:!1,success:function(t){if(t.success){var o=t.data.src;if("_LinkVouchar2019"==o)if(t.data.des){if(t.data.pklist)return 1==t.data.pklist.length?void r.openTo(t.data.url,{status:"browse",appcode:t.data.appcode,pagecode:t.data.pagecode,id:t.data.pklist[0],n:e.state.json["public-000231"],backflag:"noback"}):(a.cacheTools.set(t.data.cachekey,t.data.pklist),void r.openTo(t.data.url,{status:"browse",appcode:t.data.appcode,pagecode:t.data.pagecode,scene:l+o,n:e.state.json["public-000231"]}))}else a.cacheTools.set(l+o,t.data.pklist);else"_Preview2019"==o&&a.cacheTools.set(l+o,m);r.openTo(t.data.url,{status:"browse",appcode:t.data.appcode,pagecode:t.data.pagecode,scene:l+o,n:e.state.json["public-000232"]})}}})};var a=t(1)},204:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.formId="head",r.tableId="bodys",r.leftarea="left",r.tradeType="D2",r.billType="F2",r.pkItem="pkItem",r.headId="headId",r.nodekey="card",r.dataSource="fi.arap.salebill.20060GBM",r.pkname="pk_gatherbill",r.linkPageId="20060GBM_LIST_LINK"},220:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.accAdd=function(e,r){var t,a,o;try{t=e.toString().split(".")[1].length}catch(e){t=0}try{a=r.toString().split(".")[1].length}catch(e){a=0}return(e*(o=Math.pow(10,Math.max(t,a)))+r*o)/o},r.Subtr=function(e,r){var t,a,o;try{t=e.toString().split(".")[1].length}catch(e){t=0}try{a=r.toString().split(".")[1].length}catch(e){a=0}return((e*(o=Math.pow(10,Math.max(t,a)))-r*o)/o).toFixed(t>=a?t:a)},r.accMul=function(e,r){var t=0,a=e.toString(),o=r.toString();try{t+=a.split(".")[1].length}catch(e){}try{t+=o.split(".")[1].length}catch(e){}return Number(a.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,t)},r.accDiv=function(e,r){}},221:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cardFieldsEditable=r.billEditProperties=r.fctToArapFieldEditable=r.applyToF3FieldsEditable=r.F0ToF3FieldsEditable=r.dealCommisionPayField=r.objtypeEditable=void 0;var a=t(1);r.objtypeEditable=function(e,r,t){var a=e.form.getFormItemsValue(r,"pk_billtype")?e.form.getFormItemsValue(r,"pk_billtype").value:null,o=(e.form.getFormItemsValue(r,"objtype")&&e.form.getFormItemsValue(r,"objtype").value,e.form.getFormItemsValue(r,"isrefund")?e.form.getFormItemsValue(r,"isrefund").value:null);("F1"==a&&o||"F3"==a&&o)&&(e.form.setFormItemsDisabled(r,{objtype:!0,customer:!0}),e.cardTable.setColEditableByKey(t,["objtype","customer"],!0))},r.dealCommisionPayField=function(e,r,t){var a=!!e.form.getFormItemsValue(r,"isforce")&&e.form.getFormItemsValue(r,"isforce").value,o=e.form.getFormItemsValue(r,"pk_billtype")?e.form.getFormItemsValue(r,"pk_billtype").value:null,l=e.form.getFormItemsValue(r,"supplier")?e.form.getFormItemsValue(r,"supplier").value:null,n=e.form.getFormItemsValue(r,"customer")?e.form.getFormItemsValue(r,"customer").value:null;if("F2"==o||"F3"==o){var i="settlement"==e.getUrlParam("src");(a||i)&&(e.form.setFormItemsDisabled(r,{pk_org:!0,objtype:!0,supplier:!0,customer:!0,pk_currtype:!0,rate:!0,payaccount:!0,recaccount:!0,money:!0,local_money:!0,grouplocal:!0,grouprate:!0,globallocal:!0,globalrate:!0,commpaybegindate:!0,commpayenddate:!0,isforce:!0}),e.cardTable.setColEditableByKey(t,["objtype","supplier","customer","pk_currtype","rate","grouprate","globalrate","payaccount","recaccount","commpayer","commpaystatus","commpaytype","money_de","local_money_de","quantity_de","money_bal","local_money_bal","quantity_bal","local_tax_de","notax_de","local_notax_de","groupdebit","grouptax_de","groupnotax_de","globaldebit","globaltax_de","globalnotax_de","quantity_cr","local_money_cr","money_cr","local_tax_cr","notax_cr","local_notax_cr","groupcrebit","grouptax_cre","groupnotax_cre","globalcrebit","globaltax_cre","globalnotax_cre","occupationmny","price","groupbalance","globalbalance","taxprice","caltaxmny","nosubtax"],!0)),l||"F3"!=o||(e.form.setFormItemsDisabled(r,{supplier:!1}),e.cardTable.setColEditableByKey(t,["supplier"],!1)),n||"F2"!=o||(e.form.setFormItemsDisabled(r,{customer:!1}),e.cardTable.setColEditableByKey(t,["customer"],!1))}},r.F0ToF3FieldsEditable=function(e,r,t){e.form.setFormItemsDisabled(r,{objtype:!0,pk_currtype:!0}),e.cardTable.setColEditableByKey(t,["objtype","pk_currtype"],!0)},r.applyToF3FieldsEditable=function(e,r,t){e.form.setFormItemsDisabled(r,{pk_org:!0,pk_currtype:!0,billdate:!0,supplier:!0}),e.cardTable.setColEditableByKey(t,["pk_currtype","billdate","supplier","prepay","purchaseorder","invoiceno","contractno","quantity_de","pu_org","pu_deptid","pu_psndoc"],!0),(e.form.getFormItemsValue(r,"payaccount")?e.form.getFormItemsValue(r,"payaccount").value:null)&&(e.form.setFormItemsDisabled(r,{payaccount:!0}),e.cardTable.setColEditableByKey(t,["payaccount"],!0))},r.fctToArapFieldEditable=function(e,r,t){var a=e.getUrlParam("srcbilltype");!a||"FCT1"!=a&&"FCT2"!=a||e.form.setFormItemsDisabled(r,{pk_org:!0})},r.billEditProperties=function(e,r,t,o){(0,a.ajax)({url:"/nccloud/arap/arappub/billCanEditProperties.do",data:{pk_bill:r,billType:t,appcode:o},success:function(r){r.success&&(e.state.buttonfalg=!0,e.props.resMetaAfterPkorgEdit(),r.data&&r.data.head&&(e.props.form.setFormItemsDisabled(e.formId,r.data.head),e.headBack=r.data.headBack),r.data&&r.data.body&&(e.props.cardTable.setColEditableByKey(e.tableId,r.data.body,!0),e.bodyBack=r.data.body),e.headBack&&!r.data&&(e.props.form.setFormItemsDisabled(e.formId,e.headBack),e.props.cardTable.setColEditableByKey(e.tableId,e.bodyBack,!1)),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!0}))}})},r.cardFieldsEditable=function(e){var r=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId),t="",a="";if(r&&r.body&&r.body[e.tableId]&&r.body[e.tableId].rows){var o=r.body[e.tableId].rows;t=o[0].values.top_billtype.value,a=o[0].values.pk_billtype.value}var l=[],n=[];if(!t||"4A2F"!=t&&"4BL0"!=t&&"4BL3"!=t||"F0"!=a?!t||"4A3F"!=t&&"4A3H"!=t||"F1"!=a?!t||"4A18"!=t&&"4A23"!=t&&"4A24"!=t&&"4A49"!=t||(l=["pk_currtype","rate"],n=["pk_currtype","rate","money_de","local_money_de","local_notax_cr","notax_de","local_notax_de","money_cr","local_money_cr","local_tax_cr","notax_cr","local_notax_cr"]):(l=["billclass","isinit","billdate","syscode","src_syscode","billstatus","billmaker","pk_busitype","pk_psndoc","supplier","pk_currtype","objtype","pk_org_v","pk_fiorg_v","pk_pcorg_v","sett_org_v","pk_org","pk_pcorg","sett_org","outbusitype","pk_group","creationtime","creator","pk_billtype","pk_tradetype"],n=["pk_org","pk_fiorg","pk_pcorg","pk_pcorg_v","pk_org_v","pk_fiorg_v","sett_org_v","sett_org","supplier","equipmentcode","billdate","pk_group","pk_billtype","billclass","pk_tradetype","busidate","objtype","direction","pk_currtype","pk_psndoc","local_money_cr","money_cr","money_bal","local_money_bal","price","taxprice","top_billid","top_itemid","top_billtype","top_tradetype","src_tradetype","src_billtype","src_billid","src_itemid","pk_payterm","assetpactno","contractno","groupcrebit","globalcrebit","groupbalance","globalbalance","project"]):(l=["pk_org","pk_fiorg","pk_pcorg","sett_org","pk_org_v","pk_fiorg_v","pk_pcorg_v","sett_org_v","outbusitype","pk_group","creationtime","creator","pk_billtype","pk_tradetype","billclass","isinit","billdate","syscode","src_syscode","billstatus","billmaker","pk_busitype","pk_psndoc","customer","pk_currtype","objtype"],n=["pk_org","pk_pcorg","pk_fiorg","sett_org","pk_pcorg_v","pk_org_v","pk_fiorg_v","sett_org_v","customer","equipmentcode","billdate","pk_group","pk_billtype","billclass","pk_tradetype","busidate","objtype","direction","pk_currtype","pk_psndoc","money_de","local_money_de","money_bal","local_money_bal","notax_de","local_notax_de","price","taxprice","top_billid","top_itemid","top_billtype","top_tradetype","src_tradetype","src_billtype","src_billid","src_itemid","pk_payterm","assetpactno","groupdebit","globaldebit","groupbalance","globalbalance","project"]),l&&l.length>0&&n&&n.length>0){for(var i={},s=0;s<l.length;s++){i[l[s]]=!0}e.props.beforeUpdatePage(),e.props.form.setFormItemsDisabled(e.formId,i),e.props.cardTable.setColEditableByKey(e.tableId,n,!0),e.props.updatePage(e.formId,e.tableId)}}},237:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WholeVerify=r.BodyVerify=void 0;var a=t(1),o=t(220),l=void 0,n=void 0,i=void 0;r.BodyVerify=function(e,r,t,o,s,d){var u=(0,a.getBusinessInfo)().businessDate,c=e.cardTable.getCheckedRows(t);if(0!=c.length)if(1==c.length){var p=e.form.getAllFormValue(r).rows[0].values,f=c[0].data.values,m=!0;if(u<e.form.getFormItemsValue(r,"billdate").value.substring(0,10)&&(m=!1),m){var b=!0,y=c[0].data.values.pausetransact.value,g=e.form.getFormItemsValue(r,"effectstatus").value,v=1*c[0].data.values.occupationmny.value;if(10==g){if(0==v&&(b=!1),10==g&&!b)return void(0,a.toast)({color:"warning",content:d.state.json["public-000154"]});if(y)return void(0,a.toast)({color:"warning",content:d.state.json["public-000155"]})}var _=null;switch(f.objtype.value){case"0":_=f.customer;break;case"1":_=f.supplier;break;case"2":_=f.pk_deptid_v;break;case"3":_=f.pk_psndoc}var I={pk_bill:p[o],pkBill:o,pk_org:p.pk_org,pk_item:c[0].data.values[s].value,billType:p.pk_billtype,ts:p.ts,objtype:f.objtype,objTypeValue:_,customer:p.customer,supplier:p.supplier,pk_deptid:p.pk_deptid_v,pk_psndoc:p.pk_psndoc,occupationmnySum:v,pk_tradetype:p.pk_tradetype,pageId:e.getSearchParam("p"),appcode:e.getSearchParam("c"),effectstatus:g,scene:e.getUrlParam("scene")};switch(o){case"pk_payablebill":case"pk_paybill":l="20080PREV",n="20080NOWV",i="20082002";break;case"pk_recbill":case"pk_gatherbill":l="20060PREV",n="20060NOWV",i="20062002"}var h=n,k="/nowv";0==g&&(h=l,k="/prev");var w=e.getUrlParam("scene"),T="appcode="+i+"&pagecode="+h+"&c="+i+"&p="+h+"&scene="+w+"&transAppCode="+e.getUrlParam("appcode")+"&transPageCode="+e.getUrlParam("pagecode")+"&Id="+JSON.stringify(p[o]);m&&b&&!y&&(e.ViewModel.setData("WholeVerifyDatas",I),window.top===window.parent?e.pushTo(k,{appcode:i,pagecode:h,transAppCode:e.getSearchParam("c"),transPageCode:e.getSearchParam("p"),scene:w,Id:p[o]}):(window.location.hash=k+"?"+T,window.parent.location.hash=k+"?"+T))}else(0,a.toast)({color:"warning",content:d.state.json["public-000153"]})}else(0,a.toast)({color:"warning",content:d.state.json["public-000156"]});else(0,a.toast)({color:"warning",content:d.state.json["public-000152"]})},r.WholeVerify=function(e,r,t,s,d){var u=(0,a.getBusinessInfo)().businessDate,c=e.form.getAllFormValue(r).rows[0].values,p=e.form.getFormItemsValue(r,"effectstatus").value,f=e.cardTable.getAllRows(t,!1),m=!0,b=e.form.getFormItemsValue(r,"billdate").value.substring(0,10),y=Date.parse(b);if(Date.parse(u)<y&&(m=!1),m){var g=!0;if(f.length>0)var v=f[0].values.objtype.value;var _="customer";switch(v){case"0":_="customer";break;case"1":_="supplier";break;case"2":_="pk_deptid_v";break;case"3":_="pk_psndoc"}for(var I=0;I<f.length;I++)if(f[I].values.objtype.value!=v){g=!1;break}if(g){var h=!0;if(f.length>0)var k=f[0].values[_].value;if(g)for(I=0;I<f.length;I++)if(f[I].values[_].value!=k){h=!1;break}if(h){var w=!0;if(f.length>0)v=f[0].values.pk_currtype.value;for(I=0;I<f.length;I++)if(f[I].values.pk_currtype.value!=v){w=!1;break}if(w){var T=0;if(f.length>0)for(I=0;I<f.length;I++)T=(0,o.accAdd)(T,1*f[I].values.occupationmny.value);var C=!0,R=!0;if(10==p){if(0==T)return R=!1,void(0,a.toast)({color:"warning",content:d.state.json["public-000160"]});for(I=0;I<f.length;I++)if(1==f[I].values.pausetransact.value){C=!1;break}if(!C)return void(0,a.toast)({color:"warning",content:d.state.json["public-000161"]})}var S=null;switch(c.objtype.value){case"0":S=c.customer;break;case"1":S=c.supplier;break;case"2":S=c.pk_deptid_v;break;case"3":S=c.pk_psndoc}var B={pk_bill:c[s],pkBill:s,pk_org:c.pk_org,pk_item:null,billType:c.pk_billtype,ts:c.ts,objtype:c.objtype,objTypeValue:S,customer:c.customer,supplier:c.supplier,pk_deptid:c.pk_deptid_v,pk_psndoc:c.pk_psndoc,occupationmnySum:T,pk_tradetype:c.pk_tradetype,pageId:e.getSearchParam("p"),appcode:e.getSearchParam("c"),effectstatus:p,scene:e.getUrlParam("scene")};switch(s){case"pk_payablebill":case"pk_paybill":l="20080PREV",n="20080NOWV",i="20082002";break;case"pk_recbill":case"pk_gatherbill":l="20060PREV",n="20060NOWV",i="20062002"}var x=n,E="/nowv";0==p&&(x=l,E="/prev");var A=e.getUrlParam("scene"),F="appcode="+i+"&pagecode="+x+"&c="+i+"&p="+x+"&scene="+A+"&transAppCode="+e.getUrlParam("appcode")+"&transPageCode="+e.getUrlParam("pagecode")+"&Id="+JSON.stringify(c[s]);g&&h&&m&&w&&C&&R&&(e.ViewModel.setData("WholeVerifyDatas",B),window.top===window.parent?e.pushTo(E,{appcode:i,pagecode:x,transVerifyDatas:JSON.stringify(B),transAppCode:e.getSearchParam("c"),transPageCode:e.getSearchParam("p"),scene:A,Id:c[s]}):(window.location.hash=E+"?"+F,window.parent.location.hash=E+"?"+F))}else(0,a.toast)({color:"warning",content:d.state.json["public-000159"]})}else(0,a.toast)({color:"warning",content:d.state.json["public-000158"]})}else(0,a.toast)({color:"warning",content:d.state.json["public-000158"]})}else(0,a.toast)({color:"warning",content:d.state.json["public-000157"]})}},238:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.updatePandC=function(e){var r=e.props.ViewModel.getData("WholeVerifyDatas"),t=window.parent.location.hash.split("?")[1],a=t&&t.split("&");if(a&&a instanceof Array&&a.length>0){var o=a.map((function(e){if(-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array){if("ifr"===e.split("=")[0]){var t=decodeURIComponent(decodeURIComponent(e.split("=")[1])).split("#")[0]+"#/card";e="ifr="+encodeURIComponent(encodeURIComponent(t))}return"p"===e.split("=")[0]&&(e="p="+r.pageId),"c"===e.split("=")[0]&&(e="c="+r.appcode),e}})).join("&");window.parent.location.hash="#/ifr?"+o,e.props.setUrlParam({id:r.pk_bill.value})}}},239:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,l,n,i,s,d){var u=a.cacheTools.get("checkedData"),c=void 0;u&&(c={fipLink:u,pageId:e.getSearchParam("p")});(0,a.ajax)({url:"/nccloud/arap/arappub/queryBillCardByPK.do",data:c,success:function(r){var a=r.success;r.data;if(a&&r.data){var u=r.data[0].head[l].rows[0].values[t].value;e.addUrlParam({id:u}),e.setUrlParam({pk_tradetype:r.data[0].head[l].rows[0].values.pk_tradetype.value}),o(i,e.getUrlParam("id"),r.data[0],l,s),r.data[0].head&&e.form.setAllFormValue(function(e,r,t){r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t;return e}({},l,r.data[0].head[l])),r.data[0].body&&e.cardTable.setTableData(n,r.data[0].body[n]),d.toggleShow()}}})};var a=t(1);var o=a.cardCache.updateCache},24:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,n){r&&(0,a.ajax)({url:"/nccloud/arap/arappub/arapBillLinkReport.do",data:{pk_bill:r,billType:t,objType:n},async:!1,success:function(r){if(r.success){var t=function(e){var r={logic:"and",conditions:[{field:"not_search",oprtype:"=",value:{firstvalue:"",secondvalue:""}}],oprtype:"=",display:null},t={logic:"and",conditions:[]};for(var a in e){var o=e[a];switch(a){case"pk_orgs":r.conditions.push({field:a,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o[0],secondvalue:null}});break;case"repInitContext":l=o.m_headVo.node_code;break;case"showFrontN":case"userObject":case"pk_group":case"syscode":case"alarmDay":break;case"qryObjs":var n=o[0],i=n.values.join(","),s=[n.billFieldName,i.replace(/,/g,"@"),!1,!1];t.conditions.push({field:"queryObjsVal",oprtype:"=",value:{firstvalue:s.join(","),secondvalue:null}});break;case"beginDate":case"endDate":r.conditions.push({field:a,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}});break;case"pk_billtypes":var d=[o.join(",").replace(/,/g,"@")];r.conditions.push({field:a,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:d[0],secondvalue:null}});break;case"nooccur_noshow":case"nobal_nooccur_noshow":r.conditions.push({field:a,datatype:"32",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}});break;default:r.conditions.push({field:a,datatype:"203",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}})}}return{queryInfo:r,custconditions:t}}(r.data);o("sessionStorage","LinkReport",JSON.stringify(t.queryInfo),(function(){})),o("sessionStorage","sessionCustcondition",JSON.stringify(t.custconditions),(function(){})),e.openTo("/nccloud/resources/arap/accountquery/report/balanceData/index.html",{appcode:l,pagecode:l+"page"})}}})};var a=t(1),o=a.viewModel.setGlobalStorage,l=void 0},240:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,l,n,i,s,d){var u=e.getUrlParam("pk_src"),c=void 0;u&&(c={dest_billtype:r,pk_src:u,pageId:e.getSearchParam("p")});(0,a.ajax)({url:"/nccloud/arap/arappub/cmpLinkArapCard.do",data:c,success:function(r){var a=r.success;r.data;if(a&&r.data){var u=r.data[0].head[l].rows[0].values[t].value;e.addUrlParam({id:u}),e.setUrlParam({pk_tradetype:r.data[0].head[l].rows[0].values.pk_tradetype.value}),o(i,e.getUrlParam("id"),r.data[0],l,s),r.data[0].head&&e.form.setAllFormValue(function(e,r,t){r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t;return e}({},l,r.data[0].head[l])),r.data[0].body&&e.cardTable.setTableData(n,r.data[0].body[n]),d.toggleShow()}}})};var a=t(1);var o=a.cardCache.updateCache},245:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var t=this.props.getSearchParam("c"),a=this.getPagecode();this.props.getUrlParam("srcbilltype")?p.call(this,e,t,a):c(this,e,t,a,r)},r.dealOutToGather=p;var a,o=t(1),l=t(409),n=(a=l)&&a.__esModule?a:{default:a},i=t(204),s=t(6),d=t(8),u=t(12);o.base.NCPopconfirm,o.cardCache.setDefData,o.cardCache.getDefData;function c(e,r,t,a,l){var c=(0,o.excelImportconfig)(r,"arap",i.billType,!0,"",{appcode:t,pagecode:e.getExportPageCode()}),p=a;r.createUIDom({pagecode:a,appcode:t,reqDataQueryallbtns:{rqUrl:"/arap/arappub/queryallbtns.do",rqJson:'{\n  "pagecode": "'+a+'",\n  "appcode": "'+t+'"\n,\n  "billtype": "'+i.billType+'"\n,\n  "tradetype": "'+p+'"\n}',rqCode:"button"},reqDataQuerypage:{rqUrl:"/arap/arappub/querypage.do",rqJson:'{\n  "pagecode": "'+a+'",\n  "appcode": "'+t+'"\n}',rqCode:"template"}},(function(t){if(t){if(!t.template[i.tableId])return;if(t.template){var a=t.template;a=function(e,r,t){var a=r.getUrlParam("status");return t[i.formId].status=a,t[i.tableId].status=a,t[i.tableId].items.push({label:e.state.json["salebill-000007"],itemtype:"customer",attrcode:"opr",width:u.OperationColumn,visible:!0,fixed:"right",render:function(t,a,o){var l=(0,s.cardBodyAndInnerButtonVisible)(e,e.state.buttonfalg,a.expandRowStatus);return r.button.createOprationButton(l,{area:"card_inner",buttonLimit:3,onButtonClick:function(r,l){return(0,n.default)(e,r,l,t,a,o)}})}}),t}(e,r,a),r.meta.setMeta(a)}if(t.button&&t.button.button){var o=t.button.button,p=t.button.pullbillinfo;(0,s.getButtonsKey)(o,e.Info.allButtonsKey),e.Info.pullBillInfoVOAry=p,r.button.setButtons(o),r.button.setUploadConfig("ImportData",c)}l&&l(),t.context&&((0,d.loginContext)(t.context),(0,d.getContext)(d.loginContextKeys.transtype)&&e.refs.tradetypeBtn&&e.refs.tradetypeBtn.setVisible(!1))}}))}function p(e,r,t){var a=this,l="",n={},i=this.props.getUrlParam("srcbilltype");"30"==i?(l="/nccloud/arap/salebill/saleordertogather.do",n={pk_bill:this.props.getUrlParam("csaleorderid"),pageId:t}):"FCT2"==i?(l="/nccloud/arap/salebill/fct2togatherbill.do",n={pk_bills:o.cacheTools.get("fct2ToF2Pks"),pageId:t}):"35"==i?(l="/nccloud/arap/salebill/arsubtogatherbill.do",n={pk_bills:o.cacheTools.get("arsubToF2Pks"),pageId:t}):"Z3"==i&&(l="/nccloud/arap/salebill/cttogatherbill.do",n={pk_bills:o.cacheTools.get("CtToF2Pks"),pageId:t}),(0,o.ajax)({url:l,data:n,success:function(l){l.data?(t=l.data.head[a.formId].rows[0].values.pk_tradetype.value,a.data=l.data,c(a,e,r,t,a.initShow)):(a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]}),(0,o.toast)({color:"danger",content:a.state.json["salebill-000033"]}))}})}},25:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,o=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),l=t(2),n=(a=l)&&a.__esModule?a:{default:a},i=t(1);t(34);var s=i.base.NCModal,d=i.base.NCButton,u=i.base.NCTable,c=i.base.NCDiv,p=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},""),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jine"},""),children:[{title:n.default.createElement("div",{fieldid:"money"},""),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},"local_money"),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"ye"},""),children:[{title:n.default.createElement("div",{fieldid:"money_bal"},""),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},""),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"scomment"},""),dataIndex:"scomment",key:"scomment",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},""),dataIndex:"busidate",key:"busidate",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jfjine"},""),children:[{title:n.default.createElement("div",{fieldid:"money_de_b"},""),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},""),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"dfjine"},""),children:[{title:n.default.createElement("div",{fieldid:"money_de_h"},""),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},""),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"billTypeName"},""),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},""),dataIndex:"billno",key:"billno",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}],f=function(e){function r(e){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.rowClassNameHandler=function(e,r,a){return t.state.selectedRow[r]?"selected":""},t.onRowClick=function(e,r){var a=new Array(t.state.tableData.length);a[r]=!0,t.setState({factoryValue:e,selectedRow:a,record:e})},t.linkBill=function(){var e=t.state.record;e?(0,i.ajax)({url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{billType:e.billType,pk_bill:e.pk_bill},success:function(e){var r=e.data;r?i.pageTo.openTo(r.url,r.condition):(0,i.toast)({color:"warning",content:t.state.json["public-000057"]})}}):(0,i.toast)({color:"warning",content:t.state.json["public-000014"]})},t.totalData=[],t.table="",t.total="",t.totalColumns=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},""),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money"},""),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},""),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_bal"},""),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},""),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:""},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"scomment"},""),dataIndex:"scomment",key:"scomment",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},""),dataIndex:"busidate",key:"busidate",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_b"},""),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},""),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_h"},""),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},""),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billTypeName"},""),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},""),dataIndex:"billno",key:"billno",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}],t.state={tableData:[],record:null,selectedRow:[],json:{}},t}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,e),o(r,[{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(r){e.setState({json:r},(function(){p=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},e.state.json["public-000045"]),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jine"},e.state.json["public-000046"]),children:[{title:n.default.createElement("div",{fieldid:"money"},e.state.json["public-000047"]),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},e.state.json["public-000048"]),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"ye"},e.state.json["public-000049"]),children:[{title:n.default.createElement("div",{fieldid:"money_bal"},e.state.json["public-000047"]),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},e.state.json["public-000048"]),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"scomment"},e.state.json["public-000050"]),dataIndex:"scomment",key:"scomment",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},e.state.json["public-000051"]),dataIndex:"busidate",key:"busidate",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jfjine"},e.state.json["public-000052"]),children:[{title:n.default.createElement("div",{fieldid:"money_de_b"},e.state.json["public-000047"]),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},e.state.json["public-000048"]),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"dfjine"},e.state.json["public-000053"]),children:[{title:n.default.createElement("div",{fieldid:"money_de_h"},e.state.json["public-000047"]),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},e.state.json["public-000048"]),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"billTypeName"},e.state.json["public-000054"]),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},e.state.json["public-000055"]),dataIndex:"billno",key:"billno",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}],e.totalColumns=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},e.state.json["public-000056"]),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money"},e.state.json["public-000047"]),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},e.state.json["public-000048"]),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_bal"},e.state.json["public-000047"]),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},e.state.json["public-000048"]),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"scomment"},e.state.json["public-000050"]),dataIndex:"scomment",key:"scomment",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},e.state.json["public-000051"]),dataIndex:"busidate",key:"busidate",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_b"},e.state.json["public-000047"]),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},e.state.json["public-000048"]),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_h"},e.state.json["public-000047"]),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},e.state.json["public-000048"]),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,r,t){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billTypeName"},e.state.json["public-000054"]),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},e.state.json["public-000055"]),dataIndex:"billno",key:"billno",width:100,render:function(e,r,t){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}]}))}})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var r=this;if(e.combinedExaminationData==this.props.combinedExaminationData)return!1;var t=this.state.tableData,a=0==e.combinedExaminationData.length?[]:e.combinedExaminationData.total;a&&a.length>0&&(this.totalData=[{pk_dealnum:a[0],money:a[1],local_money:a[2],money_bal:a[3],local_money_bal:a[4],scomment:a[5],busidate:a[6],money_de_b:a[7],local_money_de_b:a[8],money_de_h:a[9],local_money_de_h:a[10],billTypeName:a[11],billno:a[12]}]),this.setState({tableData:0==e.combinedExaminationData.length?[]:e.combinedExaminationData.list},(function(){if(r.setState({selectedRow:new Array(t.length)}),r.state.tableData.length>0){var e=r.table.querySelector(".u-table-body"),a=r.total.querySelector(".u-table-body");e.onscroll=function(){a.scrollLeft=e.scrollLeft},a.onscroll=function(){e.scrollLeft=a.scrollLeft}}}))}},{key:"render",value:function(){var e=this,r=this.props,t=r.show,a=r.pk_tradetypeid,o=r.billno,l=this.state.tableData,i="100px",f=document.getElementById("combinedExaminationModelId");if(f){var m=f.querySelector(".u-modal-body");m&&(i=m.offsetHeight-200+"px")}return n.default.createElement("div",null,n.default.createElement(s,{fieldid:"combinedExamination",id:"combinedExaminationModelId",className:"query-modal",show:t,size:"xlg",backdrop:"static",onHide:this.props.handleModel},n.default.createElement(s.Header,{closeButton:!0},n.default.createElement(s.Title,null,""+this.state.json["public-000058"])),n.default.createElement(s.Body,null,n.default.createElement("div",{className:"steps-content"},n.default.createElement("ul",{className:"content-tit"},n.default.createElement("div",{className:"content-tit-tit"},n.default.createElement("li",{className:"tit-tradetype"},n.default.createElement("span",null,this.state.json["public-000059"],"："),n.default.createElement("span",null,a)),n.default.createElement("li",{className:"tit-billno"},n.default.createElement("span",null,this.state.json["public-000060"],"："),n.default.createElement("span",null,o))),n.default.createElement("li",null,n.default.createElement(d,{fieldid:"linkbill",className:"button-primary",style:{float:"right"},onClick:this.linkBill},this.state.json["public-000061"]))),n.default.createElement(c,{fieldid:"ncc",areaCode:c.config.TABLE,className:"table-area"},n.default.createElement(u,{className:"total-rows",columns:p,isDrag:!0,ref:function(r){e.table=ReactDOM.findDOMNode(r)},data:l,style:{marginRight:"20px",height:"350px"},loading:!1,onRowClick:this.onRowClick.bind(this),rowClassName:this.rowClassNameHandler,footer:function(){return n.default.createElement(u,{className:"total-row",ref:function(r){return e.total=ReactDOM.findDOMNode(r)},rowKey:"total",isDrag:!0,data:e.totalData,columns:e.totalColumns,showHeader:!1,scroll:{x:!0,y:"35px"},bodyStyle:{height:"35px"}})},scroll:{x:!0,y:i},bodyStyle:{height:i}}))))))}}]),r}(l.Component);f=(0,i.createPage)({})(f),r.default=f},26:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}();r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};return n.default.createElement(c,Object.assign(r,e))};var o,l=t(2),n=(o=l)&&o.__esModule?o:{default:o},i=t(1);t(37);var s=i.cardCache.setDefData,d=i.high.Refer,u=i.base.NCButton,c=function(e){function r(e){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.setVisible=function(e){t.setState({visible:e})},t.state={visible:!0,json:{}},t}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,e),a(r,[{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(r){e.setState({json:r})}})}},{key:"render",value:function(){var e=this.props,r=e.billtype,t=e.dataSource,a=e.switchTemplate;return n.default.createElement("div",{className:(this.state.visible?"show":"hide")+"  teadetype-lightapp-component"},n.default.createElement("span",null,n.default.createElement(d,{fieldid:"tradetype",placeholder:this.state.json["public-000139"],refName:this.state.json["public-000151"],refCode:"tradetype",refType:"grid",queryGridUrl:"/nccloud/riart/ref/fiBillTypeTableRefAction.do",columnConfig:[{name:[this.state.json["public-000245"],this.state.json["public-000246"]],code:["refcode","refname"]}],queryCondition:{parentbilltype:r},onChange:function(e){s("sessionTradeType",t,e.refcode),s("isSwitchTradeType",t,!0),a&&a()},isMultiSelectedEnabled:!1,clickContainer:n.default.createElement(u,{fieldid:"tradetype",colors:"primary"},this.state.json["public-000139"])})))}}]),r}(l.Component)},269:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var t=this,g=(0,y.getContext)(y.loginContextKeys.transtype),C=this.getPagecode();switch(r){case o.headButton.Refund:(0,a.ajax)({url:"/nccloud/arap/arappub/refund.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,a.toast)({color:"success",title:"退款成功"}),w.call(t,e)}});break;case o.headButton.CancelRefund:(0,a.ajax)({url:"/nccloud/arap/arappub/cancelrefund.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,a.toast)({color:"success",title:"取消退款成功"}),w.call(t,e)}});break;case o.headButton.Generate:(0,l.generate)(this);break;case o.headButton.Commit:this.Info.tipUrl="/nccloud/arap/arappub/commit.do",this.commitAndUncommit();break;case o.headButton.Uncommit:this.Info.tipUrl="/nccloud/arap/arappub/uncommit.do",this.commitAndUncommit();break;case o.headButton.LinkAprv:this.setState({showApproveDetail:!0});break;case o.headButton.Save:this.saveBill("/nccloud/arap/arappub/save.do");break;case o.headButton.TempSave:if(!this.props.form.getFormItemsValue(s.formId,"pk_org").value)return void(0,a.toast)({color:"warning",content:this.state.json["salebill-000025"]});this.saveBill("/nccloud/arap/arappub/tempsave.do");break;case o.headButton.SaveAndCommit:this.saveBill("/nccloud/arap/arappub/saveandcommit.do");break;case o.headButton.Add:C=_("sessionTradeType",s.dataSource),g?C=g:C||(C=this.getPagecode()),C!=this.getPagecode()?(e.setUrlParam({status:"add",pagecode:C}),u.default.call(this,this.props)):e.setUrlParam({status:"add",pagecode:C}),this.initAdd();break;case o.headButton.Edit:T.call(this);break;case o.headButton.Copy:(0,b.copyBill)(this,this.getPagecode());break;case o.headButton.Delete:(0,a.promptBox)({color:"warning",title:this.state.json["salebill-000005"],content:this.state.json["salebill-000006"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["salebill-000004"],cancelBtnName:this.state.json["salebill-000002"],beSureBtnClick:this.delConfirm});break;case o.headButton.Cancel:(0,a.promptBox)({color:"warning",title:this.state.json["salebill-000002"],content:this.state.json["salebill-000003"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["salebill-000004"],cancelBtnName:this.state.json["salebill-000002"],beSureBtnClick:this.cancel});break;case o.headButton.Pausetrans:this.pause("/nccloud/arap/arappub/pause.do");break;case o.headButton.Cancelpause:this.pause("/nccloud/arap/arappub/cancelpause.do");break;case o.headButton.PrePay:var R=this.props.cardTable.getCheckedRows(this.tableId);if(0==R.length)return void(0,a.toast)({color:"warning",content:this.state.json["salebill-000028"]});var S=[];R.forEach((function(e){S.push(e.data.values.pk_gatheritem.value)}));var B={pk_items:S,pk_bill:this.props.getUrlParam("id"),ts:this.props.form.getFormItemsValue(this.formId,"ts").value,pageId:this.getPagecode(),billType:this.billType};(0,a.ajax)({url:"/nccloud/arap/arappub/prepay.do",data:B,success:function(e){(0,a.toast)({color:"success",content:t.state.json["salebill-000029"]}),e.data&&(e.data.head&&t.props.form.setAllFormValue(v({},t.formId,e.data.head[t.formId])),e.data.body&&t.props.cardTable.setTableData(t.tableId,e.data.body[t.tableId]));var r=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId);h(s.pkname,t.props.getUrlParam("id"),r,t.formId,s.dataSource),t.onSelected()}});break;case o.headButton.RedBack:var x={pk_bill:this.props.getUrlParam("id"),ts:this.props.form.getFormItemsValue(this.formId,"ts").value,pageId:this.getPagecode(),billType:this.billType,tradeType:this.getPagecode()};(0,a.ajax)({url:"/nccloud/arap/arappub/redback.do",data:x,success:function(r){t.props.beforeUpdatePage(),r.data.head&&t.props.form.setAllFormValue(v({},t.formId,r.data.head[t.formId])),r.data.body&&t.props.cardTable.setTableData(t.tableId,r.data.body[t.tableId]),e.setUrlParam({status:"add",id:t.props.getUrlParam("id"),type:"redBack"}),t.state.buttonfalg=!0,t.props.cardTable.setStatus(t.tableId,"edit"),t.props.form.setFormStatus(t.formId,"edit"),t.props.form.setFormItemsDisabled(t.formId,{pk_org:!0}),t.props.updatePage(t.formId,t.tableId),t.toggleShow(),t.props.button.setButtonVisible([o.headButton.TempSave],!1)}});break;case o.headButton.LinkConfer:(0,a.ajax)({url:"/nccloud/arap/arappub/linkconfer.do",async:!1,data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value,billType:this.billType},success:function(r){var t=r.data;t&&e.openTo(t.url,t.condition)}});break;case o.headButton.LinkTbb:(0,a.ajax)({url:"/nccloud/arap/arappub/linktbb.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value,billType:this.billType},success:function(e){e.success&&(t.Info.tbbLinkSourceData=e.data,t.setState({isTbbLinkshow:!0}))}});break;case o.headButton.LinkBal:(0,p.default)(this.props,this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value,this.billType,this.props.form.getFormItemsValue(this.formId,"objtype").value);break;case o.headButton.MadeBill:var E=[{pk_bill:e.form.getFormItemsValue(s.formId,"pk_gatherbill").value,billType:this.billType,tradeType:e.form.getFormItemsValue(s.formId,"pk_tradetype").value}];(0,m.default)(this,e,E,"",e.getSearchParam("c"));break;case o.headButton.LinkVouchar:(0,f.default)(this,e,this.props.form.getAllFormValue(this.formId),this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value,this.props.getSearchParam("c"));break;case o.headButton.LinkDeal:(0,a.ajax)({url:"/nccloud/arap/arappub/linkdeal.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value,billType:this.billType},success:function(e){if(e.success){var r=e.data;t.Info.combinedExaminationData=r,t.handleCombined()}}});break;case o.headButton.LinkSettleInfo:(0,a.ajax)({url:"/nccloud/arap/arappub/linksettleinfo.do",data:{pk_bill:e.form.getFormItemsValue(s.formId,"pk_gatherbill").value,billType:s.billType},success:function(r){var t=r.success;r.data;t&&e.openTo("/nccloud/resources/cmp/settlementmanagement/settlement/main/index.html#/card",{status:"browse",srcid:e.form.getFormItemsValue(s.formId,"pk_gatherbill").value,src:"2006",appcode:"360704SM",pagecode:"360704SM_C01"})}});break;case o.headButton.ConnectSettleInfo:(0,a.ajax)({url:"/nccloud/arap/arappub/validatecmp.do",async:!1,data:null,success:function(r){r.success&&(C=_("sessionTradeType",s.dataSource),g?C=g:C||(C=t.getPagecode()),e.openTo("/nccloud/resources/cmp/settlementmanagement/settlepublic/list/index.html",{appcode:"360704SM",pagecode:"360704SMP_L01",callbackappcode:e.getSearchParam("c"),callbackpagecode:C,src:0,callback:"/nccloud/resources/arap/salebill/salebill/main/index.html#/card"}))}});break;case o.headButton.LinkInformer:(0,a.ajax)({url:"/nccloud/arap/arappub/linkinformer.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value,billType:this.billType},success:function(r){r.success&&r.data&&(1==r.data.length?e.openTo("/nccloud/resources/cmp/informer/LinkBill/card/index.html",{appcode:"36070AISC",pagecode:"36070AILLINK",status:"browse",id:r.data}):e.openTo("/nccloud/resources/cmp/informer/LinkBill/list/index.html",{appcode:"36070AISC",pagecode:"36070AICLINK",status:"browse",ids:r.data}))}});break;case o.headButton.BillLinkQuery:this.setState({showBillTrack:!0});break;case o.headButton.Refresh:(0,a.ajax)({url:"/nccloud/arap/arappub/cardRefresh.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){e.data?((0,a.toast)({color:"success",title:t.state.json["salebill-000078"]}),h(s.pkname,t.props.getUrlParam("id"),e.data,t.formId,s.dataSource),e.data.head&&t.props.form.setAllFormValue(v({},t.formId,e.data.head[t.formId])),e.data.body&&t.props.cardTable.setTableData(t.tableId,e.data.body[t.tableId])):(t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]})),t.toggleShow()},error:function(e){t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]}),k(s.pkname,t.props.getUrlParam("id"),s.dataSource),t.toggleShow();var r=String(e),o=r.substring(6,r.length);(0,a.toast)({color:"danger",content:o})}});break;case o.bodyButton.AddLine:if(null!=this.props.form.getFormItemsValue(this.formId,"pk_org").value){var A=e.cardTable.getNumberOfRows(this.tableId);(0,a.ajax)({url:"/nccloud/arap/salebill/addline.do",data:this.props.createMasterChildData(this.getPagecode(),this.formId,this.tableId),success:function(e){e.data&&(e.data.head&&t.props.form.setAllFormValue(v({},t.formId,e.data.head[t.formId])),e.data.body&&t.props.cardTable.addRow(t.tableId,A,e.data.body[t.tableId].rows[0].values))}})}break;case o.headButton.BodyVerify:(0,c.BodyVerify)(e,this.formId,this.tableId,"pk_gatherbill","pk_gatheritem",this);break;case o.headButton.WholeVerify:(0,c.WholeVerify)(e,this.formId,this.tableId,"pk_gatherbill",this);break;case o.headButton.ReceiptCheck:if("add"==e.getUrlParam("status"))return void(0,a.toast)({color:"warning",content:this.state.json["salebill-000030"]});(F={}).pk_billid=e.getUrlParam("id"),F.pk_billtype=this.props.form.getFormItemsValue(this.formId,"pk_billtype").value,F.pk_tradetype=this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value,F.pk_org=this.props.form.getFormItemsValue(this.formId,"pk_org").value,(0,i.imageView)(F,"iweb");break;case o.headButton.ReceiptScan:if("add"==e.getUrlParam("status"))return void(0,a.toast)({color:"warning",content:this.state.json["salebill-000031"]});var F,P=this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value,V=e.createMasterChildData(P,s.formId,s.tableId);(F={}).pk_billid=e.getUrlParam("id"),F.pk_billtype=V.head.head.rows[0].values.pk_billtype.value,F.pk_tradetype=V.head.head.rows[0].values.pk_tradetype.value,F.pk_org=V.head.head.rows[0].values.pk_org.value,F.BillType=V.head.head.rows[0].values.pk_tradetype.value,F.BillDate=V.head.head.rows[0].values.creationtime.value,F.Busi_Serial_No=V.head.head.rows[0].values.pk_gatherbill.value,F.pk_billtype=V.head.head.rows[0].values.pk_billtype.value,F.OrgNo=V.head.head.rows[0].values.pk_org.value,F.BillCode=V.head.head.rows[0].values.billno.value,F.OrgName=V.head.head.rows[0].values.pk_org.display,F.Cash=V.head.head.rows[0].values.money.value,(0,i.imageScan)(F,"iweb");break;case o.headButton.AttachManage:if("add"==e.getUrlParam("status")||"copy"==e.getUrlParam("type")||"redBack"==e.getUrlParam("type"))return void(0,a.toast)({color:"warning",content:this.state.json["salebill-000032"]});this.setState({showUploader:!0,target:null});break;case"Print":this.onPrint();break;case o.headButton.Output:this.printOutput();break;case o.headButton.OfficalPrint:this.officalPrintOutput();break;case o.headButton.CancelPrint:this.cancelPrintOutput();break;case o.headButton.ExportData:this.state.forceRender&&this.setState({forceRender:!1});var q=e.getUrlParam("id"),D=[];D.push(q),this.Info.selectedPKS=D,this.props.modal.show("exportFileModal");break;case o.bodyButton.DelLine:(0,l.delLine)(this),this.onSelected();break;case o.bodyButton.CopyLine:(0,l.copyLine)(this,s.dataSource)&&this.setState({buttonfalg:!1},(function(){(0,d.cardBodyControl)(e,t.state.buttonfalg,t)}));break;case o.bodyButton.PasteLine:(0,l.pasteLine)(this);break;case o.bodyButton.PasteToEndLine:(0,l.pasteToEndLine)(this,s.dataSource);break;case o.bodyButton.CancelLine:this.setState({buttonfalg:!0},(function(){(0,d.cardBodyControl)(e,t.state.buttonfalg,t)})),this.onSelected();break;default:var U=(0,n.getTransferInfo)(this,r);U&&(0,a.ajax)({url:"/nccloud/arap/arappub/queryrelatedapp.do",data:{billType:U.src_billtype},success:function(r){if(r){I(U.src_billtype+U.transtypes[0],"transfer.dataSource",U.busitypes);var a=_("sessionTradeType",s.dataSource);g?a=g:a||(a=t.getPagecode());var o="/"+U.src_billtype;e.pushTo(o,{src_appcode:r.data.appcode,src_tradetype:U.transtypes[0],dest_billtype:t.billType,dest_tradetype:a})}}})}},r.refreshBill=w,r.cardBillEdit=T;var a=t(1),o=t(5),l=t(7),n=t(201),i=t(28),s=t(204),d=t(6),u=g(t(245)),c=t(237),p=g(t(24)),f=g(t(202)),m=g(t(184)),b=t(187),y=t(8);function g(e){return e&&e.__esModule?e:{default:e}}function v(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var _=a.cardCache.getDefData,I=a.cardCache.setDefData,h=a.cardCache.updateCache,k=a.cardCache.deleteCacheById;function w(e){e.data?(h(s.pkname,this.props.getUrlParam("id"),e.data,this.formId,s.dataSource),e.data.head&&this.props.form.setAllFormValue(v({},this.formId,e.data.head[this.formId])),e.data.body&&this.props.cardTable.setTableData(this.tableId,e.data.body[this.tableId])):(this.props.form.EmptyAllFormValue(this.formId),this.props.cardTable.setTableData(this.tableId,{rows:[]})),this.toggleShow()}function T(){var e=this;this.props.cardTable.selectAllRows(this.tableId,!1);var r=0,t=this.props.getUrlParam("scene"),o=this.props.form.getFormItemsValue(this.formId,"billno").value,l=!0;if("approve"!=t&&"approvesce"!=t||(r=1,(0,a.ajax)({url:"/nccloud/riart/message/list.do",async:!1,data:{billno:o,isread:"N"},success:function(r){r.data&&r.data.total<1&&((0,a.toast)({content:e.state.json["salebill-000026"],color:"warning"}),l=!1)}})),"zycl"==t&&(r=2,(0,a.ajax)({url:"/nccloud/ssctp/sscbd/SSCTaskHandlePendingNumAction.do",async:!1,data:{billno:o},success:function(r){r.data&&r.data.total<1&&((0,a.toast)({content:e.state.json["salebill-000027"],color:"warning"}),l=!1)}})),l){var n={pk_bill:this.props.getUrlParam("id"),billType:this.billType,sence:r};(0,a.ajax)({url:"/nccloud/arap/arappub/edit.do",data:n,success:function(r){r.success&&(e.props.setUrlParam({status:"edit"}),e.state.buttonfalg=!0,e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.resMetaAfterPkorgEdit(),r.data&&r.data.head&&(e.props.form.setFormItemsDisabled(e.formId,r.data.head),e.headBack=r.data.headBack),r.data&&r.data.body&&(e.props.cardTable.setColEditableByKey(e.tableId,r.data.body,!0),e.bodyBack=r.data.body),e.headBack&&!r.data&&(e.props.form.setFormItemsDisabled(e.formId,e.headBack),e.props.cardTable.setColEditableByKey(e.tableId,e.bodyBack,!1)),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!0}),e.toggleShow())}})}}},27:function(e,r,t){var a=t(39);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};t(4)(a,o);a.locals&&(e.exports=a.locals)},270:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var t=this,a=this;if(1==e.transferTable.getTransformFormAmount(l.leftarea))return void i.default.call(this,e,r);switch(r){case"Cancel":(0,o.promptBox)({color:"warning",title:this.state.json["salebill-000034"],content:this.state.json["salebill-000035"],beSureBtnName:this.state.json["salebill-000036"],cancelBtnName:this.state.json["salebill-000037"],beSureBtnClick:function(){if(t.props.getUrlParam("id")){t.props.setUrlParam({status:"browse"});var r=t.props.getUrlParam("id"),a=c(r,l.dataSource);a&&(t.props.beforeUpdatePage(),t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]}),t.props.form.setAllFormValue(s({},t.formId,a.head[t.formId])),t.props.cardTable.setTableData(t.tableId,a.body[t.tableId]),t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse"),t.props.updatePage(t.formId,t.tableId),t.toggleShow())}else e.transferTable.setTransformFormStatus(l.leftarea,{status:!1,onChange:function(e,r){}})}});break;case"Delete":(0,o.promptBox)({color:"warning",title:this.state.json["salebill-000005"],content:this.state.json["salebill-000006"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["salebill-000004"],cancelBtnName:this.state.json["salebill-000002"],beSureBtnClick:function(){(0,o.ajax)({url:"/nccloud/arap/arappub/delete.do",data:[{pk_bill:t.props.getUrlParam("id"),ts:t.props.form.getFormItemsValue(t.formId,"ts").value,billType:t.billType}],success:function(r){1==e.transferTable.getTransformFormAmount(l.leftarea)?history.go(-1):(u(l.pkname,e.getUrlParam("id"),l.dataSource),e.transferTable.setTransformFormStatus(l.leftarea,{status:!1,onChange:function(e,r){(0,o.toast)({color:"success",content:a.state.json["salebill-000017"]})}}))}})}});break;case"Copy":(0,o.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:e.getUrlParam("id"),ts:this.props.form.getFormItemsValue(this.formId,"ts").value,pageId:this.getPagecode(),billType:this.billType,tradeType:this.getPagecode()},success:function(r){r.data&&(r.data.head&&(t.props.form.EmptyAllFormValue(t.formId),t.props.form.setAllFormValue(s({},t.formId,r.data.head[t.formId]))),r.data.body&&(t.props.cardTable.setTableData(t.tableId,{rows:[]}),t.props.cardTable.setTableData(t.tableId,r.data.body[t.tableId]))),t.props.setUrlParam({status:"add"}),t.props.addUrlParam({operFlag:"copy"}),t.state.buttonfalg=!0,e.resMetaAfterPkorgEdit(),t.props.form.setFormItemsDisabled(t.formId,{pk_org:!1}),t.toggleShow()}});break;default:i.default.call(this,e,r)}},r.setValue=function(e,r){this.props.beforeUpdatePage(),r.data.head&&r.data.head[l.formId]&&e.form.setAllFormValue(s({},l.formId,r.data.head[l.formId]));r.data.body&&r.data.body[l.tableId]&&e.cardTable.updateDataByRowId(this.tableId,r.data.body[this.tableId]);for(var t=this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value,a=this.props.createMasterChildData(this.getPagecode(),this.formId,this.tableId),o=[],n=1*this.props.cardTable.getNumberOfRows(this.tableId),i=0;i<n;i++)o.push(this.props.cardTable.getValByKeyAndIndex(this.tableId,i,"top_itemid").value);e.transferTable.savePk(e.getUrlParam("dataSource"),o),"add"==e.getUrlParam("status")?d(t,a,l.formId,l.dataSource):p(l.pkname,t,a,l.formId,l.dataSource);this.props.updatePage(this.formId,this.tableId),this.props.transferTable.setTransformFormStatus(l.leftarea,{status:!0})};var a,o=t(1),l=t(204),n=t(269),i=(a=n)&&a.__esModule?a:{default:a};function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}o.cardCache.setDefData,o.cardCache.getDefData;var d=o.cardCache.addCache,u=o.cardCache.deleteCacheById,c=o.cardCache.getCacheById,p=o.cardCache.updateCache},28:function(e,r){e.exports=t},3:function(e,r){e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var t=function(e,r){var t=e[1]||"",a=e[3];if(!a)return t;if(r&&"function"==typeof btoa){var o=(n=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),l=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[t].concat(l).concat([o]).join("\n")}var n;return[t].join("\n")}(r,e);return r[2]?"@media "+r[2]+"{"+t+"}":t})).join("")},r.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},o=0;o<this.length;o++){var l=this[o][0];"number"==typeof l&&(a[l]=!0)}for(o=0;o<e.length;o++){var n=e[o];"number"==typeof n[0]&&a[n[0]]||(t&&!n[2]?n[2]=t:t&&(n[2]="("+n[2]+") and ("+t+")"),r.push(n))}},r}},32:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.currentTypeAfterFormEvents=void 0;var a=t(1);r.currentTypeAfterFormEvents=function(e,r,t){(0,a.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",async:!1,data:{pk_org:r.form.getFormItemsValue(e,"pk_org")?r.form.getFormItemsValue(e,"pk_org").value:null,pk_currtype:r.form.getFormItemsValue(e,"pk_currtype")?r.form.getFormItemsValue(e,"pk_currtype").value:null,ratekey:"rate"},success:function(t){t.success&&r.form.setFormItemsDisabled(e,{rate:!t.data})}})}},33:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bodyAfterEventRenderData=r.headAfterEventRenderData=r.errorDeal=r.renderData=r.formulamsgHint=void 0;var a=t(1),o=t(7);function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}r.formulamsgHint=function(e,r){var t={};t[e.tableId]="cardTable",r.formulamsg&&r.formulamsg instanceof Array&&r.formulamsg.length>0&&e.props.dealFormulamsg(r.formulamsg,t)},r.renderData=function(e,r){r.data&&(r.data.head&&e.props.form.setAllFormValue(l({},e.formId,r.data.head[e.formId])),r.data.body&&e.props.cardTable.updateDataByRowId(e.tableId,r.data.body[e.tableId]))},r.errorDeal=function(e,r,t,o){var l=String(r),n=l.substring(6,l.length);(0,a.toast)({color:"danger",content:n}),o&&"pk_org"==o&&e.props.resMetaAfterPkorgEdit();var i={};i[o]=t,e.props.form.setFormItemsValue(e.formId,i)},r.headAfterEventRenderData=function(e,r){r.data&&(r.data.head&&e.props.form.setAllFormValue(l({},e.formId,r.data.head[e.formId])),r.data.body&&e.props.cardTable.updateDataByRowId(e.tableId,r.data.body[e.tableId]),r.data.body&&(0,o.refreshChildVO2HeadVO)(e.props,e.formId,e.tableId),(0,o.calculateHeadMoney)(e))},r.bodyAfterEventRenderData=function(e,r){r.data&&(r.data.head&&e.props.form.setAllFormValue(l({},e.formId,r.data.head[e.formId])),r.data.body&&(e.props.cardTable.updateDataByRowId(e.tableId,r.data.body[e.tableId]),(0,o.refreshChildVO2HeadVO)(e.props,e.formId,e.tableId)),(0,o.calculateHeadMoney)(e))}},34:function(e,r,t){var a=t(35);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};t(4)(a,o);a.locals&&(e.exports=a.locals)},35:function(e,r,t){(e.exports=t(3)(!1)).push([e.i,"#combinedExaminationModelId {\n  text-align: center;\n}\n#combinedExaminationModelId .u-table-body {\n  overflow-x: hidden !important;\n}\n#combinedExaminationModelId .u-table-body tr td.columnRight {\n  text-align: right;\n}\n#combinedExaminationModelId .u-modal-dialog .u-modal-content .u-modal-body {\n  padding: 0;\n}\n#combinedExaminationModelId .steps-content .content-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: 10px 0;\n  padding: 0 20px;\n}\n#combinedExaminationModelId .steps-content .content-tit .content-tit-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#combinedExaminationModelId .steps-content .content-tit .content-tit-tit .tit-tradetype {\n  padding-right: 20px;\n}\n#combinedExaminationModelId .steps-content .table-area {\n  margin: 0 20px;\n}\n#combinedExaminationModelId .steps-content .u-table-footer {\n  border-bottom: 1px solid #e9e9e9;\n}\n#combinedExaminationModelId .steps-content .u-table-footer .u-table-body {\n  overflow: auto!important;\n  overflow-y: hidden !important;\n}\n#combinedExaminationModelId .steps-content .total-rows .u-table-header .u-table-thead tr th {\n  text-align: center;\n  border-right: 1px solid #d0d0d0;\n}\n#combinedExaminationModelId .selected {\n  background-color: #e4e4e4;\n}\n",""])},36:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e){var r=e.values;Object.keys(r).map((function(e,t){var a=r[e].value,o=(r[e].display,r[e].scale);null==a||""===a?delete r[e]:r[e]={value:a,scale:o}}))},o=function(e){for(var r=e.length,t=function(r){var t=e[r].values;Object.keys(t).map((function(e){var r=t[e].value,a=(t[e].display,t[e].scale);null==r||""===r?delete t[e]:t[e]={value:r,scale:a}}))},a=0;a<r;a++)t(a)};r.dealCardData=function(e,r){var t=JSON.parse(JSON.stringify(r)),l=t.head[e.formId].rows[0],n=t.body[e.tableId].rows;return a(l,t),o(n,t),t}},37:function(e,r,t){var a=t(38);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};t(4)(a,o);a.locals&&(e.exports=a.locals)},38:function(e,r,t){(e.exports=t(3)(!1)).push([e.i,".teadetype-lightapp-component.hide {\n  display: none;\n}\n.teadetype-lightapp-component.show {\n  display: block;\n}\n",""])},39:function(e,r,t){(e.exports=t(3)(!1)).push([e.i,".trade-type .refer-wrapper .u-button {\n  font-size: 13px;\n}\n.light-tabs-header .tabs-config {\n  height: 100%;\n  padding-top: 5px;\n}\n.u-tabs-top .u-tabs-content-animated .u-tabs-tabpane {\n  position: relative;\n  overflow: auto;\n}\n",""])},4:function(e,r,t){var a,o,l={},n=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=a.apply(this,arguments)),o}),i=function(e){var r={};return function(t){return void 0===r[t]&&(r[t]=e.call(this,t)),r[t]}}((function(e){return document.querySelector(e)})),s=null,d=0,u=[],c=t(11);function p(e,r){for(var t=0;t<e.length;t++){var a=e[t],o=l[a.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](a.parts[n]);for(;n<a.parts.length;n++)o.parts.push(v(a.parts[n],r))}else{var i=[];for(n=0;n<a.parts.length;n++)i.push(v(a.parts[n],r));l[a.id]={id:a.id,refs:1,parts:i}}}}function f(e,r){for(var t=[],a={},o=0;o<e.length;o++){var l=e[o],n=r.base?l[0]+r.base:l[0],i={css:l[1],media:l[2],sourceMap:l[3]};a[n]?a[n].parts.push(i):t.push(a[n]={id:n,parts:[i]})}return t}function m(e,r){var t=i(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=u[u.length-1];if("top"===e.insertAt)a?a.nextSibling?t.insertBefore(r,a.nextSibling):t.appendChild(r):t.insertBefore(r,t.firstChild),u.push(r);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");t.appendChild(r)}}function b(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var r=u.indexOf(e);r>=0&&u.splice(r,1)}function y(e){var r=document.createElement("style");return e.attrs.type="text/css",g(r,e.attrs),m(e,r),r}function g(e,r){Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])}))}function v(e,r){var t,a,o,l;if(r.transform&&e.css){if(!(l=r.transform(e.css)))return function(){};e.css=l}if(r.singleton){var n=d++;t=s||(s=y(r)),a=h.bind(null,t,n,!1),o=h.bind(null,t,n,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var r=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",g(r,e.attrs),m(e,r),r}(r),a=w.bind(null,t,r),o=function(){b(t),t.href&&URL.revokeObjectURL(t.href)}):(t=y(r),a=k.bind(null,t),o=function(){b(t)});return a(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;a(e=r)}else o()}}e.exports=function(e,r){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(r=r||{}).attrs="object"==typeof r.attrs?r.attrs:{},r.singleton||(r.singleton=n()),r.insertInto||(r.insertInto="head"),r.insertAt||(r.insertAt="bottom");var t=f(e,r);return p(t,r),function(e){for(var a=[],o=0;o<t.length;o++){var n=t[o];(i=l[n.id]).refs--,a.push(i)}e&&p(f(e,r),r);for(o=0;o<a.length;o++){var i;if(0===(i=a[o]).refs){for(var s=0;s<i.parts.length;s++)i.parts[s]();delete l[i.id]}}}};var _,I=(_=[],function(e,r){return _[e]=r,_.filter(Boolean).join("\n")});function h(e,r,t,a){var o=t?"":a.css;if(e.styleSheet)e.styleSheet.cssText=I(r,o);else{var l=document.createTextNode(o),n=e.childNodes;n[r]&&e.removeChild(n[r]),n.length?e.insertBefore(l,n[r]):e.appendChild(l)}}function k(e,r){var t=r.css,a=r.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}function w(e,r,t){var a=t.css,o=t.sourceMap,l=void 0===r.convertToAbsoluteUrls&&o;(r.convertToAbsoluteUrls||l)&&(a=c(a)),o&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var n=new Blob([a],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(n),i&&URL.revokeObjectURL(i)}},407:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},o=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),l=t(2),n=T(l),i=t(1),s=t(408),d=t(270),u=t(6),c=t(238),p=t(36),f=T(t(25)),m=t(204),b=t(16),y=t(20),g=t(7),v=t(9),_=t(221),I=t(8),h=T(t(239)),k=T(t(240)),w=T(t(26));function T(e){return e&&e.__esModule?e:{default:e}}function C(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t(27);var R=i.base.NCDiv,S=i.base.NCButton,B=(i.base.NCBackBtn,i.base.NCAffix),x=i.high.BillTrack,E=i.high.NCUploader,A=i.high.PrintOutput,F=i.high.Inspection,P=i.high.ApproveDetail,V=i.cardCache.setDefData,q=i.cardCache.getDefData,D=i.cardCache.addCache,U=i.cardCache.getNextId,j=i.cardCache.deleteCacheById,O=i.cardCache.getCacheById,G=i.cardCache.updateCache,L=i.cardCache.getCurrentLastId,N=i.high.ExcelImport,M=i.high.ApprovalTrans,K=function(e){function r(e){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.getPagecode=function(){var e=t.props.getUrlParam("pagecode");return e||(e=t.props.getSearchParam("p")),"20060GBM_CARD_LINK"!=e||t.props.getUrlParam("scene")||t.props.ViewModel.setData("nccloud-router-params",{scene:"linksce"}),e},t.getExportPageCode=function(){var e="20060GBM_CARD";return t.props.getUrlParam("scene")&&(e="20060GBM_CARD_LINK"),"20060GBM_CARD_LINK"!=e||t.props.getUrlParam("scene")||t.props.ViewModel.setData("nccloud-router-params",{scene:"linksce"}),e},t.initShow=function(){if("transfer"===t.props.getUrlParam("type")&&"browse"!=t.props.getUrlParam("status")){var e=t.props.transferTable.getTransferTableSelectedId();t.getTransferValue(e)}else if(t.props.getUrlParam("scene")&&"fip"==t.props.getUrlParam("scene"))(0,h.default)(t.props,m.linkPageId,"pk_gatherbill",t.formId,t.tableId,m.pkname,m.dataSource,t);else if(t.props.getUrlParam("scene")&&"linksce"==t.props.getUrlParam("scene")&&"ftsLinkArap"==t.props.getUrlParam("flag"))(0,k.default)(t.props,t.billType,"pk_gatherbill",t.formId,t.tableId,m.pkname,m.dataSource,t);else if("copy"===t.props.getUrlParam("type"))(0,i.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:t.props.getUrlParam("id"),pageId:t.getPagecode(),billType:t.billType,type:1,tradeType:t.getPagecode()},success:function(e){t.props.beforeUpdatePage(),e.data&&(e.data.head&&t.props.form.setAllFormValue(C({},t.formId,e.data.head[t.formId])),e.data.body&&t.props.cardTable.setTableData(t.tableId,e.data.body[t.tableId])),t.state.buttonfalg=!0,t.props.cardTable.setStatus(t.tableId,"edit"),t.props.form.setFormStatus(t.formId,"edit"),t.props.updatePage(t.formId,t.tableId),t.toggleShow()},error:function(e){t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]}),t.props.setUrlParam({status:"browse"}),t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse"),t.toggleShow();var r=String(e),a=r.substring(6,r.length);(0,i.toast)({color:"danger",content:a})}});else if("edit"==t.props.getUrlParam("status")||"browse"==t.props.getUrlParam("status")){var r=t.props.getUrlParam("id");if(!r)return void t.toggleShow();(0,i.ajax)({url:"/nccloud/arap/salebill/cardquery.do",data:{pk_bill:r},success:function(e){t.props.beforeUpdatePage(),e.data?(e.data.head&&t.props.form.setAllFormValue(C({},t.formId,e.data.head[t.formId])),e.data.body&&t.props.cardTable.setTableData(t.tableId,e.data.body[t.tableId])):(t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]})),"edit"==t.props.getUrlParam("status")?(0,_.billEditProperties)(t,t.props.getUrlParam("id"),t.billType,t.props.getSearchParam("c")):t.state.buttonfalg=null,t.props.getUrlParam("scene")||t.props.setUrlParam({pagecode:e.data.head[t.formId].rows[0].values.pk_tradetype.value});var r=t.props.getUrlParam("status");t.props.cardTable.setStatus(t.tableId,r),t.props.form.setFormStatus(t.formId,r),t.props.updatePage(t.formId,t.tableId),G(m.pkname,t.props.getUrlParam("id"),e.data,t.formId,m.dataSource),t.toggleShow()}})}else"add"==t.props.getUrlParam("status")&&"settlement"==t.props.getUrlParam("src")?(t.props.getUrlParam("pk_settle")||(0,i.toast)({color:"danger",content:t.state.json["salebill-000040"]}),(0,i.ajax)({url:"/nccloud/arap/arappub/associatesettinfo.do",data:{pk_bill:t.props.getUrlParam("pk_settle"),pageId:t.getPagecode(),billType:t.billType},success:function(e){e.data&&(e.data.head&&(t.props.form.EmptyAllFormValue(t.formId),t.props.form.setAllFormValue(C({},t.formId,e.data.head[t.formId]))),e.data.body&&(t.props.cardTable.setTableData(t.tableId,{rows:[]}),t.props.cardTable.setTableData(t.tableId,e.data.body[t.tableId]))),t.props.beforeUpdatePage(),t.state.buttonfalg=!0,t.props.cardTable.setStatus(t.tableId,"edit"),t.props.form.setFormStatus(t.formId,"edit"),(0,_.dealCommisionPayField)(t.props,t.formId,t.tableId),t.props.updatePage(t.formId,t.tableId),t.toggleShow()}})):"add"==t.props.getUrlParam("status")&&t.props.getUrlParam("srcbilltype")?(t.props.beforeUpdatePage(),t.data.head&&t.props.form.setAllFormValue(C({},t.formId,t.data.head[t.formId])),t.data.body&&t.props.cardTable.setTableData(t.tableId,t.data.body[t.tableId]),t.state.buttonfalg=!0,t.props.cardTable.setStatus(t.tableId,"edit"),t.props.form.setFormStatus(t.formId,"edit"),(0,_.fctToArapFieldEditable)(t.props,t.formId,t.tableId),t.props.updatePage(t.formId,t.tableId),t.toggleShow()):"add"==t.props.getUrlParam("status")?t.initAdd():t.toggleShow()},t.getTransferValue=function(e){if(e){var r={data:e,pageId:t.getPagecode(),destTradetype:t.getPagecode(),srcBilltype:t.props.getUrlParam("srcBilltype")};(0,i.ajax)({url:"/nccloud/arap/arappub/transfer.do",data:r,success:function(e){e&&e.data&&t.props.transferTable.setTransferListValue(t.leftarea,e.data),t.toggleShow()}})}else t.props.transferTable.setTransferListValue(t.leftarea,[])},t.synTransferData=function(){if(1!=t.props.transferTable.getTransformFormAmount(t.leftarea)){var e=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId);t.props.transferTable.setTransferListValueByIndex(t.leftarea,e,t.transferIndex)}},t.initAdd=function(e){e||(e=!1),(0,i.ajax)({url:"/nccloud/arap/salebill/add.do",data:{isClearPKorg:e,appcode:t.props.getSearchParam("c"),pageId:t.getPagecode(),tradeType:t.getPagecode()},success:function(e){e.data&&(t.props.beforeUpdatePage(),t.props.form.setAllFormValue(C({},t.formId,e.data.head[t.formId])),t.props.cardTable.setTableData(t.tableId,e.data.body[t.tableId]),e.data.head[t.formId].rows[0].values.pk_org.value?(t.props.resMetaAfterPkorgEdit(),t.props.form.setFormItemsDisabled(t.formId,{pk_org:!1}),t.state.buttonfalg=!0):(t.state.buttonfalg=null,t.props.getUrlParam("type")||t.props.getUrlParam("srcbilltype")||t.props.getUrlParam("src")||t.props.initMetaByPkorg()),t.props.form.setFormStatus(t.formId,"edit"),t.props.cardTable.setStatus(t.tableId,"edit"),t.props.updatePage(t.formId,t.tableId));t.toggleShow()},error:function(e){var r=String(e);"browse"!=t.props.getUrlParam("status")&&(t.props.setUrlParam({status:"browse"}),t.props.form.setFormStatus(t.formId,"browse"),t.props.cardTable.setStatus(t.tableId,"browse"),t.toggleShow());var a=r.substring(6,r.length);(0,i.toast)({color:"danger",content:a})}})},t.toggleShow=function(e){var r=t.props.getUrlParam("status");r||(r="browse");var a={};if(e)a=e.rows[0].values;else{var o=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId).head[t.formId];o&&(a=o.rows[0].values)}"browse"!=r?(t.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),t.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1}),t.refs.tradetypeBtn&&!(0,I.getContext)(I.loginContextKeys.transtype)&&t.refs.tradetypeBtn.setVisible(!1)):(a.pk_tradetype&&a.pk_tradetype.value?t.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0):t.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),t.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0}),t.refs.tradetypeBtn&&!(0,I.getContext)(I.loginContextKeys.transtype)&&t.refs.tradetypeBtn.setVisible(!0));for(var l=[],n=[],i=0;i<t.Info.allButtonsKey.length;i++){(0,u.buttonVisible)(r,a,t.Info.allButtonsKey[i],"card",t)?l.push(t.Info.allButtonsKey[i]):n.push(t.Info.allButtonsKey[i])}"browse"==r?(0,u.initCardBodybrowseControl)(t):(0,u.initCardBodyEditControl)(t.props,a.pk_org?a.pk_org.value:null,t),u.dealTranferBtns.call(t,n),t.props.button.setButtonVisible(l,!0),t.props.button.setButtonVisible(n,!1),t.props.getUrlParam("scene")&&"linksce"!=t.props.getUrlParam("scene")&&"fip"!=t.props.getUrlParam("scene")&&t.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1})},t.onSelected=function(){(0,u.onSelectedCardBodyEditControl)(t)},t.delConfirm=function(e,r){(0,i.ajax)({url:"/nccloud/arap/arappub/delete.do",data:[{pk_bill:t.props.getUrlParam("id"),ts:t.props.form.getFormItemsValue(t.formId,"ts").value,billType:t.billType,extype:e,flag:r}],success:function(e){if(e.success){if("1"==e.data.exType)return t.Info.tipContent=e.data.message,t.Info.exType="1",t.Info.flag=!0,void t.props.modal.show("deleteCheck");var r=t.props.getUrlParam("id");j(m.pkname,r,m.dataSource);var a=U(r,m.dataSource);a?("transfer"===t.props.getUrlParam("type")&&t.props.setUrlParam({status:"browse"}),t.props.setUrlParam({id:a}),t.initShow()):(t.props.setUrlParam({id:null}),t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]}),t.toggleShow()),t.clearExType()}}})},t.cancel=function(){t.props.getUrlParam("type")&&"transfer"!=t.props.getUrlParam("type")&&t.props.delUrlParam("type");var e=t.props.form.getFormItemsValue(t.formId,"pk_org");if(e&&e.value&&""!=e.value||t.props.resMetaAfterPkorgEdit(),t.props.beforeUpdatePage(),t.state.buttonfalg=null,"edit"===t.props.getUrlParam("status")){t.props.setUrlParam({status:"browse"});var r=t.props.getUrlParam("id"),a=O(r,m.dataSource);a?(t.props.form.setAllFormValue(C({},t.formId,a.head[t.formId])),t.props.cardTable.setTableData(t.tableId,a.body[t.tableId]),t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse"),t.props.updatePage(t.formId,t.tableId),t.toggleShow()):t.initShow()}else if("add"===t.props.getUrlParam("status")){var o=t.props.getUrlParam("id");if(o||(o=L(m.dataSource)),null!=o&&null!=o&""!=o){t.props.setUrlParam({status:"browse",id:o});var l=O(o,m.dataSource);if(l){t.props.form.setAllFormValue(C({},t.formId,l.head[t.formId])),t.props.cardTable.setTableData(t.tableId,l.body[t.tableId]);var n=l.head[t.formId].rows[0].values.pk_tradetype.value;t.getPagecode()==n||t.props.getUrlParam("scene")||(t.props.setUrlParam({pagecode:n}),s.initTemplate.call(t,t.props)),t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse"),t.props.updatePage(t.formId,t.tableId),t.toggleShow()}else t.initShow()}else t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]}),t.props.setUrlParam({status:"browse"}),t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse"),t.props.updatePage(t.formId,t.tableId),t.toggleShow()}},t.pause=function(e){var r=t.props.cardTable.getCheckedRows(t.tableId);if(0!=r.length){var a=[];r.forEach((function(e){a.push(e.data.values.pk_gatheritem.value)}));var o={pk_items:a,pk_bill:t.props.getUrlParam("id"),ts:t.props.form.getFormItemsValue(t.formId,"ts").value,pageId:t.getPagecode(),billType:t.billType};(0,i.ajax)({url:e,data:o,success:function(e){if(e.data.message?(0,i.toast)({duration:"infinity",color:e.data.PopupWindowStyle,content:e.data.message}):(0,i.toast)({color:"success",content:t.state.json["salebill-000038"]}),e.data.billCard){e.data.billCard.head&&t.props.form.setAllFormValue(C({},t.formId,e.data.billCard.head[t.formId])),e.data.billCard.body&&t.props.cardTable.setTableData(t.tableId,e.data.billCard.body[t.tableId]);var r=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId);G(m.pkname,t.props.getUrlParam("id"),r,t.formId,m.dataSource)}t.onSelected()}})}else(0,i.toast)({color:"warning",content:t.state.json["salebill-000028"]})},t.saveBill=function(e,r,a,o){if("/nccloud/arap/arappub/tempsave.do"!=e){var l=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId);if((0,g.delBlankLine)(t,t.tableId,t.billType,l,o),!t.props.form.isCheckNow(t.formId))return;if(!t.props.cardTable.checkTableRequired(t.tableId))return}var n=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId),s={cardData:(0,p.dealCardData)(t,n),uiState:t.props.getUrlParam("status"),extype:r,flag:a,pk_settle:t.props.getUrlParam("pk_settle")};t.props.validateToSave(s.cardData,(function(){(0,i.ajax)({url:e,data:s,success:function(r){var a=null,o=null;if(r.success){if("1"==r.data.exType)return t.Info.tipContent=r.data.message,t.Info.pk_bill=r.data.pk_bill,t.Info.ts=r.data.ts,t.Info.billCard=r.data.billCard,t.Info.tipUrl=null==r.data.pk_bill?e:"/nccloud/arap/arappub/commit.do",t.Info.exType="1",t.Info.flag=!0,void(null==r.data.pk_bill?t.props.modal.show("saveCheck"):t.commitAndUncommit());if("2"==r.data.exType)return t.Info.tipContent=r.data.message,t.Info.pk_bill=r.data.pk_bill,t.Info.ts=r.data.ts,t.Info.billCard=r.data.billCard,t.Info.tipUrl=null==r.data.pk_bill?e:"/nccloud/arap/arappub/commit.do",t.Info.exType="2",t.Info.flag=!0,void(null==r.data.pk_bill?t.props.modal.show("saveCheck"):t.commitAndUncommit());if("3"==r.data.exType)r.data.message;else if(r.data.assignInfo&&r.data.assignInfo.workflow&&("approveflow"==r.data.assignInfo.workflow||"workflow"==r.data.assignInfo.workflow))return t.Info.compositedata=r.data.assignInfo,t.Info.pk_bill=r.data.pk_bill,t.Info.ts=r.data.ts,t.Info.exType=r.data.exType,t.Info.billCard=r.data.billCard,t.Info.tipUrl="/nccloud/arap/arappub/commit.do",void t.setState({compositedisplay:!0});if(r.data){if("transfer"==t.props.getUrlParam("type"))d.setValue.call(t,t.props,r);else{t.props.beforeUpdatePage(),r.data.head&&r.data.head[t.formId]&&(t.props.form.setAllFormValue(C({},t.formId,r.data.head[t.formId])),a=r.data.head[t.formId].rows[0].values.pk_gatherbill.value,o=r.data.head[t.formId].rows[0].values.pk_tradetype.value),r.data.body&&r.data.body[t.tableId]&&t.props.cardTable.updateDataByRowId(t.tableId,r.data.body[t.tableId]),t.state.buttonfalg=null,t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse"),t.props.updatePage(t.formId,t.tableId);var l=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId);"add"==t.props.getUrlParam("status")?D(a,l,t.formId,m.dataSource):G(m.pkname,a,l,t.formId,m.dataSource),t.props.getUrlParam("type")&&t.props.delUrlParam("type"),t.props.getUrlParam("scene")?t.props.setUrlParam({status:"browse",id:a}):t.props.setUrlParam({status:"browse",id:a,pagecode:o})}r.data.message?(0,i.toast)({color:"danger",content:JSON.stringify(r.data.message)}):(0,i.toast)({color:"success",content:t.state.json["salebill-000008"]}),t.clearExType()}}t.Info.isModelSave&&(t.Info.isModelSave=!1,t.props.cardTable.closeModel(t.tableId)),"transfer"!=t.props.getUrlParam("type")&&t.toggleShow()}})}),{table1:"cardTable"},"card")},t.clearExType=function(){t.Info.tipContent="",t.Info.pk_bill=null,t.Info.ts=null,t.Info.billCard=null,t.Info.tipUrl=null,t.Info.exType=null,t.Info.flag=!1,t.Info.compositedata=null},t.cancelClick=function(){if(null!=t.Info.pk_bill){t.props.getUrlParam("type")&&"transfer"!=t.props.getUrlParam("type")&&t.props.delUrlParam("type"),t.props.beforeUpdatePage(),t.Info.billCard.head&&t.props.form.setAllFormValue(C({},t.formId,t.Info.billCard.head[t.formId])),t.Info.billCard.body&&t.props.cardTable.updateDataByRowId(t.tableId,t.Info.billCard.body[t.tableId]),t.props.getUrlParam("scene")?t.props.setUrlParam({status:"browse",id:null==t.Info.pk_bill?t.props.getUrlParam("id"):t.Info.pk_bill}):t.props.setUrlParam({status:"browse",id:null==t.Info.pk_bill?t.props.getUrlParam("id"):t.Info.pk_bill,pagecode:t.Info.billCard.head[t.formId].rows[0].values.pk_tradetype.value});var e=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId);D(m.pkname,e,t.formId,m.dataSource),t.state.buttonfalg=null,t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse"),t.props.updatePage(t.formId,t.tableId),t.toggleShow()}t.state.compositedisplay&&t.setState({compositedisplay:!1}),t.clearExType()},t.commitAndUncommit=function(){var e=t.Info.tipUrl,r=t.Info.exType,a=t.Info.flag;(0,i.ajax)({url:e,data:{pk_bill:null==t.Info.pk_bill?t.props.getUrlParam("id"):t.Info.pk_bill,ts:null==t.Info.ts?t.props.form.getFormItemsValue(t.formId,"ts").value:t.Info.ts,pageId:t.getPagecode(),billType:t.billType,type:2,extype:r,flag:a,assignObj:t.Info.compositedata},success:function(r){if("1"==r.data.exType){var a=r.data.message;return t.Info.tipContent=a,t.Info.exType="1",t.Info.flag=!0,void t.props.modal.show("commitAndUncommit")}if(r.data.workflow&&("approveflow"==r.data.workflow||"workflow"==r.data.workflow))return t.Info.compositedata=r.data,t.Info.tipUrl=e,void t.setState({compositedisplay:!0});if(r.success){r.data.head&&t.props.form.setAllFormValue(C({},t.formId,r.data.head[t.formId])),r.data.body&&t.props.cardTable.setTableData(t.tableId,r.data.body[t.tableId]);var o=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId);null==t.Info.pk_bill?G(m.pkname,t.props.getUrlParam("id"),o,t.formId,m.dataSource):(t.props.getUrlParam("type")&&"transfer"!=t.props.getUrlParam("type")&&t.props.delUrlParam("type"),D(m.pkname,o,t.formId,m.dataSource)),"browse"!=t.props.getUrlParam("status")&&(t.props.cardTable.setStatus(t.tableId,"browse"),t.props.form.setFormStatus(t.formId,"browse")),t.props.setUrlParam({status:"browse",id:null==t.Info.pk_bill?t.props.getUrlParam("id"):t.Info.pk_bill}),t.state.compositedisplay&&t.setState({compositedisplay:!1}),t.clearExType(),t.state.buttonfalg=null,t.toggleShow(),(0,i.toast)({color:"success",content:t.state.json["salebill-000038"]})}}})},t.getTableHead=function(e){return n.default.createElement("span",null,t.props.button.createButtonApp({area:"card_body",buttonLimit:3,onButtonClick:s.buttonClick.bind(t),popContainer:document.querySelector(".header-button-area")}))},t.onHideUploader=function(){t.setState({showUploader:!1})},t.closeApprove=function(){t.setState({showApproveDetail:!1})},t.handleCombined=function(){t.setState({isCombinedExaminationModelShow:!t.state.isCombinedExaminationModelShow})},t.onPrint=function(){t.printData.oids=[t.props.getUrlParam("id")],t.printData.nodekey=t.props.form.getFormItemsValue(t.formId,"pk_tradetype").value,(0,i.print)("pdf","/nccloud/arap/arappub/print.do",t.printData)},t.officalPrintOutput=function(){t.printData.oids=[t.props.getUrlParam("id")],t.printData.nodekey=t.props.form.getFormItemsValue(t.formId,"pk_tradetype").value,(0,i.ajax)({url:"/nccloud/arap/arappub/officialPrint.do",data:t.printData,async:!1,success:function(e){e.success&&(0,i.print)("pdf","/nccloud/arap/arappub/print.do",t.printData,!1)}})},t.cancelPrintOutput=function(){t.printData.oids=[t.props.getUrlParam("id")],t.printData.nodekey=t.props.form.getFormItemsValue(t.formId,"pk_tradetype").value,(0,i.ajax)({url:"/nccloud/arap/arappub/cancelPrint.do",data:t.printData,success:function(e){e.success&&(0,i.toast)({color:"success",content:e.data})}})},t.printOutput=function(){t.outputData.oids=[t.props.getUrlParam("id")],t.outputData.nodekey=t.props.form.getFormItemsValue(t.formId,"pk_tradetype").value,t.refs.printOutput.open()},t.backList=function(){"linksce"==t.props.getUrlParam("scene")||"fip"==t.props.getUrlParam("scene")?t.props.pushTo("/list",{pagecode:"20060GBM_LIST_LINK",scene:"linksce"}):t.props.pushTo("/list",{pagecode:"20060GBM_LIST"})},t.backTransfer=function(){var e=t.props.getUrlParam("dataSource"),r=q("src_appcode",e),a=(q("src_pagecode",e),"/"+t.props.getUrlParam("srcBilltype"));t.props.pushTo(a,{src_appcode:r,dest_billtype:t.billType,dest_tradetype:t.getPagecode()})},t.saveSureBtnClick=function(){var e=t.Info.tipUrl,r=t.Info.exType,a=t.Info.flag;t.saveBill(e,r,a)},t.deleteBillSureBtnClick=function(){var e=t.Info.exType,r=t.Info.flag;t.delConfirm(e,r)},t.modelSaveClick=function(e,r){t.Info.isModelSave=!0;t.saveBill("/nccloud/arap/arappub/save.do",null,null,r)},t.modelDelRow=function(e,r){(0,g.calculateHeadMoney)(t);var a=t.props.cardTable.getVisibleRows(t.tableId);a&&0!=a.length||t.props.cardTable.closeModel(t.tableId)},t.modelAddRow=function(e,r,a){if(null!=t.props.form.getFormItemsValue(t.formId,"pk_org").value){var o=t.props.cardTable.getNumberOfRows(t.tableId);(0,i.ajax)({url:"/nccloud/arap/salebill/addline.do",data:t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId),success:function(e){e.data&&(e.data.head&&t.props.form.setAllFormValue(C({},t.formId,e.data.head[t.formId])),e.data.body&&t.props.cardTable.updateDataByIndexs(t.tableId,[{index:o-1,data:{status:2,values:e.data.body[t.tableId].rows[0].values}}]))}})}else(0,i.toast)({color:"warning",content:t.state.json["salebill-000043"]})},t.switchTemplate=function(){var e=t.getPagecode(),r=t.props.getSearchParam("c")?t.props.getSearchParam("c"):t.props.getUrlParam("c"),a=q("sessionTradeType",m.dataSource);a||(a=m.tradeType),(0,i.ajax)({url:"/nccloud/arap/arappub/queryallbtns.do",data:{appcode:r,pagecode:e,tradetype:a,billtype:m.billType},success:function(e){var r=e.data;if(r.button){var a=r.button;t.Info.pullBillInfoVOAry=r.pullbillinfo,(0,u.getButtonsKey)(a,t.Info.allButtonsKey),t.props.button.setButtons(a)}}})},t.state={isCombinedExaminationModelShow:!1,isTbbLinkshow:!1,showBillTrack:!1,showUploader:!1,target:null,showApproveDetail:!1,buttonfalg:null,compositedisplay:!1,hideAdd:!1,forceRender:!0,json:{}},t.printData={billtype:m.billType,appcode:t.props.getSearchParam("c"),nodekey:e.getSearchParam("p"),oids:[t.props.getUrlParam("id")],userjson:m.billType},t.outputData={billtype:m.billType,appcode:t.props.getSearchParam("c"),funcode:t.props.getSearchParam("c"),nodekey:e.getSearchParam("p"),oids:[t.props.getUrlParam("id")],userjson:m.billType,outputType:"output"},t.data=null,t.formId=m.formId,t.tableId=m.tableId,t.billType=m.billType,t.leftarea=m.leftarea,t.headId=m.headId,t.transferIndex=0,t.dataSource=m.dataSource,t.pkname=m.pkname,t.Info={allButtonsKey:[],combinedExaminationData:[],tbbLinkSourceData:null,selectedPKS:[],tipContent:null,tipUrl:null,exType:null,flag:!1,pk_bill:null,ts:null,billCard:null,compositedata:null,isModelSave:!1},t}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,e),o(r,[{key:"componentWillMount",value:function(){var e=this;"20062002"==this.props.getSearchParam("c")&&"approvesce"!=this.props.getSearchParam("scene")&&(0,c.updatePandC)(this);(0,i.getMultiLang)({moduleId:["salebill","public"],domainName:"arap",currentLocale:"simpchn",callback:function(r){e.setState({json:r},(function(){s.initTemplate.call(e,e.props,e.initShow),window.onbeforeunload=function(){var r=e.props.getUrlParam("status");if("edit"==r||"add"==r)return""}}))}})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){if(this.props.getUrlParam("scene")){var e=this.props.getUrlParam("scene");V("scene",m.dataSource,e);var r=this.getPagecode();V("pagecode",m.dataSource,r)}}},{key:"tbbLinkcancel",value:function(){this.setState({isTbbLinkshow:!1})}},{key:"onSubmit",value:function(){}},{key:"render",value:function(){var e=this,r=this.props,t=r.cardTable,o=r.form,l=(r.button,r.modal),i=r.cardPagination,d=r.transferTable,u=this.props.BillHeadInfo.createBillHeadInfo,c=this.props.button.getButtons(),p=o.createForm,g=t.createCardTable,_=i.createCardPagination,h=l.createModal,k="transfer"==this.props.getUrlParam("type"),T=d.createTransferList,V=this.state,D=V.showUploader,U=V.target;return k?n.default.createElement("div",{id:"transferCard",className:"nc-bill-transferList"},n.default.createElement(B,{offsetTop:0},n.default.createElement(R,{areaCode:R.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},u({title:this.props.getSearchParam("n")?this.props.getSearchParam("n"):this.state.json["salebill-000048"],backBtnClick:function(){e.backTransfer()}})),n.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"card_head",buttonLimit:3,onButtonClick:s.transferButtonClick.bind(this),popContainer:document.querySelector(".header-button-area")}),"bz"==q("scene",m.dataSource)?null:n.default.createElement(S,{fieldid:"canceltransfer",colors:"default",onClick:this.backList},this.state.json["salebill-000049"])))),n.default.createElement("div",{className:"nc-bill-transferList-content"},T({headcode:this.formId,bodycode:this.tableId,transferListId:this.leftarea,onTransferItemSelected:function(r,t,a){e.transferIndex=a;var o=t?"browse":"edit";if("browse"==o){var l=r.head[e.formId].rows[0].values.pk_gatherbill.value;r=null==l?r:O(l,m.dataSource),e.props.setUrlParam({status:"browse"}),e.props.setUrlParam({id:l})}else e.props.setUrlParam({status:"add"}),e.props.delUrlParam("id"),e.state.buttonfalg=!0;e.toggleShow(r.head[e.formId]),e.props.beforeUpdatePage(),e.props.form.setFormStatus(e.formId,o),e.props.cardTable.setStatus(e.tableId,o),e.props.form.setAllFormValue(C({},e.formId,r.head[e.formId])),e.props.cardTable.setTableData(e.tableId,r.body[e.tableId]),e.props.updatePage(e.formId,e.tableId)}}),n.default.createElement("div",{className:"transferList-content-right nc-bill-card"},n.default.createElement("div",{className:"nc-bill-form-area"},p(this.formId,{fieldid:"salebill",onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:y.formBeforeEvent.bind(this)})),n.default.createElement("div",{className:"nc-bill-table-area"},g(this.tableId,{fieldid:"salebill",tableHead:this.getTableHead.bind(this,c),modelSave:this.modelSaveClick.bind(this),onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:b.bodyBeforeEvent.bind(this),modelAddRow:this.modelAddRow.bind(this),modelDelRow:this.modelDelRow.bind(this),onSelected:this.onSelected.bind(this),onSelectedAll:this.onSelected.bind(this),showCheck:!0,showIndex:!0,hideAdd:!0,isAddRow:!1,adaptionHeight:!0})),n.default.createElement(f.default,{show:this.state.isCombinedExaminationModelShow,combinedExaminationData:this.Info.combinedExaminationData,pk_tradetypeid:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").display:null,billno:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,handleModel:this.handleCombined.bind(this)}),n.default.createElement(x,{show:this.state.showBillTrack,close:function(){e.setState({showBillTrack:!1})},pk:this.props.getUrlParam("id"),type:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null}),D&&n.default.createElement(E,{billId:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill")?this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value:null,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,target:U,placement:"bottom",onHide:this.onHideUploader,close:function(){return e.closeModal()},customize:{pk_billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null},customInterface:{queryLeftTree:"/nccloud/arap/arappub/arapFileLeftTreeQuery.do",queryAttachments:"/nccloud/arap/arappub/transformBillEnclosureQuery.do"}}),n.default.createElement(A,{ref:"printOutput",url:"/nccloud/arap/arappub/outPut.do",data:this.outputData,callback:this.onSubmit}),h("importModal",{noFooter:!0,className:"import-modal",hasBackDrop:!1}),n.default.createElement(N,a({},Object.assign(this.props),{moduleName:"arap",billType:m.billType,pagecode:this.getExportPageCode(),appcode:this.props.getSearchParam("c"),selectedPKS:this.Info.selectedPKS,exportTreeUrl:"/nccloud/arap/salebill/gatherbillexport.do",forceRender:this.state.forceRender})),n.default.createElement(P,{show:this.state.showApproveDetail,close:this.closeApprove,billtype:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,billid:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill")?this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value:null}),n.default.createElement(F,{show:this.state.isTbbLinkshow,sourceData:this.Info.tbbLinkSourceData,cancel:this.tbbLinkcancel.bind(this)}),n.default.createElement("div",null,h("saveCheck",{title:this.state.json["salebill-000044"],content:this.Info.tipContent,beSureBtnClick:this.saveSureBtnClick.bind(this)}),h("deleteCheck",{title:this.state.json["salebill-000045"],content:this.Info.tipContent,beSureBtnClick:this.deleteBillSureBtnClick.bind(this)}),h("commitAndUncommit",{title:this.state.json["salebill-000044"],content:this.Info.tipContent,beSureBtnClick:this.commitAndUncommit.bind(this),cancelBtnClick:this.cancelClick.bind(this)}),this.state.compositedisplay?n.default.createElement(M,{title:this.state.json["salebill-000047"],data:this.Info.compositedata,display:this.state.compositedisplay,getResult:this.commitAndUncommit.bind(this),cancel:this.cancelClick.bind(this)}):null)))):n.default.createElement("div",{className:"nc-bill-card"},n.default.createElement("div",{className:"nc-bill-top-area"},n.default.createElement(B,{offsetTop:0},n.default.createElement(R,{areaCode:R.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},u({title:this.props.getSearchParam("n")?this.props.getSearchParam("n"):this.state.json["salebill-000048"],backBtnClick:function(){e.backList()}})),n.default.createElement("div",{className:"header-button-area"},this.props.getUrlParam("scene")||(0,I.getContext)(I.loginContextKeys.transtype)?null:n.default.createElement("div",{className:"trade-type"},(0,w.default)({ref:"tradetypeBtn",billtype:"F2",dataSource:m.dataSource,switchTemplate:this.switchTemplate.bind(this)})),this.props.button.createButtonApp({area:"card_head",buttonLimit:3,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),"linksce"!=this.props.getUrlParam("scene")&&"fip"!=this.props.getUrlParam("scene")&&this.props.getUrlParam("scene")?null:n.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},_({handlePageInfoChange:s.pageInfoClick.bind(this),dataSource:m.dataSource})))),n.default.createElement("div",{className:"nc-bill-form-area"},p(this.formId,{fieldid:"salebill",onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:y.formBeforeEvent.bind(this)}))),n.default.createElement("div",{className:"nc-bill-bottom-area"},n.default.createElement("div",{className:"nc-bill-table-area"},g(this.tableId,{fieldid:"salebill",tableHead:this.getTableHead.bind(this,c),modelSave:this.modelSaveClick.bind(this),onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:b.bodyBeforeEvent.bind(this),modelAddRow:this.modelAddRow.bind(this),modelDelRow:this.modelDelRow.bind(this),sideRowChange:function(r){(0,v.modifyChecknoItemtype)(e.props,e.tableId,r.values.pk_org.value,r.values.checktype.value)},onSelected:this.onSelected.bind(this),onSelectedAll:this.onSelected.bind(this),showCheck:!0,showIndex:!0,hideAdd:this.state.hideAdd,adaptionHeight:!0}))),n.default.createElement(f.default,{show:this.state.isCombinedExaminationModelShow,combinedExaminationData:this.Info.combinedExaminationData,pk_tradetypeid:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").display:null,billno:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,handleModel:this.handleCombined.bind(this)}),n.default.createElement(P,{show:this.state.showApproveDetail,close:this.closeApprove,billtype:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,billid:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill")?this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value:null}),n.default.createElement(x,{show:this.state.showBillTrack,close:function(){e.setState({showBillTrack:!1})},pk:this.props.getUrlParam("id"),type:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null}),D&&n.default.createElement(E,{billId:this.props.form.getFormItemsValue(this.formId,"pk_gatherbill")?this.props.form.getFormItemsValue(this.formId,"pk_gatherbill").value:null,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,target:U,placement:"bottom",onHide:this.onHideUploader,close:function(){return e.closeModal()},customize:{pk_billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null},customInterface:{queryLeftTree:"/nccloud/arap/arappub/arapFileLeftTreeQuery.do",queryAttachments:"/nccloud/arap/arappub/transformBillEnclosureQuery.do"}}),n.default.createElement(A,{ref:"printOutput",url:"/nccloud/arap/arappub/outPut.do",data:this.outputData,callback:this.onSubmit}),h("importModal",{noFooter:!0,className:"import-modal",hasBackDrop:!1}),n.default.createElement(N,a({},Object.assign(this.props),{moduleName:"arap",billType:m.billType,pagecode:this.getExportPageCode(),appcode:this.props.getSearchParam("c"),selectedPKS:this.Info.selectedPKS,exportTreeUrl:"/nccloud/arap/salebill/gatherbillexport.do",forceRender:this.state.forceRender})),n.default.createElement(F,{show:this.state.isTbbLinkshow,sourceData:this.Info.tbbLinkSourceData,cancel:this.tbbLinkcancel.bind(this)}),n.default.createElement("div",null,h("saveCheck",{title:this.state.json["salebill-000045"],content:this.Info.tipContent,beSureBtnClick:this.saveSureBtnClick.bind(this)}),h("deleteCheck",{title:this.state.json["salebill-000045"],content:this.Info.tipContent,beSureBtnClick:this.deleteBillSureBtnClick.bind(this)}),h("commitAndUncommit",{title:this.state.json["salebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.commitAndUncommit.bind(this),cancelBtnClick:this.cancelClick.bind(this)}),this.state.compositedisplay?n.default.createElement(M,{title:this.state.json["salebill-000047"],data:this.Info.compositedata,display:this.state.compositedisplay,getResult:this.commitAndUncommit.bind(this),cancel:this.cancelClick.bind(this)}):null))}}]),r}(l.Component);K=(0,i.createPage)({})(K),r.default=K},408:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transferButtonClick=r.pageInfoClick=r.initTemplate=r.afterEvent=r.buttonClick=void 0;var a=s(t(269)),o=s(t(245)),l=s(t(410)),n=s(t(411)),i=s(t(270));function s(e){return e&&e.__esModule?e:{default:e}}r.buttonClick=a.default,r.afterEvent=l.default,r.initTemplate=o.default,r.pageInfoClick=n.default,r.transferButtonClick=i.default},409:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,d,u,c){switch(t){case l.innerButton.open_browse:case l.innerButton.Close_browse:r.cardTable.toggleRowView(o.tableId,u);break;case l.innerButton.open_edit:var p=!1,f=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId);if(f&&f.body&&f.body[e.tableId]&&f.body[e.tableId].rows)for(var m=f.body[e.tableId].rows,b=0;b<m.length;b++){var y=m[b].values.top_billid.value,g=m[b].values.top_itemid.value;if(y||g){p=!0;break}}e.setState({hideAdd:p}),(0,s.modifyChecknoItemtype)(r,e.tableId,u.values.pk_org.value,u.values.checktype.value),r.cardTable.openModel(o.tableId,"edit",u,c);break;case l.innerButton.Copy_inner:(0,n.copyInner)(u,o.dataSource,e),e.setState({buttonfalg:!1},(function(){(0,i.cardBodyControl)(r,e.state.buttonfalg)}));break;case l.innerButton.Insert_inner:var v=r.createMasterChildData(e.getPagecode(),o.formId,o.tableId);v.body[o.tableId].rows=[],(0,a.ajax)({url:"/nccloud/arap/gatheringbill/addline.do",data:v,success:function(e){e.data&&e.data.body?r.cardTable.addRow(o.tableId,c+1,e.data.body[o.tableId].rows[0].values):r.cardTable.addRow(o.tableId)}});break;case l.innerButton.Delete_inner:(0,n.deleteInner)(e,r,o.tableId,c),e.onSelected();break;case l.innerButton.Paste_inner:(0,n.pasteInner)(e,r,o.dataSource,o.tableId,c)}};var a=t(1),o=t(204),l=t(5),n=t(7),i=t(6),s=t(9);a.cardCache.getDefData,a.cardCache.setDefData},410:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,l,d,f,m,b){var y=this;if(d instanceof Array&&d[0].newvalue.value==d[0].oldvalue.value)return;var g=this.getPagecode(),v=0;r==this.formId?v=0:r==this.tableId&&(v=f);if(r==this.formId){var _=null;switch(t){case"pk_org":null==l.value||""==l.value?"transfer"===this.props.getUrlParam("type")?(0,a.promptBox)({color:"warning",title:this.state.json["salebill-000021"],content:this.state.json["salebill-000080"],beSureBtnName:this.state.json["salebill-000004"],noCancelBtn:!0,beSureBtnClick:function(){y.props.form.setFormItemsValue(y.formId,{pk_org:d})},closeByClickBackDrop:!1}):(0,a.promptBox)({color:"warning",title:this.state.json["salebill-000021"],content:this.state.json["salebill-000022"],beSureBtnName:this.state.json["salebill-000004"],cancelBtnName:this.state.json["salebill-000002"],beSureBtnClick:function(){y.props.form.EmptyAllFormValue(y.formId),y.props.cardTable.setTableData(y.tableId,{rows:[]}),y.initAdd(!0)},cancelBtnClick:function(){y.props.form.setFormItemsValue(y.formId,{pk_org:d})},closeByClickBackDrop:!1}):null!=d.value&&""!=d.value?(0,a.promptBox)({color:"warning",title:this.state.json["salebill-000021"],content:this.state.json["salebill-000022"],beSureBtnName:this.state.json["salebill-000004"],cancelBtnName:this.state.json["salebill-000002"],beSureBtnClick:function(){(0,a.ajax)({url:"/nccloud/arap/salebill/cardheadafteredit.do",data:{pageId:g,event:y.props.createHeadAfterEventData(g,y.formId,y.tableId,r,t,l),uiState:y.props.getUrlParam("status")},async:!1,success:function(e){(0,s.renderData)(y,e),(0,s.formulamsgHint)(y,e)},error:function(e){(0,s.errorDeal)(y,e,d,t)}})},cancelBtnClick:function(){y.props.form.setFormItemsValue(y.formId,{pk_org:d})},closeByClickBackDrop:!1}):(_={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,r,t,l),uiState:this.props.getUrlParam("status")},c.call(this,_,t,d));break;case"customer":_={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,t,l),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","payaccount","pk_currtype","customer","buysellflag","objtype","direction","pk_billtype","top_billtype","pk_payterm","pk_psndoc","pk_deptid","pk_deptid_v"].concat(n.moneyAndRateFields)),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,_,t,d);break;case"pk_deptid_v":_={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,t,l),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_deptid","pk_deptid_v","pk_currtype","customer","taxtype","buysellflag","objtype","direction"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,_,t,d);break;case"pk_psndoc":_={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,t,l),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_psndoc","pk_deptid","pk_deptid_v","isrefused","prepay","isdiscount","objtype","direction","agentreceivelocal"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,_,t,d);break;case"pk_currtype":_={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,t,l),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_group","pk_currtype","pk_billtype","billdate","rate","grouprate","globalrate","buysellflag","taxprice","local_taxprice","taxrate","occupationmny","money_bal","local_money_bal","globalcrebit","globalnotax_cre","globaltax_cre","groupcrebit","groupnotax_cre","grouptax_cre","local_money_cr","local_notax_cr","local_tax_cr","money_cr","notax_cr","quantity_cr","direction","settlecurr","settlemoney"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,_,t,d),(0,o.currentTypeAfterFormEvents)(this.formId,e,t);break;case"subjcode":_={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,r,t,l),uiState:this.props.getUrlParam("status")},c.call(this,_,t,d),this.props.form.setFormItemsValue(this.formId,{subjcode:{value:l.refpk,display:l.dispname}});break;default:_={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,r,t,l),uiState:this.props.getUrlParam("status")},c.call(this,_,t,d)}}r==this.tableId&&("checktype"==t&&(0,n.checktypeAfterEvent)(this.props,this.tableId,t,l,f),"checkno_display"==t&&((0,n.checknoDisplayAfterEvent)(this.props,this.tableId,t,l,f),t="checkno"),"subjcode"==t&&this.props.cardTable.setValByKeyAndIndex(this.tableId,f,"subjcode",{value:l.refpk,display:l.dispname}),(0,a.ajax)({url:"/nccloud/arap/salebill/cardbodyafteredit.do",data:{rowindex:0,editindex:v,pageId:g,tableId:this.tableId,changedrows:d,body:e.cardTable.getDataByIndex(this.tableId,v),formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,t,l),uiState:this.props.getUrlParam("status")},async:!1,success:function(r){(0,s.bodyAfterEventRenderData)(y,r),"transfer"==y.props.getUrlParam("type")&&y.synTransferData(),0==f&&"pk_currtype"==t&&(0,o.currentTypeAfterFormEvents)(y.formId,e,"pk_currtype"),(0,s.formulamsgHint)(y,r)},error:function(o){var n=String(o),i=n.substring(6,n.length);"convertException"==i.substring(1,17)?(0,a.promptBox)({color:"warning",title:y.state.json["salebill-000000"],content:i.substring(17,i.length),closeByClickBackDrop:!1,beSureBtnClick:function(){u(y,e,f,g,r,t,d,"sure",v,l)},cancelBtnClick:function(){u(y,e,f,g,r,t,d,"cancel",v,l)}}):(y.props.cardTable.setValByKeyAndRowId(y.tableId,f,t,d),(0,a.toast)({color:"danger",content:i}))}}),p.call(this,r,g,t,f))},r.headFieldAfterRequest=c,r.autoAddline=p;var a=t(1),o=t(32),l=t(189),n=t(9),i=t(7),s=t(33),d=t(7);function u(e,r,t,l,n,i,d,u,c,p){(0,a.ajax)({url:"/nccloud/arap/salebill/cardbodyafteredit.do",data:{rowindex:0,editindex:c,pageId:l,changedrows:d,tableId:e.tableId,body:r.cardTable.getDataByIndex(e.tableId,c),formEvent:r.createFormAfterEventData(l,e.formId,e.tableId,i,p),uiState:e.props.getUrlParam("status"),isCalculateConvert:u},async:!1,success:function(a){(0,s.bodyAfterEventRenderData)(e,a),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),0==t&&"pk_currtype"==i&&(0,o.currentTypeAfterFormEvents)(e.formId,r,"pk_currtype"),(0,s.formulamsgHint)(e,a)}})}function c(e,r,t){var o=this;(0,a.ajax)({url:"/nccloud/arap/salebill/cardheadafteredit.do",data:e,async:!1,success:function(e){((0,s.headAfterEventRenderData)(o,e),"pk_org"==r)&&(o.props.form.getFormItemsValue(o.formId,"pk_org").value?(o.props.resMetaAfterPkorgEdit(),o.state.buttonfalg=!0):o.state.buttonfalg=null,o.toggleShow());"transfer"==o.props.getUrlParam("type")&&o.synTransferData(),(0,s.formulamsgHint)(o,e)},error:function(e){(0,s.errorDeal)(o,e,t,r)}})}function p(e,r,t,o){var n=this,i=this.props.cardTable.getNumberOfRows(this.tableId);if(e==this.tableId&&i==o+1&&-1!=l.autoAddLineKeys.indexOf(t)&&!(0,d.isExistsTopBill)(this)){var s=this.props.createMasterChildData(r,this.formId,this.tableId);s.body[this.tableId].rows=[],(0,a.ajax)({url:"/nccloud/arap/salebill/addline.do",data:s,async:!1,success:function(e){e.data&&(e.data.head&&n.props.form.setAllFormValue(function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}({},n.formId,e.data.head[n.formId])),e.data.body&&n.props.cardTable.addRow(n.tableId,i,e.data.body[n.tableId].rows[0].values,!1))}})}}},411:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var t=this;if(r){var a=d(r,l.dataSource),n=this.getPagecode();if(a){if(e.getUrlParam("scene"))e.setUrlParam({id:r});else{var p=a.head[this.formId].rows[0].values.pk_tradetype.value;e.setUrlParam({id:r,pagecode:p}),c("sessionTradeType",l.dataSource,p),n!=p&&i.default.call(this,this.props)}e.form.setAllFormValue(s({},this.formId,a.head[this.formId])),e.cardTable.setTableData(this.tableId,a.body[this.tableId],null,null,!0),this.toggleShow()}else{var f={pk_bill:r};(0,o.ajax)({url:"/nccloud/arap/salebill/cardquery.do",data:f,success:function(a){if(a.data){if(a.data.head&&t.props.form.setAllFormValue(s({},t.formId,a.data.head[t.formId])),a.data.body&&t.props.cardTable.setTableData(t.tableId,a.data.body[t.tableId],null,null,!0),u(l.pkname,r,a.data,t.formId,l.dataSource),e.getUrlParam("scene"))e.setUrlParam({id:r});else{var o=a.data.head[l.formId].rows[0].values.pk_tradetype.value;e.setUrlParam({id:r,pagecode:o}),c("sessionTradeType",l.dataSource,o),n!=o&&i.default.call(t,t.props)}t.toggleShow()}else t.props.form.EmptyAllFormValue(t.formId),t.props.cardTable.setTableData(t.tableId,{rows:[]})}})}}};var a,o=t(1),l=t(204),n=t(245),i=(a=n)&&a.__esModule?a:{default:a};function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var d=o.cardCache.getCacheById,u=o.cardCache.updateCache,c=o.cardCache.setDefData},5:function(e,r,t){"use strict";var a;function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(r,"__esModule",{value:!0});var l=(o(a={Add:"Add",Edit:"Edit",Delete:"Delete",Copy:"Copy",Save:"Save",Back:"Back",TempSave:"TempSave",Cancel:"Cancel",Commit:"Commit",Uncommit:"Uncommit",Approve:"Approve",UnApprove:"UnApprove",LinkAprv:"LinkAprv",BodyVerify:"BodyVerify",WholeVerify:"WholeVerify",MadeBill:"MadeBill",RedBack:"RedBack",Tradetype:"Tradetype",InitBuild:"InitBuild",CancelInitBuild:"CancelInitBuild",Pausetrans:"Pausetrans",Cancelpause:"Cancelpause",CommisionPay:"CommisionPay",CancelCommisionPay:"CancelCommisionPay",Receipt:"Receipt",ReceiptCheck:"ReceiptCheck",InvoiceUploader:"InvoiceUploader",ReceiptScan:"ReceiptScan",LinkInvoice:"LinkInvoice",BillAssistant:"BillAssistant",AttachManage:"AttachManage",ImportExportMenu:"ImportExportMenu",ImportData:"ImportData",ExportData:"ExportData",Print:"Print",Preview:"Preview",Output:"Output",OfficalPrint:"OfficalPrint",CancelPrint:"CancelPrint",PrintList:"PrintList",RelatedQuery:"RelatedQuery",LinkDeal:"LinkDeal",BillLinkQuery:"BillLinkQuery",LinkTbb:"LinkTbb",LinkVouchar:"LinkVouchar",LinkTerm:"LinkTerm",LinkConfer:"LinkConfer",LinkBal:"LinkBal",LinkBill:"LinkBill",More:"More",Refresh:"Refresh",Confirm:"Confirm",CancelConfirm:"CancelConfirm",PrePay:"PrePay",Pause:"Pause",SaveAndCommit:"SaveAndCommit",LinkSettleInfo:"LinkSettleInfo",LinkInformer:"LinkInformer",Add_Recbill:"Add_Recbill",Add_GatherBill:"Add_GatherBill",Add_PayableBill:"Add_PayableBill",Add_PayBill:"Add_PayBill",TaxChecked:"TaxChecked",Add_t:"Add_t",Return:"Return",Keep_a:"Keep_a",Cancel_a:"Cancel_a",Keep_m:"Keep_m",Cancel_m:"Cancel_m"},"Refresh","Refresh"),o(a,"Query","Query"),o(a,"InitialReport","InitialReport"),o(a,"Share","Share"),o(a,"VerifyLink","VerifyLink"),o(a,"Batch_delect","Batch_delect"),o(a,"Quick_query","Quick_query"),o(a,"MakeUp","MakeUp"),o(a,"NowVerify","NowVerify"),o(a,"ProfitRecord","ProfitRecord"),o(a,"ConnectSettleInfo","ConnectSettleInfo"),o(a,"Hisrecord","Hisrecord"),o(a,"Transfers","Transfers"),o(a,"Empty","Empty"),o(a,"CancelTrans","CancelTrans"),o(a,"CancelProfit","CancelProfit"),o(a,"Refund","Refund"),o(a,"CancelRefund","CancelRefund"),o(a,"Generate","Generate"),o(a,"SpecialInvoice","SpecialInvoice"),o(a,"GeneralInvoice","GeneralInvoice"),o(a,"ElectronicInvoice","ElectronicInvoice"),o(a,"OilSpecialInvoice","OilSpecialInvoice"),o(a,"OilGeneralInvoice","OilGeneralInvoice"),o(a,"OilElectronicInvoice","OilElectronicInvoice"),o(a,"RedInvoice","RedInvoice"),o(a,"MaintainTaxInvoice","MaintainTaxInvoice"),o(a,"LinkTaxInvoice","LinkTaxInvoice"),o(a,"LinkDetail","LinkDetail"),a);r.headButton=l,r.bodyButton={AddLine:"AddLine",DelLine:"DelLine",InsertLine:"InsertLine",CopyLine:"CopyLine",PasteLine:"PasteLine",PasteToEndLine:"PasteToEndLine",CancelLine:"CancelLine",Query:"Query"},r.innerButton={Edit_inner:"Edit_inner",Delete_inner:"Delete_inner",Copy_inner:"Copy_inner",Commit_inner:"Commit_inner",Uncommit_inner:"Uncommit_inner",Confirm_inner:"Confirm_inner",CancelConfirm_inner:"CancelConfirm_inner",open_browse:"open_browse",Close_browse:"Close_browse",open_edit:"open_edit",Insert_inner:"Insert_inner",Paste_inner:"Paste_inner",Approve_inner:"Approve_inner",UnApprove_inner:"UnApprove_inner",MadeBill_inner:"MadeBill_inner"},r.modelButton={Prev:"Prev",Next:"Next",Done:"Done",Cancel:"Cancel",Bill:"Bill"},r.bottomButton={Next:"Next",Pre:"Pre",CancelProfit:"CancelProfit",Save:"Save",Back:"Back",ConfirmTrans:"ConfirmTrans"}},519:function(e,r,t){e.exports=t(407)},6:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dealTranferBtns=function(e){"transfer"===this.props.getUrlParam("type")&&(this.setState({tpflag:!1}),e.push("Add"),e.push("TempSave"),e.push("Copy"),e.push("Verify"),e.push("RedBack"),e.push("Pause_g1"),e.push("PrePay"),e.push("AddLine"),e.push("Insert_inner"),e.push("Refresh"))},r.dealSrcProjectBtns=function(e,r){if(r.length>0){var t=r[0].values&&r[0].values.top_billtype?r[0].values.top_billtype.value:null;-1!=p.indexOf(t)&&(e.push("AddLine"),e.push("CopyLine"),e.push("DelLine"),e.push("Insert_inner"),e.push("Copy_inner"),e.push("Delete_inner"))}},r.dealRefundBtns=function(e,r){var t=!!this.props.form.getFormItemsValue(this.formId,"isrefund")&&this.props.form.getFormItemsValue(this.formId,"isrefund").value;!t&&"Y"!=t||"N"==t||(r.push("AddLine"),r.push("Insert_inner"))};var a=-1,o=-99,l=-1,n=1,i=3,s=10,d=0,u=1,c=0,p=["4D65","4D53","4D83","4D33","4D39","4D48","4D50","4D86"],f=["Add_blank","Add","Head_g1","adcode","paca","F0","F1","F2","F3","FCT1","FCT2","36D1","4A18","4A23","4A49","4A24","4A2F","4A3F","4A3H"],m=["Add_blank","Add","Head_g1","adcode","paca","F0","F1","F2","F3","Z3","FCT1","FCT2","36D1","4A18","4A23","4A49","4A24","4A2F","4A3F","4A3H","More","InitBuild","CancelInitBuild","ImportData","Refresh","ConnectSettleInfo"],b=function(e,r,t,p,b){if(!r||!r.pk_tradetype||!r.pk_tradetype.value)return"list"==p?-1!=m.indexOf(t):!!b.props.getUrlParam("status")&&-1!=f.indexOf(t);e||(e="browse");var y=!0,g=r.money?r.money.value:null,v=r.pk_billtype?r.pk_billtype.value:null,_=r.coordflag?r.coordflag.value:null,I=r.approvestatus?r.approvestatus.value:null,h=r.billstatus?r.billstatus.value:null,k=r.effectstatus?r.effectstatus.value:null,w=r.isinit?r.isinit.value:null,T=(r.pk_org&&r.pk_org.value,!!r.isforce&&r.isforce.value),C=!!r.isrefund&&r.isrefund.value,R=void 0;switch(t){case"Refund":("browse"!=e||k!=s||C)&&(y=!1);break;case"CancelRefund":("browse"!=e||"F0"==v&&!C||"F2"==v&&C&&g<0||"F2"==v&&!C)&&(y=!1);break;case"Generate":"browse"==e&&k==s||(y=!1);break;case"More":"browse"!=e&&(y=!1);break;case"CancelConfirm":"browse"==e&&_!=c||(y=!1);break;case"Confirm":_==u&&(y=!1);break;case"Add":"browse"!=e&&(y=!1);break;case"Edit":("browse"!=e||1!=w&&h!=o&&h!=a)&&(y=!1);break;case"Save":"browse"==e&&(y=!1);break;case"TempSave":("browse"==e||"edit"==e&&h!=o)&&(y=!1);break;case"SaveAndCommit":"browse"!=e&&I==l||(y=!1),"card"==p&&T&&b.props.cardTable.getValByKeyAndIndex(b.tableId,0,"commpaystatus")&&"1"!=b.props.cardTable.getValByKeyAndIndex(b.tableId,0,"commpaystatus").value&&(y=!1);break;case"Delete":("browse"!=e||1!=w&&I!=l)&&(y=!1);break;case"Refresh":"browse"!=e&&(y=!1);break;case"Cancel":"browse"==e&&(y=!1);break;case"Copy":"browse"!=e&&(y=!1);break;case"Commit":"browse"==e&&I==l&&h==a||(y=!1);break;case"Uncommit":b&&(R=b.props.getUrlParam("scene")),R&&"bz"!=R?("browse"!=e||I!=i&&k!=s||C)&&(y=!1):("browse"!=e||I!=i&&I!=n&&k!=s||C&&"F3"!=v)&&(y=!1);break;case"Approve":"browse"==e&&k!=s||(y=!1);break;case"UnApprove":"browse"==e&&k!=d||(y=!1);break;case"MadeBill":"browse"==e&&k==s||(y=!1);break;case"BodyVerify":case"WholeVerify":("browse"!=e||h==o||C)&&(y=!1);break;case"RedBack":("browse"!=e||k!=s||C)&&(y=!1);break;case"AttachManage":"browse"!=e&&(y=!1);break;case"CommisionPay":case"CancelCommisionPay":"browse"==e&&T||(y=!1);break;case"Receipt":case"ReceiptCheck":case"ReceiptScan":"browse"!=e&&(y=!1);break;case"InvoiceUploader":"browse"==e&&I!=n||(y=!1);break;case"BillLinkQuery":case"LinkBal":case"LinkDeal":case"LinkVouchar":case"LinkConfer":case"LinkTerm":case"LinkTbb":case"LinkInformer":case"LinkSettleInfo":case"LinkAprv":case"ImportData":case"ExportData":case"Print":case"Output":case"OfficalPrint":case"CancelPrint":"browse"!=e&&(y=!1);break;case"SpecialInvoice":case"GeneralInvoice":case"ElectronicInvoice":case"OilSpecialInvoice":case"OilGeneralInvoice":case"OilElectronicInvoice":("browse"!=e||I!=n||g<0)&&(y=!1);break;case"RedInvoice":("browse"!=e||I!=n||g>=0)&&(y=!1);break;case"MaintainTaxInvoice":case"LinkTaxInvoice":"browse"==e&&I==n||(y=!1);break;case"Pausetrans":("browse"!=e||k!=s||C)&&(y=!1);case"Cancelpause":case"PrePay":("browse"!=e||k!=s||C)&&(y=!1);break;case"AddLine":if("browse"==e&&(y=!1),"card"==p&&("edit"==e||"add"==e))for(var S=b.props.createMasterChildData(b.getPagecode(),b.formId,b.tableId).body[b.tableId].rows,B=0;B<S.length;B++){var x=S[B].values.top_billid.value,E=S[B].values.top_itemid.value;if(x||E){y=!1;break}}break;case"DelLine":case"CopyLine":"browse"==e&&(y=!1);break;case"PasteToEndLine":case"CancelLine":y=!1;break;case"Approve_inner":"browse"==e&&k!=s||(y=!1);break;case"UnApprove_inner":"browse"==e&&k!=d||(y=!1);break;case"MadeBill_inner":"browse"==e&&k==s||(y=!1);break;case"Edit_inner":("browse"!=e||1!=w&&h!=o&&h!=a)&&(y=!1);break;case"Delete_inner":("browse"!=e||1!=w&&I!=l)&&(y=!1);break;case"Copy_inner":"browse"!=e&&(y=!1);break;case"CancelConfirm_inner":_==c&&(y=!1);break;case"Confirm_inner":_==u&&(y=!1);break;case"Commit_inner":"browse"==e&&I==l&&h==a||(y=!1);break;case"Uncommit_inner":b&&(R=b.props.getUrlParam("scene")),R&&"bz"!=R?("browse"!=e||I!=i&&k!=s||C)&&(y=!1):("browse"!=e||I!=i&&I!=n&&k!=s||C)&&(y=!1);break;case"open_browse":"browse"!=e&&b.isLineOpen&&(y=!1);break;case"close_browse":"browse"==e||b.isLineOpen||(y=!1);break;case"open_edit":"browse"==e&&(y=!1)}return y},y=function(e,r){for(var t=[],a=[],o=0;o<r.Info.allButtonsKey.length;o++){b(null,e,r.Info.allButtonsKey[o],"list",r)?t.push(r.Info.allButtonsKey[o]):a.push(r.Info.allButtonsKey[o])}r.props.button.setButtonDisabled(t,!1),r.props.button.setButtonDisabled(a,!0)};r.buttonVisible=b,r.getButtonsKey=function e(r,t){for(var a=0;a<r.length;a++)"list_inner"!=r[a].area&&"card_inner"!=r[a].area&&(0==r[a].children.length?t.push(r[a].key):(t.push(r[a].key),e(r[a].children,t)));return t},r.getInnerButtonkey=function(e){for(var r=[],t=0;t<e.length;t++)"list_inner"!=e[t].area&&"card_inner"!=e[t].area||r.push(e[t].key);return r},r.cardGetbodyAndInnerbutton=function(e){for(var r=[],t=0;t<e.length;t++)"card_body"!=e[t].area&&"card_inner"!=e[t].area||r.push(e[t].key);return r},r.cardBodyAndInnerButtonVisible=function(e,r,t){var a=e.props.cardTable.getStatus(e.tableId);if(t&&"browse"==a)return["Close_browse"];if("browse"==a)return["open_browse"];if("edit"==a){if(1==r){if("transfer"===e.props.getUrlParam("type"))return["open_edit","Copy_inner","Delete_inner"];for(var o=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId).body[e.tableId].rows,l=0;l<o.length;l++){var n=o[l].values.top_billid.value,i=o[l].values.top_itemid.value;if(n||i)return["open_edit","Copy_inner","Delete_inner"]}return["open_edit","Copy_inner","Insert_inner","Delete_inner"]}return 0==r?["Paste_inner"]:[]}return[]},r.cardBodyControl=function(e,r,t){if(e.button.setButtonVisible(["PasteToEndLine","CancelLine"],!r),"transfer"===e.getUrlParam("type"))e.button.setButtonVisible(["CopyLine","DelLine"],r);else{if(t)for(var a=t.props.createMasterChildData(t.getPagecode(),t.formId,t.tableId).body[t.tableId].rows,o=0;o<a.length;o++){var l=a[o].values.top_billid.value,n=a[o].values.top_itemid.value;if(l||n)return void e.button.setButtonVisible(["CopyLine","DelLine"],r)}e.button.setButtonVisible(["CopyLine","DelLine","AddLine"],r)}},r.initCardBodyEditControl=function(e,r,t){r?(e.button.setButtonDisabled(["AddLine"],!1),e.button.setButtonDisabled(["CopyLine","DelLine"],!0)):e.button.setButtonDisabled(["AddLine","CopyLine","DelLine"],!0)},r.onSelectedCardBodyEditControl=function(e){var r=e.props.getUrlParam("status");if(r||(r="browse"),"browse"==r){var t=e.props.cardTable.getCheckedRows(e.tableId);if(1==t.length){var a=t[0].data.values.pausetransact?t[0].data.values.pausetransact.value:null,o=t[0].data.values.prepay?t[0].data.values.prepay.value:null,l=[],n=[];"0"!=a&&a?a&&(l.push("Cancelpause"),n.push("Pausetrans")):(l.push("Pausetrans"),n.push("Cancelpause")),"0"!=o&&o?n.push("PrePay"):l.push("PrePay"),e.props.button.setButtonDisabled(l,!1),e.props.button.setButtonDisabled(n,!0)}else t.length>1?e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!1):e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!0)}else{var i=e.props.createMasterChildData(e.props.getUrlParam("pagecode"),e.formId,e.tableId).head[e.formId].rows[0].values;if(i.pk_org?i.pk_org.value:null)e.props.cardTable.getCheckedRows(e.tableId).length>0?e.props.button.setButtonDisabled(["CopyLine","DelLine"],!1):e.props.button.setButtonDisabled(["CopyLine","DelLine"],!0)}},r.initCardBodybrowseControl=function(e){e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!0)},r.onListButtonControl=function(e){var r=e.props.table.getCheckedRows(e.tableId);1==r.length?y(r[0].data.values,e):r.length>1?e.props.button.setButtonDisabled(e.Info.allButtonsKey,!1):y(null,e)}},7:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isExistsTopBill=r.refreshBill=r.batchGenerate=r.generate=r.F0DeleteAfterEditCalculate=r.refreshChildVO2HeadVO=r.getRowIds=r.getCheckedRowColvalues=r.getColvalues=r.delBlankLine=r.pasteInner=r.deleteInner=r.copyInner=r.pasteToEndLine=r.copyLine=r.delLine=r.getLinkconferQuery=r.resetBodyPk=r.clearTopInfos=r.getBodyAmountValue=r.calculateHeadMoney=r.setFormEditable=void 0;var a=t(1);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var l=a.cardCache.getDefData,n=a.cardCache.setDefData,i=a.cardCache.updateCache,s=function(e,r){if("F0"==e.billType){var t=!1,o=e.props.form.getFormItemsValue(e.formId,"pk_tradetype")?e.props.form.getFormItemsValue(e.formId,"pk_tradetype").value:null;if((0,a.ajax)({url:"/nccloud/arap/arappub/isConsolidatedTax.do",data:{tradeType:o},async:!1,success:function(e){t=e.data}}),!t)return;var l=p(e.props,e.tableId,["customer","taxcodeid","taxrate","taxtype","buysellflag","money_de","local_money_de","notax_de","local_notax_de","local_tax_de"]),n=[],i=e.props.cardTable.getAllRows(e.tableId),s={},d={};i.forEach((function(e,r){if("3"!=e.status){var t=e.values.customer.value+"_"+e.values.taxcodeid.value+"_"+e.values.taxrate.value+"_"+e.values.taxtype.value+"_"+e.values.buysellflag.value;d[t]=e,s[e.rowid]=r}}));var u=[];r.forEach((function(e){var r=e.data.values.customer.value+"_"+e.data.values.taxcodeid.value+"_"+e.data.values.taxrate.value+"_"+e.data.values.taxtype.value+"_"+e.data.values.buysellflag.value;u.push(r)}));for(var c=0;c<u.length;c++)d[u[c]]&&n.push(d[u[c]]);if(0==n.length)return;var f=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId);f.body[e.tableId].rows=n,(0,a.ajax)({url:"/nccloud/arap/arappub/deleteAfterEditCalculate.do",data:{cardData:f,colValues:l,rowidIndex:s},success:function(r){e.props.cardTable.updateDataByRowId(e.tableId,r.data.body[e.tableId])}})}},d=function(e){var r=e.props.form.getFormItemsValue(e.formId,"billclass").value,t=e.props.createMasterChildData(e.props.pageId,e.formId,e.tableId),a=null,o=null,l=null,n=null;"yf"==r||"sk"==r?(a=u(e.formId,e.tableId,t,"money_cr"),o=u(e.formId,e.tableId,t,"local_money_cr"),l=u(e.formId,e.tableId,t,"groupcrebit"),n=u(e.formId,e.tableId,t,"globalcrebit")):"ys"!=r&&"fk"!=r||(a=u(e.formId,e.tableId,t,"money_de"),o=u(e.formId,e.tableId,t,"local_money_de"),l=u(e.formId,e.tableId,t,"groupdebit"),n=u(e.formId,e.tableId,t,"globaldebit"));var i=e.props.form.getFormItemsValue(e.formId,"money").scale,s=e.props.form.getFormItemsValue(e.formId,"local_money").scale,d=e.props.form.getFormItemsValue(e.formId,"money").scale,c=e.props.form.getFormItemsValue(e.formId,"money").scale;e.props.form.setFormItemsValue(e.formId,{money:{value:a,scale:i},local_money:{value:o,scale:s},grouplocal:{value:l,scale:d},globallocal:{value:n,scale:c}})},u=function(e,r,t,a){if(t&&t.head[e]&&t.body[r]){for(var o=0,l=0,n=0;n<t.body[r].rows.length;n++)if("3"!=t.body[r].rows[n].status){var i=t.body[r].rows[n].values[a].value;l=1*t.body[r].rows[n].values[a].scale,i=parseFloat(i),isNaN(i)||(o+=i)}return o=o.toFixed(l)}},c=function(e,r){var t=e.props.form.getFormItemsValue(e.formId,"billclass").value;null!=t&&("ys"==t?e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"pk_recitem",{value:null}):"sk"==t?(e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"pk_gatheritem",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"checktype",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"checkno",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"checkno_display",{value:null,display:null})):"yf"==t?e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"pk_payableitem",{value:null}):"fk"==t&&(e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"pk_payitem",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"checktype",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"checkno",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"checkno_display",{value:null,display:null})),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"rowno",{value:null}))};function p(e,r,t){for(var a={},o=0;o<t.length;o++){var l=t[o],n=e.cardTable.getColValue(r,l,!1,!1);n&&(a[l]=n)}return a}function f(e,r){r.data?(i(e.pkname,e.props.getUrlParam("id"),r.data,e.formId,e.dataSource),r.data.head&&e.props.form.setAllFormValue(o({},e.formId,r.data.head[e.formId])),r.data.body&&e.props.cardTable.setTableData(e.tableId,r.data.body[e.tableId])):(e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setTableData(e.tableId,{rows:[]})),e.toggleShow()}var m=function(e,r,t,a){var o=r.table.getCheckedRows(t),l=[];return o.forEach((function(t){l.push({pk_bill:t.data.values[e.pkname].value,ts:t.data.values.ts.value,billType:a,index:t.index,pageId:r.getSearchParam("p")})})),l};r.setFormEditable=function(e,r,t,a){for(var l=e.meta.getMeta()[t].items,n=0;n<l.length;n++){var i=l[n];e.form.setFormItemsDisabled(r,o({},i.attrcode,!a))}},r.calculateHeadMoney=d,r.getBodyAmountValue=u,r.clearTopInfos=function(e,r){var t=e.props.cardTable.getValByKeyAndIndex(e.tableId,r,"top_billtype").value;"F0"==t||"F1"==t||"F2"==t||"F3"==t?(e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_tradetype",{value:null})):(null==t||"36D1"!=t&&"36D7"!=t&&"FCT2"!=t&&"FCT1"!=t)&&(e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"src_tradetype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"top_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"top_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"top_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,r,"top_tradetype",{value:null}))},r.resetBodyPk=c,r.getLinkconferQuery=function(e){var r={};if(-1!=e.indexOf("#")){var t=e.split("#");if(t&&t.length>0){var a=t[1];if(-1!=a.indexOf("&"))for(var o=a.split("&"),l=0;l<o.length;l++)r[o[l].split("=")[0]]=o[l].split("=")[1];else r[a.split("=")[0]]=a.split("=")[1]}}return r},r.delLine=function(e){var r=e.props.cardTable.getCheckedRows(e.tableId);if(0!=r.length){var t=[];r.forEach((function(e){"3"!=e.data.status&&t.push(e.index)})),e.props.cardTable.delRowsByIndex(e.tableId,t),"F0"==e.billType&&s(e,r),d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData()}else(0,a.toast)({color:"warning",content:this.state.json["public-000041"]})},r.copyLine=function(e,r){var t=e.props.cardTable.getCheckedRows(e.tableId);if(0==t.length)return(0,a.toast)({color:"warning",content:this.state.json["public-000042"]}),!1;var o=0,l=[];return t.forEach((function(e){"3"!=e.data.status&&(l.push(t[o].data),o++)})),n("CopyLine",r,l),!0},r.pasteToEndLine=function(e,r){e.props.beforeUpdatePage();var t=e.props.cardTable.getNumberOfRows(e.tableId),a=l("CopyLine",r);e.props.cardTable.insertRowsAfterIndex(e.tableId,a,t-1);for(var o=0;o<a.length;o++)c(e,t+o);d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},r.copyInner=function(e,r,t){var o=[];o.push(e),n("CopyLine",r,o),o.length>=1&&(0,a.toast)({color:"success",content:t.state.json["public-000162"]})},r.deleteInner=function(e,r,t,a){if(e.props.beforeUpdatePage(),r.cardTable.delRowsByIndex(t,a),"F0"==e.billType){var o=[{data:e.props.cardTable.getRowsByIndexs(e.tableId,[a])[0],index:a}];s(e,o)}d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},r.pasteInner=function(e,r,t,a,o){e.props.beforeUpdatePage();var n=l("CopyLine",t);r.cardTable.insertRowsAfterIndex(a,n,o);for(var i=0;i<n.length;i++)c(e,o+1+i);d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},r.delBlankLine=function(e,r,t,o,l){var n=o.body[r].rows;if(n&&0!=n.length||(0,a.toast)({color:"danger",content:e.state.json["public-000163"]}),1!=n.length){for(var i=[],s=0;s<n.length;s++){var d=n[s];if("3"!=d.status){if("F3"==t){var u=d.values.commpaytype?d.values.commpaytype.value:null;if(u&&"0"==u)return}var c=void 0,p=void 0;"F3"==t||"F0"==t?(c=d.values.money_de.value,p=d.values.local_tax_de.value):(c=d.values.money_cr.value,p=d.values.local_tax_cr.value),Number(c)==Number(0)&&Number(p)==Number(0)&&i.push(s)}}i.length>0&&(e.props.cardTable.delRowsByIndex(r,i),l&&-1!=i.indexOf(l)&&e.Info.isModelSave&&(e.Info.isModelSave=!1,e.props.cardTable.closeModel(e.tableId)))}},r.getColvalues=p,r.getCheckedRowColvalues=function(e,r,t){for(var a={},o=e.cardTable.getCheckedRows(r),l=0;l<t.length;l++){for(var n=t[l],i=[],s=0;s<o.length;s++)i.push(o[s].data.values[n]);i&&(a[n]=i)}return a},r.getRowIds=function(e,r){for(var t=e.cardTable.getVisibleRows(r),a=[],o=0;o<t.length;o++)a.push(t[o].rowid);return a},r.refreshChildVO2HeadVO=function(e,r,t){var a=["pk_tradetype","billdate","pk_group","pk_fiorg","pk_pcorg","sett_org_v","sett_org","pk_billtype","pk_tradetype","billclass","rate","grouprate","globalrate","payaccount","recaccount","cashaccount","objtype","payman","pk_rescenter","pk_group","checkelement","pk_deptid","pk_deptid_v","pk_psndoc","customer","supplier","pu_org","pu_org_v","pk_balatype","pk_org_v","pk_fiorg_v","pk_pcorg_v","so_org","so_org_v","cashitem","bankrollprojet","pk_subjcode","so_psndoc","pu_psndoc","so_deptid","pu_deptid","so_deptid_v","pu_deptid_v","busidate","ordercubasdoc","costcenter","payreason","invoiceno","pk_currtype"],o=e.cardTable.getRowsByIndexs(t,0);if(o){for(var l={},n=0;n<a.length;n++){var i=a[n];l[i]=o[0].values[i]}e.form.setFormItemsValue(r,l)}},r.F0DeleteAfterEditCalculate=s,r.generate=function(e){(0,a.ajax)({url:"/nccloud/arap/arappub/generate.do",data:{pk_bill:e.props.getUrlParam("id"),pageId:e.getPagecode(),billType:e.billType},success:function(r){(0,a.toast)({color:"success",title:"操作成功"}),f(e,r)}})},r.batchGenerate=function(e){var r=m(e,e.props,e.tableId,e.billType);0!=r.length?(0,a.ajax)({url:"/nccloud/arap/arappub/listgenerate.do",data:r,success:function(r){var t=r.success,o=r.data;if(t){if(o.grid){var l=o.grid,n=[];for(var i in l)n.push({index:i,data:{values:l[i].values}});e.props.table.updateDataByIndexs(e.tableId,n)}o.message&&((0,a.toast)({duration:"infinity",color:o.PopupWindowStyle,content:o.message}),e.onSelected())}}}):(0,a.toast)({color:"warning",content:"请选中至少一行数据!"})},r.refreshBill=f,r.isExistsTopBill=function(e){for(var r=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId).body[e.tableId].rows,t=0;t<r.length;t++){var a=r[t].values.top_billid.value,o=r[t].values.top_itemid.value;if(a||o)return!0}}},8:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loginContextKeys=void 0,r.loginContext=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",t={},a=e.paramMap;for(var o in s)t[s[o]]=e[s[o]],i&&i[s[o]]&&(t[s[o]]=i[s[o]]);for(var n in a)t[n]=a[n];l(r,r,t)},r.getContext=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if(i=(0,a.getBusinessInfo)(),e==s.businessDate&&i)return i[s.businessDate];var t=n(r,r);return t?t[e]:null},r.setContext=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",a=n(t,t);a?a[e]=r:a=o({},e,r);l(t,t,a)};var a=t(1);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var l=a.cardCache.setDefData,n=a.cardCache.getDefData,i=(0,a.getBusinessInfo)(),s=r.loginContextKeys={defaultAccbookName:"defaultAccbookName",defaultAccbookPk:"defaultAccbookPk",mdid:"mdid",org_Name:"org_Name",org_v_Name:"org_v_Name",pk_org:"pk_org",pk_org_v:"pk_org_v",transtype:"transtype",pk_transtype:"pk_transtype",groupId:"groupId",groupName:"groupName",userId:"userId",userName:"userName",userCode:"userCode",businessDate:"businessDate"}},9:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isCheckTypeEdit=r.moneyAndRateFields=r.reWriteCheckno=r.isChecknoRef=r.checktypeAfterEvent=r.modifyChecknoItemtype=r.checknoDisplayAfterEvent=void 0;var a=t(1);function o(e,r,t,a){if(a){var o=e.cardTable.getValByKeyAndIndex(r,0,"billclass").value,n=e.meta.getMeta();n[n.gridrelation.bodys.destEditAreaCode].items.map((function(e){if("checkno_display"==e.attrcode){var r=l(a,t);r&&"refer"!=e.itemtype?(e.itemtype="refer","fk"==o?e.refcode="fbm/refer/fbm/Bill4CmpPayGridRef/index.js":"sk"==o&&(e.refcode="fbm/refer/fbm/Bill4CmpReceiveGridRef/index.js")):r&&"refer"==e.itemtype||(e.itemtype="input",e.refcode=null)}return e})),e.meta.setMeta(n)}}function l(e,r){var t=!1;return(0,a.ajax)({url:"/nccloud/arap/arappub/ischecknoref.do",data:{checktype:e,pk_org:r},async:!1,success:function(e){t=e.data}}),t}r.checknoDisplayAfterEvent=function(e,r,t,a,o){"checkno_display"==t&&(a&&a.refpk?(e.cardTable.setValByKeyAndIndex(r,o,"checkno",{value:a.refpk,display:a.refname}),e.cardTable.setValByKeyAndIndex(r,o,"checkno_display",{value:a.refname,display:a.refname})):a instanceof Object?e.cardTable.setValByKeyAndIndex(r,o,"checkno",{value:null,display:null}):e.cardTable.setValByKeyAndIndex(r,o,"checkno",{value:a,display:a}))},r.modifyChecknoItemtype=o,r.checktypeAfterEvent=function(e,r,t,a,l){if("checktype"==t){e.cardTable.setValByKeyAndIndex(r,l,"checkno_display",{value:null,display:null}),e.cardTable.setEditableByIndex(r,l,"checkno_display",!0);var n=e.cardTable.getValByKeyAndIndex(r,l,"pk_org").value;o(e,r,n,a.refpk)}},r.isChecknoRef=l,r.reWriteCheckno=function(e,r){for(var t=e.cardTable.getColValue(r,"checkno_display",!1,!1),a=0;a<t.length;a++){var o=t[a];o.display||e.cardTable.setValByKeyAndIndex(r,a,"checkno_display",{value:o.value,display:o.value})}},r.moneyAndRateFields=["money_bal","money_de","money_cr","notax_de","notax_cr","occupationmny","settlemoney","nosubtax","nosubtaxrate","local_money_bal","local_money_de","local_money_cr","local_notax_de","local_notax_cr","local_tax_de","local_tax_cr","caltaxmny","groupbalance","groupdebit","groupcrebit","groupnotax_de","groupnotax_cre","groupagentreceivelocal","grouptax_de","grouptax_cre","globalbalance","globaldebit","globalcrebit","globalnotax_de","globalnotax_cre","globalagentreceivelocal","globaltax_de","globaltax_cre","price","taxprice","postprice","postpricenotax","local_price","local_taxprice","rate","taxcodeid","taxrate","taxtype","grouprate","globalrate","quantity_bal"],r.isCheckTypeEdit=function(e,r,t){var o=!1;return(0,a.ajax)({url:"/nccloud/arap/arappub/ischecknoref.do",data:{pk_org:r,objtype:e,billclass:t},async:!1,success:function(e){o=e.data}}),o}}})}));