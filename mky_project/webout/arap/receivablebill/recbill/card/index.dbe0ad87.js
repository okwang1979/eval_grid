!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("sscrp/rppub/components/image/index"),require("sscivm/invoiceComponent/compoundComponent/component/index")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom","sscrp/rppub/components/image/index","sscivm/invoiceComponent/compoundComponent/component/index"],t):"object"==typeof exports?exports["arap/receivablebill/recbill/card/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("sscrp/rppub/components/image/index"),require("sscivm/invoiceComponent/compoundComponent/component/index")):e["arap/receivablebill/recbill/card/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM,e["sscrp/rppub/components/image/index"],e["sscivm/invoiceComponent/compoundComponent/component/index"])}(window,(function(e,t,r,a,o){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=459)}({1:function(t,r){t.exports=e},11:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,a=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,l=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(l)?e:(o=0===l.indexOf("//")?l:0===l.indexOf("/")?r+l:a+l.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},12:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OperationColumn="180px"},16:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyBeforeEvent=void 0;var a=r(1),o=r(9);t.bodyBeforeEvent=function(e,t,r,l,n,i,d){var s=this;if(["money_bal","money_de","money_cr","notax_de","notax_cr","occupationmny","nosubtax","nosubtaxrate","local_money_bal","local_money_de","local_money_cr","local_notax_de","local_notax_cr","local_tax_de","local_tax_cr","groupbalance","groupdebit","groupcrebit","groupnotax_de","groupnotax_cre","groupagentreceivelocal","grouptax_de","grouptax_cre","globalbalance","globaldebit","globalcrebit","globalnotax_de","globalnotax_cre","globalagentreceivelocal","globaltax_de","globaltax_cre","price","taxprice","postprice","postpricenotax","local_price","local_taxprice","taxrate","taxtype","quantity_bal"].indexOf(r)>-1)return!0;"model"==d&&(t="bodys_edit");var u=!0,c=e.meta.getMeta(),p=i.values.pk_tradetype?i.values.pk_tradetype.value:null,f=e.form.getFormItemsValue(this.formId,"pk_billtype")?e.form.getFormItemsValue(this.formId,"pk_billtype").value:null,m={model:{areaType:"table",areacode:null,rows:[i]},pageid:this.pageId},b={model:e.form.getAllFormValue(this.formId),pageid:this.pageId},y={itemKey:"",isHead:!1,crossRuleConditionsVO:JSON.stringify(b),crossRuleTableConditionsVO:JSON.stringify(m),tradeType:p,DataPowerOperationCode:"",isDataPowerEnable:"Y",pk_org:"",busifuncode:"",AppCode:"",orgType:"",refnodename:"",accclass:"",pk_cust:"",pk_currtype:"",pkOrgs:"",parentbilltype:"",datestr:"",pk_accountingbook:"",dateStr:"",GridRefActionExt:"",TreeRefActionExt:"",supplier:"",customer:"",pretype:"",customSupplier:"",pk_psndoc:""};return c[t].items.map((function(n){n.isShowUnit=!1,n.isShowDisabledData=!1;var d=n.attrcode;if("refer"==n.itemtype&&(n.isMultiSelectedEnabled=!1,n.unitValueIsNeeded=!1),d==r)switch(d){case"objtype":if("objtype"==d){for(var c=-1,p=0;p<n.options.length;p++)if(""==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}if("objtype"==d&&"23E1"==f)if("0"==l.value)u=!1,e.cardTable.setEditableByIndex(t,c,"objtype",!1);else{for(c=-1,p=0;p<n.options.length;p++)if("0"==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}else if("objtype"==d&&"23E0"==f)if("1"==l.value)u=!1,e.cardTable.setEditableByIndex(t,c,"objtype",!1);else{for(c=-1,p=0;p<n.options.length;p++)if("1"==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}break;case"pk_org":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_org_v":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_fiorg":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_fiorg_v":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"sett_org":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"sett_org_v":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"scomment":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y};break;case"material":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.matcustcode=i.values.matcustcode?i.values.matcustcode.value:null,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y};break;case"matcustcode":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.pk_customer=i.values.customer?i.values.customer.value:null,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y};break;case"pk_payterm":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y};break;case"supplier":case"customer":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"pk_deptid":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"pk_deptid_v":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y};break;case"pk_psndoc":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"taxcodeid":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder",y.itemKey=r,y.taxcountryid=e.form.getFormItemsValue(s.formId,"taxcountryid")?e.form.getFormItemsValue(s.formId,"taxcountryid").value:null,y.buysellflag=i.values.buysellflag?i.values.buysellflag.value:null,y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,"F1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_deptid":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,"F1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_deptid_v":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,"F1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_psndoc":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,"F3"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"cashitem":case"pk_subjcode":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org?i.values.pk_org.value:null,y};break;case"payaccount":if("F0"==f||"F2"==f||"23E0"==f)"1"==(m=i.values.objtype).value?(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=s.state.json["public-000147"]):"3"==m.value?(n.itemType="refer",n.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",n.refName=s.state.json["public-000148"]):(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=s.state.json["public-000149"]);n.queryCondition=function(t){if("F3"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"23E1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value)return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.refnodename=s.state.json["public-000150"],y.pk_org=e.form.getFormItemsValue(s.formId,"pk_org")?e.form.getFormItemsValue(s.formId,"pk_org").value:null,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y;var o=i.values.objtype.value,l=i.values.supplier?i.values.supplier.value:null,n=i.values.customer?i.values.customer.value:null,d=i.values.pk_psndoc?i.values.pk_psndoc.value:(0,a.getBusinessInfo)().userId,u=null,c=null;return l&&"1"==o?(u=l,c=3):!n||"0"!=o&&"2"!=o?d&&(y.pk_psndoc=d):(u=n,c=1),"3"==o?(y.pk_psndoc=d,y.pk_cust=null,y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.accclass=c,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y.pk_org=e.form.getFormItemsValue(s.formId,"pk_org")?e.form.getFormItemsValue(s.formId,"pk_org").value:null,y.pk_cust=u,y};break;case"recaccount":var m;if("F1"==f||"F3"==f||"23E1"==f)"1"==(m=i.values.objtype).value||"2"==m.value?(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=s.state.json["public-000147"]):"3"==m.value?(n.itemType="refer",n.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",n.refName=s.state.json["public-000148"]):(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=s.state.json["public-000149"]);n.queryCondition=function(t){if("F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value)return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.refnodename=s.state.json["public-000150"],y.pk_org=e.form.getFormItemsValue(s.formId,"pk_org")?e.form.getFormItemsValue(s.formId,"pk_org").value:null,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y;var o=i.values.objtype.value,l=i.values.supplier?i.values.supplier.value:null,n=i.values.customer?i.values.customer.value:null,d=i.values.pk_psndoc?i.values.pk_psndoc.value:(0,a.getBusinessInfo)().userId,u=null,c=null;return!l||"1"!=o&&"2"!=o?n&&"0"==o?(u=n,c=1):d&&(y.pk_psndoc=d):(u=l,c=3),"3"==o?(y.pk_psndoc=d,y.pk_cust=null,y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.pk_cust=u,y.itemKey=r,y.DataPowerOperationCode="fi",y.accclass=c,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y};break;case"ordercubasdoc":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"freecust":var b=i.values.supplier?i.values.supplier.value:null,g=i.values.customer?i.values.customer.value:null;null==b&&null==g||(0,a.ajax)({url:"/nccloud/arap/ref/freecustcontrol.do",async:!1,data:{supplier:b,customer:g},success:function(e){e.success&&(u=e.data)}}),u&&(n.queryCondition=function(e){if(u)return y.GridRefActionExt="nccloud.web.arap.ref.before.FreeCustSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.customSupplier=null!=b?b:g,y.supplier=y.customSupplier,y.customer=y.customSupplier,y.crossRuleTableConditionsVO="",y});break;case"checkelement":var v=i.values.pk_pcorg?i.values.pk_pcorg.value:null;v||(u=!1),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=v,y};break;case"project_task":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.project=i.values.project?i.values.project.value:null,y};break;case"costcenter":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_pcorg?i.values.pk_pcorg.value:null,y};break;case"project":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"material_src":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.matcustcode=i.values.matcustcode?i.values.matcustcode.value:null,y};break;case"checktype":if(e.form.getFormItemsValue(s.formId,"isinit")?e.form.getFormItemsValue(s.formId,"isinit").value:null){u=!1;break}n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"checkno":u=!1;break;case"checkno_display":if(e.form.getFormItemsValue(s.formId,"isinit")?e.form.getFormItemsValue(s.formId,"isinit").value:null){u=!1;break}var h=i.values.checktype.value;if(!h){u=!1;break}var _=e.form.getFormItemsValue(s.formId,"billclass")?e.form.getFormItemsValue(s.formId,"billclass").value:null,I=(0,o.isChecknoRef)(h,i.values.pk_org.value);I&&"refer"!=n.itemtype?(n.itemtype="refer","fk"==_?n.refcode="fbm/refer/fbm/Bill4CmpPayGridRef/index.js":"sk"==_&&(n.refcode="fbm/refer/fbm/Bill4CmpReceiveGridRef/index.js"),(0,o.reWriteCheckno)(e,t),n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,y.fbmbilltype=i.values.checktype.value,"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y}):I&&"refer"==n.itemtype?n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,y.fbmbilltype=i.values.checktype.value,"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y}:(n.itemtype="input",n.refcode=null);break;case"cbs":(i.values.project?i.values.project.value:null)?(u=!0,n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_project=i.values.project.value,y.pk_org=i.values.pk_org.value,y}):u=!1;break;case"rate":case"grouprate":case"globalrate":(0,a.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",data:{pk_org:i.values.pk_org?i.values.pk_org.value:null,pk_currtype:i.values.pk_currtype?i.values.pk_currtype.value:null,ratekey:r},async:!1,success:function(r){r.success&&(u=r.data,setTimeout((function(){e.cardTable.setEditableByIndex(t,c,"rate",u)}),0))}});break;case"settlemoney":var k=i.values.settlecurr?i.values.settlecurr.value:null,w=i.values.pk_billtype?i.values.pk_billtype.value:null,T=i.values.top_billtype?i.values.top_billtype.value:null;u=!!(k&&w&&T),n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y};break;case"refuse_reason":var C=i.values.commpaytype?i.values.commpaytype.value:null;(0==C||1==C||2==C)&&(u=!1),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y};break;case"caltaxmny":var x=i.values.buysellflag?i.values.buysellflag.value:null;x&&(u=4==x||3==x),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y};break;case"so_deptid":n.isShowUnit=!1,n.unitCondition=function(){return{pkOrgs:i.values.so_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all","F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_deptid_v":n.isShowUnit=!1,n.unitCondition=function(){return{pkOrgs:i.values.so_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all",y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_psndoc":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all","F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_balatype":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.pk_billtype=i.values.pk_billtype?i.values.pk_billtype.value:null,y};break;case"pu_org":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=r,y.pkOrgs=i.values.pk_org.value,y};break;case"pu_org_v":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y};break;case"bankrollprojet":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):(y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"so_deptid":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.pk_org=i.values.so_org?i.values.so_org.value:null,"F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_deptid_v":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.busifuncode="all",y.pk_org=i.values.so_org?i.values.so_org.value:null,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_org":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=r,y.pkOrgs=i.values.pk_org.value,"F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_org_v":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=r,y.pkOrgs=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"sendcountryid":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,"F1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"rececountryid":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,"F0"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_pcorg":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"pk_pcorg_v":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.VersionStartDate=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value:null,y};break;case"productline":case"pk_currtype":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"cashaccount":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"commpayer":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"facard":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(s.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"payman":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(s.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_tradetypeid":n.refName=s.state.json["public-000151"],n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.parentbilltype=e.form.getFormItemsValue(s.formId,"pk_billtype").value,y};break;case"so_ordertype":n.refName=s.state.json["public-000151"],n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.parentbilltype="30,32,38,4310,4331",y};break;case"subjcode":n.queryCondition=function(t){var o=null;return(0,a.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:i.values.pk_org.value},async:!1,success:function(e){e.success&&(o=e.data)}}),y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y.pk_accountingbook=o,y.dateStr=e.form.getFormItemsValue(s.formId,"billdate")?e.form.getFormItemsValue(s.formId,"billdate").value.substring(0,10):null,y.DataPowerOperationCode="fi",y};break;default:n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(s.formId,"pk_org")?e.form.getFormItemsValue(s.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=r,y.pk_org=i.values.pk_org.value,y}}})),e.meta.setMeta(c),e.renderItem("table",t,"checkno",null),u}},17:function(e,t){e.exports=r},175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(2),l=s(o),n=(s(r(17)),r(1)),i=r(177),d=r(29);function s(e){return e&&e.__esModule?e:{default:e}}r(182);var u=n.base.NCButton,c=n.base.NCBreadcrumb,p=n.base.NCModal,f=(c.NCBreadcrumbItem,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.toggleShow=function(){for(var e=r.props.editTable.getStatus(r.tableId),t=[],a=[],o=0;o<r.state.allButtonsKey.length;o++){var l=r.state.allButtonsKey[o];switch(l){case"Edit":"browse"==e?t.push(l):a.push(l);break;case"Save":case"Cancel":case"AddLine":"edit"==e?t.push(l):a.push(l)}}r.props.button.setButtonVisible(t,!0),r.props.button.setButtonVisible(a,!1)},r.cancel=function(){r.props.editTable.cancelEdit(r.tableId)},r.closeModel=function(){r.setState({tableData:[],allData:null}),r.props.handleModel()},r.tableId=d.tableId,r.state={allButtonsKey:["Edit","Cancel","AddLine","Save"],tableData:[],allData:null,json:{}},r.Info={isInitTemplate:!0,isEdit:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){var e=this;(0,n.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){}))}})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.linkTermData.grid&&e.show&&(this.Info.isEdit=e.linkTermData.isEdit,0==this.state.tableData.length&&e.linkTermData!=this.state.allData&&(this.Info.isInitTemplate&&(this.Info.isInitTemplate=!1,i.initTemplate.call(this,this.props)),this.setState({tableData:e.linkTermData.grid,allData:e.linkTermData},(function(){t.props.editTable.setTableData(t.tableId,e.linkTermData.grid[t.tableId]),e.linkTermData.isEdit?"edit"==t.props.editTable.getStatus(t.tableId)?(t.props.editTable.setStatus(t.tableId,"browse"),t.toggleShow()):t.toggleShow():t.props.button.setButtonVisible(t.state.allButtonsKey,!1)}))))}},{key:"render",value:function(){var e=this.props,t=e.show,r=e.editTable,a=e.button,o=(e.linkTermData,r.createEditTable),n=a.createButtonApp;return l.default.createElement(p,{fieldid:"linkTerm",id:"linkTerm-area",show:t,size:"lg",onHide:this.closeModel,backdrop:"static"},l.default.createElement(p.Header,{closeButton:!0},l.default.createElement(p.Title,null,""+this.state.json["public-000069"])),l.default.createElement(p.Body,null,this.Info.isEdit&&l.default.createElement("div",{className:"table-operation-btn"},n({area:"list_head",buttonLimit:3,onButtonClick:i.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),l.default.createElement("div",{className:"table-area"},l.default.createElement("div",{className:this.Info.isEdit?"":"operation-table"},o(this.tableId,{fieldid:"linkterm",showIndex:!0,onAfterEvent:i.afterEvent.bind(this)})))),l.default.createElement(p.Footer,null,l.default.createElement(u,{fieldid:"close",onClick:this.closeModel}," ",this.state.json["public-000070"]," ")))}}]),t}(o.Component));f=(0,n.createPage)({})(f),t.default=f},177:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=t.initTemplate=t.buttonClick=void 0;var a=n(r(178)),o=n(r(179)),l=n(r(181));function n(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=a.default,t.initTemplate=o.default,t.afterEvent=l.default},178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this;switch(t){case"Edit":e.editTable.setStatus(this.tableId,"edit"),this.toggleShow();break;case"Cancel":this.cancel(),this.toggleShow();break;case"AddLine":var o=e.seletedPks,l=null;o&&o.length>0&&(l=o[0]),(0,a.ajax)({url:"/nccloud/arap/arappub/termaddrow.do",data:{moduleId:e.moduleId,billType:e.billType,pk_item:l,pk_bill:e.pk_bill},success:function(t){t.data?e.editTable.addRow(r.tableId,void 0,!1,t.data[r.tableId].rows[0].values):e.editTable.addRow(r.tableId,void 0,!1,void 0)}});break;case"Close":this.closeModel();break;case"Save":if(0==e.editTable.getAllData(this.tableId).rows.length)return void(0,a.toast)({color:"warning",content:this.state.json["public-000067"]});var n=e.seletedPks,i=null;n&&n.length>0&&(i=n[0]);var d={model:e.editTable.getAllData(this.tableId),moduleId:e.moduleId,billType:e.billType,pk_item:i,pk_bill:e.pk_bill};(0,a.ajax)({url:"/nccloud/arap/arappub/linktermsave.do",data:d,success:function(t){t.data&&(r.props.setFormTsVal(t.data.ts),r.setState({tableData:t.data.grid},(function(){e.editTable.setTableData(r.tableId,t.data.grid[r.tableId]),e.editTable.setStatus(r.tableId,"browse"),r.toggleShow(),(0,a.toast)({color:"success",content:r.state.json["public-000068"]})})))}})}};var a=r(1);a.base.Message},179:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;if(e.moduleId){var r=null,a=null,o=e.moduleId;if("2008"==o)r="20082004",a="20082004_LIST";else{if("2006"!=o)return;r="20062004",a="20062004_LIST"}e.createUIDom({pagecode:a,appcode:r},(function(r){if(r){if(r.template){var a=r.template;a=function(e,t,r,a){return t[r].items.push({label:a.state.json["public-000044"],itemtype:"customer",attrcode:"opr",width:"80px",visible:!0,fixed:"right",render:function(t,a,o){var n="browse"===e.editTable.getStatus(r)?[]:["Delete_inner"];return e.button.createOprationButton(n,{area:"list_inner",buttonLimit:3,onButtonClick:function(e,r){return(0,l.default)(e,r,t,a,o)}})}}),t}(e,a,t.tableId,t),e.meta.setMeta(a)}if(r.button){var o=r.button;e.button.setButtons(o)}}}))}};var a,o=r(180),l=(a=o)&&a.__esModule?a:{default:a}},180:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,l){switch(t){case"Delete_inner":e.editTable.deleteTableRowsByRowId(a.tableId,o.rowid,!1)}};r(1);var a=r(29)},181:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,l,n,i,d){var s=this;if("accRate"==r||"prepay"==r||"insurance"==r||"innerctldeferdays"==r)return;if(isNaN(l[0].oldvalue.value)){if(l[0].newvalue.value==l[0].oldvalue.value)return}else if(Number(l[0].newvalue.value)==Number(l[0].oldvalue.value))return;var u=e.seletedPks,c=null;u&&u.length>0&&(c=u[0]);var p={key:r,model:e.editTable.getAllData(this.tableId),index:n,moduleId:e.moduleId,billType:e.billType,pk_item:c,pk_bill:e.pk_bill};(0,a.ajax)({url:"/nccloud/arap/arappub/termafterevent.do",data:p,success:function(t){t.data&&e.editTable.setTableData(s.tableId,t.data[s.tableId],!1)}})};var a=r(1)},182:function(e,t,r){var a=r(183);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};r(4)(a,o);a.locals&&(e.exports=a.locals)},183:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,"#linkTerm-area {\n  background: rgba(0, 0, 0, 0.5);\n  height: auto;\n}\n#linkTerm-area .u-modal-dialog {\n  min-height: 600px;\n}\n#linkTerm-area .u-modal-header {\n  padding: 10px 15px;\n  border-radius: 3px 3px 0px 0px;\n}\n#linkTerm-area .u-modal-header .u-close span {\n  font-size: 22px;\n}\n#linkTerm-area .table-area {\n  padding: 8px 20px 0 20px;\n}\n#linkTerm-area .u-modal-body {\n  padding: 0;\n}\n#linkTerm-area .u-modal-body .table-operation-btn {\n  text-align: right;\n  padding: 5px 17px;\n  margin-top: 10px;\n}\n#linkTerm-area .u-modal-body .u-table-body-inner {\n  overflow: auto;\n}\n#linkTerm-area .u-modal-body .operation-table .u-table-body {\n  min-height: 300px !important;\n}\n",""])},184:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,l,n){var i=[];n?r.forEach((function(e){i.push({pk_bill:e.data.values[o].value,billType:e.data.values.pk_billtype.value})})):i=r;(0,a.ajax)({url:"/nccloud/arap/arappub/madebill.do",data:i,success:function(r){r.success&&(a.cacheTools.set(l+r.data.cachekey,r.data.pklist),t.openTo(r.data.url,{status:"edit",n:e.state.json["public-000233"],appcode:r.data.appcode,pagecode:r.data.pagecode,scene:l+r.data.cachekey}))}})};var a=r(1)},187:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyBill=t.listCopyBill=void 0;var a=r(1),o=r(188);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(e,t,r){for(var l=new Map,n=0;n<o.headkey.length;n++)l.set(o.headkey[n],e.values[o.headkey[n]].value);var i=t[0].values.direction.value,d=new Map;if(1==i)for(var s=o.bodykey.concat(o.deBodykey),u=0;u<t.length;u++){for(var c=new Map,f=0;f<s.length;f++)c.set(s[f],t[u].values[s[f]]?t[u].values[s[f]].value:null);d.set(u,c)}if(-1==i)for(var m=o.bodykey.concat(o.crBodykey),b=0;b<t.length;b++){for(var y=new Map,g=0;g<m.length;g++)y.set(m[g],t[b].values[m[g]]?t[b].values[m[g]].value:null);d.set(b,y)}(0,a.ajax)({url:"/nccloud/arap/arappub/processImpMoney.do",async:!1,data:{BillClass:r,head:l,bodys:d},success:function(r){var a=r.data.parent;Object.keys(a).map((function(t){if(a[t]&&e.values[t]&&!e.values[t].display){var r=e.values[t].scale;e.values[t].value=r&&-1!=r?p(a[t],r):a[t]}}));for(var o=r.data.children[0],l=function(e){var r=o[e],a=t[e];Object.keys(r).map((function(e){if(r[e]&&a.values[e]&&!a.values[e].display){var t=a.values[e].scale;a.values[e].value=t&&-1!=t?p(r[e],t):r[e]}}))},n=0;n<o.length;n++)l(n)}})},i=function(e,t,r,a,l,n){var i=a.userId,d=a.userName,s=a.groupId,c=a.groupName,p=a.businessDate;Object.keys(t.values).map((function(e){-1!=o.parentItemKey.indexOf(e)&&(t.values[e].value=null,t.values[e].display=null)})),l==o.IBillFieldGet.YS||l==o.IBillFieldGet.SK||l==o.IBillFieldGet.ZF?(t.values.src_syscode.value=o.FromSystem.AR,t.values.src_syscode.display=e.state.json["public-000218"]):(t.values.src_syscode.value=o.FromSystem.AP,t.values.src_syscode.display=e.state.json["public-000219"]);var f=u(l);if(t.values[f].value=null,l!=o.IBillFieldGet.FK&&l!=o.IBillFieldGet.SK||(t.values.settletype.value=o.ArapBillVOConsts.m_intJSZXZF_NONE,t.values.settletype.display=e.state.json["public-000220"],t.values.settleflag.value=o.ArapBillVOConsts.m_intDJZzzt_Default,t.values.settleflag.display=e.state.json["public-000221"]),t.values.isreded.value=!1,t.values.isrefund.value="N",t.values.pk_group.value=s,t.values.pk_group.display=c,t.values.creator.value=i,t.values.creator.display=d,t.values.creationtime.value=p,t.values.billdate.value=p,t.values.busidate.value=p,t.values.billmaker.value=i,t.values.billmaker.display=d,r){var m=n.billdate;t.values.billdate.value=m,t.values.busidate.value=m,t.values.billstatus.value=o.billstatus.AUDIT,t.values.billstatus.display=e.state.json["public-000222"],t.values.effectdate.value=m,t.values.effectstatus.value=o.effectstatus.EXECUTED,t.values.effectstatus.display=e.state.json["public-000223"],t.values.effectuser.value=i,t.values.effectuser.display=d,t.values.approvestatus.value=o.approvestatus.PASSING,t.values.approvestatus.display=e.state.json["public-000222"],t.values.approver.value=i,t.values.approver.display=d,t.values.approvedate.value=m}else t.values.billstatus.display=e.state.json["public-000224"],t.values.billstatus.value=o.billstatus.SAVE,t.values.effectstatus.value=o.effectstatus.INVALID,t.values.effectstatus.display=e.state.json["public-000225"],t.values.approvestatus.value=o.approvestatus.NOSTATE,t.values.approvestatus.display=e.state.json["public-000226"];var b=n.pk_busitype,y=n.pk_busitypeName;t.values.pk_busitype.value=b,t.values.pk_busitype.display=y},d=function(e,t,r,a,l,n){for(var i=a.groupId,d=a.groupName,s=a.businessDate,f=function(e){var a=t[e];a.status="2",Object.keys(a.values).map((function(e){-1!=o.childrenItemKey.indexOf(e)&&(a.values[e].value=null,a.values[e].display=null)}));var f=c(l);a.values[f].value=o.INDEX_PK+a.values.rowno.value;var m=u(l);if(a.values[m].value=null,a.values.settlemoney.value=p(0,a.values.settlemoney.scale),a.values.settlecurr.value=null,a.values.settlecurr.display=null,a.values.rate.value=p(0,a.values.settlemoney.scale),a.values.grouprate.value=p(0,a.values.settlemoney.scale),a.values.globalrate.value=p(0,a.values.settlemoney.scale),r){var b=n.billdate;a.values.billdate.value=b,a.values.busidate.value=b}else a.values.billdate.value=s,a.values.busidate.value=s;a.values.pk_group.value=i,a.values.pk_group.display=d,l==o.IBillFieldGet.YS||l==o.IBillFieldGet.FK?(a.values.money_bal.value=a.values.money_de.value,a.values.occupationmny.value=a.values.money_de.value,a.values.local_money_bal.value=a.values.local_money_de.value):l!=o.IBillFieldGet.YF&&l!=o.IBillFieldGet.SK||(a.values.money_bal.value=a.values.money_cr.value,a.values.occupationmny.value=a.values.money_cr.value,a.values.local_money_bal.value=a.values.local_money_cr.value)},m=0;m<t.length;m++)f(m)},s=function(e,t,r,l){for(var n=0;n<t.length;n++){if(r==o.ArapConstant.ARAP_FK_BILLCLASS&&t[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_CUSTOMER&&l)return(0,a.toast)({color:"danger",content:e.state.json["public-000240"]}),!0;if(r==o.ArapConstant.ARAP_AP_BILLCLASS&&t[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_CUSTOMER&&l)return(0,a.toast)({color:"danger",content:e.state.json["public-000239"]}),!0;if(r==o.ArapConstant.ARAP_SK_BILLCLASS&&t[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_SUPPLIER&&l)return(0,a.toast)({color:"danger",content:e.state.json["public-000241"]}),!0}return!1},u=function(e){return e==o.IBillFieldGet.YS?"pk_recbill":e==o.IBillFieldGet.YF?"pk_payablebill":e==o.IBillFieldGet.FK?"pk_paybill":e==o.IBillFieldGet.SK?"pk_gatherbill":e==o.IBillFieldGet.ZF?"pk_estipayablebill":e==o.IBillFieldGet.ZS?"pk_estirecbill":void 0},c=function(e){return e==o.IBillFieldGet.YS?"pk_recitem":e==o.IBillFieldGet.YF?"pk_payableitem":e==o.IBillFieldGet.FK?"pk_payitem":e==o.IBillFieldGet.SK?"pk_gatheritem":e==o.IBillFieldGet.ZF?"pk_estipayableitem":e==o.IBillFieldGet.ZS?"pk_estirecitem":void 0},p=function(e,t){if(isNaN(Number(e))||!e)return null;var r=e.toString();if(t>0){var a=r.split(".")[0],o=r.split(".")[1];return o||(o=""),a+"."+(o=o.length<t?o.padEnd(t,"0"):o.substr(0,t))}return r};t.listCopyBill=function(e){(0,a.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:e.props.getUrlParam("id"),pageId:e.getPagecode(),billType:e.billType,type:1,tradeType:e.getPagecode()},success:function(t){e.props.beforeUpdatePage(),t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.setTableData(e.tableId,t.data.body[e.tableId])),e.state.buttonfalg=!0,e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.updatePage(e.formId,e.tableId),e.toggleShow()},error:function(t){e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setTableData(e.tableId,{rows:[]}),e.props.setUrlParam({status:"browse"}),e.props.cardTable.setStatus(e.tableId,"browse"),e.props.form.setFormStatus(e.formId,"browse"),e.toggleShow();var r=String(t),o=r.substring(6,r.length);(0,a.toast)({color:"danger",content:o})}})},t.copyBill=function(e,t){var r=e.props.createMasterChildData(t,e.formId,e.tableId),o=r.head[e.formId].rows[0],u=r.body[e.tableId].rows,c=o.values.billclass.value,p=o.values.isrefund.value;if(!s(e,u,c,p)){var f=(0,a.getBusinessInfo)(),m=o.values.isinit.value,b="";(0,a.ajax)({url:"/nccloud/arap/arappub/getBusitypeAndBilldate.do",async:!1,data:{isInit:m,pk_org:o.values.pk_org.value,pk_billtype:o.values.pk_billtype.value,pk_tradetype:o.values.pk_tradetype.value,creator:o.values.creator.value},success:function(e){b=e.data}}),e.props.beforeUpdatePage(),i(e,o,m,f,c,b),d(e,u,m,f,c,b),n(o,u,c),e.props.form.setAllFormValue(l({},e.formId,r.head[e.formId])),e.props.cardTable.setTableData(e.tableId,r.body[e.tableId]),e.props.setUrlParam({status:"add",type:"copy"}),e.state.buttonfalg=!0,e.props.resMetaAfterPkorgEdit(),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!1}),e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.updatePage(e.formId,e.tableId),e.toggleShow()}}},188:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ArapConstant={ARAP_POWER_CODE:"fi",ARAP_AR_BILLCLASS:"ys",ARAP_AP_BILLCLASS:"yf",ARAP_SK_BILLCLASS:"sk",ARAP_FK_BILLCLASS:"fk",ARAP_ZS_BILLCLASS:"zs",ARAP_ZF_BILLCLASS:"zf",ASSO_OBJ_CUSTOMER:"0",ASSO_OBJ_SUPPLIER:"1",ASSO_OBJ_DEPT:"2",ASSO_OBJ_BUSIMAN:"3",ASSO_OBJ_ALL:"9"},t.parentItemKey=["isreded","outbusitype","payman","paydate","isonlinepay","officialprintuser","officialprintdate","settlenum","approvenote","modifiedtime","creationtime","creator","modifier","isflowbill","confirmuser","billno","billdate","billstatus","operator","approver","approvestatus","approvedate","lastapproveid","isnetpayready","lastadjustuser","signuser","signyear","signperiod","settleflag","settletype","effectstatus","effectuser","effectdate","src_syscode","approvedate","signuser","busidate","signdate","isforce","commpayenddate","commpaybegindate","isfromindependent","invoiceno","sddreversalflag","reversalreason","payreason","failurereason","sddreversaler","sddreversaldate","creditrefstd","ts","coordflag","isrefund"],t.childrenItemKey=["payflag","top_tradetype","src_tradetype","checkdirection","transferdate","src_itemid","rowtype","top_itemid","top_billid","billno","coordflag","ispaytermmodified","pk_ssitem","top_billtype","transferflag","src_billid","src_billtype","dstlsubcs","isverifyfinished","pausetransact","billdate","payman","paydate","verifyfinisheddate","innerorderno","purchaseorder","invoiceno","occupationmny","busidate","contractno","commpaystatus","commpaytype","refuse_reason","paystaus","commpaytype","commpaystatus","refuse_reason","commpayer","isrefused","confernum","checkno","checkno_display","checktype","bankrelated_code","payreason","batchcode","pk_batchcode","settlemoney","settlecurr","ts","transerial"],t.IBillFieldGet={YS:"ys",YF:"yf",SK:"sk",FK:"fk",ZS:"zs",ZF:"zf",F0:"F0",F1:"F1",F2:"F2",F3:"F3",DE:"DE",DF:"DF",F0S:"23F0",F1C:"23F1",F2S:"23F2",F3C:"23F3",E0:"23E0",E1:"23E1"},t.FromSystem={AR:"0",AP:"1",CMP:"2",SO:"3",PO:"4",FTS:"5",NET:"6",CFBM:"8",XTDJ:"9",CDMA:"10",XBGL:"12",TB:"13",TO:"16",WBJHPT:"17",ZJJX:"18",IC:"19",CT:"20",YS:"24",PS:"7",AM:"104",WSBX:"105",CR09:"109"},t.ArapBillVOConsts={m_intJSZXZF_NetBank:"5",m_intJSZXZF_NONE:"0",m_intJSZXZF_HAND:"3",m_intJSZXZF_BCenter:"10",m_intDJZzzt_Default:"0",m_intDJZzzt_Succeed:"1",m_intDJZzzt_Fail:"-1",m_intDJZzzt_Ongoing:"2",m_intDJZzzt_partly:"11"},t.billstatus={UNCOMFIRM:"9",SAVE:"-1",AUDIT:"1",AUDITING:"2",TEMPEORARY:"-99",SIGN:"8"},t.effectstatus={EXECUTED:"10",INVALID:"0"},t.approvestatus={NOSTATE:"-1",NOPASS:"0",PASSING:"1",GOINGON:"2",COMMIT:"3"},t.INDEX_PK="index_0",t.headkey=["pk_org","pk_group","billdate","pk_currtype","billclass"],t.bodykey=["pk_org","pk_group","buysellflag","top_billtype","pk_currtype","taxprice","direction","taxrate","occupationmny","money_bal","local_money_bal"],t.crBodykey=["globalcrebit","globalnotax_cre","globaltax_cre","groupcrebit","groupnotax_cre","grouptax_cre","local_money_cr","local_notax_cr","local_tax_cr","money_cr","notax_cr","quantity_cr"],t.deBodykey=["globaldebit","globalnotax_de","globaltax_de","groupdebit","groupnotax_de","grouptax_de","local_money_de","local_notax_de","local_tax_de","money_de","notax_de","quantity_de"]},189:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.autoAddLineKeys=["money_de","money_cr"]},191:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.formId="head",t.tableId="bodys",t.leftarea="left",t.nodekey="card",t.billType="F0",t.tradeType="D0",t.dataSource="fi.arap.recbill.20060RBM",t.pkname="pk_recbill",t.linkPageId="20060RBM_LIST_LINK"},2:function(e,r){e.exports=t},20:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formBeforeEvent=void 0;var a=r(1);t.formBeforeEvent=function(e,t,r,o){var l=this,n=!0,i=e.meta.getMeta(),d=e.form.getFormItemsValue(this.formId,"pk_tradetype")?e.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,s={model:e.form.getAllFormValue(this.formId),pageid:this.pageId},u={model:{areaType:"table",areacode:null,rows:[e.cardTable.getVisibleRows(this.tableId)[0]]},pageid:this.pageId},c=JSON.stringify(s),p=JSON.stringify(u),f={itemKey:r,isHead:!0,crossRuleConditionsVO:c,crossRuleTableConditionsVO:p,tradeType:d,DataPowerOperationCode:"",isDataPowerEnable:"Y",pk_org:"",busifuncode:"",AppCode:"",orgType:"",refnodename:"",accclass:"",pk_cust:"",pk_currtype:"",pkOrgs:"",parentbilltype:"",dateStr:"",pk_accountingbook:"",GridRefActionExt:"",TreeRefActionExt:"",isadj:"",pk_psndoc:""},m=e.form.getFormItemsValue(this.formId,"pk_billtype")?e.form.getFormItemsValue(this.formId,"pk_billtype").value:null;return i[t].items.map((function(i){i.isShowUnit=!1,i.isShowDisabledData=!1;var s=i.attrcode;if("objtype"==s){for(var u=-1,c=0;c<i.options.length;c++)if(""==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}if("objtype"==s&&"23E1"==m){if("0"==o.value)return n=!1,e.form.setFormItemsDisabled(t,{objtype:!0}),n;for(u=-1,c=0;c<i.options.length;c++)if("0"==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}else if("objtype"==s&&"23E0"==m){if("1"==o.value)return n=!1,e.form.setFormItemsDisabled(t,{objtype:!0}),n;for(u=-1,c=0;c<i.options.length;c++)if("1"==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}if("refer"==i.itemtype&&(i.isMultiSelectedEnabled=!1,i.unitValueIsNeeded=!1),s==r)switch(s){case"pk_org":i.queryCondition=function(t){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"pk_org_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!1,f.data="",f.crossRuleConditionsVO="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"supplier":i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"customer":i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.tradeType=d,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_deptid":i.isShowUnit=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.busifuncode="all",f};break;case"pk_deptid_v":i.isShowUnit=!0,i.unitCondition=function(){return{isDataPowerEnable:"N",pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return f.busifuncode="all",f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.VersionStartDate=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value:null,t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"pk_psndoc":i.isShowUnit=!0,i.isShowDimission=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.busifuncode="all",f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_fiorg":i.queryCondition=function(t){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"pk_fiorg_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!1,f.AppCode=e.getSearchParam("c"),f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f.data="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"sett_org":i.queryCondition=function(t){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"sett_org_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!1,f.AppCode=e.getSearchParam("c"),f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f.data="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"pu_deptid":i.isShowUnit=!1,i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_deptid_v":i.isShowUnit=!1,i.queryCondition=function(t){return f.busifuncode="all",t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_org_v":i.queryCondition=function(t){return i.isShowUnit=!1,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=r,f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder","F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_psndoc":i.isShowUnit=!1,i.queryCondition=function(t){return f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"checkelement":if(!(e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null)){n=!1;break}i.queryCondition=function(t){var a=e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null;if(t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,a)return e.form.setFormItemsDisabled(l.formId,{checkelement:!1}),f.DataPowerOperationCode="fi",f.pk_org=a,f;e.form.setFormItemsDisabled(l.formId,{checkelement:!0})};break;case"cashitem":i.queryCondition=function(t){return f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_subjcode":i.queryCondition=function(t){return f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"costcenter":i.queryCondition=function(t){return f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null,f.orgType="pk_profitcenter",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder",f.itemKey=r,f};break;case"payaccount":var p=e.form.getFormItemsValue(l.formId,"objtype").value;"F0"!=m&&"F2"!=m&&"23E0"!=m||("1"==p?(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000147"]):"3"==p?(i.itemType="refer",i.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",i.refName=l.state.json["public-000148"]):(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000149"])),i.queryCondition=function(t){if("F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"23E1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value)return f.DataPowerOperationCode="fi",f.refnodename=l.state.json["public-000150"],f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",f.itemKey=r,f;var o=e.form.getFormItemsValue(l.formId,"objtype").value,n=e.form.getFormItemsValue(l.formId,"supplier")?e.form.getFormItemsValue(l.formId,"supplier").value:null,i=e.form.getFormItemsValue(l.formId,"customer")?e.form.getFormItemsValue(l.formId,"customer").value:null,d=e.form.getFormItemsValue(l.formId,"pk_psndoc")?e.form.getFormItemsValue(l.formId,"pk_psndoc").value:(0,a.getBusinessInfo)().userId,s=null,u=null;return n&&"1"==o?(s=n,u=3):i&&"0"==o?(s=i,u=1):d&&(f.pk_psndoc=d),f.DataPowerOperationCode="fi",f.accclass=u,f.pk_cust=s,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,"3"==o?(f.pk_psndoc=d,f.pk_cust=null,f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"recaccount":if("F1"==m||"F3"==m||"23E1"==m){var b=e.form.getFormItemsValue(l.formId,"objtype").value;"1"==b||"2"==b?(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000147"]):"3"==b?(i.itemType="refer",i.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",i.refName=l.state.json["public-000148"]):(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000149"])}i.queryCondition=function(t){if("F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value)return f.DataPowerOperationCode="fi",f.refnodename=l.state.json["public-000150"],f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",f.itemKey=r,f;var o=e.form.getFormItemsValue(l.formId,"objtype").value,n=e.form.getFormItemsValue(l.formId,"supplier")?e.form.getFormItemsValue(l.formId,"supplier").value:null,i=e.form.getFormItemsValue(l.formId,"customer")?e.form.getFormItemsValue(l.formId,"customer").value:null,d=e.form.getFormItemsValue(l.formId,"pk_psndoc")?e.form.getFormItemsValue(l.formId,"pk_psndoc").value:(0,a.getBusinessInfo)().userId,s=null,u=null;return n&&"1"==o?(s=n,u=3):i&&"0"==o?(s=i,u=1):d&&(f.pk_psndoc=d),f.DataPowerOperationCode="fi",f.accclass=u,f.pk_cust=s,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"3"==o?(f.pk_psndoc=d,f.pk_cust=null,f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"cashaccount":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder",f.itemKey=r,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rate":case"grouprate":case"globalrate":(0,a.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",async:!1,data:{pk_org:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,pk_currtype:e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,ratekey:r},success:function(t){t.success&&(n=t.data,setTimeout((function(){e.form.setFormItemsDisabled(l.formId,{key:!t.data})}),0))}});break;case"pk_balatype":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder",f.itemKey=r,f};break;case"bankrollprojet":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.GridRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"),f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"pu_org":i.queryCondition=function(t){return f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=r,"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_currtype":case"pk_busitype":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f};break;case"pk_pcorg":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_pcorg_v":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.VersionStartDate=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_org":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=r,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_org_v":i.queryCondition=function(t){return i.isShowUnit=!1,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_deptid":case"so_deptid_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!0,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"so_org")?e.form.getFormItemsValue(l.formId,"so_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_psndoc":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!0,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"so_org")?e.form.getFormItemsValue(l.formId,"so_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rececountryid":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"sendcountryid":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rececountryid":case"taxcountryid":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"approver":case"billmaker":case"confirmuser":case"creator":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"consignagreement":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"effectuser":case"lastadjustuser":case"lastapproveid":case"modifier":case"officialprintuser":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"ordercubasdoc":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"outbusitype":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"payman":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_deptid_res":case"pk_rescenter":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"sddreversaler":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"signuser":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_tradetypeid":i.refName=l.state.json["public-000151"],i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.parentbilltype=e.form.getFormItemsValue(l.formId,"pk_billtype").value,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"subjcode":i.fieldDisplayed="dispname",i.queryCondition=function(t){var o=null;return(0,a.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null},async:!1,success:function(e){e.success&&(o=e.data)}}),f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.pk_accountingbook=o,f.dateStr=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value.substring(0,10):null,f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f};break;case"objtype":break;case"start_period":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.isadj="N",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.itemKey=r,f};break;default:i.isShowUnit=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return t&&("grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=r,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f}}})),e.meta.setMeta(i),n}},201:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactButton=function(e,t){var r=void 0,a=void 0;(r=function e(t,r){if(t)return t;var a=!0,o=!1,l=void 0;try{for(var n,i=r[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var d=n.value;if("Add"==d.key)t=d;else if(0==d.children.length){if("Add"==d.key){t=d;break}}else if(t=e(t,d.children))break}}catch(e){o=!0,l=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw l}}return t}(r,e))&&(r.children&&r.children.length>0&&(a=r.children[0]),a&&t&&t.length>0&&(a.children=a.children.concat(t)))},t.getTransferInfo=function(e,t){var r=e.Info.pullBillInfoVOAry,a=void 0;if(r)for(var o=0;o<r.length;o++){var l=r[o];if(l.src_billtype===t){a=l;break}}return a}},202:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,l){var n=void 0,i=void 0,d=void 0,s=void 0,u=void 0,c=void 0;r.data?(n=r.data.values.pk_org.value,i=r.data.values.pk_group.value,d=r.data.values.pk_billtype.value,s=r.data.values.pk_tradetype.value,u=r.data.values.billdate.value,c=r.data.values.isrefund?r.data.values.isrefund.value:null):(n=r.rows[0].values.pk_org.value,i=r.rows[0].values.pk_group.value,d=r.rows[0].values.pk_billtype.value,s=r.rows[0].values.pk_tradetype.value,u=r.rows[0].values.billdate.value,c=r.rows[0].values.isrefund?r.rows[0].values.isrefund.value:null);if(c&&1==c){if(d&&"F1"==d)return void(0,a.toast)({color:"warning",content:e.state.json["public-000239"]});if(d&&"F3"==d)return void(0,a.toast)({color:"warning",content:e.state.json["public-000240"]})}var p="2006"==l.substring(0,4)?"AR":"AP",f=[{pk_group:i,pk_org:n,relationID:o,pk_billtype:s}],m={messagevo:[{pk_system:p,relationid:o,busidate:u,pk_org:n,pk_group:i,pk_billtype:s}],desbilltype:["C0"],srcbilltype:s};(0,a.ajax)({url:"/nccloud/arap/arappub/linkvouchar.do",data:f,async:!1,success:function(r){if(r.success){var o=r.data.src;if("_LinkVouchar2019"==o)if(r.data.des){if(r.data.pklist)return 1==r.data.pklist.length?void t.openTo(r.data.url,{status:"browse",appcode:r.data.appcode,pagecode:r.data.pagecode,id:r.data.pklist[0],n:e.state.json["public-000231"],backflag:"noback"}):(a.cacheTools.set(r.data.cachekey,r.data.pklist),void t.openTo(r.data.url,{status:"browse",appcode:r.data.appcode,pagecode:r.data.pagecode,scene:l+o,n:e.state.json["public-000231"]}))}else a.cacheTools.set(l+o,r.data.pklist);else"_Preview2019"==o&&a.cacheTools.set(l+o,m);t.openTo(r.data.url,{status:"browse",appcode:r.data.appcode,pagecode:r.data.pagecode,scene:l+o,n:e.state.json["public-000232"]})}}})};var a=r(1)},220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accAdd=function(e,t){var r,a,o;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{a=t.toString().split(".")[1].length}catch(e){a=0}return(e*(o=Math.pow(10,Math.max(r,a)))+t*o)/o},t.Subtr=function(e,t){var r,a,o;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{a=t.toString().split(".")[1].length}catch(e){a=0}return((e*(o=Math.pow(10,Math.max(r,a)))-t*o)/o).toFixed(r>=a?r:a)},t.accMul=function(e,t){var r=0,a=e.toString(),o=t.toString();try{r+=a.split(".")[1].length}catch(e){}try{r+=o.split(".")[1].length}catch(e){}return Number(a.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,r)},t.accDiv=function(e,t){}},221:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cardFieldsEditable=t.billEditProperties=t.fctToArapFieldEditable=t.applyToF3FieldsEditable=t.F0ToF3FieldsEditable=t.dealCommisionPayField=t.objtypeEditable=void 0;var a=r(1);t.objtypeEditable=function(e,t,r){var a=e.form.getFormItemsValue(t,"pk_billtype")?e.form.getFormItemsValue(t,"pk_billtype").value:null,o=(e.form.getFormItemsValue(t,"objtype")&&e.form.getFormItemsValue(t,"objtype").value,e.form.getFormItemsValue(t,"isrefund")?e.form.getFormItemsValue(t,"isrefund").value:null);("F1"==a&&o||"F3"==a&&o)&&(e.form.setFormItemsDisabled(t,{objtype:!0,customer:!0}),e.cardTable.setColEditableByKey(r,["objtype","customer"],!0))},t.dealCommisionPayField=function(e,t,r){var a=!!e.form.getFormItemsValue(t,"isforce")&&e.form.getFormItemsValue(t,"isforce").value,o=e.form.getFormItemsValue(t,"pk_billtype")?e.form.getFormItemsValue(t,"pk_billtype").value:null,l=e.form.getFormItemsValue(t,"supplier")?e.form.getFormItemsValue(t,"supplier").value:null,n=e.form.getFormItemsValue(t,"customer")?e.form.getFormItemsValue(t,"customer").value:null;if("F2"==o||"F3"==o){var i="settlement"==e.getUrlParam("src");(a||i)&&(e.form.setFormItemsDisabled(t,{pk_org:!0,objtype:!0,supplier:!0,customer:!0,pk_currtype:!0,rate:!0,payaccount:!0,recaccount:!0,money:!0,local_money:!0,grouplocal:!0,grouprate:!0,globallocal:!0,globalrate:!0,commpaybegindate:!0,commpayenddate:!0,isforce:!0}),e.cardTable.setColEditableByKey(r,["objtype","supplier","customer","pk_currtype","rate","grouprate","globalrate","payaccount","recaccount","commpayer","commpaystatus","commpaytype","money_de","local_money_de","quantity_de","money_bal","local_money_bal","quantity_bal","local_tax_de","notax_de","local_notax_de","groupdebit","grouptax_de","groupnotax_de","globaldebit","globaltax_de","globalnotax_de","quantity_cr","local_money_cr","money_cr","local_tax_cr","notax_cr","local_notax_cr","groupcrebit","grouptax_cre","groupnotax_cre","globalcrebit","globaltax_cre","globalnotax_cre","occupationmny","price","groupbalance","globalbalance","taxprice","caltaxmny","nosubtax"],!0)),l||"F3"!=o||(e.form.setFormItemsDisabled(t,{supplier:!1}),e.cardTable.setColEditableByKey(r,["supplier"],!1)),n||"F2"!=o||(e.form.setFormItemsDisabled(t,{customer:!1}),e.cardTable.setColEditableByKey(r,["customer"],!1))}},t.F0ToF3FieldsEditable=function(e,t,r){e.form.setFormItemsDisabled(t,{objtype:!0,pk_currtype:!0}),e.cardTable.setColEditableByKey(r,["objtype","pk_currtype"],!0)},t.applyToF3FieldsEditable=function(e,t,r){e.form.setFormItemsDisabled(t,{pk_org:!0,pk_currtype:!0,billdate:!0,supplier:!0}),e.cardTable.setColEditableByKey(r,["pk_currtype","billdate","supplier","prepay","purchaseorder","invoiceno","contractno","quantity_de","pu_org","pu_deptid","pu_psndoc"],!0),(e.form.getFormItemsValue(t,"payaccount")?e.form.getFormItemsValue(t,"payaccount").value:null)&&(e.form.setFormItemsDisabled(t,{payaccount:!0}),e.cardTable.setColEditableByKey(r,["payaccount"],!0))},t.fctToArapFieldEditable=function(e,t,r){var a=e.getUrlParam("srcbilltype");!a||"FCT1"!=a&&"FCT2"!=a||e.form.setFormItemsDisabled(t,{pk_org:!0})},t.billEditProperties=function(e,t,r,o){(0,a.ajax)({url:"/nccloud/arap/arappub/billCanEditProperties.do",data:{pk_bill:t,billType:r,appcode:o},success:function(t){t.success&&(e.state.buttonfalg=!0,e.props.resMetaAfterPkorgEdit(),t.data&&t.data.head&&(e.props.form.setFormItemsDisabled(e.formId,t.data.head),e.headBack=t.data.headBack),t.data&&t.data.body&&(e.props.cardTable.setColEditableByKey(e.tableId,t.data.body,!0),e.bodyBack=t.data.body),e.headBack&&!t.data&&(e.props.form.setFormItemsDisabled(e.formId,e.headBack),e.props.cardTable.setColEditableByKey(e.tableId,e.bodyBack,!1)),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!0}))}})},t.cardFieldsEditable=function(e){var t=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId),r="",a="";if(t&&t.body&&t.body[e.tableId]&&t.body[e.tableId].rows){var o=t.body[e.tableId].rows;r=o[0].values.top_billtype.value,a=o[0].values.pk_billtype.value}var l=[],n=[];if(!r||"4A2F"!=r&&"4BL0"!=r&&"4BL3"!=r||"F0"!=a?!r||"4A3F"!=r&&"4A3H"!=r||"F1"!=a?!r||"4A18"!=r&&"4A23"!=r&&"4A24"!=r&&"4A49"!=r||(l=["pk_currtype","rate"],n=["pk_currtype","rate","money_de","local_money_de","local_notax_cr","notax_de","local_notax_de","money_cr","local_money_cr","local_tax_cr","notax_cr","local_notax_cr"]):(l=["billclass","isinit","billdate","syscode","src_syscode","billstatus","billmaker","pk_busitype","pk_psndoc","supplier","pk_currtype","objtype","pk_org_v","pk_fiorg_v","pk_pcorg_v","sett_org_v","pk_org","pk_pcorg","sett_org","outbusitype","pk_group","creationtime","creator","pk_billtype","pk_tradetype"],n=["pk_org","pk_fiorg","pk_pcorg","pk_pcorg_v","pk_org_v","pk_fiorg_v","sett_org_v","sett_org","supplier","equipmentcode","billdate","pk_group","pk_billtype","billclass","pk_tradetype","busidate","objtype","direction","pk_currtype","pk_psndoc","local_money_cr","money_cr","money_bal","local_money_bal","price","taxprice","top_billid","top_itemid","top_billtype","top_tradetype","src_tradetype","src_billtype","src_billid","src_itemid","pk_payterm","assetpactno","contractno","groupcrebit","globalcrebit","groupbalance","globalbalance","project"]):(l=["pk_org","pk_fiorg","pk_pcorg","sett_org","pk_org_v","pk_fiorg_v","pk_pcorg_v","sett_org_v","outbusitype","pk_group","creationtime","creator","pk_billtype","pk_tradetype","billclass","isinit","billdate","syscode","src_syscode","billstatus","billmaker","pk_busitype","pk_psndoc","customer","pk_currtype","objtype"],n=["pk_org","pk_pcorg","pk_fiorg","sett_org","pk_pcorg_v","pk_org_v","pk_fiorg_v","sett_org_v","customer","equipmentcode","billdate","pk_group","pk_billtype","billclass","pk_tradetype","busidate","objtype","direction","pk_currtype","pk_psndoc","money_de","local_money_de","money_bal","local_money_bal","notax_de","local_notax_de","price","taxprice","top_billid","top_itemid","top_billtype","top_tradetype","src_tradetype","src_billtype","src_billid","src_itemid","pk_payterm","assetpactno","groupdebit","globaldebit","groupbalance","globalbalance","project"]),l&&l.length>0&&n&&n.length>0){for(var i={},d=0;d<l.length;d++){i[l[d]]=!0}e.props.beforeUpdatePage(),e.props.form.setFormItemsDisabled(e.formId,i),e.props.cardTable.setColEditableByKey(e.tableId,n,!0),e.props.updatePage(e.formId,e.tableId)}}},236:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this.props.getSearchParam("c"),a=this.getPagecode();this.props.getUrlParam("srcbilltype")?p.call(this,e,r,a):c(this,e,r,a,t)},t.dealOutToGather=p;var a,o=r(1),l=r(306),n=(a=l)&&a.__esModule?a:{default:a},i=r(191),d=r(6),s=r(12),u=r(8);o.cardCache.getDefData;function c(e,t,r,a,l){var c=(0,o.excelImportconfig)(t,"arap",i.billType,!0,"",{appcode:r,pagecode:e.getExportPageCode()}),p=a;t.createUIDom({pagecode:a,appcode:r,reqDataQueryallbtns:{rqUrl:"/arap/arappub/queryallbtns.do",rqJson:'{\n  "pagecode": "'+a+'",\n  "appcode": "'+r+'"\n,\n  "billtype": "'+i.billType+'"\n,\n  "tradetype": "'+p+'"\n}',rqCode:"button"},reqDataQuerypage:{rqUrl:"/arap/arappub/querypage.do",rqJson:'{\n  "pagecode": "'+a+'",\n  "appcode": "'+r+'"\n}',rqCode:"template"}},(function(r){if(r){if(!r.template[i.tableId])return;if(r.template){var a=r.template;a=function(e,t,r,a){var o=t.getUrlParam("status");return r[i.formId].status=o,r[i.tableId].status=o,r[i.tableId].items.push({label:e.state.json["receivablebill-000020"],itemtype:"customer",attrcode:"opr",width:s.OperationColumn,visible:!0,fixed:"right",render:function(r,a,o){var l=(0,d.cardBodyAndInnerButtonVisible)(e,e.state.buttonfalg,a.expandRowStatus);return t.button.createOprationButton(l,{area:"card_inner",buttonLimit:3,onButtonClick:function(t,l){return(0,n.default)(e,t,l,r,a,o)}})}}),r}(e,t,a),t.meta.setMeta(a)}if(r.button&&r.button.button){var o=r.button.button,p=r.button.pullbillinfo;(0,d.getButtonsKey)(o,e.Info.allButtonsKey),e.Info.pullBillInfoVOAry=p,t.button.setButtons(o),t.button.setUploadConfig("ImportData",c)}r.context&&((0,u.loginContext)(r.context),(0,u.getContext)(u.loginContextKeys.transtype)&&e.refs.tradetypeBtn&&e.refs.tradetypeBtn.setVisible(!1)),l&&l()}}))}function p(e,t,r){var a=this,l="",n={};"35"==this.props.getUrlParam("srcbilltype")&&(l="/nccloud/arap/recbill/arsubtorecbill.do",n={pk_bills:o.cacheTools.get("arsubToF0Pks"),pageId:r}),(0,o.ajax)({url:l,data:n,success:function(l){l.data?(r=l.data.head[a.formId].rows[0].values.pk_tradetype.value,a.data=l.data,c(a,e,t,r,a.initShow)):(a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]}),(0,o.toast)({color:"danger",content:a.state.json["receivablebill-000072"]}))}})}},237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WholeVerify=t.BodyVerify=void 0;var a=r(1),o=r(220),l=void 0,n=void 0,i=void 0;t.BodyVerify=function(e,t,r,o,d,s){var u=(0,a.getBusinessInfo)().businessDate,c=e.cardTable.getCheckedRows(r);if(0!=c.length)if(1==c.length){var p=e.form.getAllFormValue(t).rows[0].values,f=c[0].data.values,m=!0;if(u<e.form.getFormItemsValue(t,"billdate").value.substring(0,10)&&(m=!1),m){var b=!0,y=c[0].data.values.pausetransact.value,g=e.form.getFormItemsValue(t,"effectstatus").value,v=1*c[0].data.values.occupationmny.value;if(10==g){if(0==v&&(b=!1),10==g&&!b)return void(0,a.toast)({color:"warning",content:s.state.json["public-000154"]});if(y)return void(0,a.toast)({color:"warning",content:s.state.json["public-000155"]})}var h=null;switch(f.objtype.value){case"0":h=f.customer;break;case"1":h=f.supplier;break;case"2":h=f.pk_deptid_v;break;case"3":h=f.pk_psndoc}var _={pk_bill:p[o],pkBill:o,pk_org:p.pk_org,pk_item:c[0].data.values[d].value,billType:p.pk_billtype,ts:p.ts,objtype:f.objtype,objTypeValue:h,customer:p.customer,supplier:p.supplier,pk_deptid:p.pk_deptid_v,pk_psndoc:p.pk_psndoc,occupationmnySum:v,pk_tradetype:p.pk_tradetype,pageId:e.getSearchParam("p"),appcode:e.getSearchParam("c"),effectstatus:g,scene:e.getUrlParam("scene")};switch(o){case"pk_payablebill":case"pk_paybill":l="20080PREV",n="20080NOWV",i="20082002";break;case"pk_recbill":case"pk_gatherbill":l="20060PREV",n="20060NOWV",i="20062002"}var I=n,k="/nowv";0==g&&(I=l,k="/prev");var w=e.getUrlParam("scene"),T="appcode="+i+"&pagecode="+I+"&c="+i+"&p="+I+"&scene="+w+"&transAppCode="+e.getUrlParam("appcode")+"&transPageCode="+e.getUrlParam("pagecode")+"&Id="+JSON.stringify(p[o]);m&&b&&!y&&(e.ViewModel.setData("WholeVerifyDatas",_),window.top===window.parent?e.pushTo(k,{appcode:i,pagecode:I,transAppCode:e.getSearchParam("c"),transPageCode:e.getSearchParam("p"),scene:w,Id:p[o]}):(window.location.hash=k+"?"+T,window.parent.location.hash=k+"?"+T))}else(0,a.toast)({color:"warning",content:s.state.json["public-000153"]})}else(0,a.toast)({color:"warning",content:s.state.json["public-000156"]});else(0,a.toast)({color:"warning",content:s.state.json["public-000152"]})},t.WholeVerify=function(e,t,r,d,s){var u=(0,a.getBusinessInfo)().businessDate,c=e.form.getAllFormValue(t).rows[0].values,p=e.form.getFormItemsValue(t,"effectstatus").value,f=e.cardTable.getAllRows(r,!1),m=!0,b=e.form.getFormItemsValue(t,"billdate").value.substring(0,10),y=Date.parse(b);if(Date.parse(u)<y&&(m=!1),m){var g=!0;if(f.length>0)var v=f[0].values.objtype.value;var h="customer";switch(v){case"0":h="customer";break;case"1":h="supplier";break;case"2":h="pk_deptid_v";break;case"3":h="pk_psndoc"}for(var _=0;_<f.length;_++)if(f[_].values.objtype.value!=v){g=!1;break}if(g){var I=!0;if(f.length>0)var k=f[0].values[h].value;if(g)for(_=0;_<f.length;_++)if(f[_].values[h].value!=k){I=!1;break}if(I){var w=!0;if(f.length>0)v=f[0].values.pk_currtype.value;for(_=0;_<f.length;_++)if(f[_].values.pk_currtype.value!=v){w=!1;break}if(w){var T=0;if(f.length>0)for(_=0;_<f.length;_++)T=(0,o.accAdd)(T,1*f[_].values.occupationmny.value);var C=!0,x=!0;if(10==p){if(0==T)return x=!1,void(0,a.toast)({color:"warning",content:s.state.json["public-000160"]});for(_=0;_<f.length;_++)if(1==f[_].values.pausetransact.value){C=!1;break}if(!C)return void(0,a.toast)({color:"warning",content:s.state.json["public-000161"]})}var B=null;switch(c.objtype.value){case"0":B=c.customer;break;case"1":B=c.supplier;break;case"2":B=c.pk_deptid_v;break;case"3":B=c.pk_psndoc}var S={pk_bill:c[d],pkBill:d,pk_org:c.pk_org,pk_item:null,billType:c.pk_billtype,ts:c.ts,objtype:c.objtype,objTypeValue:B,customer:c.customer,supplier:c.supplier,pk_deptid:c.pk_deptid_v,pk_psndoc:c.pk_psndoc,occupationmnySum:T,pk_tradetype:c.pk_tradetype,pageId:e.getSearchParam("p"),appcode:e.getSearchParam("c"),effectstatus:p,scene:e.getUrlParam("scene")};switch(d){case"pk_payablebill":case"pk_paybill":l="20080PREV",n="20080NOWV",i="20082002";break;case"pk_recbill":case"pk_gatherbill":l="20060PREV",n="20060NOWV",i="20062002"}var R=n,E="/nowv";0==p&&(R=l,E="/prev");var A=e.getUrlParam("scene"),F="appcode="+i+"&pagecode="+R+"&c="+i+"&p="+R+"&scene="+A+"&transAppCode="+e.getUrlParam("appcode")+"&transPageCode="+e.getUrlParam("pagecode")+"&Id="+JSON.stringify(c[d]);g&&I&&m&&w&&C&&x&&(e.ViewModel.setData("WholeVerifyDatas",S),window.top===window.parent?e.pushTo(E,{appcode:i,pagecode:R,transVerifyDatas:JSON.stringify(S),transAppCode:e.getSearchParam("c"),transPageCode:e.getSearchParam("p"),scene:A,Id:c[d]}):(window.location.hash=E+"?"+F,window.parent.location.hash=E+"?"+F))}else(0,a.toast)({color:"warning",content:s.state.json["public-000159"]})}else(0,a.toast)({color:"warning",content:s.state.json["public-000158"]})}else(0,a.toast)({color:"warning",content:s.state.json["public-000158"]})}else(0,a.toast)({color:"warning",content:s.state.json["public-000157"]})}},238:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.updatePandC=function(e){var t=e.props.ViewModel.getData("WholeVerifyDatas"),r=window.parent.location.hash.split("?")[1],a=r&&r.split("&");if(a&&a instanceof Array&&a.length>0){var o=a.map((function(e){if(-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array){if("ifr"===e.split("=")[0]){var r=decodeURIComponent(decodeURIComponent(e.split("=")[1])).split("#")[0]+"#/card";e="ifr="+encodeURIComponent(encodeURIComponent(r))}return"p"===e.split("=")[0]&&(e="p="+t.pageId),"c"===e.split("=")[0]&&(e="c="+t.appcode),e}})).join("&");window.parent.location.hash="#/ifr?"+o,e.props.setUrlParam({id:t.pk_bill.value})}}},239:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,l,n,i,d,s){var u=a.cacheTools.get("checkedData"),c=void 0;u&&(c={fipLink:u,pageId:e.getSearchParam("p")});(0,a.ajax)({url:"/nccloud/arap/arappub/queryBillCardByPK.do",data:c,success:function(t){var a=t.success;t.data;if(a&&t.data){var u=t.data[0].head[l].rows[0].values[r].value;e.addUrlParam({id:u}),e.setUrlParam({pk_tradetype:t.data[0].head[l].rows[0].values.pk_tradetype.value}),o(i,e.getUrlParam("id"),t.data[0],l,d),t.data[0].head&&e.form.setAllFormValue(function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},l,t.data[0].head[l])),t.data[0].body&&e.cardTable.setTableData(n,t.data[0].body[n]),s.toggleShow()}}})};var a=r(1);var o=a.cardCache.updateCache},24:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){t&&(0,a.ajax)({url:"/nccloud/arap/arappub/arapBillLinkReport.do",data:{pk_bill:t,billType:r,objType:n},async:!1,success:function(t){if(t.success){var r=function(e){var t={logic:"and",conditions:[{field:"not_search",oprtype:"=",value:{firstvalue:"",secondvalue:""}}],oprtype:"=",display:null},r={logic:"and",conditions:[]};for(var a in e){var o=e[a];switch(a){case"pk_orgs":t.conditions.push({field:a,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o[0],secondvalue:null}});break;case"repInitContext":l=o.m_headVo.node_code;break;case"showFrontN":case"userObject":case"pk_group":case"syscode":case"alarmDay":break;case"qryObjs":var n=o[0],i=n.values.join(","),d=[n.billFieldName,i.replace(/,/g,"@"),!1,!1];r.conditions.push({field:"queryObjsVal",oprtype:"=",value:{firstvalue:d.join(","),secondvalue:null}});break;case"beginDate":case"endDate":t.conditions.push({field:a,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}});break;case"pk_billtypes":var s=[o.join(",").replace(/,/g,"@")];t.conditions.push({field:a,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:s[0],secondvalue:null}});break;case"nooccur_noshow":case"nobal_nooccur_noshow":t.conditions.push({field:a,datatype:"32",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}});break;default:t.conditions.push({field:a,datatype:"203",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}})}}return{queryInfo:t,custconditions:r}}(t.data);o("sessionStorage","LinkReport",JSON.stringify(r.queryInfo),(function(){})),o("sessionStorage","sessionCustcondition",JSON.stringify(r.custconditions),(function(){})),e.openTo("/nccloud/resources/arap/accountquery/report/balanceData/index.html",{appcode:l,pagecode:l+"page"})}}})};var a=r(1),o=a.viewModel.setGlobalStorage,l=void 0},240:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,l,n,i,d,s){var u=e.getUrlParam("pk_src"),c=void 0;u&&(c={dest_billtype:t,pk_src:u,pageId:e.getSearchParam("p")});(0,a.ajax)({url:"/nccloud/arap/arappub/cmpLinkArapCard.do",data:c,success:function(t){var a=t.success;t.data;if(a&&t.data){var u=t.data[0].head[l].rows[0].values[r].value;e.addUrlParam({id:u}),e.setUrlParam({pk_tradetype:t.data[0].head[l].rows[0].values.pk_tradetype.value}),o(i,e.getUrlParam("id"),t.data[0],l,d),t.data[0].head&&e.form.setAllFormValue(function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},l,t.data[0].head[l])),t.data[0].body&&e.cardTable.setTableData(n,t.data[0].body[n]),s.toggleShow()}}})};var a=r(1);var o=a.cardCache.updateCache},246:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){var t,r={times:1,num:0},a=e<0;if(t=e,Math.floor(t)===t)return r.num=e,r;var o=e+"",l=o.indexOf("."),n=o.substr(l+1).length,i=Math.pow(10,n),d=parseInt(Math.abs(e)*i+.5,10);return r.times=i,a&&(d=-d),r.num=d,r}function t(t,r,a,o){var l=e(t),n=e(r),i=l.num,d=n.num,s=l.times,u=n.times,c=s>u?s:u;switch(o){case"add":return(s===u?i+d:s>u?i+d*(s/u):i*(u/s)+d)/c;case"subtract":return(s===u?i-d:s>u?i-d*(s/u):i*(u/s)-d)/c;case"multiply":return i*d/(s*u);case"divide":return i/d*(u/s)}}return{add:function(e,r,a){return t(e,r,0,"add")},subtract:function(e,r,a){return t(e,r,0,"subtract")},multiply:function(e,r,a){return t(e,r,0,"multiply")},divide:function(e,r,a){return t(e,r,0,"divide")}}}();t.floatObj=a},247:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(2),n=(a=l)&&a.__esModule?a:{default:a},i=r(1);r(255);var d=i.base.NCModal,s=i.base.NCTable,u=i.base.NCDiv,c="",p=[{title:n.default.createElement("div",{fieldid:"a"},""),dataIndex:"a",key:"a",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"a"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"b"},""),dataIndex:"b",key:"b",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"c"},""),dataIndex:"c",key:"c",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"c"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"d"},""),dataIndex:"d",key:"d",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"d"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"e"},""),dataIndex:"e",key:"e",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"e"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"f"},""),dataIndex:"f",key:"f",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"f"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"g"},""),dataIndex:"g",key:"g",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"g"},e||n.default.createElement("span",null,""))}}],f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.getTableData=function(){var e={},t=[],a={pk_bill:c,billType:"F0",pageId:"20060RBM_CARD"};(0,i.ajax)({url:"/nccloud/arap/recbill/linkQueryTax.do",data:a,success:function(a){var o=a.data,l=a.success;if(l){var n={};o.body.bodys.rows.forEach((function(r){n=r.values,e.a=n.customer.display,e.b=n.taxcodeid.display,n.taxrate.display?e.c=n.taxrate.display:e.c=n.taxrate.value,e.d=n.taxtype.display,e.e=n.buysellflag.display,(e.f=n.caltaxmny.display)?e.f=n.caltaxmny.display:e.f=n.caltaxmny.value,(e.g=n.local_tax_de.display)?e.g=n.local_tax_de.display:e.g=n.local_tax_de.value,t.push(JSON.parse(JSON.stringify(e)))})),r.setState({tableData:t})}else(0,i.toast)({content:r.state.json["receivablebill-000061"],color:"warning"})}})},r.state={tableData:[],json:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"receivablebill",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){p=[{title:n.default.createElement("div",{fieldid:"a"},e.state.json["receivablebill-000054"]),dataIndex:"a",key:"a",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"a"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"b"},e.state.json["receivablebill-000055"]),dataIndex:"b",key:"b",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"c"},e.state.json["receivablebill-000056"]),dataIndex:"c",key:"c",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"c"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"d"},e.state.json["receivablebill-000057"]),dataIndex:"d",key:"d",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"d"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"e"},e.state.json["receivablebill-000058"]),dataIndex:"e",key:"e",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"e"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"f"},e.state.json["receivablebill-000059"]),dataIndex:"f",key:"f",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"f"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"g"},e.state.json["receivablebill-000060"]),dataIndex:"g",key:"g",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"g"},e||n.default.createElement("span",null,""))}}]}))}})}},{key:"componentWillReceiveProps",value:function(e){c=e.pk_recbill,""!=e.pk_recbill&&e.show&&this.getTableData()}},{key:"render",value:function(){var e=this.props.show,t=this.state.tableData;return n.default.createElement("div",null,n.default.createElement(d,{fieldid:"taxation",id:"ModalId",className:"query-modal",show:e,size:"lg",onHide:this.props.handleModel,backdrop:"static"},n.default.createElement(d.Header,{closeButton:!0},n.default.createElement(d.Title,null,""+this.state.json["receivablebill-000062"])),n.default.createElement(d.Body,null,n.default.createElement(u,{fieldid:"ncc",areaCode:u.config.TABLE,className:"steps-content"},n.default.createElement(s,{columns:p,data:t,isDrag:!0,style:{marginRight:"20px"},scroll:{x:p.length>6?100+10*(p.length-6)+"%":"100%",y:492},loading:!1})))))}}]),t}(l.Component);t.default=f},248:function(e,t){e.exports=o},25:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(2),n=(a=l)&&a.__esModule?a:{default:a},i=r(1);r(34);var d=i.base.NCModal,s=i.base.NCButton,u=i.base.NCTable,c=i.base.NCDiv,p=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},""),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"jine"},""),children:[{title:n.default.createElement("div",{fieldid:"money"},""),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money"},"local_money"),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"ye"},""),children:[{title:n.default.createElement("div",{fieldid:"money_bal"},""),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},""),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"scomment"},""),dataIndex:"scomment",key:"scomment",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"busidate"},""),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"jfjine"},""),children:[{title:n.default.createElement("div",{fieldid:"money_de_b"},""),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},""),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"dfjine"},""),children:[{title:n.default.createElement("div",{fieldid:"money_de_h"},""),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},""),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"billTypeName"},""),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"billno"},""),dataIndex:"billno",key:"billno",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null,""))}}],f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.rowClassNameHandler=function(e,t,a){return r.state.selectedRow[t]?"selected":""},r.onRowClick=function(e,t){var a=new Array(r.state.tableData.length);a[t]=!0,r.setState({factoryValue:e,selectedRow:a,record:e})},r.linkBill=function(){var e=r.state.record;e?(0,i.ajax)({url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{billType:e.billType,pk_bill:e.pk_bill},success:function(e){var t=e.data;t?i.pageTo.openTo(t.url,t.condition):(0,i.toast)({color:"warning",content:r.state.json["public-000057"]})}}):(0,i.toast)({color:"warning",content:r.state.json["public-000014"]})},r.totalData=[],r.table="",r.total="",r.totalColumns=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},""),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money"},""),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money"},""),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money_bal"},""),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},""),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:""},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"scomment"},""),dataIndex:"scomment",key:"scomment",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"busidate"},""),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money_de_b"},""),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},""),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money_de_h"},""),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},""),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"billTypeName"},""),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"billno"},""),dataIndex:"billno",key:"billno",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null,""))}}],r.state={tableData:[],record:null,selectedRow:[],json:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){p=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},e.state.json["public-000045"]),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"jine"},e.state.json["public-000046"]),children:[{title:n.default.createElement("div",{fieldid:"money"},e.state.json["public-000047"]),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money"},e.state.json["public-000048"]),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"ye"},e.state.json["public-000049"]),children:[{title:n.default.createElement("div",{fieldid:"money_bal"},e.state.json["public-000047"]),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},e.state.json["public-000048"]),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"scomment"},e.state.json["public-000050"]),dataIndex:"scomment",key:"scomment",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"busidate"},e.state.json["public-000051"]),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"jfjine"},e.state.json["public-000052"]),children:[{title:n.default.createElement("div",{fieldid:"money_de_b"},e.state.json["public-000047"]),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},e.state.json["public-000048"]),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"dfjine"},e.state.json["public-000053"]),children:[{title:n.default.createElement("div",{fieldid:"money_de_h"},e.state.json["public-000047"]),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},e.state.json["public-000048"]),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null,""))}}]},{title:n.default.createElement("div",{fieldid:"billTypeName"},e.state.json["public-000054"]),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"billno"},e.state.json["public-000055"]),dataIndex:"billno",key:"billno",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null,""))}}],e.totalColumns=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},e.state.json["public-000056"]),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money"},e.state.json["public-000047"]),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money"},e.state.json["public-000048"]),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money_bal"},e.state.json["public-000047"]),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},e.state.json["public-000048"]),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"scomment"},e.state.json["public-000050"]),dataIndex:"scomment",key:"scomment",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"busidate"},e.state.json["public-000051"]),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money_de_b"},e.state.json["public-000047"]),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},e.state.json["public-000048"]),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"money_de_h"},e.state.json["public-000047"]),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},e.state.json["public-000048"]),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,r){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"billTypeName"},e.state.json["public-000054"]),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null,""))}},{title:n.default.createElement("div",{fieldid:"billno"},e.state.json["public-000055"]),dataIndex:"billno",key:"billno",width:100,render:function(e,t,r){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null,""))}}]}))}})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.combinedExaminationData==this.props.combinedExaminationData)return!1;var r=this.state.tableData,a=0==e.combinedExaminationData.length?[]:e.combinedExaminationData.total;a&&a.length>0&&(this.totalData=[{pk_dealnum:a[0],money:a[1],local_money:a[2],money_bal:a[3],local_money_bal:a[4],scomment:a[5],busidate:a[6],money_de_b:a[7],local_money_de_b:a[8],money_de_h:a[9],local_money_de_h:a[10],billTypeName:a[11],billno:a[12]}]),this.setState({tableData:0==e.combinedExaminationData.length?[]:e.combinedExaminationData.list},(function(){if(t.setState({selectedRow:new Array(r.length)}),t.state.tableData.length>0){var e=t.table.querySelector(".u-table-body"),a=t.total.querySelector(".u-table-body");e.onscroll=function(){a.scrollLeft=e.scrollLeft},a.onscroll=function(){e.scrollLeft=a.scrollLeft}}}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.show,a=t.pk_tradetypeid,o=t.billno,l=this.state.tableData,i="100px",f=document.getElementById("combinedExaminationModelId");if(f){var m=f.querySelector(".u-modal-body");m&&(i=m.offsetHeight-200+"px")}return n.default.createElement("div",null,n.default.createElement(d,{fieldid:"combinedExamination",id:"combinedExaminationModelId",className:"query-modal",show:r,size:"xlg",backdrop:"static",onHide:this.props.handleModel},n.default.createElement(d.Header,{closeButton:!0},n.default.createElement(d.Title,null,""+this.state.json["public-000058"])),n.default.createElement(d.Body,null,n.default.createElement("div",{className:"steps-content"},n.default.createElement("ul",{className:"content-tit"},n.default.createElement("div",{className:"content-tit-tit"},n.default.createElement("li",{className:"tit-tradetype"},n.default.createElement("span",null,this.state.json["public-000059"],""),n.default.createElement("span",null,a)),n.default.createElement("li",{className:"tit-billno"},n.default.createElement("span",null,this.state.json["public-000060"],""),n.default.createElement("span",null,o))),n.default.createElement("li",null,n.default.createElement(s,{fieldid:"linkbill",className:"button-primary",style:{float:"right"},onClick:this.linkBill},this.state.json["public-000061"]))),n.default.createElement(c,{fieldid:"ncc",areaCode:c.config.TABLE,className:"table-area"},n.default.createElement(u,{className:"total-rows",columns:p,isDrag:!0,ref:function(t){e.table=ReactDOM.findDOMNode(t)},data:l,style:{marginRight:"20px",height:"350px"},loading:!1,onRowClick:this.onRowClick.bind(this),rowClassName:this.rowClassNameHandler,footer:function(){return n.default.createElement(u,{className:"total-row",ref:function(t){return e.total=ReactDOM.findDOMNode(t)},rowKey:"total",isDrag:!0,data:e.totalData,columns:e.totalColumns,showHeader:!1,scroll:{x:!0,y:"35px"},bodyStyle:{height:"35px"}})},scroll:{x:!0,y:i},bodyStyle:{height:i}}))))))}}]),t}(l.Component);f=(0,i.createPage)({})(f),t.default=f},253:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this,g=(0,v.getContext)(v.loginContextKeys.transtype);switch(t){case d.headButton.Refund:(0,a.ajax)({url:"/nccloud/arap/arappub/refund.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,a.toast)({color:"success",title:""}),C.call(r,e)}});break;case d.headButton.CancelRefund:(0,a.ajax)({url:"/nccloud/arap/arappub/cancelrefund.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,a.toast)({color:"success",title:""}),C.call(r,e)}});break;case d.headButton.Save:this.saveBill("/nccloud/arap/arappub/save.do");break;case d.headButton.Edit:x.call(this);break;case d.headButton.Copy:(0,y.copyBill)(this,this.getPagecode());break;case d.headButton.TaxChecked:this.handleTaxInformation();break;case d.headButton.Delete:(0,a.promptBox)({color:"warning",title:this.state.json["receivablebill-000016"],content:this.state.json["receivablebill-000017"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:this.delConfirm});break;case d.headButton.Cancel:(0,a.promptBox)({color:"warning",title:this.state.json["receivablebill-000012"],content:this.state.json["receivablebill-000018"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:this.cancel});break;case d.headButton.Add:var h=I("sessionTradeType",o.dataSource);g?h=g:h||(h=this.getPagecode()),h!=this.getPagecode()?(e.setUrlParam({status:"add",pagecode:h}),c.default.call(this,this.props)):e.setUrlParam({status:"add",pagecode:h}),this.initAdd();break;case d.headButton.Pausetrans:this.pause("/nccloud/arap/arappub/pause.do");break;case d.headButton.Cancelpause:this.pause("/nccloud/arap/arappub/cancelpause.do");break;case d.headButton.TempSave:this.saveBill("/nccloud/arap/arappub/tempsave.do");break;case d.headButton.SaveAndCommit:this.saveBill("/nccloud/arap/arappub/saveandcommit.do");break;case d.headButton.Commit:this.Info.tipUrl="/nccloud/arap/arappub/commit.do",this.commitAndUncommit();break;case d.headButton.Uncommit:this.Info.tipUrl="/nccloud/arap/arappub/uncommit.do",this.commitAndUncommit();break;case d.headButton.LinkAprv:this.setState({showApproveDetail:!0});break;case d.headButton.LinkConfer:(0,a.ajax)({url:"/nccloud/arap/arappub/linkconfer.do",async:!1,data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType},success:function(t){var r=t.data;r&&e.openTo(r.url,r.condition)}});break;case d.headButton.MadeBill:var w=[{pk_bill:e.form.getFormItemsValue(o.formId,"pk_recbill").value,billType:o.billType,tradeType:e.form.getFormItemsValue(o.formId,"pk_tradetype").value}];(0,b.default)(this,e,w,"",e.getSearchParam("c"));break;case d.headButton.BodyVerify:(0,p.BodyVerify)(e,this.formId,this.tableId,"pk_recbill","pk_recitem",this);break;case d.headButton.WholeVerify:(0,p.WholeVerify)(e,this.formId,this.tableId,"pk_recbill",this);break;case d.headButton.BillLinkQuery:this.setState({showBillTrack:!0});break;case d.headButton.LinkTbb:(0,a.ajax)({url:"/nccloud/arap/arappub/linktbb.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType},success:function(e){e.success&&(r.Info.tbbLinkSourceData=e.data,r.setState({isTbbLinkshow:!0}))}});break;case d.headButton.LinkBal:(0,f.default)(this.props,this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,this.billType,this.props.form.getFormItemsValue(this.formId,"objtype").value);break;case d.headButton.LinkVouchar:(0,m.default)(this,e,this.props.form.getAllFormValue(this.formId),this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,this.props.getSearchParam("c"));break;case d.headButton.RedBack:var S={pk_bill:this.props.getUrlParam("id"),ts:this.props.form.getFormItemsValue(this.formId,"ts").value,pageId:this.getPagecode(),billType:this.billType,tradeType:this.getPagecode()};(0,a.ajax)({url:"/nccloud/arap/arappub/redback.do",data:S,success:function(t){r.props.beforeUpdatePage(),t.data.head&&r.props.form.setAllFormValue(_({},r.formId,t.data.head[r.formId])),t.data.body&&r.props.cardTable.setTableData(r.tableId,t.data.body[r.tableId]),e.setUrlParam({status:"add",id:r.props.getUrlParam("id"),type:"redBack"}),r.state.buttonfalg=!0,r.props.cardTable.setStatus(r.tableId,"edit"),r.props.form.setFormStatus(r.formId,"edit"),r.props.form.setFormItemsDisabled(r.formId,{pk_org:!0}),r.props.updatePage(r.formId,r.tableId),r.toggleShow(),r.props.button.setButtonVisible([d.headButton.TempSave],!1)}});break;case d.headButton.Generate:(0,n.generate)(this);break;case d.headButton.LinkTerm:var R=this.props.cardTable.getCheckedRows(this.tableId),E=[];0!=R.length&&R.forEach((function(e){E.push(e.data.values.pk_recitem.value)})),(0,a.ajax)({url:"/nccloud/arap/arappub/linkterm.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType,pk_items:E,moduleId:"2006"},success:function(e){if(e.success){var t=e.data;r.Info.selectedPKS=E,r.Info.linkTermData=t,r.handleLinkTerm()}}});break;case d.headButton.LinkDeal:(0,a.ajax)({url:"/nccloud/arap/arappub/linkdeal.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType},success:function(e){if(e.success){var t=e.data;r.Info.combinedExaminationData=t,r.handleCombined()}}});break;case d.headButton.ReceiptCheck:if("add"==e.getUrlParam("status"))return void(0,a.toast)({color:"warning",content:this.state.json["receivablebill-000037"]});(A={}).pk_billid=e.getUrlParam("id"),A.pk_billtype=this.props.form.getFormItemsValue(this.formId,"pk_billtype").value,A.pk_tradetype=this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value,A.pk_org=this.props.form.getFormItemsValue(this.formId,"pk_org").value,(0,i.imageView)(A,"iweb");break;case d.headButton.ReceiptScan:if("add"==e.getUrlParam("status"))return void(0,a.toast)({color:"warning",content:this.state.json["receivablebill-000038"]});var A,F=this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value,P=e.createMasterChildData(F,o.formId,o.tableId);(A={}).pk_billid=e.getUrlParam("id"),A.pk_billtype=P.head.head.rows[0].values.pk_billtype.value,A.pk_tradetype=P.head.head.rows[0].values.pk_tradetype.value,A.pk_org=P.head.head.rows[0].values.pk_org.value,A.BillType=P.head.head.rows[0].values.pk_tradetype.value,A.BillDate=P.head.head.rows[0].values.creationtime.value,A.Busi_Serial_No=P.head.head.rows[0].values.pk_recbill.value,A.OrgNo=P.head.head.rows[0].values.pk_org.value,A.BillCode=P.head.head.rows[0].values.billno.value,A.OrgName=P.head.head.rows[0].values.pk_org.display,A.Cash=P.head.head.rows[0].values.money.value,(0,i.imageScan)(A,"iweb");break;case d.headButton.Print:this.onPrint();break;case d.headButton.Output:this.printOutput();break;case d.headButton.OfficalPrint:this.officalPrintOutput();break;case d.headButton.CancelPrint:this.cancelPrintOutput();break;case d.headButton.ExportData:this.state.forceRender&&this.setState({forceRender:!1});var V=e.getUrlParam("id"),q=[];q.push(V),this.Info.selectedPKS=q,this.props.modal.show("exportFileModal");break;case d.headButton.AttachManage:if("add"==e.getUrlParam("status")||"copy"==e.getUrlParam("copyFlag")||"redBack"==e.getUrlParam("writebackFlag"))return void(0,a.toast)({color:"warning",content:this.state.json["receivablebill-000019"]});this.setState({showUploader:!0,target:null});break;case d.headButton.Refresh:(0,a.ajax)({url:"/nccloud/arap/arappub/cardRefresh.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,a.toast)({color:"success",title:r.state.json["receivablebill-000069"]}),C.call(r,e)},error:function(e){r.props.form.EmptyAllFormValue(r.formId),r.props.cardTable.setTableData(r.tableId,{rows:[]}),T(o.pkname,r.props.getUrlParam("id"),o.dataSource),r.toggleShow();var t=String(e),l=t.substring(6,t.length);(0,a.toast)({color:"danger",content:l})}});break;case d.headButton.SpecialInvoice:B.call(this,0);break;case d.headButton.GeneralInvoice:B.call(this,1);break;case d.headButton.ElectronicInvoice:B.call(this,2);break;case d.headButton.OilSpecialInvoice:B.call(this,3);break;case d.headButton.OilGeneralInvoice:B.call(this,4);break;case d.headButton.OilElectronicInvoice:B.call(this,5);break;case d.headButton.RedInvoice:var D=this.props.form.getFormItemsValue(this.formId,"money")?this.props.form.getFormItemsValue(this.formId,"money").value:0,j=this.props.form.getFormItemsValue(this.formId,"customer")?this.props.form.getFormItemsValue(this.formId,"customer").display:null;if(D>=0)return void(0,a.toast)({color:"warning",content:this.state.json["receivablebill-000073"]});if(!j)return void(0,a.toast)({color:"warning",content:this.state.json["receivablebill-000074"]});var O=null,U=function(e){var t=null,r=!1,o=e.props.form.getFormItemsValue(e.formId,"pk_recbill")?e.props.form.getFormItemsValue(e.formId,"pk_recbill").value:null,l=e.props.form.getFormItemsValue(e.formId,"pk_billtype")?e.props.form.getFormItemsValue(e.formId,"pk_billtype").value:null,n=e.props.cardTable.getRowsByIndexs(e.tableId,0);if(n){var i=n[0].values.top_billtype?n[0].values.top_billtype.value:null;l===i&&(t=n[0].values.top_billid?n[0].values.top_billid.value:null)}return(0,a.ajax)({url:"/nccloud/arap/recbill/querybulebill.do",data:{pk_bill:o,billType:l},async:!1,success:function(e){},error:function(e){r=!0;var t=String(e.message);(0,a.toast)({color:"danger",content:t})}}),{pkBillBlue:t,isExit:r}}(this);if(U.isExit)return;var G=U.pkBillBlue;G&&(O={pkBillBlue:G,amountRed:l.floatObj.multiply(D,-1),customer:j}),this.invoiceComponent.setBillParams({pkBill:this.props.getUrlParam("id"),tradeType:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").value:null,billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null,invoiceIinformation:O,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null},(function(){r.invoiceComponent.redRush.show()}));break;case d.headButton.MaintainTaxInvoice:this.invoiceComponent.setBillParams({pkBill:this.props.getUrlParam("id"),tradeType:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").value:null,billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null},(function(){r.invoiceComponent.linkSituation.show()}));break;case d.headButton.LinkTaxInvoice:this.invoiceComponent.setBillParams({pkBill:this.props.getUrlParam("id"),tradeType:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").value:null,billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null},(function(){r.invoiceComponent.linkInvoice.show()}));break;case d.bodyButton.AddLine:if(null!=this.props.form.getFormItemsValue(this.formId,"pk_org").value&null!=this.props.form.getFormItemsValue(this.formId,"pk_currtype").value){var M=e.cardTable.getNumberOfRows(this.tableId);(0,a.ajax)({url:"/nccloud/arap/recbill/addline.do",data:this.props.createMasterChildData(this.getPagecode(),this.formId,this.tableId),success:function(e){e.data&&(e.data.head&&r.props.form.setAllFormValue(_({},r.formId,e.data.head[r.formId])),e.data.body&&r.props.cardTable.addRow(r.tableId,M,e.data.body[r.tableId].rows[0].values))}})}break;case d.bodyButton.DelLine:(0,n.delLine)(this),this.onSelected();break;case d.bodyButton.CopyLine:(0,n.copyLine)(this,o.dataSource)&&this.setState({buttonfalg:!1},(function(){(0,u.cardBodyControl)(e,r.state.buttonfalg,r)}));break;case d.bodyButton.PasteLine:(0,n.pasteLine)(this);break;case d.bodyButton.PasteToEndLine:(0,n.pasteToEndLine)(this,o.dataSource);break;case d.bodyButton.CancelLine:this.setState({buttonfalg:!0},(function(){(0,u.cardBodyControl)(e,r.state.buttonfalg,r)})),this.onSelected();break;default:var L=(0,s.getTransferInfo)(this,t);L&&(0,a.ajax)({url:"/nccloud/arap/arappub/queryrelatedapp.do",data:{billType:L.src_billtype},success:function(t){if(t){k(L.src_billtype+L.transtypes[0],"transfer.dataSource",L.busitypes);var a=I("sessionTradeType",o.dataSource);g?a=g:a||(a=r.getPagecode());var l="/"+L.src_billtype;e.pushTo(l,{src_appcode:t.data.appcode,src_tradetype:L.transtypes[0],dest_billtype:r.billType,dest_tradetype:a})}}})}},t.refreshBill=C,t.cardBillEdit=x;var a=r(1),o=r(191),l=r(246),n=r(7),i=r(28),d=r(5),s=r(201),u=r(6),c=h(r(236)),p=r(237),f=h(r(24)),m=h(r(202)),b=h(r(184)),y=r(187),g=r(221),v=r(8);function h(e){return e&&e.__esModule?e:{default:e}}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=a.cardCache.getDefData,k=a.cardCache.setDefData,w=a.cardCache.updateCache,T=a.cardCache.deleteCacheById;function C(e){e.data?(w(o.pkname,this.props.getUrlParam("id"),e.data,this.formId,o.dataSource),e.data.head&&this.props.form.setAllFormValue(_({},this.formId,e.data.head[this.formId])),e.data.body&&this.props.cardTable.setTableData(this.tableId,e.data.body[this.tableId])):(this.props.form.EmptyAllFormValue(this.formId),this.props.cardTable.setTableData(this.tableId,{rows:[]})),this.toggleShow()}function x(){var e=this;this.props.cardTable.selectAllRows(this.tableId,!1);var t=0,r=this.props.getUrlParam("scene"),o=this.props.form.getFormItemsValue(this.formId,"billno").value,l=!0;if("approve"!=r&&"approvesce"!=r||(t=1,(0,a.ajax)({url:"/nccloud/riart/message/list.do",async:!1,data:{billno:o,isread:"N"},success:function(t){t.data&&t.data.total<1&&((0,a.toast)({content:e.state.json["receivablebill-000035"],color:"warning"}),l=!1)}})),"zycl"==r&&(t=2,(0,a.ajax)({url:"/nccloud/ssctp/sscbd/SSCTaskHandlePendingNumAction.do",async:!1,data:{billno:o},success:function(t){t.data&&t.data.total<1&&((0,a.toast)({content:e.state.json["receivablebill-000036"],color:"warning"}),l=!1)}})),l){var n={pk_bill:this.props.getUrlParam("id"),billType:this.billType,sence:t,pageId:this.getPagecode(),appcode:this.props.getSearchParam("c")};(0,a.ajax)({url:"/nccloud/arap/arappub/edit.do",data:n,success:function(t){t.success&&(e.props.setUrlParam({status:"edit"}),e.state.buttonfalg=!0,e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.resMetaAfterPkorgEdit(),t.data&&t.data.head&&(e.props.form.setFormItemsDisabled(e.formId,t.data.head),e.headBack=t.data.headBack),t.data&&t.data.body&&(e.props.cardTable.setColEditableByKey(e.tableId,t.data.body,!0),e.bodyBack=t.data.body),e.headBack&&!t.data&&(e.props.form.setFormItemsDisabled(e.formId,e.headBack),e.props.cardTable.setColEditableByKey(e.tableId,e.bodyBack,!1)),(0,g.cardFieldsEditable)(e),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!0}),e.toggleShow())}})}}function B(e){var t=this;(0,a.ajax)({url:"/nccloud/arap/recbill/invgenerate.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType,invoiceType:e},success:function(e){var r=e.success,o=e.data;r&&(o&&o.message?(0,a.toast)({duration:"infinity",color:"success",content:o.message}):(0,a.toast)({color:"success",content:t.state.json["receivablebill-000025"]}))}})}},254:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this,a=this;if(1==e.transferTable.getTransformFormAmount(l.leftarea))return void i.default.call(this,e,t);switch(t){case"Cancel":(0,o.promptBox)({color:"warning",title:this.state.json["receivablebill-000041"],content:this.state.json["receivablebill-000042"],beSureBtnName:this.state.json["receivablebill-000043"],cancelBtnName:this.state.json["receivablebill-000044"],beSureBtnClick:function(){if(r.props.getUrlParam("id")){r.props.setUrlParam({status:"browse"});var t=r.props.getUrlParam("id"),a=c(t,l.dataSource);a&&(r.props.beforeUpdatePage(),r.props.form.EmptyAllFormValue(r.formId),r.props.cardTable.setTableData(r.tableId,{rows:[]}),r.props.form.setAllFormValue(d({},r.formId,a.head[r.formId])),r.props.cardTable.setTableData(r.tableId,a.body[r.tableId]),r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse"),r.props.updatePage(r.formId,r.tableId),r.toggleShow())}else e.transferTable.setTransformFormStatus(l.leftarea,{status:!1,onChange:function(e,t){}})}});break;case"Delete":(0,o.promptBox)({color:"warning",title:this.state.json["receivablebill-000016"],content:this.state.json["receivablebill-000017"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:function(){(0,o.ajax)({url:"/nccloud/arap/arappub/delete.do",data:[{pk_bill:r.props.getUrlParam("id"),ts:r.props.form.getFormItemsValue(r.formId,"ts").value,billType:r.billType}],success:function(t){1==e.transferTable.getTransformFormAmount(l.leftarea)?history.go(-1):(u(l.pkname,e.getUrlParam("id"),l.dataSource),e.transferTable.setTransformFormStatus(l.leftarea,{status:!1,onChange:function(e,t){(0,o.toast)({color:"success",content:a.state.json["receivablebill-000034"]})}}))}})}});break;case"Copy":(0,o.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:e.getUrlParam("id"),ts:this.props.form.getFormItemsValue(this.formId,"ts").value,pageId:this.getPagecode(),billType:this.billType,tradeType:this.getPagecode()},success:function(t){t.data&&(t.data.head&&(r.props.form.EmptyAllFormValue(r.formId),r.props.form.setAllFormValue(d({},r.formId,t.data.head[r.formId]))),t.data.body&&(r.props.cardTable.setTableData(r.tableId,{rows:[]}),r.props.cardTable.setTableData(r.tableId,t.data.body[r.tableId]))),r.props.setUrlParam({status:"add"}),r.props.addUrlParam({operFlag:"copy"}),r.state.buttonfalg=!0,e.resMetaAfterPkorgEdit(),r.props.form.setFormItemsDisabled(r.formId,{pk_org:!1}),r.toggleShow()}});break;default:i.default.call(this,e,t)}},t.setValue=function(e,t){this.props.beforeUpdatePage(),t.data.head&&t.data.head[l.formId]&&e.form.setAllFormValue(d({},l.formId,t.data.head[l.formId]));t.data.body&&t.data.body[l.tableId]&&e.cardTable.updateDataByRowId(this.tableId,t.data.body[this.tableId]);for(var r=this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,a=this.props.createMasterChildData(this.getPagecode(),this.formId,this.tableId),o=[],n=1*this.props.cardTable.getNumberOfRows(this.tableId),i=0;i<n;i++)o.push(this.props.cardTable.getValByKeyAndIndex(this.tableId,i,"top_itemid").value);e.transferTable.savePk(e.getUrlParam("dataSource"),o),"add"==e.getUrlParam("status")?s(r,a,l.formId,l.dataSource):p(l.pkname,r,a,l.formId,l.dataSource);this.props.updatePage(this.formId,this.tableId),this.props.transferTable.setTransformFormStatus(l.leftarea,{status:!0})};var a,o=r(1),l=r(191),n=r(253),i=(a=n)&&a.__esModule?a:{default:a};function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}o.cardCache.setDefData,o.cardCache.getDefData;var s=o.cardCache.addCache,u=(o.cardCache.getNextId,o.cardCache.deleteCacheById),c=o.cardCache.getCacheById,p=o.cardCache.updateCache;o.cardCache.getCurrentLastId},255:function(e,t,r){var a=r(256);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};r(4)(a,o);a.locals&&(e.exports=a.locals)},256:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,"#ModalId {\n  background: rgba(0, 0, 0, 0.5);\n  text-align: center;\n}\n#ModalId .u-modal-dialog {\n  min-height: 600px;\n}\n#ModalId .u-modal-header {\n  border-radius: 3px 3px 0px 0px;\n  padding: 10px 15px;\n}\n#ModalId .u-modal-dialog .u-modal-content .u-modal-body {\n  padding: 0;\n}\n#ModalId .u-table-body {\n  min-height: 502px;\n}\n#ModalId .u-table-content {\n  position: relative;\n  min-height: 492px;\n  border-right: none;\n  border-left: none;\n}\n#ModalId .steps-content {\n  padding: 0 20px;\n  min-height: 522px;\n  min-width: 250px;\n  margin-top: 10px;\n}\n#ModalId .steps-content .u-table-header .u-table-thead tr:not(th:last-child) {\n  text-align: center;\n  border-right: 1px solid #d0d0d0;\n}\n#ModalId .steps-action {\n  margin-top: 24px;\n}\n#ModalId .querymodal-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#ModalId .querymodal-tit-close {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  line-height: 20px;\n}\n#ModalId .querymodal-tit-close:hover {\n  cursor: pointer;\n}\n#ModalId .hesuanzhangbu {\n  width: 200px;\n  text-align: left;\n  margin-left: -60px;\n}\n#ModalId .first-page-radio {\n  margin-top: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#ModalId .first-page-radio .radios {\n  margin-left: 50px;\n}\n#ModalId .first-page-radio span {\n  margin-left: 40px;\n}\n#ModalId .last {\n  margin-bottom: 15px;\n}\n#ModalId .u-radio-group .u-radio-label {\n  width: 120px;\n  font-size: 13px;\n  padding-left: 0px;\n}\n#ModalId .form-item-class {\n  width: 200px;\n  background-color: yellow;\n}\n#ModalId .secont-content-footer {\n  margin: 20px 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#ModalId .secont-content-footer span {\n  margin-right: 10px;\n}\n#ModalId .second-radios {\n  margin: 0 0 20px 80px;\n}\n#ModalId .row-class {\n  margin-top: 20px;\n}\n#ModalId .u-label {\n  height: 30px;\n  line-height: 30px;\n  margin: 0 60px 0 0px;\n  min-width: 70px;\n  width: 70px;\n  text-align: right;\n}\n#ModalId .u-input-group .u-form-control {\n  margin-bottom: -9px;\n}\n#ModalId .finance {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 440px;\n}\n#ModalId .finance .finance-refer {\n  width: 360px;\n}\n#ModalId .pub-droplist {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 440px;\n}\n#ModalId .pub-droplist .pub-droplist-cont {\n  width: 360px;\n}\n#ModalId .pub-dreder {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 440px;\n}\n#ModalId .pub-dreder .pub-dreder-cont {\n  width: 360px;\n}\n#ModalId .lable {\n  display: inline-block;\n  height: 30px;\n  line-height: 30px;\n  min-width: 80px;\n  width: 80px;\n  text-align: right;\n}\n",""])},26:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return n.default.createElement(c,Object.assign(t,e))};var o,l=r(2),n=(o=l)&&o.__esModule?o:{default:o},i=r(1);r(37);var d=i.cardCache.setDefData,s=i.high.Refer,u=i.base.NCButton,c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setVisible=function(e){r.setState({visible:e})},r.state={visible:!0,json:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this.props,t=e.billtype,r=e.dataSource,a=e.switchTemplate;return n.default.createElement("div",{className:(this.state.visible?"show":"hide")+"  teadetype-lightapp-component"},n.default.createElement("span",null,n.default.createElement(s,{fieldid:"tradetype",placeholder:this.state.json["public-000139"],refName:this.state.json["public-000151"],refCode:"tradetype",refType:"grid",queryGridUrl:"/nccloud/riart/ref/fiBillTypeTableRefAction.do",columnConfig:[{name:[this.state.json["public-000245"],this.state.json["public-000246"]],code:["refcode","refname"]}],queryCondition:{parentbilltype:t},onChange:function(e){d("sessionTradeType",r,e.refcode),d("isSwitchTradeType",r,!0),a&&a()},isMultiSelectedEnabled:!1,clickContainer:n.default.createElement(u,{fieldid:"tradetype",colors:"primary"},this.state.json["public-000139"])})))}}]),t}(l.Component)},27:function(e,t,r){var a=r(39);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};r(4)(a,o);a.locals&&(e.exports=a.locals)},28:function(e,t){e.exports=a},29:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.tableId="list",t.yfappcode="20082004",t.yfpagecode="20082004_LIST",t.ysappcode="20062004",t.yspagecode="20062004_LIST"},3:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",a=e[3];if(!a)return r;if(t&&"function"==typeof btoa){var o=(n=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),l=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[r].concat(l).concat([o]).join("\n")}var n;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},o=0;o<this.length;o++){var l=this[o][0];"number"==typeof l&&(a[l]=!0)}for(o=0;o<e.length;o++){var n=e[o];"number"==typeof n[0]&&a[n[0]]||(r&&!n[2]?n[2]=r:r&&(n[2]="("+n[2]+") and ("+r+")"),t.push(n))}},t}},304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(2),n=x(l),i=r(1),d=r(305),s=r(254),u=x(r(247)),c=r(6),p=x(r(25)),f=x(r(175)),m=r(191),b=r(16),y=r(20),g=r(36),v=r(7),h=r(221),_=x(r(248)),I=r(238),k=r(8),w=x(r(239)),T=x(r(240)),C=x(r(26));function x(e){return e&&e.__esModule?e:{default:e}}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(27);var S=i.base.NCButton,R=(i.base.NCBackBtn,i.base.NCDiv),E=i.base.NCAffix,A=i.high.Inspection,F=i.high.BillTrack,P=i.high.NCUploader,V=i.high.PrintOutput,q=i.high.ApproveDetail,D=i.cardCache.setDefData,j=i.cardCache.getDefData,O=i.cardCache.addCache,U=i.cardCache.getNextId,G=i.cardCache.deleteCacheById,M=i.cardCache.getCacheById,L=i.cardCache.updateCache,N=i.cardCache.getCurrentLastId,K=i.high.ExcelImport,H=i.high.ApprovalTrans,J=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.getPagecode=function(){var e=r.props.getUrlParam("pagecode");return e||(e=r.props.getSearchParam("p")),"20060RBM_CARD_LINK"!=e||r.props.getUrlParam("scene")||r.props.ViewModel.setData("nccloud-router-params",{scene:"linksce"}),e},r.getExportPageCode=function(){var e="20060RBM_CARD";return r.props.getUrlParam("scene")&&(e="20060RBM_CARD_LINK"),"20060RBM_CARD_LINK"!=e||r.props.getUrlParam("scene")||r.props.ViewModel.setData("nccloud-router-params",{scene:"linksce"}),e},r.initShow=function(){if("transfer"===r.props.getUrlParam("type")&&"browse"!=r.props.getUrlParam("status")){var e=r.props.transferTable.getTransferTableSelectedId(r.headId);r.getTransferValue(e)}else if(r.props.getUrlParam("scene")&&"fip"==r.props.getUrlParam("scene"))(0,w.default)(r.props,m.linkPageId,"pk_recbill",r.formId,r.tableId,m.pkname,m.dataSource,r);else if(r.props.getUrlParam("scene")&&"linksce"==r.props.getUrlParam("scene")&&"ftsLinkArap"==r.props.getUrlParam("flag"))(0,T.default)(r.props,r.billType,"pk_recbill",r.formId,r.tableId,m.pkname,m.dataSource,r);else if("copy"===r.props.getUrlParam("type"))(0,i.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:r.props.getUrlParam("id"),pageId:r.getPagecode(),billType:r.billType,type:1,tradeType:r.getPagecode()},success:function(e){r.props.beforeUpdatePage(),e.data&&(e.data.head&&r.props.form.setAllFormValue(B({},r.formId,e.data.head[r.formId])),e.data.body&&r.props.cardTable.setTableData(r.tableId,e.data.body[r.tableId])),r.state.buttonfalg=!0,r.props.cardTable.setStatus(r.tableId,"edit"),r.props.form.setFormStatus(r.formId,"edit"),r.props.updatePage(r.formId,r.tableId),r.toggleShow()},error:function(e){r.props.form.EmptyAllFormValue(r.formId),r.props.cardTable.setTableData(r.tableId,{rows:[]}),r.props.setUrlParam({status:"browse"}),r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse"),r.toggleShow();var t=String(e),a=t.substring(6,t.length);(0,i.toast)({color:"danger",content:a})}});else if("edit"==r.props.getUrlParam("status")||"browse"==r.props.getUrlParam("status")){var t=r.props.getUrlParam("id");if(!t)return void r.toggleShow();(0,i.ajax)({url:"/nccloud/arap/recbill/cardquery.do",data:{pk_bill:t},success:function(e){r.props.beforeUpdatePage(),e.data&&(e.data.head&&r.props.form.setAllFormValue(B({},r.formId,e.data.head[r.formId])),e.data.body&&r.props.cardTable.setTableData(r.tableId,e.data.body[r.tableId])),"edit"==r.props.getUrlParam("status")?((0,h.billEditProperties)(r,r.props.getUrlParam("id"),r.billType,r.props.getSearchParam("c")),(0,h.cardFieldsEditable)(r)):r.state.buttonfalg=null,r.props.getUrlParam("scene")||r.props.setUrlParam({pagecode:e.data.head[r.formId].rows[0].values.pk_tradetype.value});var t=r.props.getUrlParam("status");r.props.cardTable.setStatus(r.tableId,t),r.props.form.setFormStatus(r.formId,t),r.props.updatePage(r.formId,r.tableId),L(m.pkname,r.props.getUrlParam("id"),e.data,r.formId,m.dataSource),r.toggleShow()}})}else"add"==r.props.getUrlParam("status")&&r.props.getUrlParam("srcbilltype")?(r.props.beforeUpdatePage(),r.data.head&&r.props.form.setAllFormValue(B({},r.formId,r.data.head[r.formId])),r.data.body&&r.props.cardTable.setTableData(r.tableId,r.data.body[r.tableId]),r.state.buttonfalg=!0,r.props.cardTable.setStatus(r.tableId,"edit"),r.props.form.setFormStatus(r.formId,"edit"),r.props.updatePage(r.formId,r.tableId),r.toggleShow()):"add"==r.props.getUrlParam("status")?r.initAdd():r.toggleShow()},r.getTransferValue=function(e){if(e){var t={data:e,pageId:r.getPagecode(),destTradetype:r.getPagecode(),srcBilltype:r.props.getUrlParam("srcBilltype")};(0,i.ajax)({url:"/nccloud/arap/arappub/transfer.do",data:t,success:function(e){e&&e.data&&(r.props.transferTable.setTransferListValue(r.leftarea,e.data),(0,h.cardFieldsEditable)(r)),r.toggleShow()}})}else r.props.transferTable.setTransferListValue(r.leftarea,[])},r.synTransferData=function(){if(1!=r.props.transferTable.getTransformFormAmount(r.leftarea)){var e=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId);r.props.transferTable.setTransferListValueByIndex(r.leftarea,e,r.transferIndex)}},r.initAdd=function(e){e||(e=!1),(0,i.ajax)({url:"/nccloud/arap/recbill/initadd.do",data:{isClearPKorg:e,appcode:r.props.getSearchParam("c"),pageId:r.getPagecode(),tradeType:r.getPagecode()},success:function(e){e.data&&(r.props.beforeUpdatePage(),r.props.form.setAllFormValue(B({},r.formId,e.data.head[r.formId])),r.props.cardTable.setTableData(r.tableId,e.data.body[r.tableId]),e.data.head[r.formId].rows[0].values.pk_org.value?(r.props.resMetaAfterPkorgEdit(),r.props.form.setFormItemsDisabled(r.formId,{pk_org:!1}),r.state.buttonfalg=!0):(r.state.buttonfalg=null,r.props.getUrlParam("type")||r.props.initMetaByPkorg()),r.props.form.setFormStatus(r.formId,"edit"),r.props.cardTable.setStatus(r.tableId,"edit"),r.props.updatePage(r.formId,r.tableId));r.toggleShow()},error:function(e){var t=String(e);"browse"!=r.props.getUrlParam("status")&&(r.props.setUrlParam({status:"browse"}),r.props.form.setFormStatus(r.formId,"browse"),r.props.cardTable.setStatus(r.tableId,"browse"),r.toggleShow());var a=t.substring(6,t.length);(0,i.toast)({color:"danger",content:a})}})},r.toggleShow=function(e){var t=r.props.getUrlParam("status");t||(t="browse");var a={};if(e)a=e.rows[0].values;else{var o=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId).head[r.formId];o&&(a=o.rows[0].values)}"browse"!=t?(r.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1}),r.refs.tradetypeBtn&&!(0,k.getContext)(k.loginContextKeys.transtype)&&r.refs.tradetypeBtn.setVisible(!1)):(a.pk_tradetype&&a.pk_tradetype.value?r.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0):r.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0}),r.refs.tradetypeBtn&&!(0,k.getContext)(k.loginContextKeys.transtype)&&r.refs.tradetypeBtn.setVisible(!0));for(var l=[],n=[],i=0;i<r.Info.allButtonsKey.length;i++){(0,c.buttonVisible)(t,a,r.Info.allButtonsKey[i],"card",r)?l.push(r.Info.allButtonsKey[i]):n.push(r.Info.allButtonsKey[i])}"browse"==t?(0,c.initCardBodybrowseControl)(r):(0,c.initCardBodyEditControl)(r.props,a.pk_org?a.pk_org.value:null,r),c.dealTranferBtns.call(r,n),c.dealSrcProjectBtns.call(r,n,r.props.cardTable.getRowsByIndexs(r.tableId,0)),r.props.button.setButtonVisible(l,!0),r.props.button.setButtonVisible(n,!1),r.props.getUrlParam("scene")&&"linksce"!=r.props.getUrlParam("scene")&&"fip"!=r.props.getUrlParam("scene")&&r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1})},r.onSelected=function(){(0,c.onSelectedCardBodyEditControl)(r)},r.delConfirm=function(e,t){(0,i.ajax)({url:"/nccloud/arap/arappub/delete.do",data:[{pk_bill:r.props.getUrlParam("id"),ts:r.props.form.getFormItemsValue(r.formId,"ts").value,billType:m.billType,extype:e,flag:t}],success:function(e){if("1"==e.data.exType)return r.Info.tipContent=e.data.message,r.Info.exType="1",r.Info.flag=!0,void r.props.modal.show("deleteCheck");var t=r.props.getUrlParam("id");G(m.pkname,t,m.dataSource);var a=U(t,m.dataSource);a?("transfer"===r.props.getUrlParam("type")&&r.props.setUrlParam({status:"browse"}),r.props.setUrlParam({id:a}),r.initShow()):(r.props.setUrlParam({id:null}),r.props.form.EmptyAllFormValue(r.formId),r.props.cardTable.setTableData(r.tableId,{rows:[]}),r.toggleShow()),r.clearExType()}})},r.saveBill=function(e,t,a,o){if("/nccloud/arap/arappub/tempsave.do"!=e){var l=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId);if((0,v.delBlankLine)(r,r.tableId,r.billType,l,o),!r.props.form.isCheckNow(r.formId))return;if(!r.props.cardTable.checkTableRequired(r.tableId))return}var n=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId),d={cardData:(0,g.dealCardData)(r,n),uiState:r.props.getUrlParam("status"),extype:t,flag:a};r.props.validateToSave(d.cardData,(function(){(0,i.ajax)({url:e,data:d,success:function(t){var a=null,o=null;if(t.success){if("1"==t.data.exType)return r.Info.tipContent=t.data.message,r.Info.pk_bill=t.data.pk_bill,r.Info.ts=t.data.ts,r.Info.billCard=t.data.billCard,r.Info.tipUrl=null==t.data.pk_bill?e:"/nccloud/arap/arappub/commit.do",r.Info.exType="1",r.Info.flag=!0,void(null==t.data.pk_bill?r.props.modal.show("saveCheck"):r.commitAndUncommit());if("2"==t.data.exType)return r.Info.tipContent=t.data.message,r.Info.pk_bill=t.data.pk_bill,r.Info.ts=t.data.ts,r.Info.billCard=t.data.billCard,r.Info.tipUrl=null==t.data.pk_bill?e:"/nccloud/arap/arappub/commit.do",r.Info.exType="2",r.Info.flag=!0,void(null==t.data.pk_bill?r.props.modal.show("saveCheck"):r.commitAndUncommit());if("3"==t.data.exType)t.data.message;else if(t.data.assignInfo&&t.data.assignInfo.workflow&&("approveflow"==t.data.assignInfo.workflow||"workflow"==t.data.assignInfo.workflow))return r.Info.compositedata=t.data.assignInfo,r.Info.pk_bill=t.data.pk_bill,r.Info.ts=t.data.ts,r.Info.exType=t.data.exType,r.Info.billCard=t.data.billCard,r.Info.tipUrl="/nccloud/arap/arappub/commit.do",void r.setState({compositedisplay:!0});if(t.data){if("transfer"==r.props.getUrlParam("type"))s.setValue.call(r,r.props,t);else{r.props.beforeUpdatePage(),t.data.head&&t.data.head[r.formId]&&(r.props.form.setAllFormValue(B({},r.formId,t.data.head[r.formId])),a=t.data.head[r.formId].rows[0].values.pk_recbill.value,o=t.data.head[r.formId].rows[0].values.pk_tradetype.value),t.data.body&&t.data.body[r.tableId]&&r.props.cardTable.updateDataByRowId(r.tableId,t.data.body[r.tableId]),r.state.buttonfalg=null,r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse"),r.props.updatePage(r.formId,r.tableId);var l=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId);"add"==r.props.getUrlParam("status")?O(a,l,r.formId,m.dataSource):L(m.pkname,a,l,r.formId,m.dataSource),r.props.getUrlParam("type")&&r.props.delUrlParam("type"),r.props.getUrlParam("scene")?r.props.setUrlParam({status:"browse",id:a}):r.props.setUrlParam({status:"browse",id:a,pagecode:o})}t.data.message?(0,i.toast)({color:"danger",content:JSON.stringify(t.data.message)}):(0,i.toast)({color:"success",content:r.state.json["receivablebill-000026"]})}}r.Info.isModelSave&&(r.Info.isModelSave=!1,r.props.cardTable.closeModel(r.tableId)),"transfer"!=r.props.getUrlParam("type")&&r.toggleShow(),r.clearExType()}})}),{table1:"cardTable"},"card")},r.clearExType=function(){r.Info.tipContent="",r.Info.pk_bill=null,r.Info.ts=null,r.Info.tipUrl=null,r.Info.exType=null,r.Info.flag=!1,r.Info.compositedata=null},r.cancelClick=function(){if(null!=r.Info.pk_bill){r.props.getUrlParam("type")&&"transfer"!=r.props.getUrlParam("type")&&r.props.delUrlParam("type"),r.props.beforeUpdatePage(),r.state.buttonfalg=null,r.Info.billCard.head&&r.props.form.setAllFormValue(B({},r.formId,r.Info.billCard.head[r.formId])),r.Info.billCard.body&&r.props.cardTable.updateDataByRowId(r.tableId,r.Info.billCard.body[r.tableId]),r.props.getUrlParam("scene")?r.props.setUrlParam({status:"browse",id:null==r.Info.pk_bill?r.props.getUrlParam("id"):r.Info.pk_bill}):r.props.setUrlParam({status:"browse",id:null==r.Info.pk_bill?r.props.getUrlParam("id"):r.Info.pk_bill,pagecode:r.Info.billCard.head[r.formId].rows[0].values.pk_tradetype.value});var e=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId);r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse"),r.props.updatePage(r.formId,r.tableId),O(m.pkname,e,r.formId,m.dataSource),r.toggleShow()}r.state.compositedisplay&&r.setState({compositedisplay:!1}),r.clearExType()},r.commitAndUncommit=function(){var e=r.Info.tipUrl,t=r.Info.exType,a=r.Info.flag;(0,i.ajax)({url:e,data:{pk_bill:null==r.Info.pk_bill?r.props.getUrlParam("id"):r.Info.pk_bill,ts:null==r.Info.ts?r.props.form.getFormItemsValue(r.formId,"ts").value:r.Info.ts,pageId:r.getPagecode(),billType:r.billType,type:2,extype:t,flag:a,assignObj:r.Info.compositedata},success:function(t){if("1"==t.data.exType){var a=t.data.message;return r.Info.tipContent=a,r.Info.tipUrl=e,r.Info.exType="1",r.Info.flag=!0,void r.props.modal.show("commitAndUncommit")}if(t.data.workflow&&("approveflow"==t.data.workflow||"workflow"==t.data.workflow))return r.Info.compositedata=t.data,r.Info.tipUrl=e,void r.setState({compositedisplay:!0});if(t.success){t.data.head&&r.props.form.setAllFormValue(B({},r.formId,t.data.head[r.formId])),t.data.body&&r.props.cardTable.setTableData(r.tableId,t.data.body[r.tableId]);var o=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId);null==r.Info.pk_bill?L(m.pkname,r.props.getUrlParam("id"),o,r.formId,m.dataSource):(r.props.getUrlParam("type")&&"transfer"!=r.props.getUrlParam("type")&&r.props.delUrlParam("type"),O(m.pkname,o,r.formId,m.dataSource)),"browse"!=r.props.getUrlParam("status")&&(r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse")),r.props.setUrlParam({status:"browse",id:null==r.Info.pk_bill?r.props.getUrlParam("id"):r.Info.pk_bill}),r.state.compositedisplay&&r.setState({compositedisplay:!1}),r.clearExType(),r.toggleShow(),(0,i.toast)({color:"success",content:r.state.json["receivablebill-000025"]})}}})},r.getTableHead=function(e){return n.default.createElement("span",null,r.props.button.createButtonApp({area:"card_body",buttonLimit:3,onButtonClick:d.buttonClick.bind(r),popContainer:document.querySelector(".header-button-area")}))},r.handleTaxInformation=function(){r.setState({isTaxInformationModelShow:!r.state.isTaxInformationModelShow})},r.handleCombined=function(){r.setState({isCombinedExaminationModelShow:!r.state.isCombinedExaminationModelShow})},r.handleLinkTerm=function(){r.setState({isLinkTermModelShow:!r.state.isLinkTermModelShow})},r.closeApprove=function(){r.setState({showApproveDetail:!1})},r.onHideUploader=function(){r.setState({showUploader:!1})},r.setFormTsVal=function(e){r.props.form.setFormItemsValue(r.formId,{ts:{value:e}})},r.pause=function(e){var t=r.props.cardTable.getCheckedRows(r.tableId);if(0!=t.length){var a=[];t.forEach((function(e){a.push(e.data.values.pk_recitem.value)}));var o={pk_items:a,pk_bill:r.props.getUrlParam("id"),ts:r.props.form.getFormItemsValue(r.formId,"ts").value,pageId:r.getPagecode(),billType:r.billType};(0,i.ajax)({url:e,data:o,success:function(e){if(e.data.message?(0,i.toast)({duration:"infinity",color:e.data.PopupWindowStyle,content:e.data.message}):(0,i.toast)({color:"success",content:r.state.json["receivablebill-000025"]}),e.data.billCard){e.data.billCard.head&&r.props.form.setAllFormValue(B({},r.formId,e.data.billCard.head[r.formId])),e.data.billCard.body&&r.props.cardTable.setTableData(r.tableId,e.data.billCard.body[r.tableId]);var t=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId);L(m.pkname,r.props.getUrlParam("id"),t,r.formId,m.dataSource)}r.onSelected()}})}else(0,i.toast)({color:"success",content:r.state.json["receivablebill-000045"]})},r.cancel=function(){r.props.getUrlParam("type")&&"transfer"!=r.props.getUrlParam("type")&&r.props.delUrlParam("type");var e=r.props.form.getFormItemsValue(r.formId,"pk_org");if(e&&e.value&&""!=e.value||r.props.resMetaAfterPkorgEdit(),r.props.beforeUpdatePage(),r.state.buttonfalg=null,"edit"===r.props.getUrlParam("status")){r.props.setUrlParam({status:"browse"});var t=r.props.getUrlParam("id"),a=M(t,m.dataSource);a?(r.props.form.setAllFormValue(B({},r.formId,a.head[r.formId])),r.props.cardTable.setTableData(r.tableId,a.body[r.tableId]),r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse"),r.props.updatePage(r.formId,r.tableId),r.toggleShow()):r.initShow()}else if("add"===r.props.getUrlParam("status")){var o=r.props.getUrlParam("id");if(o||(o=N(m.dataSource)),null!=o&&null!=o&""!=o){r.props.setUrlParam({status:"browse",id:o});var l=M(o,m.dataSource);if(l){r.props.form.setAllFormValue(B({},r.formId,l.head[r.formId])),r.props.cardTable.setTableData(r.tableId,l.body[r.tableId]);var n=l.head[r.formId].rows[0].values.pk_tradetype.value;r.getPagecode()==n||r.props.getUrlParam("scene")||(r.props.setUrlParam({pagecode:n}),d.initTemplate.call(r,r.props)),r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse"),r.props.updatePage(r.formId,r.tableId),r.toggleShow()}else r.initShow()}else r.props.form.EmptyAllFormValue(r.formId),r.props.cardTable.setTableData(r.tableId,{rows:[]}),r.props.setUrlParam({status:"browse"}),r.props.cardTable.setStatus(r.tableId,"browse"),r.props.form.setFormStatus(r.formId,"browse"),r.props.updatePage(r.formId,r.tableId),r.toggleShow()}},r.onPrint=function(){r.printData.oids=[r.props.getUrlParam("id")],r.printData.nodekey=r.props.form.getFormItemsValue(r.formId,"pk_tradetype").value,(0,i.print)("pdf","/nccloud/arap/arappub/print.do",r.printData)},r.officalPrintOutput=function(){r.printData.oids=[r.props.getUrlParam("id")],r.printData.nodekey=r.props.form.getFormItemsValue(r.formId,"pk_tradetype").value,(0,i.ajax)({url:"/nccloud/arap/arappub/officialPrint.do",data:r.printData,async:!1,success:function(e){e.success&&(0,i.print)("pdf","/nccloud/arap/arappub/print.do",r.printData,!1)}})},r.cancelPrintOutput=function(){r.printData.oids=[r.props.getUrlParam("id")],r.printData.nodekey=r.props.form.getFormItemsValue(r.formId,"pk_tradetype").value,(0,i.ajax)({url:"/nccloud/arap/arappub/cancelPrint.do",data:r.printData,async:!1,success:function(e){e.success&&(0,i.toast)({color:"success",content:e.data})}})},r.printOutput=function(){r.outputData.oids=[r.props.getUrlParam("id")],r.outputData.nodekey=r.props.form.getFormItemsValue(r.formId,"pk_tradetype").value,r.refs.printOutput.open()},r.backList=function(){"linksce"==r.props.getUrlParam("scene")||"fip"==r.props.getUrlParam("scene")?r.props.pushTo("/list",{pagecode:"20060RBM_LIST_LINK",scene:"linksce"}):r.props.pushTo("/list",{pagecode:"20060RBM_LIST"})},r.backTransfer=function(){var e=r.props.getUrlParam("dataSource"),t=j("src_appcode",e),a=(j("src_pagecode",e),"/"+r.props.getUrlParam("srcBilltype"));r.props.pushTo(a,{src_appcode:t,dest_billtype:r.billType,dest_tradetype:r.getPagecode()})},r.saveSureBtnClick=function(){var e=r.Info.tipUrl,t=r.Info.exType,a=r.Info.flag;r.saveBill(e,t,a)},r.deleteBillSureBtnClick=function(){var e=r.Info.exType,t=r.Info.flag;r.delConfirm(e,t)},r.modelSaveClick=function(e,t){r.Info.isModelSave=!0;r.saveBill("/nccloud/arap/arappub/save.do",null,null,t)},r.modelDelRow=function(e,t){(0,v.calculateHeadMoney)(r);var a=r.props.cardTable.getVisibleRows(r.tableId);a&&0!=a.length||r.props.cardTable.closeModel(r.tableId)},r.modelAddRow=function(e,t,a){if(null!=r.props.form.getFormItemsValue(r.formId,"pk_org").value){var o=r.props.cardTable.getNumberOfRows(r.tableId);(0,i.ajax)({url:"/nccloud/arap/recbill/addline.do",data:r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId),success:function(e){e.data&&(e.data.head&&r.props.form.setAllFormValue(B({},r.formId,e.data.head[r.formId])),e.data.body&&r.props.cardTable.updateDataByIndexs(r.tableId,[{index:o-1,data:{status:2,values:e.data.body[r.tableId].rows[0].values}}]))}})}else(0,i.toast)({color:"warning",content:r.state.json["receivablebill-000027"]})},r.switchTemplate=function(){var e=r.getPagecode(),t=r.props.getSearchParam("c")?r.props.getSearchParam("c"):r.props.getUrlParam("c"),a=j("sessionTradeType",m.dataSource);a||(a=m.tradeType),(0,i.ajax)({url:"/nccloud/arap/arappub/queryallbtns.do",data:{appcode:t,pagecode:e,tradetype:a,billtype:m.billType},success:function(e){var t=e.data;if(t.button){var a=t.button;r.Info.pullBillInfoVOAry=t.pullbillinfo,(0,c.getButtonsKey)(a,r.Info.allButtonsKey),r.props.button.setButtons(a)}}})},r.formId=m.formId,r.tableId=m.tableId,r.billType=m.billType,r.leftarea=m.leftarea,r.transferIndex=0,r.data=null,r.dataSource=m.dataSource,r.pkname=m.pkname,r.invoiceComponent=new _.default,r.state={isTaxInformationModelShow:!1,isCombinedExaminationModelShow:!1,isLinkTermModelShow:!1,isTbbLinkshow:!1,showBillTrack:!1,showUploader:!1,target:null,showApproveDetail:!1,buttonfalg:null,compositedisplay:!1,json:{},forceRender:!0,hideAdd:!1},r.printData={billtype:m.billType,appcode:e.getSearchParam("c"),nodekey:e.getSearchParam("p"),oids:[r.props.getUrlParam("id")],userjson:m.billType},r.outputData={billtype:m.billType,appcode:e.getSearchParam("c"),funcode:e.getSearchParam("c"),nodekey:e.getSearchParam("p"),oids:[r.props.getUrlParam("id")],userjson:m.billType,outputType:"output"},r.Info={allButtonsKey:[],combinedExaminationData:[],linkTermData:[],tbbLinkSourceData:null,currentLocale:"en-US",selectedPKS:[],tipContent:null,tipUrl:null,exType:null,flag:!1,pk_bill:null,ts:null,billCard:null,compositedata:null,isModelSave:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;"20062002"==this.props.getSearchParam("c")&&"approvesce"!=this.props.getSearchParam("scene")&&(0,I.updatePandC)(this);(0,i.getMultiLang)({moduleId:["receivablebill","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){window.onbeforeunload=function(){var t=e.props.getUrlParam("status");if("edit"==t||"add"==t)return""},d.initTemplate.call(e,e.props,e.initShow)}))}})}},{key:"componentDidMount",value:function(){if(this.props.getUrlParam("scene")){var e=this.props.getUrlParam("scene");D("scene",m.dataSource,e);var t=this.getPagecode();D("pagecode",m.dataSource,t)}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"tbbLinkcancel",value:function(){this.setState({isTbbLinkshow:!1})}},{key:"onSubmit",value:function(){}},{key:"render",value:function(){var e,t=this,r=this.props,o=r.cardTable,l=r.form,i=r.cardPagination,s=r.modal,c=(r.button,r.transferTable),g=this.props.BillHeadInfo.createBillHeadInfo,v=this.props.button.getButtons(),h=o.createCardTable,_=i.createCardPagination,I=l.createForm,w="transfer"==this.props.getUrlParam("type"),T=c.createTransferList,x=s.createModal,D=this.state,O=D.showUploader,U=D.target;return w?n.default.createElement("div",{id:"transferCard",className:"nc-bill-transferList"},n.default.createElement(E,{offsetTop:0},n.default.createElement(R,{areaCode:R.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},g({title:this.props.getSearchParam("n")?this.props.getSearchParam("n"):this.state.json["receivablebill-000051"],backBtnClick:function(){t.backTransfer()}})),n.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"card_head",buttonLimit:3,onButtonClick:d.transferButtonClick.bind(this),popContainer:document.querySelector(".header-button-area")}),"bz"==j("scene",m.dataSource)?null:n.default.createElement(S,{fieldid:"canceltransfer",colors:"default",onClick:this.backList},this.state.json["receivablebill-000052"])))),n.default.createElement("div",{className:"nc-bill-transferList-content"},T({headcode:this.formId,bodycode:this.tableId,transferListId:this.leftarea,onTransferItemSelected:function(e,r,a){t.transferIndex=a;var o=r?"browse":"edit";if("browse"==o){var l=e.head[t.formId].rows[0].values.pk_recbill.value;e=null==l?e:M(l,m.dataSource),t.props.setUrlParam({status:"browse"}),t.props.addUrlParam({id:l})}else t.props.setUrlParam({status:"add"}),t.props.delUrlParam("id"),t.state.buttonfalg=!0;t.toggleShow(e.head[t.formId]),t.props.beforeUpdatePage(),t.props.form.setFormStatus(t.formId,o),t.props.cardTable.setStatus(t.tableId,o),t.props.form.setAllFormValue(B({},t.formId,e.head[t.formId])),t.props.cardTable.setTableData(t.tableId,e.body[t.tableId]),t.props.updatePage(t.formId,t.tableId)}}),n.default.createElement("div",{className:"transferList-content-right nc-bill-card"},n.default.createElement("div",{className:"nc-bill-form-area"},I(this.formId,{fieldid:"receivablebill",onAfterEvent:d.afterEvent.bind(this),onBeforeEvent:y.formBeforeEvent.bind(this)})),n.default.createElement("div",{className:"nc-bill-table-area"},h(this.tableId,(B(e={fieldid:"receivablebill",tableHead:this.getTableHead.bind(this,v),modelSave:this.modelSaveClick.bind(this),onAfterEvent:d.afterEvent.bind(this),onBeforeEvent:b.bodyBeforeEvent.bind(this),modelAddRow:this.modelAddRow.bind(this),modelDelRow:this.modelDelRow.bind(this),onSelected:this.onSelected.bind(this),onSelectedAll:this.onSelected.bind(this),showCheck:!0,showIndex:!0,hideAdd:!0,isAddRow:!1},"hideAdd",this.state.hideAdd),B(e,"adaptionHeight",!0),e))),n.default.createElement(p.default,{show:this.state.isCombinedExaminationModelShow,combinedExaminationData:this.Info.combinedExaminationData,pk_tradetypeid:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").display:null,billno:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,handleModel:this.handleCombined.bind(this)}),n.default.createElement(u.default,{show:this.state.isTaxInformationModelShow,pk_recbill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,handleModel:this.handleTaxInformation.bind(this)}),n.default.createElement(f.default,{show:this.state.isLinkTermModelShow,linkTermData:this.Info.linkTermData,handleModel:this.handleLinkTerm.bind(this),moduleId:"2006",billType:this.billType,seletedPks:this.Info.selectedPKS,pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,setFormTsVal:this.setFormTsVal.bind(this)}),n.default.createElement(F,{show:this.state.showBillTrack,close:function(){t.setState({showBillTrack:!1})},pk:this.props.getUrlParam("id"),type:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null}),O&&n.default.createElement(P,{billId:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,target:U,placement:"bottom",onHide:this.onHideUploader,close:function(){return t.closeModal()}}),n.default.createElement(V,{ref:"printOutput",url:"/nccloud/arap/arappub/outPut.do",data:this.outputData,callback:this.onSubmit}),n.default.createElement(q,{show:this.state.showApproveDetail,close:this.closeApprove,billtype:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,billid:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null}),n.default.createElement(A,{show:this.state.isTbbLinkshow,sourceData:this.Info.tbbLinkSourceData,cancel:this.tbbLinkcancel.bind(this)}),x("importModal",{noFooter:!0,className:"import-modal",hasBackDrop:!1}),n.default.createElement(K,a({},Object.assign(this.props),{moduleName:"arap",billType:m.billType,pagecode:this.getExportPageCode(),appcode:this.props.getSearchParam("c"),selectedPKS:this.Info.selectedPKS,exportTreeUrl:"/nccloud/arap/recbill/recbillexport.do",forceRender:this.state.forceRender})),n.default.createElement("div",null,x("saveCheck",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.saveSureBtnClick.bind(this)}),x("deleteCheck",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.deleteBillSureBtnClick.bind(this)}),x("commitAndUncommit",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.commitAndUncommit.bind(this),cancelBtnClick:this.cancelClick.bind(this)}),this.state.compositedisplay?n.default.createElement(H,{title:this.state.json["receivablebill-000050"],data:this.Info.compositedata,display:this.state.compositedisplay,getResult:this.commitAndUncommit.bind(this),cancel:this.cancelClick.bind(this)}):null)))):n.default.createElement("div",{className:"nc-bill-card"},n.default.createElement("div",{className:"nc-bill-top-area"},n.default.createElement(E,{offsetTop:0},n.default.createElement(R,{areaCode:R.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},g({title:this.props.getSearchParam("n")?this.props.getSearchParam("n"):this.state.json["receivablebill-000051"],backBtnClick:function(){t.backList()}})),n.default.createElement("div",{className:"header-button-area"},this.props.getUrlParam("scene")||(0,k.getContext)(k.loginContextKeys.transtype)?null:n.default.createElement("div",{className:"trade-type"},(0,C.default)({ref:"tradetypeBtn",billtype:"F0",dataSource:m.dataSource,switchTemplate:this.switchTemplate.bind(this)})),this.props.button.createButtonApp({area:"card_head",buttonLimit:3,onButtonClick:d.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),"linksce"!=this.props.getUrlParam("scene")&&"fip"!=this.props.getUrlParam("scene")&&this.props.getUrlParam("scene")?null:n.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},_({handlePageInfoChange:d.pageInfoClick.bind(this),dataSource:m.dataSource})))),n.default.createElement("div",{className:"nc-bill-form-area"},I(this.formId,{fieldid:"receivablebill",onAfterEvent:d.afterEvent.bind(this),onBeforeEvent:y.formBeforeEvent.bind(this)}))),n.default.createElement("div",{className:"nc-bill-bottom-area"},n.default.createElement("div",{className:"nc-bill-table-area"},h(this.tableId,B({fieldid:"receivablebill",tableHead:this.getTableHead.bind(this,v),modelSave:this.modelSaveClick.bind(this),onAfterEvent:d.afterEvent.bind(this),onBeforeEvent:b.bodyBeforeEvent.bind(this),modelAddRow:this.modelAddRow.bind(this),modelDelRow:this.modelDelRow.bind(this),onSelected:this.onSelected.bind(this),onSelectedAll:this.onSelected.bind(this),showCheck:!0,showIndex:!0,adaptionHeight:!0},"adaptionHeight",!0)))),n.default.createElement(u.default,{show:this.state.isTaxInformationModelShow,pk_recbill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,handleModel:this.handleTaxInformation.bind(this)}),n.default.createElement(p.default,{show:this.state.isCombinedExaminationModelShow,combinedExaminationData:this.Info.combinedExaminationData,pk_tradetypeid:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").display:null,billno:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,handleModel:this.handleCombined.bind(this)}),n.default.createElement(f.default,{show:this.state.isLinkTermModelShow,linkTermData:this.Info.linkTermData,handleModel:this.handleLinkTerm.bind(this),moduleId:"2006",billType:this.billType,seletedPks:this.Info.selectedPKS,pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,setFormTsVal:this.setFormTsVal.bind(this)}),n.default.createElement(F,{show:this.state.showBillTrack,close:function(){t.setState({showBillTrack:!1})},pk:this.props.getUrlParam("id"),type:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null}),O&&n.default.createElement(P,{billId:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,target:U,placement:"bottom",onHide:this.onHideUploader}),n.default.createElement(V,{ref:"printOutput",url:"/nccloud/arap/arappub/outPut.do",data:this.outputData,callback:this.onSubmit}),n.default.createElement(q,{show:this.state.showApproveDetail,close:this.closeApprove,billtype:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,billid:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null}),x("importModal",{noFooter:!0,className:"import-modal",hasBackDrop:!1}),n.default.createElement(K,a({},Object.assign(this.props),{moduleName:"arap",billType:m.billType,pagecode:this.getExportPageCode(),appcode:this.props.getSearchParam("c"),selectedPKS:this.Info.selectedPKS,forceRender:this.state.forceRender,exportTreeUrl:"/nccloud/arap/recbill/recbillexport.do"})),n.default.createElement(A,{show:this.state.isTbbLinkshow,sourceData:this.Info.tbbLinkSourceData,cancel:this.tbbLinkcancel.bind(this)}),n.default.createElement("div",null,x("saveCheck",{title:this.state.json["receivablebill-000048"],content:this.Info.tipContent,beSureBtnClick:this.saveSureBtnClick.bind(this)}),x("deleteCheck",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.deleteBillSureBtnClick.bind(this)}),x("commitAndUncommit",{title:this.state.json["receivablebill-000049"],content:this.Info.tipContent,beSureBtnClick:this.commitAndUncommit.bind(this),cancelBtnClick:this.cancelClick.bind(this)}),this.state.compositedisplay?n.default.createElement(H,{title:this.state.json["receivablebill-000050"],data:this.Info.compositedata,display:this.state.compositedisplay,getResult:this.commitAndUncommit.bind(this),cancel:this.cancelClick.bind(this)}):null,this.invoiceComponent.createComponent()))}}]),t}(l.Component);J=(0,i.createPage)({})(J),t.default=J},305:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transferButtonClick=t.initTemplate=t.pageInfoClick=t.afterEvent=t.buttonClick=void 0;var a=d(r(253)),o=d(r(307)),l=d(r(308)),n=d(r(236)),i=d(r(254));function d(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=a.default,t.afterEvent=o.default,t.pageInfoClick=l.default,t.initTemplate=n.default,t.transferButtonClick=i.default},306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,d,s,u){switch(r){case l.innerButton.open_browse:case l.innerButton.Close_browse:t.cardTable.toggleRowView(o.tableId,s);break;case l.innerButton.open_edit:var c=!1,p=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId);if(p&&p.body&&p.body[e.tableId]&&p.body[e.tableId].rows)for(var f=p.body[e.tableId].rows,m=0;m<f.length;m++){var b=f[m].values.top_billid.value,y=f[m].values.top_itemid.value;if(b||y){c=!0;break}}e.setState({hideAdd:c}),t.cardTable.openModel(o.tableId,"edit",s,u);break;case l.innerButton.Copy_inner:(0,n.copyInner)(s,o.dataSource,e),e.setState({buttonfalg:!1},(function(){(0,i.cardBodyControl)(t,e.state.buttonfalg)}));break;case l.innerButton.Insert_inner:var g=t.createMasterChildData(e.getPagecode(),o.formId,o.tableId);g.body[o.tableId].rows=[],(0,a.ajax)({url:"/nccloud/arap/recbill/addline.do",data:g,success:function(e){e.data&&e.data.body?t.cardTable.addRow(o.tableId,u+1,e.data.body.bodys.rows[0].values):t.cardTable.addRow(o.tableId)}});break;case l.innerButton.Delete_inner:(0,n.deleteInner)(e,t,o.tableId,u),e.onSelected();break;case l.innerButton.Paste_inner:(0,n.pasteInner)(e,t,o.dataSource,o.tableId,u)}};var a=r(1),o=r(191),l=r(5),n=r(7),i=r(6);a.cardCache.getDefData,a.cardCache.setDefData},307:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,u,b,y,g){var v=this;if(u instanceof Array&&u[0].newvalue.value==u[0].oldvalue.value)return;var h=this.getPagecode(),_=0;t==this.formId?_=0:t==this.tableId&&(_=b);if(t==o.formId){var I=null;switch(r){case"pk_org":null==n.value||""==n.value?"transfer"===this.props.getUrlParam("type")?(0,a.promptBox)({color:"warning",title:this.state.json["receivablebill-000009"],content:this.state.json["receivablebill-000071"],beSureBtnName:this.state.json["receivablebill-000011"],noCancelBtn:!0,beSureBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:u})},closeByClickBackDrop:!1}):(0,a.promptBox)({color:"warning",title:this.state.json["receivablebill-000009"],content:this.state.json["receivablebill-000010"],beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:function(){v.props.form.EmptyAllFormValue(v.formId),v.props.cardTable.setTableData(v.tableId,{rows:[]}),v.initAdd(!0)},cancelBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:u})},closeByClickBackDrop:!1}):null!=u.value&&""!=u.value?(0,a.promptBox)({color:"warning",title:this.state.json["receivablebill-000009"],content:this.state.json["receivablebill-000010"],beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:function(){(0,a.ajax)({url:"/nccloud/arap/recbill/cardHeadAfterEdit.do",data:{pageId:h,event:v.props.createHeadAfterEventData(h,v.formId,v.tableId,t,r,n),uiState:v.props.getUrlParam("status")},async:!1,success:function(e){(0,d.renderData)(v,e),(0,d.formulamsgHint)(v,e)},error:function(e){(0,d.errorDeal)(v,e,u,r)}})},cancelBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:u})},closeByClickBackDrop:!1}):(I={pageId:h,event:this.props.createHeadAfterEventData(h,this.formId,this.tableId,t,r,n),uiState:this.props.getUrlParam("status")},f.call(this,I,r,u));break;case"customer":I={pageId:h,formEvent:e.createFormAfterEventData(h,this.formId,this.tableId,r,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","payaccount","pk_currtype","customer","buysellflag","objtype","direction","pk_billtype","top_billtype","pk_payterm","pk_psndoc","pk_deptid","pk_deptid_v"].concat(s.moneyAndRateFields)),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,I,r,u);break;case"pk_deptid_v":I={pageId:h,formEvent:e.createFormAfterEventData(h,this.formId,this.tableId,r,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_deptid","pk_deptid_v","pk_currtype","customer","taxtype","buysellflag","objtype","direction"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,I,r,u);break;case"pk_psndoc":I={pageId:h,formEvent:e.createFormAfterEventData(h,this.formId,this.tableId,r,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_psndoc","pk_deptid","pk_deptid_v","isrefused","prepay","isdiscount","objtype","direction","agentreceivelocal"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,I,r,u);break;case"pk_currtype":I={pageId:h,formEvent:e.createFormAfterEventData(h,this.formId,this.tableId,r,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_group","pk_currtype","pk_billtype","billdate","rate","grouprate","globalrate","buysellflag","taxprice","local_taxprice","taxrate","occupationmny","money_bal","local_money_bal","globaldebit","globalnotax_de","globaltax_de","groupdebit","groupnotax_de","grouptax_de","local_money_de","local_notax_de","local_tax_de","money_de","notax_de","quantity_de","direction","settlecurr","settlemoney"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,I,r,u),(0,l.currentTypeAfterFormEvents)(this.formId,e,r);break;case"subjcode":I={pageId:h,event:this.props.createHeadAfterEventData(h,this.formId,this.tableId,t,r,n),uiState:this.props.getUrlParam("status")},f.call(this,I,r,u),this.props.form.setFormItemsValue(this.formId,{subjcode:{value:n.refpk,display:n.dispname}});break;default:I={pageId:h,event:this.props.createHeadAfterEventData(h,this.formId,this.tableId,t,r,n),uiState:this.props.getUrlParam("status")},f.call(this,I,r,u)}}if(t==o.tableId){"subjcode"==r&&this.props.cardTable.setValByKeyAndIndex(this.tableId,b,"subjcode",{value:n.refpk,display:n.dispname});var k=(0,i.getColvalues)(this.props,this.tableId,c);(0,a.ajax)({url:"/nccloud/arap/recbill/cardBodyAfterEdit.do",data:{rowindex:0,editindex:_,pageId:h,changedrows:u,tableId:this.tableId,body:e.cardTable.getDataByIndex(this.tableId,_),formEvent:e.createFormAfterEventData(h,this.formId,this.tableId,r,n),uiState:this.props.getUrlParam("status"),colValues:k},async:!1,success:function(t){(0,d.bodyAfterEventRenderData)(v,t),"transfer"==v.props.getUrlParam("type")&&v.synTransferData(),0==b&&"pk_currtype"==r&&(0,l.currentTypeAfterFormEvents)(v.formId,e,"pk_currtype"),(0,d.formulamsgHint)(v,t)},error:function(o){var l=String(o),i=l.substring(6,l.length);"convertException"==i.substring(1,17)?(0,a.promptBox)({color:"warning",title:v.state.json["receivablebill-000015"],content:i.substring(17,i.length),closeByClickBackDrop:!1,beSureBtnClick:function(){p(v,e,b,h,t,r,u,"sure",_,n)},cancelBtnClick:function(){p(v,e,b,h,t,r,u,"cancel",_,n)}}):(v.props.cardTable.setValByKeyAndRowId(v.tableId,b,r,u),(0,a.toast)({color:"danger",content:i}))}}),m.call(this,t,h,r,b)}},t.headFieldAfterRequest=f,t.autoAddline=m;var a=r(1),o=r(191),l=r(32),n=r(189),i=r(7),d=r(33),s=r(9),u=r(7);var c=["customer","taxcodeid","taxrate","taxtype","buysellflag","money_de","local_money_de","notax_de","local_notax_de","local_tax_de"];function p(e,t,r,o,n,s,u,p,f,m){var b=(0,i.getColvalues)(e.props,e.tableId,c);(0,a.ajax)({url:"/nccloud/arap/recbill/cardBodyAfterEdit.do",data:{rowindex:0,editindex:f,pageId:o,changedrows:u,tableId:e.tableId,body:t.cardTable.getDataByIndex(e.tableId,f),formEvent:t.createFormAfterEventData(o,e.formId,e.tableId,s,m),uiState:e.props.getUrlParam("status"),isCalculateConvert:p,colValues:b},async:!1,success:function(a){(0,d.bodyAfterEventRenderData)(e,a),0==r&&"pk_currtype"==s&&(0,l.currentTypeAfterFormEvents)(e.formId,t,"pk_currtype"),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),(0,d.formulamsgHint)(e,a)}})}function f(e,t,r){var o=this;(0,a.ajax)({url:"/nccloud/arap/recbill/cardHeadAfterEdit.do",data:e,async:!1,success:function(e){((0,d.headAfterEventRenderData)(o,e),(0,d.formulamsgHint)(o,e),"pk_org"==t)&&(o.props.form.getFormItemsValue(o.formId,"pk_org").value?(o.props.resMetaAfterPkorgEdit(),o.state.buttonfalg=!0):o.state.buttonfalg=null,o.toggleShow());"transfer"==o.props.getUrlParam("type")&&o.synTransferData()},error:function(e){(0,d.errorDeal)(o,e,r,t)}})}function m(e,t,r,o){var l=this,i=this.props.cardTable.getNumberOfRows(this.tableId);if(e==this.tableId&&i==o+1&&-1!=n.autoAddLineKeys.indexOf(r)&&!(0,u.isExistsTopBill)(this)){var d=this.props.createMasterChildData(t,this.formId,this.tableId);d.body[this.tableId].rows=[],(0,a.ajax)({url:"/nccloud/arap/recbill/addline.do",data:d,async:!1,success:function(e){e.data&&(e.data.head&&l.props.form.setAllFormValue(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},l.formId,e.data.head[l.formId])),e.data.body&&l.props.cardTable.addRow(l.tableId,i,e.data.body[l.tableId].rows[0].values,!1))}})}}},308:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this;if(t){var a=s(t,l.dataSource),n=this.getPagecode();if(a){if(e.getUrlParam("scene"))e.setUrlParam({id:t});else{var p=a.head[this.formId].rows[0].values.pk_tradetype.value;e.setUrlParam({id:t,pagecode:p}),c("sessionTradeType",l.dataSource,p),n!=p&&i.default.call(this,this.props)}e.form.setAllFormValue(d({},this.formId,a.head[this.formId])),e.cardTable.setTableData(this.tableId,a.body[this.tableId],null,null,!0),this.toggleShow()}else{var f={pk_bill:t};(0,o.ajax)({url:"/nccloud/arap/recbill/cardquery.do",data:f,success:function(a){if(a.data){if(a.data.head&&r.props.form.setAllFormValue(d({},r.formId,a.data.head[r.formId])),a.data.body&&r.props.cardTable.setTableData(r.tableId,a.data.body[r.tableId],null,null,!0),u(l.pkname,t,a.data,r.formId,l.dataSource),e.getUrlParam("scene"))e.setUrlParam({id:t});else{var o=a.data.head[l.formId].rows[0].values.pk_tradetype.value;e.setUrlParam({id:t,pagecode:o}),c("sessionTradeType",l.dataSource,o),n!=o&&i.default.call(r,r.props)}r.toggleShow()}else r.props.form.EmptyAllFormValue(r.formId),r.props.cardTable.setTableData(r.tableId,{rows:[]})}})}}};var a,o=r(1),l=r(191),n=r(236),i=(a=n)&&a.__esModule?a:{default:a};function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=o.cardCache.getCacheById,u=o.cardCache.updateCache,c=o.cardCache.setDefData},32:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.currentTypeAfterFormEvents=void 0;var a=r(1);t.currentTypeAfterFormEvents=function(e,t,r){(0,a.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",async:!1,data:{pk_org:t.form.getFormItemsValue(e,"pk_org")?t.form.getFormItemsValue(e,"pk_org").value:null,pk_currtype:t.form.getFormItemsValue(e,"pk_currtype")?t.form.getFormItemsValue(e,"pk_currtype").value:null,ratekey:"rate"},success:function(r){r.success&&t.form.setFormItemsDisabled(e,{rate:!r.data})}})}},33:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyAfterEventRenderData=t.headAfterEventRenderData=t.errorDeal=t.renderData=t.formulamsgHint=void 0;var a=r(1),o=r(7);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.formulamsgHint=function(e,t){var r={};r[e.tableId]="cardTable",t.formulamsg&&t.formulamsg instanceof Array&&t.formulamsg.length>0&&e.props.dealFormulamsg(t.formulamsg,r)},t.renderData=function(e,t){t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId]))},t.errorDeal=function(e,t,r,o){var l=String(t),n=l.substring(6,l.length);(0,a.toast)({color:"danger",content:n}),o&&"pk_org"==o&&e.props.resMetaAfterPkorgEdit();var i={};i[o]=r,e.props.form.setFormItemsValue(e.formId,i)},t.headAfterEventRenderData=function(e,t){t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId]),t.data.body&&(0,o.refreshChildVO2HeadVO)(e.props,e.formId,e.tableId),(0,o.calculateHeadMoney)(e))},t.bodyAfterEventRenderData=function(e,t){t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&(e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId]),(0,o.refreshChildVO2HeadVO)(e.props,e.formId,e.tableId)),(0,o.calculateHeadMoney)(e))}},34:function(e,t,r){var a=r(35);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};r(4)(a,o);a.locals&&(e.exports=a.locals)},35:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,"#combinedExaminationModelId {\n  text-align: center;\n}\n#combinedExaminationModelId .u-table-body {\n  overflow-x: hidden !important;\n}\n#combinedExaminationModelId .u-table-body tr td.columnRight {\n  text-align: right;\n}\n#combinedExaminationModelId .u-modal-dialog .u-modal-content .u-modal-body {\n  padding: 0;\n}\n#combinedExaminationModelId .steps-content .content-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: 10px 0;\n  padding: 0 20px;\n}\n#combinedExaminationModelId .steps-content .content-tit .content-tit-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#combinedExaminationModelId .steps-content .content-tit .content-tit-tit .tit-tradetype {\n  padding-right: 20px;\n}\n#combinedExaminationModelId .steps-content .table-area {\n  margin: 0 20px;\n}\n#combinedExaminationModelId .steps-content .u-table-footer {\n  border-bottom: 1px solid #e9e9e9;\n}\n#combinedExaminationModelId .steps-content .u-table-footer .u-table-body {\n  overflow: auto!important;\n  overflow-y: hidden !important;\n}\n#combinedExaminationModelId .steps-content .total-rows .u-table-header .u-table-thead tr th {\n  text-align: center;\n  border-right: 1px solid #d0d0d0;\n}\n#combinedExaminationModelId .selected {\n  background-color: #e4e4e4;\n}\n",""])},36:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.values;Object.keys(t).map((function(e,r){var a=t[e].value,o=(t[e].display,t[e].scale);null==a||""===a?delete t[e]:t[e]={value:a,scale:o}}))},o=function(e){for(var t=e.length,r=function(t){var r=e[t].values;Object.keys(r).map((function(e){var t=r[e].value,a=(r[e].display,r[e].scale);null==t||""===t?delete r[e]:r[e]={value:t,scale:a}}))},a=0;a<t;a++)r(a)};t.dealCardData=function(e,t){var r=JSON.parse(JSON.stringify(t)),l=r.head[e.formId].rows[0],n=r.body[e.tableId].rows;return a(l,r),o(n,r),r}},37:function(e,t,r){var a=r(38);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};r(4)(a,o);a.locals&&(e.exports=a.locals)},38:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,".teadetype-lightapp-component.hide {\n  display: none;\n}\n.teadetype-lightapp-component.show {\n  display: block;\n}\n",""])},39:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,".trade-type .refer-wrapper .u-button {\n  font-size: 13px;\n}\n.light-tabs-header .tabs-config {\n  height: 100%;\n  padding-top: 5px;\n}\n.u-tabs-top .u-tabs-content-animated .u-tabs-tabpane {\n  position: relative;\n  overflow: auto;\n}\n",""])},4:function(e,t,r){var a,o,l={},n=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=a.apply(this,arguments)),o}),i=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}((function(e){return document.querySelector(e)})),d=null,s=0,u=[],c=r(11);function p(e,t){for(var r=0;r<e.length;r++){var a=e[r],o=l[a.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](a.parts[n]);for(;n<a.parts.length;n++)o.parts.push(v(a.parts[n],t))}else{var i=[];for(n=0;n<a.parts.length;n++)i.push(v(a.parts[n],t));l[a.id]={id:a.id,refs:1,parts:i}}}}function f(e,t){for(var r=[],a={},o=0;o<e.length;o++){var l=e[o],n=t.base?l[0]+t.base:l[0],i={css:l[1],media:l[2],sourceMap:l[3]};a[n]?a[n].parts.push(i):r.push(a[n]={id:n,parts:[i]})}return r}function m(e,t){var r=i(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=u[u.length-1];if("top"===e.insertAt)a?a.nextSibling?r.insertBefore(t,a.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function b(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",g(t,e.attrs),m(e,t),t}function g(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function v(e,t){var r,a,o,l;if(t.transform&&e.css){if(!(l=t.transform(e.css)))return function(){};e.css=l}if(t.singleton){var n=s++;r=d||(d=y(t)),a=I.bind(null,r,n,!1),o=I.bind(null,r,n,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",g(t,e.attrs),m(e,t),t}(t),a=w.bind(null,r,t),o=function(){b(r),r.href&&URL.revokeObjectURL(r.href)}):(r=y(t),a=k.bind(null,r),o=function(){b(r)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=n()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=f(e,t);return p(r,t),function(e){for(var a=[],o=0;o<r.length;o++){var n=r[o];(i=l[n.id]).refs--,a.push(i)}e&&p(f(e,t),t);for(o=0;o<a.length;o++){var i;if(0===(i=a[o]).refs){for(var d=0;d<i.parts.length;d++)i.parts[d]();delete l[i.id]}}}};var h,_=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function I(e,t,r,a){var o=r?"":a.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var l=document.createTextNode(o),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(l,n[t]):e.appendChild(l)}}function k(e,t){var r=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function w(e,t,r){var a=r.css,o=r.sourceMap,l=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||l)&&(a=c(a)),o&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var n=new Blob([a],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(n),i&&URL.revokeObjectURL(i)}},459:function(e,t,r){e.exports=r(304)},5:function(e,t,r){"use strict";var a;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var l=(o(a={Add:"Add",Edit:"Edit",Delete:"Delete",Copy:"Copy",Save:"Save",Back:"Back",TempSave:"TempSave",Cancel:"Cancel",Commit:"Commit",Uncommit:"Uncommit",Approve:"Approve",UnApprove:"UnApprove",LinkAprv:"LinkAprv",BodyVerify:"BodyVerify",WholeVerify:"WholeVerify",MadeBill:"MadeBill",RedBack:"RedBack",Tradetype:"Tradetype",InitBuild:"InitBuild",CancelInitBuild:"CancelInitBuild",Pausetrans:"Pausetrans",Cancelpause:"Cancelpause",CommisionPay:"CommisionPay",CancelCommisionPay:"CancelCommisionPay",Receipt:"Receipt",ReceiptCheck:"ReceiptCheck",InvoiceUploader:"InvoiceUploader",ReceiptScan:"ReceiptScan",LinkInvoice:"LinkInvoice",BillAssistant:"BillAssistant",AttachManage:"AttachManage",ImportExportMenu:"ImportExportMenu",ImportData:"ImportData",ExportData:"ExportData",Print:"Print",Preview:"Preview",Output:"Output",OfficalPrint:"OfficalPrint",CancelPrint:"CancelPrint",PrintList:"PrintList",RelatedQuery:"RelatedQuery",LinkDeal:"LinkDeal",BillLinkQuery:"BillLinkQuery",LinkTbb:"LinkTbb",LinkVouchar:"LinkVouchar",LinkTerm:"LinkTerm",LinkConfer:"LinkConfer",LinkBal:"LinkBal",LinkBill:"LinkBill",More:"More",Refresh:"Refresh",Confirm:"Confirm",CancelConfirm:"CancelConfirm",PrePay:"PrePay",Pause:"Pause",SaveAndCommit:"SaveAndCommit",LinkSettleInfo:"LinkSettleInfo",LinkInformer:"LinkInformer",Add_Recbill:"Add_Recbill",Add_GatherBill:"Add_GatherBill",Add_PayableBill:"Add_PayableBill",Add_PayBill:"Add_PayBill",TaxChecked:"TaxChecked",Add_t:"Add_t",Return:"Return",Keep_a:"Keep_a",Cancel_a:"Cancel_a",Keep_m:"Keep_m",Cancel_m:"Cancel_m"},"Refresh","Refresh"),o(a,"Query","Query"),o(a,"InitialReport","InitialReport"),o(a,"Share","Share"),o(a,"VerifyLink","VerifyLink"),o(a,"Batch_delect","Batch_delect"),o(a,"Quick_query","Quick_query"),o(a,"MakeUp","MakeUp"),o(a,"NowVerify","NowVerify"),o(a,"ProfitRecord","ProfitRecord"),o(a,"ConnectSettleInfo","ConnectSettleInfo"),o(a,"Hisrecord","Hisrecord"),o(a,"Transfers","Transfers"),o(a,"Empty","Empty"),o(a,"CancelTrans","CancelTrans"),o(a,"CancelProfit","CancelProfit"),o(a,"Refund","Refund"),o(a,"CancelRefund","CancelRefund"),o(a,"Generate","Generate"),o(a,"SpecialInvoice","SpecialInvoice"),o(a,"GeneralInvoice","GeneralInvoice"),o(a,"ElectronicInvoice","ElectronicInvoice"),o(a,"OilSpecialInvoice","OilSpecialInvoice"),o(a,"OilGeneralInvoice","OilGeneralInvoice"),o(a,"OilElectronicInvoice","OilElectronicInvoice"),o(a,"RedInvoice","RedInvoice"),o(a,"MaintainTaxInvoice","MaintainTaxInvoice"),o(a,"LinkTaxInvoice","LinkTaxInvoice"),o(a,"LinkDetail","LinkDetail"),a);t.headButton=l,t.bodyButton={AddLine:"AddLine",DelLine:"DelLine",InsertLine:"InsertLine",CopyLine:"CopyLine",PasteLine:"PasteLine",PasteToEndLine:"PasteToEndLine",CancelLine:"CancelLine",Query:"Query"},t.innerButton={Edit_inner:"Edit_inner",Delete_inner:"Delete_inner",Copy_inner:"Copy_inner",Commit_inner:"Commit_inner",Uncommit_inner:"Uncommit_inner",Confirm_inner:"Confirm_inner",CancelConfirm_inner:"CancelConfirm_inner",open_browse:"open_browse",Close_browse:"Close_browse",open_edit:"open_edit",Insert_inner:"Insert_inner",Paste_inner:"Paste_inner",Approve_inner:"Approve_inner",UnApprove_inner:"UnApprove_inner",MadeBill_inner:"MadeBill_inner"},t.modelButton={Prev:"Prev",Next:"Next",Done:"Done",Cancel:"Cancel",Bill:"Bill"},t.bottomButton={Next:"Next",Pre:"Pre",CancelProfit:"CancelProfit",Save:"Save",Back:"Back",ConfirmTrans:"ConfirmTrans"}},6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dealTranferBtns=function(e){"transfer"===this.props.getUrlParam("type")&&(this.setState({tpflag:!1}),e.push("Add"),e.push("TempSave"),e.push("Copy"),e.push("Verify"),e.push("RedBack"),e.push("Pause_g1"),e.push("PrePay"),e.push("AddLine"),e.push("Insert_inner"),e.push("Refresh"))},t.dealSrcProjectBtns=function(e,t){if(t.length>0){var r=t[0].values&&t[0].values.top_billtype?t[0].values.top_billtype.value:null;-1!=p.indexOf(r)&&(e.push("AddLine"),e.push("CopyLine"),e.push("DelLine"),e.push("Insert_inner"),e.push("Copy_inner"),e.push("Delete_inner"))}},t.dealRefundBtns=function(e,t){var r=!!this.props.form.getFormItemsValue(this.formId,"isrefund")&&this.props.form.getFormItemsValue(this.formId,"isrefund").value;!r&&"Y"!=r||"N"==r||(t.push("AddLine"),t.push("Insert_inner"))};var a=-1,o=-99,l=-1,n=1,i=3,d=10,s=0,u=1,c=0,p=["4D65","4D53","4D83","4D33","4D39","4D48","4D50","4D86"],f=["Add_blank","Add","Head_g1","adcode","paca","F0","F1","F2","F3","FCT1","FCT2","36D1","4A18","4A23","4A49","4A24","4A2F","4A3F","4A3H"],m=["Add_blank","Add","Head_g1","adcode","paca","F0","F1","F2","F3","Z3","FCT1","FCT2","36D1","4A18","4A23","4A49","4A24","4A2F","4A3F","4A3H","More","InitBuild","CancelInitBuild","ImportData","Refresh","ConnectSettleInfo"],b=function(e,t,r,p,b){if(!t||!t.pk_tradetype||!t.pk_tradetype.value)return"list"==p?-1!=m.indexOf(r):!!b.props.getUrlParam("status")&&-1!=f.indexOf(r);e||(e="browse");var y=!0,g=t.money?t.money.value:null,v=t.pk_billtype?t.pk_billtype.value:null,h=t.coordflag?t.coordflag.value:null,_=t.approvestatus?t.approvestatus.value:null,I=t.billstatus?t.billstatus.value:null,k=t.effectstatus?t.effectstatus.value:null,w=t.isinit?t.isinit.value:null,T=(t.pk_org&&t.pk_org.value,!!t.isforce&&t.isforce.value),C=!!t.isrefund&&t.isrefund.value,x=void 0;switch(r){case"Refund":("browse"!=e||k!=d||C)&&(y=!1);break;case"CancelRefund":("browse"!=e||"F0"==v&&!C||"F2"==v&&C&&g<0||"F2"==v&&!C)&&(y=!1);break;case"Generate":"browse"==e&&k==d||(y=!1);break;case"More":"browse"!=e&&(y=!1);break;case"CancelConfirm":"browse"==e&&h!=c||(y=!1);break;case"Confirm":h==u&&(y=!1);break;case"Add":"browse"!=e&&(y=!1);break;case"Edit":("browse"!=e||1!=w&&I!=o&&I!=a)&&(y=!1);break;case"Save":"browse"==e&&(y=!1);break;case"TempSave":("browse"==e||"edit"==e&&I!=o)&&(y=!1);break;case"SaveAndCommit":"browse"!=e&&_==l||(y=!1),"card"==p&&T&&b.props.cardTable.getValByKeyAndIndex(b.tableId,0,"commpaystatus")&&"1"!=b.props.cardTable.getValByKeyAndIndex(b.tableId,0,"commpaystatus").value&&(y=!1);break;case"Delete":("browse"!=e||1!=w&&_!=l)&&(y=!1);break;case"Refresh":"browse"!=e&&(y=!1);break;case"Cancel":"browse"==e&&(y=!1);break;case"Copy":"browse"!=e&&(y=!1);break;case"Commit":"browse"==e&&_==l&&I==a||(y=!1);break;case"Uncommit":b&&(x=b.props.getUrlParam("scene")),x&&"bz"!=x?("browse"!=e||_!=i&&k!=d||C)&&(y=!1):("browse"!=e||_!=i&&_!=n&&k!=d||C&&"F3"!=v)&&(y=!1);break;case"Approve":"browse"==e&&k!=d||(y=!1);break;case"UnApprove":"browse"==e&&k!=s||(y=!1);break;case"MadeBill":"browse"==e&&k==d||(y=!1);break;case"BodyVerify":case"WholeVerify":("browse"!=e||I==o||C)&&(y=!1);break;case"RedBack":("browse"!=e||k!=d||C)&&(y=!1);break;case"AttachManage":"browse"!=e&&(y=!1);break;case"CommisionPay":case"CancelCommisionPay":"browse"==e&&T||(y=!1);break;case"Receipt":case"ReceiptCheck":case"ReceiptScan":"browse"!=e&&(y=!1);break;case"InvoiceUploader":"browse"==e&&_!=n||(y=!1);break;case"BillLinkQuery":case"LinkBal":case"LinkDeal":case"LinkVouchar":case"LinkConfer":case"LinkTerm":case"LinkTbb":case"LinkInformer":case"LinkSettleInfo":case"LinkAprv":case"ImportData":case"ExportData":case"Print":case"Output":case"OfficalPrint":case"CancelPrint":"browse"!=e&&(y=!1);break;case"SpecialInvoice":case"GeneralInvoice":case"ElectronicInvoice":case"OilSpecialInvoice":case"OilGeneralInvoice":case"OilElectronicInvoice":("browse"!=e||_!=n||g<0)&&(y=!1);break;case"RedInvoice":("browse"!=e||_!=n||g>=0)&&(y=!1);break;case"MaintainTaxInvoice":case"LinkTaxInvoice":"browse"==e&&_==n||(y=!1);break;case"Pausetrans":("browse"!=e||k!=d||C)&&(y=!1);case"Cancelpause":case"PrePay":("browse"!=e||k!=d||C)&&(y=!1);break;case"AddLine":if("browse"==e&&(y=!1),"card"==p&&("edit"==e||"add"==e))for(var B=b.props.createMasterChildData(b.getPagecode(),b.formId,b.tableId).body[b.tableId].rows,S=0;S<B.length;S++){var R=B[S].values.top_billid.value,E=B[S].values.top_itemid.value;if(R||E){y=!1;break}}break;case"DelLine":case"CopyLine":"browse"==e&&(y=!1);break;case"PasteToEndLine":case"CancelLine":y=!1;break;case"Approve_inner":"browse"==e&&k!=d||(y=!1);break;case"UnApprove_inner":"browse"==e&&k!=s||(y=!1);break;case"MadeBill_inner":"browse"==e&&k==d||(y=!1);break;case"Edit_inner":("browse"!=e||1!=w&&I!=o&&I!=a)&&(y=!1);break;case"Delete_inner":("browse"!=e||1!=w&&_!=l)&&(y=!1);break;case"Copy_inner":"browse"!=e&&(y=!1);break;case"CancelConfirm_inner":h==c&&(y=!1);break;case"Confirm_inner":h==u&&(y=!1);break;case"Commit_inner":"browse"==e&&_==l&&I==a||(y=!1);break;case"Uncommit_inner":b&&(x=b.props.getUrlParam("scene")),x&&"bz"!=x?("browse"!=e||_!=i&&k!=d||C)&&(y=!1):("browse"!=e||_!=i&&_!=n&&k!=d||C)&&(y=!1);break;case"open_browse":"browse"!=e&&b.isLineOpen&&(y=!1);break;case"close_browse":"browse"==e||b.isLineOpen||(y=!1);break;case"open_edit":"browse"==e&&(y=!1)}return y},y=function(e,t){for(var r=[],a=[],o=0;o<t.Info.allButtonsKey.length;o++){b(null,e,t.Info.allButtonsKey[o],"list",t)?r.push(t.Info.allButtonsKey[o]):a.push(t.Info.allButtonsKey[o])}t.props.button.setButtonDisabled(r,!1),t.props.button.setButtonDisabled(a,!0)};t.buttonVisible=b,t.getButtonsKey=function e(t,r){for(var a=0;a<t.length;a++)"list_inner"!=t[a].area&&"card_inner"!=t[a].area&&(0==t[a].children.length?r.push(t[a].key):(r.push(t[a].key),e(t[a].children,r)));return r},t.getInnerButtonkey=function(e){for(var t=[],r=0;r<e.length;r++)"list_inner"!=e[r].area&&"card_inner"!=e[r].area||t.push(e[r].key);return t},t.cardGetbodyAndInnerbutton=function(e){for(var t=[],r=0;r<e.length;r++)"card_body"!=e[r].area&&"card_inner"!=e[r].area||t.push(e[r].key);return t},t.cardBodyAndInnerButtonVisible=function(e,t,r){var a=e.props.cardTable.getStatus(e.tableId);if(r&&"browse"==a)return["Close_browse"];if("browse"==a)return["open_browse"];if("edit"==a){if(1==t){if("transfer"===e.props.getUrlParam("type"))return["open_edit","Copy_inner","Delete_inner"];for(var o=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId).body[e.tableId].rows,l=0;l<o.length;l++){var n=o[l].values.top_billid.value,i=o[l].values.top_itemid.value;if(n||i)return["open_edit","Copy_inner","Delete_inner"]}return["open_edit","Copy_inner","Insert_inner","Delete_inner"]}return 0==t?["Paste_inner"]:[]}return[]},t.cardBodyControl=function(e,t,r){if(e.button.setButtonVisible(["PasteToEndLine","CancelLine"],!t),"transfer"===e.getUrlParam("type"))e.button.setButtonVisible(["CopyLine","DelLine"],t);else{if(r)for(var a=r.props.createMasterChildData(r.getPagecode(),r.formId,r.tableId).body[r.tableId].rows,o=0;o<a.length;o++){var l=a[o].values.top_billid.value,n=a[o].values.top_itemid.value;if(l||n)return void e.button.setButtonVisible(["CopyLine","DelLine"],t)}e.button.setButtonVisible(["CopyLine","DelLine","AddLine"],t)}},t.initCardBodyEditControl=function(e,t,r){t?(e.button.setButtonDisabled(["AddLine"],!1),e.button.setButtonDisabled(["CopyLine","DelLine"],!0)):e.button.setButtonDisabled(["AddLine","CopyLine","DelLine"],!0)},t.onSelectedCardBodyEditControl=function(e){var t=e.props.getUrlParam("status");if(t||(t="browse"),"browse"==t){var r=e.props.cardTable.getCheckedRows(e.tableId);if(1==r.length){var a=r[0].data.values.pausetransact?r[0].data.values.pausetransact.value:null,o=r[0].data.values.prepay?r[0].data.values.prepay.value:null,l=[],n=[];"0"!=a&&a?a&&(l.push("Cancelpause"),n.push("Pausetrans")):(l.push("Pausetrans"),n.push("Cancelpause")),"0"!=o&&o?n.push("PrePay"):l.push("PrePay"),e.props.button.setButtonDisabled(l,!1),e.props.button.setButtonDisabled(n,!0)}else r.length>1?e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!1):e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!0)}else{var i=e.props.createMasterChildData(e.props.getUrlParam("pagecode"),e.formId,e.tableId).head[e.formId].rows[0].values;if(i.pk_org?i.pk_org.value:null)e.props.cardTable.getCheckedRows(e.tableId).length>0?e.props.button.setButtonDisabled(["CopyLine","DelLine"],!1):e.props.button.setButtonDisabled(["CopyLine","DelLine"],!0)}},t.initCardBodybrowseControl=function(e){e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!0)},t.onListButtonControl=function(e){var t=e.props.table.getCheckedRows(e.tableId);1==t.length?y(t[0].data.values,e):t.length>1?e.props.button.setButtonDisabled(e.Info.allButtonsKey,!1):y(null,e)}},7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExistsTopBill=t.refreshBill=t.batchGenerate=t.generate=t.F0DeleteAfterEditCalculate=t.refreshChildVO2HeadVO=t.getRowIds=t.getCheckedRowColvalues=t.getColvalues=t.delBlankLine=t.pasteInner=t.deleteInner=t.copyInner=t.pasteToEndLine=t.copyLine=t.delLine=t.getLinkconferQuery=t.resetBodyPk=t.clearTopInfos=t.getBodyAmountValue=t.calculateHeadMoney=t.setFormEditable=void 0;var a=r(1);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=a.cardCache.getDefData,n=a.cardCache.setDefData,i=a.cardCache.updateCache,d=function(e,t){if("F0"==e.billType){var r=!1,o=e.props.form.getFormItemsValue(e.formId,"pk_tradetype")?e.props.form.getFormItemsValue(e.formId,"pk_tradetype").value:null;if((0,a.ajax)({url:"/nccloud/arap/arappub/isConsolidatedTax.do",data:{tradeType:o},async:!1,success:function(e){r=e.data}}),!r)return;var l=p(e.props,e.tableId,["customer","taxcodeid","taxrate","taxtype","buysellflag","money_de","local_money_de","notax_de","local_notax_de","local_tax_de"]),n=[],i=e.props.cardTable.getAllRows(e.tableId),d={},s={};i.forEach((function(e,t){if("3"!=e.status){var r=e.values.customer.value+"_"+e.values.taxcodeid.value+"_"+e.values.taxrate.value+"_"+e.values.taxtype.value+"_"+e.values.buysellflag.value;s[r]=e,d[e.rowid]=t}}));var u=[];t.forEach((function(e){var t=e.data.values.customer.value+"_"+e.data.values.taxcodeid.value+"_"+e.data.values.taxrate.value+"_"+e.data.values.taxtype.value+"_"+e.data.values.buysellflag.value;u.push(t)}));for(var c=0;c<u.length;c++)s[u[c]]&&n.push(s[u[c]]);if(0==n.length)return;var f=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId);f.body[e.tableId].rows=n,(0,a.ajax)({url:"/nccloud/arap/arappub/deleteAfterEditCalculate.do",data:{cardData:f,colValues:l,rowidIndex:d},success:function(t){e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId])}})}},s=function(e){var t=e.props.form.getFormItemsValue(e.formId,"billclass").value,r=e.props.createMasterChildData(e.props.pageId,e.formId,e.tableId),a=null,o=null,l=null,n=null;"yf"==t||"sk"==t?(a=u(e.formId,e.tableId,r,"money_cr"),o=u(e.formId,e.tableId,r,"local_money_cr"),l=u(e.formId,e.tableId,r,"groupcrebit"),n=u(e.formId,e.tableId,r,"globalcrebit")):"ys"!=t&&"fk"!=t||(a=u(e.formId,e.tableId,r,"money_de"),o=u(e.formId,e.tableId,r,"local_money_de"),l=u(e.formId,e.tableId,r,"groupdebit"),n=u(e.formId,e.tableId,r,"globaldebit"));var i=e.props.form.getFormItemsValue(e.formId,"money").scale,d=e.props.form.getFormItemsValue(e.formId,"local_money").scale,s=e.props.form.getFormItemsValue(e.formId,"money").scale,c=e.props.form.getFormItemsValue(e.formId,"money").scale;e.props.form.setFormItemsValue(e.formId,{money:{value:a,scale:i},local_money:{value:o,scale:d},grouplocal:{value:l,scale:s},globallocal:{value:n,scale:c}})},u=function(e,t,r,a){if(r&&r.head[e]&&r.body[t]){for(var o=0,l=0,n=0;n<r.body[t].rows.length;n++)if("3"!=r.body[t].rows[n].status){var i=r.body[t].rows[n].values[a].value;l=1*r.body[t].rows[n].values[a].scale,i=parseFloat(i),isNaN(i)||(o+=i)}return o=o.toFixed(l)}},c=function(e,t){var r=e.props.form.getFormItemsValue(e.formId,"billclass").value;null!=r&&("ys"==r?e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_recitem",{value:null}):"sk"==r?(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_gatheritem",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checktype",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno_display",{value:null,display:null})):"yf"==r?e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_payableitem",{value:null}):"fk"==r&&(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_payitem",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checktype",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno_display",{value:null,display:null})),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"rowno",{value:null}))};function p(e,t,r){for(var a={},o=0;o<r.length;o++){var l=r[o],n=e.cardTable.getColValue(t,l,!1,!1);n&&(a[l]=n)}return a}function f(e,t){t.data?(i(e.pkname,e.props.getUrlParam("id"),t.data,e.formId,e.dataSource),t.data.head&&e.props.form.setAllFormValue(o({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.setTableData(e.tableId,t.data.body[e.tableId])):(e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setTableData(e.tableId,{rows:[]})),e.toggleShow()}var m=function(e,t,r,a){var o=t.table.getCheckedRows(r),l=[];return o.forEach((function(r){l.push({pk_bill:r.data.values[e.pkname].value,ts:r.data.values.ts.value,billType:a,index:r.index,pageId:t.getSearchParam("p")})})),l};t.setFormEditable=function(e,t,r,a){for(var l=e.meta.getMeta()[r].items,n=0;n<l.length;n++){var i=l[n];e.form.setFormItemsDisabled(t,o({},i.attrcode,!a))}},t.calculateHeadMoney=s,t.getBodyAmountValue=u,t.clearTopInfos=function(e,t){var r=e.props.cardTable.getValByKeyAndIndex(e.tableId,t,"top_billtype").value;"F0"==r||"F1"==r||"F2"==r||"F3"==r?(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_tradetype",{value:null})):(null==r||"36D1"!=r&&"36D7"!=r&&"FCT2"!=r&&"FCT1"!=r)&&(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_tradetype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_tradetype",{value:null}))},t.resetBodyPk=c,t.getLinkconferQuery=function(e){var t={};if(-1!=e.indexOf("#")){var r=e.split("#");if(r&&r.length>0){var a=r[1];if(-1!=a.indexOf("&"))for(var o=a.split("&"),l=0;l<o.length;l++)t[o[l].split("=")[0]]=o[l].split("=")[1];else t[a.split("=")[0]]=a.split("=")[1]}}return t},t.delLine=function(e){var t=e.props.cardTable.getCheckedRows(e.tableId);if(0!=t.length){var r=[];t.forEach((function(e){"3"!=e.data.status&&r.push(e.index)})),e.props.cardTable.delRowsByIndex(e.tableId,r),"F0"==e.billType&&d(e,t),s(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData()}else(0,a.toast)({color:"warning",content:this.state.json["public-000041"]})},t.copyLine=function(e,t){var r=e.props.cardTable.getCheckedRows(e.tableId);if(0==r.length)return(0,a.toast)({color:"warning",content:this.state.json["public-000042"]}),!1;var o=0,l=[];return r.forEach((function(e){"3"!=e.data.status&&(l.push(r[o].data),o++)})),n("CopyLine",t,l),!0},t.pasteToEndLine=function(e,t){e.props.beforeUpdatePage();var r=e.props.cardTable.getNumberOfRows(e.tableId),a=l("CopyLine",t);e.props.cardTable.insertRowsAfterIndex(e.tableId,a,r-1);for(var o=0;o<a.length;o++)c(e,r+o);s(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},t.copyInner=function(e,t,r){var o=[];o.push(e),n("CopyLine",t,o),o.length>=1&&(0,a.toast)({color:"success",content:r.state.json["public-000162"]})},t.deleteInner=function(e,t,r,a){if(e.props.beforeUpdatePage(),t.cardTable.delRowsByIndex(r,a),"F0"==e.billType){var o=[{data:e.props.cardTable.getRowsByIndexs(e.tableId,[a])[0],index:a}];d(e,o)}s(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},t.pasteInner=function(e,t,r,a,o){e.props.beforeUpdatePage();var n=l("CopyLine",r);t.cardTable.insertRowsAfterIndex(a,n,o);for(var i=0;i<n.length;i++)c(e,o+1+i);s(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},t.delBlankLine=function(e,t,r,o,l){var n=o.body[t].rows;if(n&&0!=n.length||(0,a.toast)({color:"danger",content:e.state.json["public-000163"]}),1!=n.length){for(var i=[],d=0;d<n.length;d++){var s=n[d];if("3"!=s.status){if("F3"==r){var u=s.values.commpaytype?s.values.commpaytype.value:null;if(u&&"0"==u)return}var c=void 0,p=void 0;"F3"==r||"F0"==r?(c=s.values.money_de.value,p=s.values.local_tax_de.value):(c=s.values.money_cr.value,p=s.values.local_tax_cr.value),Number(c)==Number(0)&&Number(p)==Number(0)&&i.push(d)}}i.length>0&&(e.props.cardTable.delRowsByIndex(t,i),l&&-1!=i.indexOf(l)&&e.Info.isModelSave&&(e.Info.isModelSave=!1,e.props.cardTable.closeModel(e.tableId)))}},t.getColvalues=p,t.getCheckedRowColvalues=function(e,t,r){for(var a={},o=e.cardTable.getCheckedRows(t),l=0;l<r.length;l++){for(var n=r[l],i=[],d=0;d<o.length;d++)i.push(o[d].data.values[n]);i&&(a[n]=i)}return a},t.getRowIds=function(e,t){for(var r=e.cardTable.getVisibleRows(t),a=[],o=0;o<r.length;o++)a.push(r[o].rowid);return a},t.refreshChildVO2HeadVO=function(e,t,r){var a=["pk_tradetype","billdate","pk_group","pk_fiorg","pk_pcorg","sett_org_v","sett_org","pk_billtype","pk_tradetype","billclass","rate","grouprate","globalrate","payaccount","recaccount","cashaccount","objtype","payman","pk_rescenter","pk_group","checkelement","pk_deptid","pk_deptid_v","pk_psndoc","customer","supplier","pu_org","pu_org_v","pk_balatype","pk_org_v","pk_fiorg_v","pk_pcorg_v","so_org","so_org_v","cashitem","bankrollprojet","pk_subjcode","so_psndoc","pu_psndoc","so_deptid","pu_deptid","so_deptid_v","pu_deptid_v","busidate","ordercubasdoc","costcenter","payreason","invoiceno","pk_currtype"],o=e.cardTable.getRowsByIndexs(r,0);if(o){for(var l={},n=0;n<a.length;n++){var i=a[n];l[i]=o[0].values[i]}e.form.setFormItemsValue(t,l)}},t.F0DeleteAfterEditCalculate=d,t.generate=function(e){(0,a.ajax)({url:"/nccloud/arap/arappub/generate.do",data:{pk_bill:e.props.getUrlParam("id"),pageId:e.getPagecode(),billType:e.billType},success:function(t){(0,a.toast)({color:"success",title:""}),f(e,t)}})},t.batchGenerate=function(e){var t=m(e,e.props,e.tableId,e.billType);0!=t.length?(0,a.ajax)({url:"/nccloud/arap/arappub/listgenerate.do",data:t,success:function(t){var r=t.success,o=t.data;if(r){if(o.grid){var l=o.grid,n=[];for(var i in l)n.push({index:i,data:{values:l[i].values}});e.props.table.updateDataByIndexs(e.tableId,n)}o.message&&((0,a.toast)({duration:"infinity",color:o.PopupWindowStyle,content:o.message}),e.onSelected())}}}):(0,a.toast)({color:"warning",content:"!"})},t.refreshBill=f,t.isExistsTopBill=function(e){for(var t=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId).body[e.tableId].rows,r=0;r<t.length;r++){var a=t[r].values.top_billid.value,o=t[r].values.top_itemid.value;if(a||o)return!0}}},8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginContextKeys=void 0,t.loginContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r={},a=e.paramMap;for(var o in d)r[d[o]]=e[d[o]],i&&i[d[o]]&&(r[d[o]]=i[d[o]]);for(var n in a)r[n]=a[n];l(t,t,r)},t.getContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if(i=(0,a.getBusinessInfo)(),e==d.businessDate&&i)return i[d.businessDate];var r=n(t,t);return r?r[e]:null},t.setContext=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",a=n(r,r);a?a[e]=t:a=o({},e,t);l(r,r,a)};var a=r(1);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=a.cardCache.setDefData,n=a.cardCache.getDefData,i=(0,a.getBusinessInfo)(),d=t.loginContextKeys={defaultAccbookName:"defaultAccbookName",defaultAccbookPk:"defaultAccbookPk",mdid:"mdid",org_Name:"org_Name",org_v_Name:"org_v_Name",pk_org:"pk_org",pk_org_v:"pk_org_v",transtype:"transtype",pk_transtype:"pk_transtype",groupId:"groupId",groupName:"groupName",userId:"userId",userName:"userName",userCode:"userCode",businessDate:"businessDate"}},9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCheckTypeEdit=t.moneyAndRateFields=t.reWriteCheckno=t.isChecknoRef=t.checktypeAfterEvent=t.modifyChecknoItemtype=t.checknoDisplayAfterEvent=void 0;var a=r(1);function o(e,t,r,a){if(a){var o=e.cardTable.getValByKeyAndIndex(t,0,"billclass").value,n=e.meta.getMeta();n[n.gridrelation.bodys.destEditAreaCode].items.map((function(e){if("checkno_display"==e.attrcode){var t=l(a,r);t&&"refer"!=e.itemtype?(e.itemtype="refer","fk"==o?e.refcode="fbm/refer/fbm/Bill4CmpPayGridRef/index.js":"sk"==o&&(e.refcode="fbm/refer/fbm/Bill4CmpReceiveGridRef/index.js")):t&&"refer"==e.itemtype||(e.itemtype="input",e.refcode=null)}return e})),e.meta.setMeta(n)}}function l(e,t){var r=!1;return(0,a.ajax)({url:"/nccloud/arap/arappub/ischecknoref.do",data:{checktype:e,pk_org:t},async:!1,success:function(e){r=e.data}}),r}t.checknoDisplayAfterEvent=function(e,t,r,a,o){"checkno_display"==r&&(a&&a.refpk?(e.cardTable.setValByKeyAndIndex(t,o,"checkno",{value:a.refpk,display:a.refname}),e.cardTable.setValByKeyAndIndex(t,o,"checkno_display",{value:a.refname,display:a.refname})):a instanceof Object?e.cardTable.setValByKeyAndIndex(t,o,"checkno",{value:null,display:null}):e.cardTable.setValByKeyAndIndex(t,o,"checkno",{value:a,display:a}))},t.modifyChecknoItemtype=o,t.checktypeAfterEvent=function(e,t,r,a,l){if("checktype"==r){e.cardTable.setValByKeyAndIndex(t,l,"checkno_display",{value:null,display:null}),e.cardTable.setEditableByIndex(t,l,"checkno_display",!0);var n=e.cardTable.getValByKeyAndIndex(t,l,"pk_org").value;o(e,t,n,a.refpk)}},t.isChecknoRef=l,t.reWriteCheckno=function(e,t){for(var r=e.cardTable.getColValue(t,"checkno_display",!1,!1),a=0;a<r.length;a++){var o=r[a];o.display||e.cardTable.setValByKeyAndIndex(t,a,"checkno_display",{value:o.value,display:o.value})}},t.moneyAndRateFields=["money_bal","money_de","money_cr","notax_de","notax_cr","occupationmny","settlemoney","nosubtax","nosubtaxrate","local_money_bal","local_money_de","local_money_cr","local_notax_de","local_notax_cr","local_tax_de","local_tax_cr","caltaxmny","groupbalance","groupdebit","groupcrebit","groupnotax_de","groupnotax_cre","groupagentreceivelocal","grouptax_de","grouptax_cre","globalbalance","globaldebit","globalcrebit","globalnotax_de","globalnotax_cre","globalagentreceivelocal","globaltax_de","globaltax_cre","price","taxprice","postprice","postpricenotax","local_price","local_taxprice","rate","taxcodeid","taxrate","taxtype","grouprate","globalrate","quantity_bal"],t.isCheckTypeEdit=function(e,t,r){var o=!1;return(0,a.ajax)({url:"/nccloud/arap/arappub/ischecknoref.do",data:{pk_org:t,objtype:e,billclass:r},async:!1,success:function(e){o=e.data}}),o}}})}));