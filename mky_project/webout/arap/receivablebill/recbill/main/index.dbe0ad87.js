!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("sscrp/rppub/components/image/index"),require("sscivm/invoiceComponent/compoundComponent/component/index")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom","sscrp/rppub/components/image/index","sscivm/invoiceComponent/compoundComponent/component/index"],t):"object"==typeof exports?exports["arap/receivablebill/recbill/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("sscrp/rppub/components/image/index"),require("sscivm/invoiceComponent/compoundComponent/component/index")):e["arap/receivablebill/recbill/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM,e["sscrp/rppub/components/image/index"],e["sscivm/invoiceComponent/compoundComponent/component/index"])}(window,(function(e,t,a,r,o){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=461)}([,function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),l=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[a].concat(l).concat([o]).join("\n")}var n;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var l=this[o][0];"number"==typeof l&&(r[l]=!0)}for(o=0;o<e.length;o++){var n=e[o];"number"==typeof n[0]&&r[n[0]]||(a&&!n[2]?n[2]=a:a&&(n[2]="("+n[2]+") and ("+a+")"),t.push(n))}},t}},function(e,t,a){var r,o,l={},n=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),i=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),s=null,d=0,u=[],c=a(11);function p(e,t){for(var a=0;a<e.length;a++){var r=e[a],o=l[r.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](r.parts[n]);for(;n<r.parts.length;n++)o.parts.push(v(r.parts[n],t))}else{var i=[];for(n=0;n<r.parts.length;n++)i.push(v(r.parts[n],t));l[r.id]={id:r.id,refs:1,parts:i}}}}function f(e,t){for(var a=[],r={},o=0;o<e.length;o++){var l=e[o],n=t.base?l[0]+t.base:l[0],i={css:l[1],media:l[2],sourceMap:l[3]};r[n]?r[n].parts.push(i):a.push(r[n]={id:n,parts:[i]})}return a}function b(e,t){var a=i(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),b(e,t),t}function h(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function v(e,t){var a,r,o,l;if(t.transform&&e.css){if(!(l=t.transform(e.css)))return function(){};e.css=l}if(t.singleton){var n=d++;a=s||(s=y(t)),r=k.bind(null,a,n,!1),o=k.bind(null,a,n,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),b(e,t),t}(t),r=w.bind(null,a,t),o=function(){m(a),a.href&&URL.revokeObjectURL(a.href)}):(a=y(t),r=I.bind(null,a),o=function(){m(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=n()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=f(e,t);return p(a,t),function(e){for(var r=[],o=0;o<a.length;o++){var n=a[o];(i=l[n.id]).refs--,r.push(i)}e&&p(f(e,t),t);for(o=0;o<r.length;o++){var i;if(0===(i=r[o]).refs){for(var s=0;s<i.parts.length;s++)i.parts[s]();delete l[i.id]}}}};var g,_=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function k(e,t,a,r){var o=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var l=document.createTextNode(o),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(l,n[t]):e.appendChild(l)}}function I(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function w(e,t,a){var r=a.css,o=a.sourceMap,l=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||l)&&(r=c(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var n=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(n),i&&URL.revokeObjectURL(i)}},function(e,t,a){"use strict";var r;function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=(o(r={Add:"Add",Edit:"Edit",Delete:"Delete",Copy:"Copy",Save:"Save",Back:"Back",TempSave:"TempSave",Cancel:"Cancel",Commit:"Commit",Uncommit:"Uncommit",Approve:"Approve",UnApprove:"UnApprove",LinkAprv:"LinkAprv",BodyVerify:"BodyVerify",WholeVerify:"WholeVerify",MadeBill:"MadeBill",RedBack:"RedBack",Tradetype:"Tradetype",InitBuild:"InitBuild",CancelInitBuild:"CancelInitBuild",Pausetrans:"Pausetrans",Cancelpause:"Cancelpause",CommisionPay:"CommisionPay",CancelCommisionPay:"CancelCommisionPay",Receipt:"Receipt",ReceiptCheck:"ReceiptCheck",InvoiceUploader:"InvoiceUploader",ReceiptScan:"ReceiptScan",LinkInvoice:"LinkInvoice",BillAssistant:"BillAssistant",AttachManage:"AttachManage",ImportExportMenu:"ImportExportMenu",ImportData:"ImportData",ExportData:"ExportData",Print:"Print",Preview:"Preview",Output:"Output",OfficalPrint:"OfficalPrint",CancelPrint:"CancelPrint",PrintList:"PrintList",RelatedQuery:"RelatedQuery",LinkDeal:"LinkDeal",BillLinkQuery:"BillLinkQuery",LinkTbb:"LinkTbb",LinkVouchar:"LinkVouchar",LinkTerm:"LinkTerm",LinkConfer:"LinkConfer",LinkBal:"LinkBal",LinkBill:"LinkBill",More:"More",Refresh:"Refresh",Confirm:"Confirm",CancelConfirm:"CancelConfirm",PrePay:"PrePay",Pause:"Pause",SaveAndCommit:"SaveAndCommit",LinkSettleInfo:"LinkSettleInfo",LinkInformer:"LinkInformer",Add_Recbill:"Add_Recbill",Add_GatherBill:"Add_GatherBill",Add_PayableBill:"Add_PayableBill",Add_PayBill:"Add_PayBill",TaxChecked:"TaxChecked",Add_t:"Add_t",Return:"Return",Keep_a:"Keep_a",Cancel_a:"Cancel_a",Keep_m:"Keep_m",Cancel_m:"Cancel_m"},"Refresh","Refresh"),o(r,"Query","Query"),o(r,"InitialReport","InitialReport"),o(r,"Share","Share"),o(r,"VerifyLink","VerifyLink"),o(r,"Batch_delect","Batch_delect"),o(r,"Quick_query","Quick_query"),o(r,"MakeUp","MakeUp"),o(r,"NowVerify","NowVerify"),o(r,"ProfitRecord","ProfitRecord"),o(r,"ConnectSettleInfo","ConnectSettleInfo"),o(r,"Hisrecord","Hisrecord"),o(r,"Transfers","Transfers"),o(r,"Empty","Empty"),o(r,"CancelTrans","CancelTrans"),o(r,"CancelProfit","CancelProfit"),o(r,"Refund","Refund"),o(r,"CancelRefund","CancelRefund"),o(r,"Generate","Generate"),o(r,"SpecialInvoice","SpecialInvoice"),o(r,"GeneralInvoice","GeneralInvoice"),o(r,"ElectronicInvoice","ElectronicInvoice"),o(r,"OilSpecialInvoice","OilSpecialInvoice"),o(r,"OilGeneralInvoice","OilGeneralInvoice"),o(r,"OilElectronicInvoice","OilElectronicInvoice"),o(r,"RedInvoice","RedInvoice"),o(r,"MaintainTaxInvoice","MaintainTaxInvoice"),o(r,"LinkTaxInvoice","LinkTaxInvoice"),o(r,"LinkDetail","LinkDetail"),r);t.headButton=l,t.bodyButton={AddLine:"AddLine",DelLine:"DelLine",InsertLine:"InsertLine",CopyLine:"CopyLine",PasteLine:"PasteLine",PasteToEndLine:"PasteToEndLine",CancelLine:"CancelLine",Query:"Query"},t.innerButton={Edit_inner:"Edit_inner",Delete_inner:"Delete_inner",Copy_inner:"Copy_inner",Commit_inner:"Commit_inner",Uncommit_inner:"Uncommit_inner",Confirm_inner:"Confirm_inner",CancelConfirm_inner:"CancelConfirm_inner",open_browse:"open_browse",Close_browse:"Close_browse",open_edit:"open_edit",Insert_inner:"Insert_inner",Paste_inner:"Paste_inner",Approve_inner:"Approve_inner",UnApprove_inner:"UnApprove_inner",MadeBill_inner:"MadeBill_inner"},t.modelButton={Prev:"Prev",Next:"Next",Done:"Done",Cancel:"Cancel",Bill:"Bill"},t.bottomButton={Next:"Next",Pre:"Pre",CancelProfit:"CancelProfit",Save:"Save",Back:"Back",ConfirmTrans:"ConfirmTrans"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dealTranferBtns=function(e){"transfer"===this.props.getUrlParam("type")&&(this.setState({tpflag:!1}),e.push("Add"),e.push("TempSave"),e.push("Copy"),e.push("Verify"),e.push("RedBack"),e.push("Pause_g1"),e.push("PrePay"),e.push("AddLine"),e.push("Insert_inner"),e.push("Refresh"))},t.dealSrcProjectBtns=function(e,t){if(t.length>0){var a=t[0].values&&t[0].values.top_billtype?t[0].values.top_billtype.value:null;-1!=p.indexOf(a)&&(e.push("AddLine"),e.push("CopyLine"),e.push("DelLine"),e.push("Insert_inner"),e.push("Copy_inner"),e.push("Delete_inner"))}},t.dealRefundBtns=function(e,t){var a=!!this.props.form.getFormItemsValue(this.formId,"isrefund")&&this.props.form.getFormItemsValue(this.formId,"isrefund").value;!a&&"Y"!=a||"N"==a||(t.push("AddLine"),t.push("Insert_inner"))};var r=-1,o=-99,l=-1,n=1,i=3,s=10,d=0,u=1,c=0,p=["4D65","4D53","4D83","4D33","4D39","4D48","4D50","4D86"],f=["Add_blank","Add","Head_g1","adcode","paca","F0","F1","F2","F3","FCT1","FCT2","36D1","4A18","4A23","4A49","4A24","4A2F","4A3F","4A3H"],b=["Add_blank","Add","Head_g1","adcode","paca","F0","F1","F2","F3","Z3","FCT1","FCT2","36D1","4A18","4A23","4A49","4A24","4A2F","4A3F","4A3H","More","InitBuild","CancelInitBuild","ImportData","Refresh","ConnectSettleInfo"],m=function(e,t,a,p,m){if(!t||!t.pk_tradetype||!t.pk_tradetype.value)return"list"==p?-1!=b.indexOf(a):!!m.props.getUrlParam("status")&&-1!=f.indexOf(a);e||(e="browse");var y=!0,h=t.money?t.money.value:null,v=t.pk_billtype?t.pk_billtype.value:null,g=t.coordflag?t.coordflag.value:null,_=t.approvestatus?t.approvestatus.value:null,k=t.billstatus?t.billstatus.value:null,I=t.effectstatus?t.effectstatus.value:null,w=t.isinit?t.isinit.value:null,T=(t.pk_org&&t.pk_org.value,!!t.isforce&&t.isforce.value),C=!!t.isrefund&&t.isrefund.value,x=void 0;switch(a){case"Refund":("browse"!=e||I!=s||C)&&(y=!1);break;case"CancelRefund":("browse"!=e||"F0"==v&&!C||"F2"==v&&C&&h<0||"F2"==v&&!C)&&(y=!1);break;case"Generate":"browse"==e&&I==s||(y=!1);break;case"More":"browse"!=e&&(y=!1);break;case"CancelConfirm":"browse"==e&&g!=c||(y=!1);break;case"Confirm":g==u&&(y=!1);break;case"Add":"browse"!=e&&(y=!1);break;case"Edit":("browse"!=e||1!=w&&k!=o&&k!=r)&&(y=!1);break;case"Save":"browse"==e&&(y=!1);break;case"TempSave":("browse"==e||"edit"==e&&k!=o)&&(y=!1);break;case"SaveAndCommit":"browse"!=e&&_==l||(y=!1),"card"==p&&T&&m.props.cardTable.getValByKeyAndIndex(m.tableId,0,"commpaystatus")&&"1"!=m.props.cardTable.getValByKeyAndIndex(m.tableId,0,"commpaystatus").value&&(y=!1);break;case"Delete":("browse"!=e||1!=w&&_!=l)&&(y=!1);break;case"Refresh":"browse"!=e&&(y=!1);break;case"Cancel":"browse"==e&&(y=!1);break;case"Copy":"browse"!=e&&(y=!1);break;case"Commit":"browse"==e&&_==l&&k==r||(y=!1);break;case"Uncommit":m&&(x=m.props.getUrlParam("scene")),x&&"bz"!=x?("browse"!=e||_!=i&&I!=s||C)&&(y=!1):("browse"!=e||_!=i&&_!=n&&I!=s||C&&"F3"!=v)&&(y=!1);break;case"Approve":"browse"==e&&I!=s||(y=!1);break;case"UnApprove":"browse"==e&&I!=d||(y=!1);break;case"MadeBill":"browse"==e&&I==s||(y=!1);break;case"BodyVerify":case"WholeVerify":("browse"!=e||k==o||C)&&(y=!1);break;case"RedBack":("browse"!=e||I!=s||C)&&(y=!1);break;case"AttachManage":"browse"!=e&&(y=!1);break;case"CommisionPay":case"CancelCommisionPay":"browse"==e&&T||(y=!1);break;case"Receipt":case"ReceiptCheck":case"ReceiptScan":"browse"!=e&&(y=!1);break;case"InvoiceUploader":"browse"==e&&_!=n||(y=!1);break;case"BillLinkQuery":case"LinkBal":case"LinkDeal":case"LinkVouchar":case"LinkConfer":case"LinkTerm":case"LinkTbb":case"LinkInformer":case"LinkSettleInfo":case"LinkAprv":case"ImportData":case"ExportData":case"Print":case"Output":case"OfficalPrint":case"CancelPrint":"browse"!=e&&(y=!1);break;case"SpecialInvoice":case"GeneralInvoice":case"ElectronicInvoice":case"OilSpecialInvoice":case"OilGeneralInvoice":case"OilElectronicInvoice":("browse"!=e||_!=n||h<0)&&(y=!1);break;case"RedInvoice":("browse"!=e||_!=n||h>=0)&&(y=!1);break;case"MaintainTaxInvoice":case"LinkTaxInvoice":"browse"==e&&_==n||(y=!1);break;case"Pausetrans":("browse"!=e||I!=s||C)&&(y=!1);case"Cancelpause":case"PrePay":("browse"!=e||I!=s||C)&&(y=!1);break;case"AddLine":if("browse"==e&&(y=!1),"card"==p&&("edit"==e||"add"==e))for(var S=m.props.createMasterChildData(m.getPagecode(),m.formId,m.tableId).body[m.tableId].rows,B=0;B<S.length;B++){var E=S[B].values.top_billid.value,R=S[B].values.top_itemid.value;if(E||R){y=!1;break}}break;case"DelLine":case"CopyLine":"browse"==e&&(y=!1);break;case"PasteToEndLine":case"CancelLine":y=!1;break;case"Approve_inner":"browse"==e&&I!=s||(y=!1);break;case"UnApprove_inner":"browse"==e&&I!=d||(y=!1);break;case"MadeBill_inner":"browse"==e&&I==s||(y=!1);break;case"Edit_inner":("browse"!=e||1!=w&&k!=o&&k!=r)&&(y=!1);break;case"Delete_inner":("browse"!=e||1!=w&&_!=l)&&(y=!1);break;case"Copy_inner":"browse"!=e&&(y=!1);break;case"CancelConfirm_inner":g==c&&(y=!1);break;case"Confirm_inner":g==u&&(y=!1);break;case"Commit_inner":"browse"==e&&_==l&&k==r||(y=!1);break;case"Uncommit_inner":m&&(x=m.props.getUrlParam("scene")),x&&"bz"!=x?("browse"!=e||_!=i&&I!=s||C)&&(y=!1):("browse"!=e||_!=i&&_!=n&&I!=s||C)&&(y=!1);break;case"open_browse":"browse"!=e&&m.isLineOpen&&(y=!1);break;case"close_browse":"browse"==e||m.isLineOpen||(y=!1);break;case"open_edit":"browse"==e&&(y=!1)}return y},y=function(e,t){for(var a=[],r=[],o=0;o<t.Info.allButtonsKey.length;o++){m(null,e,t.Info.allButtonsKey[o],"list",t)?a.push(t.Info.allButtonsKey[o]):r.push(t.Info.allButtonsKey[o])}t.props.button.setButtonDisabled(a,!1),t.props.button.setButtonDisabled(r,!0)};t.buttonVisible=m,t.getButtonsKey=function e(t,a){for(var r=0;r<t.length;r++)"list_inner"!=t[r].area&&"card_inner"!=t[r].area&&(0==t[r].children.length?a.push(t[r].key):(a.push(t[r].key),e(t[r].children,a)));return a},t.getInnerButtonkey=function(e){for(var t=[],a=0;a<e.length;a++)"list_inner"!=e[a].area&&"card_inner"!=e[a].area||t.push(e[a].key);return t},t.cardGetbodyAndInnerbutton=function(e){for(var t=[],a=0;a<e.length;a++)"card_body"!=e[a].area&&"card_inner"!=e[a].area||t.push(e[a].key);return t},t.cardBodyAndInnerButtonVisible=function(e,t,a){var r=e.props.cardTable.getStatus(e.tableId);if(a&&"browse"==r)return["Close_browse"];if("browse"==r)return["open_browse"];if("edit"==r){if(1==t){if("transfer"===e.props.getUrlParam("type"))return["open_edit","Copy_inner","Delete_inner"];for(var o=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId).body[e.tableId].rows,l=0;l<o.length;l++){var n=o[l].values.top_billid.value,i=o[l].values.top_itemid.value;if(n||i)return["open_edit","Copy_inner","Delete_inner"]}return["open_edit","Copy_inner","Insert_inner","Delete_inner"]}return 0==t?["Paste_inner"]:[]}return[]},t.cardBodyControl=function(e,t,a){if(e.button.setButtonVisible(["PasteToEndLine","CancelLine"],!t),"transfer"===e.getUrlParam("type"))e.button.setButtonVisible(["CopyLine","DelLine"],t);else{if(a)for(var r=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId).body[a.tableId].rows,o=0;o<r.length;o++){var l=r[o].values.top_billid.value,n=r[o].values.top_itemid.value;if(l||n)return void e.button.setButtonVisible(["CopyLine","DelLine"],t)}e.button.setButtonVisible(["CopyLine","DelLine","AddLine"],t)}},t.initCardBodyEditControl=function(e,t,a){t?(e.button.setButtonDisabled(["AddLine"],!1),e.button.setButtonDisabled(["CopyLine","DelLine"],!0)):e.button.setButtonDisabled(["AddLine","CopyLine","DelLine"],!0)},t.onSelectedCardBodyEditControl=function(e){var t=e.props.getUrlParam("status");if(t||(t="browse"),"browse"==t){var a=e.props.cardTable.getCheckedRows(e.tableId);if(1==a.length){var r=a[0].data.values.pausetransact?a[0].data.values.pausetransact.value:null,o=a[0].data.values.prepay?a[0].data.values.prepay.value:null,l=[],n=[];"0"!=r&&r?r&&(l.push("Cancelpause"),n.push("Pausetrans")):(l.push("Pausetrans"),n.push("Cancelpause")),"0"!=o&&o?n.push("PrePay"):l.push("PrePay"),e.props.button.setButtonDisabled(l,!1),e.props.button.setButtonDisabled(n,!0)}else a.length>1?e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!1):e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!0)}else{var i=e.props.createMasterChildData(e.props.getUrlParam("pagecode"),e.formId,e.tableId).head[e.formId].rows[0].values;if(i.pk_org?i.pk_org.value:null)e.props.cardTable.getCheckedRows(e.tableId).length>0?e.props.button.setButtonDisabled(["CopyLine","DelLine"],!1):e.props.button.setButtonDisabled(["CopyLine","DelLine"],!0)}},t.initCardBodybrowseControl=function(e){e.props.button.setButtonDisabled(["Pausetrans","Cancelpause","PrePay"],!0)},t.onListButtonControl=function(e){var t=e.props.table.getCheckedRows(e.tableId);1==t.length?y(t[0].data.values,e):t.length>1?e.props.button.setButtonDisabled(e.Info.allButtonsKey,!1):y(null,e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExistsTopBill=t.refreshBill=t.batchGenerate=t.generate=t.F0DeleteAfterEditCalculate=t.refreshChildVO2HeadVO=t.getRowIds=t.getCheckedRowColvalues=t.getColvalues=t.delBlankLine=t.pasteInner=t.deleteInner=t.copyInner=t.pasteToEndLine=t.copyLine=t.delLine=t.getLinkconferQuery=t.resetBodyPk=t.clearTopInfos=t.getBodyAmountValue=t.calculateHeadMoney=t.setFormEditable=void 0;var r=a(1);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=r.cardCache.getDefData,n=r.cardCache.setDefData,i=r.cardCache.updateCache,s=function(e,t){if("F0"==e.billType){var a=!1,o=e.props.form.getFormItemsValue(e.formId,"pk_tradetype")?e.props.form.getFormItemsValue(e.formId,"pk_tradetype").value:null;if((0,r.ajax)({url:"/nccloud/arap/arappub/isConsolidatedTax.do",data:{tradeType:o},async:!1,success:function(e){a=e.data}}),!a)return;var l=p(e.props,e.tableId,["customer","taxcodeid","taxrate","taxtype","buysellflag","money_de","local_money_de","notax_de","local_notax_de","local_tax_de"]),n=[],i=e.props.cardTable.getAllRows(e.tableId),s={},d={};i.forEach((function(e,t){if("3"!=e.status){var a=e.values.customer.value+"_"+e.values.taxcodeid.value+"_"+e.values.taxrate.value+"_"+e.values.taxtype.value+"_"+e.values.buysellflag.value;d[a]=e,s[e.rowid]=t}}));var u=[];t.forEach((function(e){var t=e.data.values.customer.value+"_"+e.data.values.taxcodeid.value+"_"+e.data.values.taxrate.value+"_"+e.data.values.taxtype.value+"_"+e.data.values.buysellflag.value;u.push(t)}));for(var c=0;c<u.length;c++)d[u[c]]&&n.push(d[u[c]]);if(0==n.length)return;var f=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId);f.body[e.tableId].rows=n,(0,r.ajax)({url:"/nccloud/arap/arappub/deleteAfterEditCalculate.do",data:{cardData:f,colValues:l,rowidIndex:s},success:function(t){e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId])}})}},d=function(e){var t=e.props.form.getFormItemsValue(e.formId,"billclass").value,a=e.props.createMasterChildData(e.props.pageId,e.formId,e.tableId),r=null,o=null,l=null,n=null;"yf"==t||"sk"==t?(r=u(e.formId,e.tableId,a,"money_cr"),o=u(e.formId,e.tableId,a,"local_money_cr"),l=u(e.formId,e.tableId,a,"groupcrebit"),n=u(e.formId,e.tableId,a,"globalcrebit")):"ys"!=t&&"fk"!=t||(r=u(e.formId,e.tableId,a,"money_de"),o=u(e.formId,e.tableId,a,"local_money_de"),l=u(e.formId,e.tableId,a,"groupdebit"),n=u(e.formId,e.tableId,a,"globaldebit"));var i=e.props.form.getFormItemsValue(e.formId,"money").scale,s=e.props.form.getFormItemsValue(e.formId,"local_money").scale,d=e.props.form.getFormItemsValue(e.formId,"money").scale,c=e.props.form.getFormItemsValue(e.formId,"money").scale;e.props.form.setFormItemsValue(e.formId,{money:{value:r,scale:i},local_money:{value:o,scale:s},grouplocal:{value:l,scale:d},globallocal:{value:n,scale:c}})},u=function(e,t,a,r){if(a&&a.head[e]&&a.body[t]){for(var o=0,l=0,n=0;n<a.body[t].rows.length;n++)if("3"!=a.body[t].rows[n].status){var i=a.body[t].rows[n].values[r].value;l=1*a.body[t].rows[n].values[r].scale,i=parseFloat(i),isNaN(i)||(o+=i)}return o=o.toFixed(l)}},c=function(e,t){var a=e.props.form.getFormItemsValue(e.formId,"billclass").value;null!=a&&("ys"==a?e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_recitem",{value:null}):"sk"==a?(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_gatheritem",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checktype",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno_display",{value:null,display:null})):"yf"==a?e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_payableitem",{value:null}):"fk"==a&&(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"pk_payitem",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checktype",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno",{value:null,display:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"checkno_display",{value:null,display:null})),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"rowno",{value:null}))};function p(e,t,a){for(var r={},o=0;o<a.length;o++){var l=a[o],n=e.cardTable.getColValue(t,l,!1,!1);n&&(r[l]=n)}return r}function f(e,t){t.data?(i(e.pkname,e.props.getUrlParam("id"),t.data,e.formId,e.dataSource),t.data.head&&e.props.form.setAllFormValue(o({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.setTableData(e.tableId,t.data.body[e.tableId])):(e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setTableData(e.tableId,{rows:[]})),e.toggleShow()}var b=function(e,t,a,r){var o=t.table.getCheckedRows(a),l=[];return o.forEach((function(a){l.push({pk_bill:a.data.values[e.pkname].value,ts:a.data.values.ts.value,billType:r,index:a.index,pageId:t.getSearchParam("p")})})),l};t.setFormEditable=function(e,t,a,r){for(var l=e.meta.getMeta()[a].items,n=0;n<l.length;n++){var i=l[n];e.form.setFormItemsDisabled(t,o({},i.attrcode,!r))}},t.calculateHeadMoney=d,t.getBodyAmountValue=u,t.clearTopInfos=function(e,t){var a=e.props.cardTable.getValByKeyAndIndex(e.tableId,t,"top_billtype").value;"F0"==a||"F1"==a||"F2"==a||"F3"==a?(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_tradetype",{value:null})):(null==a||"36D1"!=a&&"36D7"!=a&&"FCT2"!=a&&"FCT1"!=a)&&(e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"src_tradetype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_billid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_billtype",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_itemid",{value:null}),e.props.cardTable.setValByKeyAndIndex(e.tableId,t,"top_tradetype",{value:null}))},t.resetBodyPk=c,t.getLinkconferQuery=function(e){var t={};if(-1!=e.indexOf("#")){var a=e.split("#");if(a&&a.length>0){var r=a[1];if(-1!=r.indexOf("&"))for(var o=r.split("&"),l=0;l<o.length;l++)t[o[l].split("=")[0]]=o[l].split("=")[1];else t[r.split("=")[0]]=r.split("=")[1]}}return t},t.delLine=function(e){var t=e.props.cardTable.getCheckedRows(e.tableId);if(0!=t.length){var a=[];t.forEach((function(e){"3"!=e.data.status&&a.push(e.index)})),e.props.cardTable.delRowsByIndex(e.tableId,a),"F0"==e.billType&&s(e,t),d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData()}else(0,r.toast)({color:"warning",content:this.state.json["public-000041"]})},t.copyLine=function(e,t){var a=e.props.cardTable.getCheckedRows(e.tableId);if(0==a.length)return(0,r.toast)({color:"warning",content:this.state.json["public-000042"]}),!1;var o=0,l=[];return a.forEach((function(e){"3"!=e.data.status&&(l.push(a[o].data),o++)})),n("CopyLine",t,l),!0},t.pasteToEndLine=function(e,t){e.props.beforeUpdatePage();var a=e.props.cardTable.getNumberOfRows(e.tableId),r=l("CopyLine",t);e.props.cardTable.insertRowsAfterIndex(e.tableId,r,a-1);for(var o=0;o<r.length;o++)c(e,a+o);d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},t.copyInner=function(e,t,a){var o=[];o.push(e),n("CopyLine",t,o),o.length>=1&&(0,r.toast)({color:"success",content:a.state.json["public-000162"]})},t.deleteInner=function(e,t,a,r){if(e.props.beforeUpdatePage(),t.cardTable.delRowsByIndex(a,r),"F0"==e.billType){var o=[{data:e.props.cardTable.getRowsByIndexs(e.tableId,[r])[0],index:r}];s(e,o)}d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},t.pasteInner=function(e,t,a,r,o){e.props.beforeUpdatePage();var n=l("CopyLine",a);t.cardTable.insertRowsAfterIndex(r,n,o);for(var i=0;i<n.length;i++)c(e,o+1+i);d(e),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),e.props.updatePage(e.formId,e.tableId)},t.delBlankLine=function(e,t,a,o,l){var n=o.body[t].rows;if(n&&0!=n.length||(0,r.toast)({color:"danger",content:e.state.json["public-000163"]}),1!=n.length){for(var i=[],s=0;s<n.length;s++){var d=n[s];if("3"!=d.status){if("F3"==a){var u=d.values.commpaytype?d.values.commpaytype.value:null;if(u&&"0"==u)return}var c=void 0,p=void 0;"F3"==a||"F0"==a?(c=d.values.money_de.value,p=d.values.local_tax_de.value):(c=d.values.money_cr.value,p=d.values.local_tax_cr.value),Number(c)==Number(0)&&Number(p)==Number(0)&&i.push(s)}}i.length>0&&(e.props.cardTable.delRowsByIndex(t,i),l&&-1!=i.indexOf(l)&&e.Info.isModelSave&&(e.Info.isModelSave=!1,e.props.cardTable.closeModel(e.tableId)))}},t.getColvalues=p,t.getCheckedRowColvalues=function(e,t,a){for(var r={},o=e.cardTable.getCheckedRows(t),l=0;l<a.length;l++){for(var n=a[l],i=[],s=0;s<o.length;s++)i.push(o[s].data.values[n]);i&&(r[n]=i)}return r},t.getRowIds=function(e,t){for(var a=e.cardTable.getVisibleRows(t),r=[],o=0;o<a.length;o++)r.push(a[o].rowid);return r},t.refreshChildVO2HeadVO=function(e,t,a){var r=["pk_tradetype","billdate","pk_group","pk_fiorg","pk_pcorg","sett_org_v","sett_org","pk_billtype","pk_tradetype","billclass","rate","grouprate","globalrate","payaccount","recaccount","cashaccount","objtype","payman","pk_rescenter","pk_group","checkelement","pk_deptid","pk_deptid_v","pk_psndoc","customer","supplier","pu_org","pu_org_v","pk_balatype","pk_org_v","pk_fiorg_v","pk_pcorg_v","so_org","so_org_v","cashitem","bankrollprojet","pk_subjcode","so_psndoc","pu_psndoc","so_deptid","pu_deptid","so_deptid_v","pu_deptid_v","busidate","ordercubasdoc","costcenter","payreason","invoiceno","pk_currtype"],o=e.cardTable.getRowsByIndexs(a,0);if(o){for(var l={},n=0;n<r.length;n++){var i=r[n];l[i]=o[0].values[i]}e.form.setFormItemsValue(t,l)}},t.F0DeleteAfterEditCalculate=s,t.generate=function(e){(0,r.ajax)({url:"/nccloud/arap/arappub/generate.do",data:{pk_bill:e.props.getUrlParam("id"),pageId:e.getPagecode(),billType:e.billType},success:function(t){(0,r.toast)({color:"success",title:"操作成功"}),f(e,t)}})},t.batchGenerate=function(e){var t=b(e,e.props,e.tableId,e.billType);0!=t.length?(0,r.ajax)({url:"/nccloud/arap/arappub/listgenerate.do",data:t,success:function(t){var a=t.success,o=t.data;if(a){if(o.grid){var l=o.grid,n=[];for(var i in l)n.push({index:i,data:{values:l[i].values}});e.props.table.updateDataByIndexs(e.tableId,n)}o.message&&((0,r.toast)({duration:"infinity",color:o.PopupWindowStyle,content:o.message}),e.onSelected())}}}):(0,r.toast)({color:"warning",content:"请选中至少一行数据!"})},t.refreshBill=f,t.isExistsTopBill=function(e){for(var t=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId).body[e.tableId].rows,a=0;a<t.length;a++){var r=t[a].values.top_billid.value,o=t[a].values.top_itemid.value;if(r||o)return!0}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginContextKeys=void 0,t.loginContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a={},r=e.paramMap;for(var o in s)a[s[o]]=e[s[o]],i&&i[s[o]]&&(a[s[o]]=i[s[o]]);for(var n in r)a[n]=r[n];l(t,t,a)},t.getContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if(i=(0,r.getBusinessInfo)(),e==s.businessDate&&i)return i[s.businessDate];var a=n(t,t);return a?a[e]:null},t.setContext=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r=n(a,a);r?r[e]=t:r=o({},e,t);l(a,a,r)};var r=a(1);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=r.cardCache.setDefData,n=r.cardCache.getDefData,i=(0,r.getBusinessInfo)(),s=t.loginContextKeys={defaultAccbookName:"defaultAccbookName",defaultAccbookPk:"defaultAccbookPk",mdid:"mdid",org_Name:"org_Name",org_v_Name:"org_v_Name",pk_org:"pk_org",pk_org_v:"pk_org_v",transtype:"transtype",pk_transtype:"pk_transtype",groupId:"groupId",groupName:"groupName",userId:"userId",userName:"userName",userCode:"userCode",businessDate:"businessDate"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCheckTypeEdit=t.moneyAndRateFields=t.reWriteCheckno=t.isChecknoRef=t.checktypeAfterEvent=t.modifyChecknoItemtype=t.checknoDisplayAfterEvent=void 0;var r=a(1);function o(e,t,a,r){if(r){var o=e.cardTable.getValByKeyAndIndex(t,0,"billclass").value,n=e.meta.getMeta();n[n.gridrelation.bodys.destEditAreaCode].items.map((function(e){if("checkno_display"==e.attrcode){var t=l(r,a);t&&"refer"!=e.itemtype?(e.itemtype="refer","fk"==o?e.refcode="fbm/refer/fbm/Bill4CmpPayGridRef/index.js":"sk"==o&&(e.refcode="fbm/refer/fbm/Bill4CmpReceiveGridRef/index.js")):t&&"refer"==e.itemtype||(e.itemtype="input",e.refcode=null)}return e})),e.meta.setMeta(n)}}function l(e,t){var a=!1;return(0,r.ajax)({url:"/nccloud/arap/arappub/ischecknoref.do",data:{checktype:e,pk_org:t},async:!1,success:function(e){a=e.data}}),a}t.checknoDisplayAfterEvent=function(e,t,a,r,o){"checkno_display"==a&&(r&&r.refpk?(e.cardTable.setValByKeyAndIndex(t,o,"checkno",{value:r.refpk,display:r.refname}),e.cardTable.setValByKeyAndIndex(t,o,"checkno_display",{value:r.refname,display:r.refname})):r instanceof Object?e.cardTable.setValByKeyAndIndex(t,o,"checkno",{value:null,display:null}):e.cardTable.setValByKeyAndIndex(t,o,"checkno",{value:r,display:r}))},t.modifyChecknoItemtype=o,t.checktypeAfterEvent=function(e,t,a,r,l){if("checktype"==a){e.cardTable.setValByKeyAndIndex(t,l,"checkno_display",{value:null,display:null}),e.cardTable.setEditableByIndex(t,l,"checkno_display",!0);var n=e.cardTable.getValByKeyAndIndex(t,l,"pk_org").value;o(e,t,n,r.refpk)}},t.isChecknoRef=l,t.reWriteCheckno=function(e,t){for(var a=e.cardTable.getColValue(t,"checkno_display",!1,!1),r=0;r<a.length;r++){var o=a[r];o.display||e.cardTable.setValByKeyAndIndex(t,r,"checkno_display",{value:o.value,display:o.value})}},t.moneyAndRateFields=["money_bal","money_de","money_cr","notax_de","notax_cr","occupationmny","settlemoney","nosubtax","nosubtaxrate","local_money_bal","local_money_de","local_money_cr","local_notax_de","local_notax_cr","local_tax_de","local_tax_cr","caltaxmny","groupbalance","groupdebit","groupcrebit","groupnotax_de","groupnotax_cre","groupagentreceivelocal","grouptax_de","grouptax_cre","globalbalance","globaldebit","globalcrebit","globalnotax_de","globalnotax_cre","globalagentreceivelocal","globaltax_de","globaltax_cre","price","taxprice","postprice","postpricenotax","local_price","local_taxprice","rate","taxcodeid","taxrate","taxtype","grouprate","globalrate","quantity_bal"],t.isCheckTypeEdit=function(e,t,a){var o=!1;return(0,r.ajax)({url:"/nccloud/arap/arappub/ischecknoref.do",data:{pk_org:t,objtype:e,billclass:a},async:!1,success:function(e){o=e.data}}),o}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),n=a(13),i=(r=n)&&r.__esModule?r:{default:r};a(14);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.tag!==e.tag&&this.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},e.tag,null))}},{key:"render",value:function(){var e=this.props,t=this.state,a=null;return t[e.tag]?a=t[e.tag]?t[e.tag](e):React.createElement("div",null):i.default.call(this,e.refcode,e.tag),React.createElement("div",{className:"refer-wrapper"},e.showStar?React.createElement("span",{className:"required-star"},"*"):null,a)}}]),t}(l.Component);t.default=s},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,l=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(l)?e:(o=0===l.indexOf("//")?l:0===l.indexOf("/")?a+l:r+l.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OperationColumn="180px"},function(e,t,a){"use strict";function r(e,t){var a,r,o,l=window[e].default;this.setState((o=l,(r=t)in(a={})?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,a))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,o,l=Array.from(document.getElementsByTagName("script")),n=e.split("/");if(o=(o=n.slice(n.length-5).join("/")).substring(0,o.length-3),a=l.find((function(e){return e.src.includes(o)})),window[o])r.call(this,o,t);else{var i=void 0;a?i=a:((i=document.createElement("script")).src="../../../../"+e,i.type="text/javascript",document.body.appendChild(i)),i.addEventListener("load",r.bind(this,o))}}},function(e,t,a){var r=a(15);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,".refer-wrapper {\n  position: relative;\n}\n.refer-wrapper .required-star {\n  position: absolute;\n  left: 3px;\n  top: 50%;\n  z-index: 1;\n  -webkit-transform: translate3d(0, -50%, 0);\n  transform: translate3d(0, -50%, 0);\n  color: #ef0012;\n  font-size: 13px;\n}\n.loading-container .u-checkbox {\n  width: auto;\n}\n",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyBeforeEvent=void 0;var r=a(1),o=a(9);t.bodyBeforeEvent=function(e,t,a,l,n,i,s){var d=this;if(["money_bal","money_de","money_cr","notax_de","notax_cr","occupationmny","nosubtax","nosubtaxrate","local_money_bal","local_money_de","local_money_cr","local_notax_de","local_notax_cr","local_tax_de","local_tax_cr","groupbalance","groupdebit","groupcrebit","groupnotax_de","groupnotax_cre","groupagentreceivelocal","grouptax_de","grouptax_cre","globalbalance","globaldebit","globalcrebit","globalnotax_de","globalnotax_cre","globalagentreceivelocal","globaltax_de","globaltax_cre","price","taxprice","postprice","postpricenotax","local_price","local_taxprice","taxrate","taxtype","quantity_bal"].indexOf(a)>-1)return!0;"model"==s&&(t="bodys_edit");var u=!0,c=e.meta.getMeta(),p=i.values.pk_tradetype?i.values.pk_tradetype.value:null,f=e.form.getFormItemsValue(this.formId,"pk_billtype")?e.form.getFormItemsValue(this.formId,"pk_billtype").value:null,b={model:{areaType:"table",areacode:null,rows:[i]},pageid:this.pageId},m={model:e.form.getAllFormValue(this.formId),pageid:this.pageId},y={itemKey:"",isHead:!1,crossRuleConditionsVO:JSON.stringify(m),crossRuleTableConditionsVO:JSON.stringify(b),tradeType:p,DataPowerOperationCode:"",isDataPowerEnable:"Y",pk_org:"",busifuncode:"",AppCode:"",orgType:"",refnodename:"",accclass:"",pk_cust:"",pk_currtype:"",pkOrgs:"",parentbilltype:"",datestr:"",pk_accountingbook:"",dateStr:"",GridRefActionExt:"",TreeRefActionExt:"",supplier:"",customer:"",pretype:"",customSupplier:"",pk_psndoc:""};return c[t].items.map((function(n){n.isShowUnit=!1,n.isShowDisabledData=!1;var s=n.attrcode;if("refer"==n.itemtype&&(n.isMultiSelectedEnabled=!1,n.unitValueIsNeeded=!1),s==a)switch(s){case"objtype":if("objtype"==s){for(var c=-1,p=0;p<n.options.length;p++)if(""==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}if("objtype"==s&&"23E1"==f)if("0"==l.value)u=!1,e.cardTable.setEditableByIndex(t,c,"objtype",!1);else{for(c=-1,p=0;p<n.options.length;p++)if("0"==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}else if("objtype"==s&&"23E0"==f)if("1"==l.value)u=!1,e.cardTable.setEditableByIndex(t,c,"objtype",!1);else{for(c=-1,p=0;p<n.options.length;p++)if("1"==n.options[p].value){c=p;break}c>-1&&n.options.splice(c,1)}break;case"pk_org":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_org_v":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_fiorg":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"pk_fiorg_v":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"sett_org":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"sett_org_v":n.queryCondition=function(t){return y.DataPowerOperationCode="fi",y.AppCode=e.getSearchParam("c"),y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",y};break;case"scomment":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y};break;case"material":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.matcustcode=i.values.matcustcode?i.values.matcustcode.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"matcustcode":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.pk_customer=i.values.customer?i.values.customer.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"pk_payterm":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"supplier":case"customer":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"pk_deptid":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"pk_deptid_v":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"pk_psndoc":n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:i.values.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"taxcodeid":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder",y.itemKey=a,y.taxcountryid=e.form.getFormItemsValue(d.formId,"taxcountryid")?e.form.getFormItemsValue(d.formId,"taxcountryid").value:null,y.buysellflag=i.values.buysellflag?i.values.buysellflag.value:null,y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_deptid":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_deptid_v":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pu_psndoc":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.pk_org=i.values.pu_org?i.values.pu_org.value:null,"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"cashitem":case"pk_subjcode":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org?i.values.pk_org.value:null,y};break;case"payaccount":if("F0"==f||"F2"==f||"23E0"==f)"1"==(b=i.values.objtype).value?(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000147"]):"3"==b.value?(n.itemType="refer",n.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",n.refName=d.state.json["public-000148"]):(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000149"]);n.queryCondition=function(t){if("F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"23E1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value)return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.refnodename=d.state.json["public-000150"],y.pk_org=e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y;var o=i.values.objtype.value,l=i.values.supplier?i.values.supplier.value:null,n=i.values.customer?i.values.customer.value:null,s=i.values.pk_psndoc?i.values.pk_psndoc.value:(0,r.getBusinessInfo)().userId,u=null,c=null;return l&&"1"==o?(u=l,c=3):!n||"0"!=o&&"2"!=o?s&&(y.pk_psndoc=s):(u=n,c=1),"3"==o?(y.pk_psndoc=s,y.pk_cust=null,y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.accclass=c,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y.pk_org=e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,y.pk_cust=u,y};break;case"recaccount":var b;if("F1"==f||"F3"==f||"23E1"==f)"1"==(b=i.values.objtype).value||"2"==b.value?(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000147"]):"3"==b.value?(n.itemType="refer",n.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",n.refName=d.state.json["public-000148"]):(n.itemType="refer",n.refcode="uapbd/refer/pub/CustBankAccGridRef/index",n.refName=d.state.json["public-000149"]);n.queryCondition=function(t){if("F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value)return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.refnodename=d.state.json["public-000150"],y.pk_org=e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y;var o=i.values.objtype.value,l=i.values.supplier?i.values.supplier.value:null,n=i.values.customer?i.values.customer.value:null,s=i.values.pk_psndoc?i.values.pk_psndoc.value:(0,r.getBusinessInfo)().userId,u=null,c=null;return!l||"1"!=o&&"2"!=o?n&&"0"==o?(u=n,c=1):s&&(y.pk_psndoc=s):(u=l,c=3),"3"==o?(y.pk_psndoc=s,y.pk_cust=null,y.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.pk_cust=u,y.itemKey=a,y.DataPowerOperationCode="fi",y.accclass=c,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,y};break;case"ordercubasdoc":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"freecust":var m=i.values.supplier?i.values.supplier.value:null,h=i.values.customer?i.values.customer.value:null;null==m&&null==h||(0,r.ajax)({url:"/nccloud/arap/ref/freecustcontrol.do",async:!1,data:{supplier:m,customer:h},success:function(e){e.success&&(u=e.data)}}),u&&(n.queryCondition=function(e){if(u)return y.GridRefActionExt="nccloud.web.arap.ref.before.FreeCustSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.customSupplier=null!=m?m:h,y.supplier=y.customSupplier,y.customer=y.customSupplier,y.crossRuleTableConditionsVO="",y});break;case"checkelement":var v=i.values.pk_pcorg?i.values.pk_pcorg.value:null;v||(u=!1),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=v,y};break;case"project_task":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.ProjectTaskSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.project=i.values.project?i.values.project.value:null,y};break;case"costcenter":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_pcorg?i.values.pk_pcorg.value:null,y};break;case"project":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y};break;case"material_src":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.MaterialGridSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.DataPowerOperationCode="fi",y.pk_org=i.values.pk_org.value,y.matcustcode=i.values.matcustcode?i.values.matcustcode.value:null,y};break;case"checktype":if(e.form.getFormItemsValue(d.formId,"isinit")?e.form.getFormItemsValue(d.formId,"isinit").value:null){u=!1;break}n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"checkno":u=!1;break;case"checkno_display":if(e.form.getFormItemsValue(d.formId,"isinit")?e.form.getFormItemsValue(d.formId,"isinit").value:null){u=!1;break}var g=i.values.checktype.value;if(!g){u=!1;break}var _=e.form.getFormItemsValue(d.formId,"billclass")?e.form.getFormItemsValue(d.formId,"billclass").value:null,k=(0,o.isChecknoRef)(g,i.values.pk_org.value);k&&"refer"!=n.itemtype?(n.itemtype="refer","fk"==_?n.refcode="fbm/refer/fbm/Bill4CmpPayGridRef/index.js":"sk"==_&&(n.refcode="fbm/refer/fbm/Bill4CmpReceiveGridRef/index.js"),(0,o.reWriteCheckno)(e,t),n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,y.fbmbilltype=i.values.checktype.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y}):k&&"refer"==n.itemtype?n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.pk_curr=i.values.pk_currtype.value,y.fbmbilltype=i.values.checktype.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y}:(n.itemtype="input",n.refcode=null);break;case"cbs":(i.values.project?i.values.project.value:null)?(u=!0,n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_project=i.values.project.value,y.pk_org=i.values.pk_org.value,y}):u=!1;break;case"rate":case"grouprate":case"globalrate":(0,r.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",data:{pk_org:i.values.pk_org?i.values.pk_org.value:null,pk_currtype:i.values.pk_currtype?i.values.pk_currtype.value:null,ratekey:a},async:!1,success:function(a){a.success&&(u=a.data,setTimeout((function(){e.cardTable.setEditableByIndex(t,c,"rate",u)}),0))}});break;case"settlemoney":var I=i.values.settlecurr?i.values.settlecurr.value:null,w=i.values.pk_billtype?i.values.pk_billtype.value:null,T=i.values.top_billtype?i.values.top_billtype.value:null;u=!!(I&&w&&T),n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y};break;case"refuse_reason":var C=i.values.commpaytype?i.values.commpaytype.value:null;(0==C||1==C||2==C)&&(u=!1),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y};break;case"caltaxmny":var x=i.values.buysellflag?i.values.buysellflag.value:null;x&&(u=4==x||3==x),n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y};break;case"so_deptid":n.isShowUnit=!1,n.unitCondition=function(){return{pkOrgs:i.values.so_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all","F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_deptid_v":n.isShowUnit=!1,n.unitCondition=function(){return{pkOrgs:i.values.so_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all",y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_psndoc":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.so_org?i.values.so_org.value:null,y.busifuncode="all","F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_balatype":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.pk_billtype=i.values.pk_billtype?i.values.pk_billtype.value:null,y};break;case"pu_org":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=a,y.pkOrgs=i.values.pk_org.value,y};break;case"pu_org_v":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"bankrollprojet":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?(y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.GridRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):(y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"so_deptid":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.pk_org=i.values.so_org?i.values.so_org.value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_deptid_v":n.isShowUnit=!1,n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.busifuncode="all",y.pk_org=i.values.so_org?i.values.so_org.value:null,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_org":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=a,y.pkOrgs=i.values.pk_org.value,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"so_org_v":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",y.itemKey=a,y.pkOrgs=i.values.pk_org.value,y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"sendcountryid":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"rececountryid":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,"F0"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_pcorg":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"pk_pcorg_v":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.VersionStartDate=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value:null,y};break;case"productline":case"pk_currtype":n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y};break;case"cashaccount":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.pk_currtype=i.values.pk_currtype?i.values.pk_currtype.value:null,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"commpayer":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"facard":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(d.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"payman":n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,"F2"==e.form.getFormItemsValue(d.formId,"pk_billtype").value?(y.DataPowerOperationCode="fi",y):y};break;case"pk_tradetypeid":n.refName=d.state.json["public-000151"],n.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.parentbilltype=e.form.getFormItemsValue(d.formId,"pk_billtype").value,y};break;case"so_ordertype":n.refName=d.state.json["public-000151"],n.queryCondition=function(e){return e?"grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.DataPowerOperationCode="fi",y.parentbilltype="30,32,38,4310,4331",y};break;case"subjcode":n.queryCondition=function(t){var o=null;return(0,r.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:i.values.pk_org.value},async:!1,success:function(e){e.success&&(o=e.data)}}),y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y.pk_accountingbook=o,y.dateStr=e.form.getFormItemsValue(d.formId,"billdate")?e.form.getFormItemsValue(d.formId,"billdate").value.substring(0,10):null,y.DataPowerOperationCode="fi",y};break;default:n.isShowUnit=!0,n.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(d.formId,"pk_org")?e.form.getFormItemsValue(d.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},n.queryCondition=function(e){return e&&("grid"==e.refType||"gridTree"==e.refType?y.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==e.refType&&(y.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),y.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",y.itemKey=a,y.pk_org=i.values.pk_org.value,y}}})),e.meta.setMeta(c),e.renderItem("table",t,"checkno",null),u}},function(e,t){e.exports=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifierSearchMetas=void 0;var r=a(1);function o(e){var t="";if(null!=e){var a=e.split(",");null!=a&&a.length>0&&(t=a[0])}return t}t.modifierSearchMetas=function(e,t,a,l,n,i){return a[e].items=a[e].items.map((function(a,s){var d=a.attrcode;switch(a.isShowUnit=!1,a.isShowDisabledData=!0,a.unitValueIsNeeded=!1,d){case"pk_org":case"bodys.pk_org":a.queryCondition=function(){return a.isShowUnit=!1,{DataPowerOperationCode:"fi",AppCode:t.getSearchParam("c"),TreeRefActionExt:"nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder"}};break;case"pk_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"pk_deptid_v":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),VersionStartDate:(0,r.getBusinessInfo)().businessDate}};break;case"bodys.pk_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"bodys.pk_deptid_v":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:a}};break;case"supplier":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.isShowDisabledData=!1,a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"customer":case"bodys.supplier":case"bodys.customer":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"pk_tradetypeid":n&&(a.disabled=!0),a.isShowDisabledData=!1,a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",parentbilltype:l}};break;case"bodys.pk_tradetypeid":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",parentbilltype:l}};break;case"pk_fiorg_v":case"bodys.pk_fiorg_v":a.queryCondition=function(){return a.isShowUnit=!1,"F3"==l?{VersionStartDate:(0,r.getBusinessInfo)().businessDate,DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}:{VersionStartDate:(0,r.getBusinessInfo)().businessDate,isDataPowerEnable:"Y"}};break;case"pk_fiorg":case"bodys.pk_fiorg":a.queryCondition=function(){return a.isShowUnit=!1,"F3"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}:{isDataPowerEnable:"Y"}};break;case"pk_pcorg":a.queryCondition=function(){return"F0"==l||"F2"==l?{DataPowerOperationCode:"fi"}:{isDataPowerEnable:"Y"}};break;case"bodys.pk_pcorg":a.queryCondition=function(){if("F0"==l||"F2"==l)return{DataPowerOperationCode:"fi"}};break;case"pk_pcorg_v":case"bodys.pk_pcorg_v":a.queryCondition=function(){if("F0"==l||"F2"==l)return{VersionStartDate:(0,r.getBusinessInfo)().businessDate,DataPowerOperationCode:"fi"}};break;case"sett_org":a.queryCondition=function(){return a.isShowUnit=!1,{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"sett_org_v":a.queryCondition=function(){return a.isShowUnit=!1,{VersionStartDate:(0,r.getBusinessInfo)().businessDate,DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"officialprintuser":case"creator":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"subjcode":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),l=null;return(0,r.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:a},async:!1,success:function(e){e.success&&(l=e.data)}}),{isDataPowerEnable:"Y",pk_accountingbook:l,DataPowerOperationCode:"fi",datestr:(0,r.getBusinessInfo)().businessDate}};break;case"bodys.subjcode":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),l=null;return(0,r.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:a},async:!1,success:function(e){e.success&&(l=e.data)}}),{isDataPowerEnable:"Y",pk_accountingbook:l,DataPowerOperationCode:"fi",datestr:(0,r.getBusinessInfo)().businessDate}};break;case"payaccount":"F3"!=l&&"F1"!=l||(a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}}),a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F3"==l||"F1"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",refnodename:i.state.json["public-000150"],pk_org:a,pk_billtype:l,pk_currtype:t.search.getSearchValByField(e,"pk_currtype")?t.search.getSearchValByField(e,"pk_currtype").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"};var r=t.search.getSearchValByField(e,"supplier")?t.search.getSearchValByField(e,"supplier").value.firstvalue:null,n=t.search.getSearchValByField(e,"customer")?t.search.getSearchValByField(e,"customer").value.firstvalue:null,s=null,d=null;return r?(s=r,d=3):n&&(s=n,d=1),{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",accclass:d,pk_cust:s,pk_currtype:t.search.getSearchValByField(e,"pk_currtype")?t.search.getSearchValByField(e,"pk_currtype").value.firstvalue:null}};break;case"bodys.payaccount":"F3"!=l&&"F1"!=l||(a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}}),a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F3"==l||"F1"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",refnodename:i.state.json["public-000150"],pk_org:a,pk_billtype:l,pk_currtype:t.search.getSearchValByField(e,"bodys.pk_currtype")?t.search.getSearchValByField(e,"bodys.pk_currtype").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"};var n=o((t.search.getSearchValByField(e,"bodys.supplier")||{}).value.firstvalue),s=o((t.search.getSearchValByField(e,"bodys.customer")||{}).value.firstvalue),d=o((t.search.getSearchValByField(e,"bodys.pk_psndoc")||{}).value.firstvalue);d||""==d||(d=(0,r.getBusinessInfo)().userId);var u=null,c=null;return n?(u=n,c=3):s&&(u=s,c=1),"3"==(t.search.getSearchValByField(e,"bodys.objtype")?t.search.getSearchValByField(e,"bodys.objtype").value.firstvalue:null)?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",accclass:c,pk_cust:u,pk_currtype:o((t.search.getSearchValByField(e,"bodys.pk_currtype")||{}).value.firstvalue),pk_psndoc:d,GridRefActionExt:"nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"}:{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",accclass:c,pk_cust:u,pk_currtype:o((t.search.getSearchValByField(e,"bodys.pk_currtype")||{}).value.firstvalue)}};break;case"recaccount":"F0"!=l&&"F2"!=l||(a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}}),a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F0"==l||"F2"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",refnodename:i.state.json["public-000150"],pk_org:a,pk_billtype:l,pk_currtype:t.search.getSearchValByField(e,"pk_currtype")?t.search.getSearchValByField(e,"pk_currtype").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"};var r=t.search.getSearchValByField(e,"supplier")?t.search.getSearchValByField(e,"supplier").value.firstvalue:null,n=t.search.getSearchValByField(e,"customer")?t.search.getSearchValByField(e,"customer").value.firstvalue:null,s=null,d=null;return r?(s=r,d=3):n&&(s=n,d=1),{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",accclass:d,pk_cust:s,pk_currtype:t.search.getSearchValByField(e,"pk_currtype")?t.search.getSearchValByField(e,"pk_currtype").value.firstvalue:null}};break;case"bodys.recaccount":"F0"!=l&&"F2"!=l||(a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}}),a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F0"==l||"F2"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",refnodename:i.state.json["public-000150"],pk_org:a,pk_billtype:l,pk_currtype:t.search.getSearchValByField(e,"bodys.pk_currtype")?t.search.getSearchValByField(e,"bodys.pk_currtype").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"};var n=o((t.search.getSearchValByField(e,"bodys.supplier")||{}).value.firstvalue),s=o((t.search.getSearchValByField(e,"bodys.customer")||{}).value.firstvalue),d=o((t.search.getSearchValByField(e,"bodys.pk_psndoc")||{}).value.firstvalue);d||""==d||(d=(0,r.getBusinessInfo)().userId);var u=null,c=null;return n?(u=n,c=3):s&&(u=s,c=1),"3"==(t.search.getSearchValByField(e,"bodys.objtype")?t.search.getSearchValByField(e,"bodys.objtype").value.firstvalue:null)?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",accclass:c,pk_cust:u,pk_currtype:o((t.search.getSearchValByField(e,"bodys.pk_currtype")||{}).value.firstvalue),pk_psndoc:d,GridRefActionExt:"nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"}:{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",accclass:c,pk_cust:u,pk_currtype:o((t.search.getSearchValByField(e,"bodys.pk_currtype")||{}).value.firstvalue)}};break;case"sendcountryid":a.queryCondition=function(){if("F0"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"taxcountryid":a.queryCondition=function(){if("F0"==l||"F1"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"ordercubasdoc":case"bodys.ordercubasdoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){if("F0"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"pk_balatype":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_billtype:l,GridRefActionExt:"nccloud.web.arap.ref.before.BalatypeSqlBuilder"}};break;case"costcenter":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){t.search.getSearchValByField(e,"pk_pcorg")&&t.search.getSearchValByField(e,"pk_pcorg").value.firstvalue;return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:t.search.getSearchValByField(e,"pk_pcorg")?t.search.getSearchValByField(e,"pk_pcorg").value.firstvalue:null,orgType:"pk_profitcenter",TreeRefActionExt:"nccloud.web.arap.ref.before.CostCenterSqlBuilder"}};break;case"pk_psndoc":a.isShowUnit=!0,a.isShowDimission=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"bodys.pk_psndoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"pk_subjcode":case"bodys.pk_subjcode":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"pk_currtype":a.isShowDisabledData=!1,a.queryCondition=function(){return{DataPowerOperationCode:"fi"}};break;case"bodys.pk_currtype":a.queryCondition=function(){return{DataPowerOperationCode:"fi"}};break;case"bankrollprojet":case"bodys.bankrollprojet":case"cashitem":case"bodys.cashitem":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"pu_org":a.queryCondition=function(){return{isDataPowerEnable:"Y",pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}};break;case"pu_org_v":a.isShowUnit=!1,a.queryCondition=function(){return{isDataPowerEnable:"Y",pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),VersionStartDate:(0,r.getBusinessInfo)().businessDate,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}};break;case"so_org":a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);return"F0"==l||"F2"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pkOrgs:a,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}:{isDataPowerEnable:"Y",pkOrgs:a,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"so_org_v":a.isShowUnit=!1,a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);return"F0"==l||"F2"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pkOrgs:a,VersionStartDate:(0,r.getBusinessInfo)().businessDate,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}:{isDataPowerEnable:"Y",pkOrgs:a,VersionStartDate:(0,r.getBusinessInfo)().businessDate,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"pu_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pu_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pu_org")||{}).value.firstvalue);return"F3"==l||"F1"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:a}:{isDataPowerEnable:"Y",pk_org:a}};break;case"bodys.pu_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"bodys.pu_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"bodys.pu_org")||{}).value.firstvalue);return"F3"==l||"F1"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:a}:{isDataPowerEnable:"Y",pk_org:a}};break;case"pu_deptid_v":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pu_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pu_org")||{}).value.firstvalue);return"F3"==l||"F1"==l?{isDataPowerEnable:"Y",DataPowerOperationCode:"fi",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:a}:{isDataPowerEnable:"Y",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:a}};break;case"bodys.pu_deptid_v":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"bodys.pu_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"bodys.pu_org")||{}).value.firstvalue);return"F3"==l||"F1"==l?{isDataPowerEnable:"Y",DataPowerOperationCode:"fi",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:a}:{isDataPowerEnable:"Y",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:a}};break;case"pu_psndoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pu_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pu_org")||{}).value.firstvalue);return"F3"==l?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:a}:{busifuncode:"all",isDataPowerEnable:"Y",pk_org:a}};break;case"bodys.pu_psndoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"bodys.pu_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"bodys.pu_org")||{}).value.firstvalue);return"F3"==l?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:a}:{busifuncode:"all",isDataPowerEnable:"Y",pk_org:a}};break;case"so_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"so_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){a.isShowUnit=!0;var r=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);return"F0"==l||"F2"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}:{isDataPowerEnable:"Y",pk_org:r}};break;case"bodys.so_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"bodys.so_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){a.isShowUnit=!0;var r=o((t.search.getSearchValByField(e,"bodys.so_org")||{}).value.firstvalue);return"F0"==l||"F2"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}:{isDataPowerEnable:"Y",pk_org:r}};break;case"so_deptid_v":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"so_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){a.isShowUnit=!0;var n=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);return"F0"==l||"F2"==l?{isDataPowerEnable:"Y",DataPowerOperationCode:"fi",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:n}:{isDataPowerEnable:"Y",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:n}};break;case"bodys.so_deptid_v":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"bodys.so_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){a.isShowUnit=!0;var n=o((t.search.getSearchValByField(e,"bodys.so_org")||{}).value.firstvalue);return"F0"==l||"F2"==l?{isDataPowerEnable:"Y",DataPowerOperationCode:"fi",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:n}:{isDataPowerEnable:"Y",VersionStartDate:(0,r.getBusinessInfo)().businessDate,pk_org:n}};break;case"bodys.so_org":a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F0"==l||"F2"==l)return{pkOrgs:a,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"bodys.so_org_v":a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F0"==l||"F2"==l)return{pkOrgs:a,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"bodys.pu_org":a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F1"==l||"F3"==l)return{pkOrgs:a,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"bodys.pu_org_v":a.queryCondition=function(){var a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);if("F1"==l||"F3"==l)return{pkOrgs:a,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"bodys.so_psndoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"bodys.so_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var r=o((t.search.getSearchValByField(e,"bodys.so_org")||{}).value.firstvalue);return a.isShowUnit=!0,"F0"==l||"F2"==l?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}:{busifuncode:"all",isDataPowerEnable:"Y",pk_org:r}};break;case"so_psndoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){var r=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue);return a.isShowUnit=!0,"F0"==l||"F2"==l?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}:{busifuncode:"all",isDataPowerEnable:"Y",pk_org:r}};break;case"checkelement":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){var a=t.search.getSearchValByField(e,"pk_pcorg")?t.search.getSearchValByField(e,"pk_pcorg").value.firstvalue:null;if(a)return t.search.setDisabledByField(e,"checkelement",!1),{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:a};t.search.setDisabledByField(e,"checkelement",!0)};break;case"bodys.checkelement":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){var a=t.search.getSearchValByField(e,"bodys.pk_pcorg")?t.search.getSearchValByField(e,"bodys.pk_pcorg").value.firstvalue:null;if(a)return t.search.setDisabledByField(e,"bodys.checkelement",!1),{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:a};t.search.setDisabledByField(e,"bodys.checkelement",!0)};break;case"bodys.so_ordertype":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",parentbilltype:"30,32,38,4310,4331"}};break;case"bodys.so_transtype":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"bodys.material":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),matcustcode:t.search.getSearchValByField(e,"bodys.matcustcode")?t.search.getSearchValByField(e,"bodys.matcustcode").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.MaterialGridSqlBuilder"}};break;case"bodys.productline":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"bodys.pk_payterm":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"bodys.freecust":var u=!0;a.queryCondition=function(){var a=t.search.getSearchValByField(e,"bodys.supplier")?t.search.getSearchValByField(e,"bodys.supplier").value.firstvalue:null,o=t.search.getSearchValByField(e,"bodys.customer")?t.search.getSearchValByField(e,"bodys.customer").value.firstvalue:null;if((0,r.ajax)({url:"/nccloud/arap/ref/freecustcontrol.do",data:{supplier:a,customer:o},success:function(e){e.success&&(u=e.data)}}),u)return{isDataPowerEnable:"Y",supplier:a,customer:o,GridRefActionExt:"nccloud.web.arap.ref.before.FreeCustSqlBuilder"}};break;case"bodys.taxcodeid":a.queryCondition=function(){return"F1"==l?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",taxcountryid:t.search.getSearchValByField(e,"taxcountryid")?t.search.getSearchValByField(e,"taxcountryid").value.firstvalue:null,buysellflag:t.search.getSearchValByField(e,"bodys.buysellflag")?t.search.getSearchValByField(e,"bodys.buysellflag").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder"}:{isDataPowerEnable:"Y",taxcountryid:t.search.getSearchValByField(e,"taxcountryid")?t.search.getSearchValByField(e,"taxcountryid").value.firstvalue:null,buysellflag:t.search.getSearchValByField(e,"bodys.buysellflag")?t.search.getSearchValByField(e,"bodys.buysellflag").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.TaxcodeIdSqlBuilder"}};break;case"bodys.project":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)}};break;case"bodys.project_task":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:(t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSearchAreaSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),project:t.search.getSearchValByField(e,"bodys.project")?t.search.getSearchValByField(e,"bodys.project").value.firstvalue:null,TreeRefActionExt:"nccloud.web.arap.ref.before.ProjectTaskSqlBuilder"}};break;case"bodys.rececountryid":a.queryCondition=function(){if("F0"==l)return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"bodys.checkno":a.queryCondition=function(){return{sence:"search",pk_org:o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue),fbmbilltype:t.search.getSearchValByField(e,"bodys.checktype").value.firstvalue,pk_curr:t.search.getSearchValByField(e,"bodys.pk_currtype").value.firstvalue,DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;default:a.queryCondition=function(){var a=null;return d.indexOf("def")&&(a=o((t.search.getSearchValByField(e,"pk_org")||{}).value.firstvalue)),{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:a}}}return a})),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultBusinessDate=t.getPreMonth=t.getHMS=t.businessDate=t.businessDateH=void 0;var r=a(1);t.businessDateH=function(){var e=void 0;return"function"==typeof r.getBusinessInfo&&(e=(0,r.getBusinessInfo)()&&(0,r.getBusinessInfo)().businessDate),e},t.businessDate=function(){var e=void 0;return"function"==typeof r.getBusinessInfo&&(e=((0,r.getBusinessInfo)()&&(0,r.getBusinessInfo)().businessDate).substring(0,10)),e},t.getHMS=function(){var e=new Date,t=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return t>=0&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),r>=0&&r<=9&&(r="0"+r)," "+t+":"+a+":"+r},t.getPreMonth=function(e){var t=e.split("-"),a=t[0],r=t[1],o=t[2],l=new Date(a,r,0);l=l.getDate();var n=a,i=parseInt(r)-1;0==i&&(n=parseInt(n)-1,i=12);var s=o,d=new Date(n,i,0);return s>(d=d.getDate())&&(s=d),i<10&&(i="0"+i),n+"-"+i+"-"+s},t.getDefaultBusinessDate=function(){var e=void 0;return new Promise((function(t,a){"function"==typeof r.getBusinessInfo&&(e=(0,r.getBusinessInfo)())&&t(e)}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formBeforeEvent=void 0;var r=a(1);t.formBeforeEvent=function(e,t,a,o){var l=this,n=!0,i=e.meta.getMeta(),s=e.form.getFormItemsValue(this.formId,"pk_tradetype")?e.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,d={model:e.form.getAllFormValue(this.formId),pageid:this.pageId},u={model:{areaType:"table",areacode:null,rows:[e.cardTable.getVisibleRows(this.tableId)[0]]},pageid:this.pageId},c=JSON.stringify(d),p=JSON.stringify(u),f={itemKey:a,isHead:!0,crossRuleConditionsVO:c,crossRuleTableConditionsVO:p,tradeType:s,DataPowerOperationCode:"",isDataPowerEnable:"Y",pk_org:"",busifuncode:"",AppCode:"",orgType:"",refnodename:"",accclass:"",pk_cust:"",pk_currtype:"",pkOrgs:"",parentbilltype:"",dateStr:"",pk_accountingbook:"",GridRefActionExt:"",TreeRefActionExt:"",isadj:"",pk_psndoc:""},b=e.form.getFormItemsValue(this.formId,"pk_billtype")?e.form.getFormItemsValue(this.formId,"pk_billtype").value:null;return i[t].items.map((function(i){i.isShowUnit=!1,i.isShowDisabledData=!1;var d=i.attrcode;if("objtype"==d){for(var u=-1,c=0;c<i.options.length;c++)if(""==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}if("objtype"==d&&"23E1"==b){if("0"==o.value)return n=!1,e.form.setFormItemsDisabled(t,{objtype:!0}),n;for(u=-1,c=0;c<i.options.length;c++)if("0"==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}else if("objtype"==d&&"23E0"==b){if("1"==o.value)return n=!1,e.form.setFormItemsDisabled(t,{objtype:!0}),n;for(u=-1,c=0;c<i.options.length;c++)if("1"==i.options[c].value){u=c;break}u>-1&&i.options.splice(u,1)}if("refer"==i.itemtype&&(i.isMultiSelectedEnabled=!1,i.unitValueIsNeeded=!1),d==a)switch(d){case"pk_org":i.queryCondition=function(t){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"pk_org_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!1,f.data="",f.crossRuleConditionsVO="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"supplier":i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"customer":i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.tradeType=s,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_deptid":i.isShowUnit=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.busifuncode="all",f};break;case"pk_deptid_v":i.isShowUnit=!0,i.unitCondition=function(){return{isDataPowerEnable:"N",pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return f.busifuncode="all",f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.VersionStartDate=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value:null,t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleDepSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"pk_psndoc":i.isShowUnit=!0,i.isShowDimission=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.busifuncode="all",f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_fiorg":i.queryCondition=function(t){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"pk_fiorg_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!1,f.AppCode=e.getSearchParam("c"),f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f.data="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"sett_org":i.queryCondition=function(t){return i.isShowUnit=!1,f.DataPowerOperationCode="fi",f.AppCode=e.getSearchParam("c"),f.data="",f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f};break;case"sett_org_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!1,f.AppCode=e.getSearchParam("c"),f.TreeRefActionExt="nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder",f.data="","F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||(f.DataPowerOperationCode="fi"),f};break;case"pu_deptid":i.isShowUnit=!1,i.queryCondition=function(t){return t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_deptid_v":i.isShowUnit=!1,i.queryCondition=function(t){return f.busifuncode="all",t?"grid"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType?f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"gridTree"==t.refType&&(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_org_v":i.queryCondition=function(t){return i.isShowUnit=!1,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=a,f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder","F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pu_psndoc":i.isShowUnit=!1,i.queryCondition=function(t){return f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"pu_org")?e.form.getFormItemsValue(l.formId,"pu_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"checkelement":if(!(e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null)){n=!1;break}i.queryCondition=function(t){var r=e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null;if(t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,r)return e.form.setFormItemsDisabled(l.formId,{checkelement:!1}),f.DataPowerOperationCode="fi",f.pk_org=r,f;e.form.setFormItemsDisabled(l.formId,{checkelement:!0})};break;case"cashitem":i.queryCondition=function(t){return f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f};break;case"pk_subjcode":i.queryCondition=function(t){return f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"costcenter":i.queryCondition=function(t){return f.DataPowerOperationCode="fi",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_pcorg")?e.form.getFormItemsValue(l.formId,"pk_pcorg").value:null,f.orgType="pk_profitcenter",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CostCenterSqlBuilder",f.itemKey=a,f};break;case"payaccount":var p=e.form.getFormItemsValue(l.formId,"objtype").value;"F0"!=b&&"F2"!=b&&"23E0"!=b||("1"==p?(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000147"]):"3"==p?(i.itemType="refer",i.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",i.refName=l.state.json["public-000148"]):(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000149"])),i.queryCondition=function(t){if("F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"23E1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value)return f.DataPowerOperationCode="fi",f.refnodename=l.state.json["public-000150"],f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",f.itemKey=a,f;var o=e.form.getFormItemsValue(l.formId,"objtype").value,n=e.form.getFormItemsValue(l.formId,"supplier")?e.form.getFormItemsValue(l.formId,"supplier").value:null,i=e.form.getFormItemsValue(l.formId,"customer")?e.form.getFormItemsValue(l.formId,"customer").value:null,s=e.form.getFormItemsValue(l.formId,"pk_psndoc")?e.form.getFormItemsValue(l.formId,"pk_psndoc").value:(0,r.getBusinessInfo)().userId,d=null,u=null;return n&&"1"==o?(d=n,u=3):i&&"0"==o?(d=i,u=1):s&&(f.pk_psndoc=s),f.DataPowerOperationCode="fi",f.accclass=u,f.pk_cust=d,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,"3"==o?(f.pk_psndoc=s,f.pk_cust=null,f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"recaccount":if("F1"==b||"F3"==b||"23E1"==b){var m=e.form.getFormItemsValue(l.formId,"objtype").value;"1"==m||"2"==m?(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000147"]):"3"==m?(i.itemType="refer",i.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",i.refName=l.state.json["public-000148"]):(i.itemType="refer",i.refcode="uapbd/refer/pub/CustBankAccGridRef/index",i.refName=l.state.json["public-000149"])}i.queryCondition=function(t){if("F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value)return f.DataPowerOperationCode="fi",f.refnodename=l.state.json["public-000150"],f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccSubUseSqlBuilder",f.itemKey=a,f;var o=e.form.getFormItemsValue(l.formId,"objtype").value,n=e.form.getFormItemsValue(l.formId,"supplier")?e.form.getFormItemsValue(l.formId,"supplier").value:null,i=e.form.getFormItemsValue(l.formId,"customer")?e.form.getFormItemsValue(l.formId,"customer").value:null,s=e.form.getFormItemsValue(l.formId,"pk_psndoc")?e.form.getFormItemsValue(l.formId,"pk_psndoc").value:(0,r.getBusinessInfo)().userId,d=null,u=null;return n&&"1"==o?(d=n,u=3):i&&"0"==o?(d=i,u=1):s&&(f.pk_psndoc=s),f.DataPowerOperationCode="fi",f.accclass=u,f.pk_cust=d,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"3"==o?(f.pk_psndoc=s,f.pk_cust=null,f.GridRefActionExt="nccloud.web.arap.ref.before.BankaccPersonSqlBuilder"):t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"cashaccount":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CashBankSqlBuilder",f.itemKey=a,f.pk_currtype=e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rate":case"grouprate":case"globalrate":(0,r.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",async:!1,data:{pk_org:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,pk_currtype:e.form.getFormItemsValue(l.formId,"pk_currtype")?e.form.getFormItemsValue(l.formId,"pk_currtype").value:null,ratekey:a},success:function(t){t.success&&(n=t.data,setTimeout((function(){e.form.setFormItemsDisabled(l.formId,{key:!t.data})}),0))}});break;case"pk_balatype":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.pk_billtype=e.form.getFormItemsValue(l.formId,"pk_billtype")?e.form.getFormItemsValue(l.formId,"pk_billtype").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.BalatypeSqlBuilder",f.itemKey=a,f};break;case"bankrollprojet":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?(f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.GridRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"):(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.TreeRefActionExt="nccloud.web.arap.ref.before.BankRollProjetGridSqlBuilder"),f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"pu_org":i.queryCondition=function(t){return f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=a,"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_currtype":case"pk_busitype":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f};break;case"pk_pcorg":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_pcorg_v":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.VersionStartDate=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_org":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=a,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_org_v":i.queryCondition=function(t){return i.isShowUnit=!1,f.pkOrgs=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.OrgSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_deptid":case"so_deptid_v":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!0,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"so_org")?e.form.getFormItemsValue(l.formId,"so_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"so_psndoc":i.isShowUnit=!1,i.queryCondition=function(t){return i.isShowUnit=!0,f.busifuncode="all",f.pk_org=e.form.getFormItemsValue(l.formId,"so_org")?e.form.getFormItemsValue(l.formId,"so_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rececountryid":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"sendcountryid":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"rececountryid":case"taxcountryid":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F1"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"approver":case"billmaker":case"confirmuser":case"creator":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"consignagreement":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"effectuser":case"lastadjustuser":case"lastapproveid":case"modifier":case"officialprintuser":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"ordercubasdoc":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"outbusitype":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"payman":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F3"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_deptid_res":case"pk_rescenter":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"sddreversaler":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"signuser":i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,"F0"==e.form.getFormItemsValue(l.formId,"pk_billtype").value||"F2"==e.form.getFormItemsValue(l.formId,"pk_billtype").value?(f.DataPowerOperationCode="fi",f):f};break;case"pk_tradetypeid":i.refName=l.state.json["public-000151"],i.queryCondition=function(t){return f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.parentbilltype=e.form.getFormItemsValue(l.formId,"pk_billtype").value,t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"subjcode":i.fieldDisplayed="dispname",i.queryCondition=function(t){var o=null;return(0,r.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null},async:!1,success:function(e){e.success&&(o=e.data)}}),f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.DataPowerOperationCode="fi",f.pk_accountingbook=o,f.dateStr=e.form.getFormItemsValue(l.formId,"billdate")?e.form.getFormItemsValue(l.formId,"billdate").value.substring(0,10):null,f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f};break;case"objtype":break;case"start_period":i.queryCondition=function(t){return t?"grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder"):f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.isadj="N",f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f.itemKey=a,f};break;default:i.isShowUnit=!0,i.unitCondition=function(){return{pkOrgs:e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},i.queryCondition=function(t){return t&&("grid"==t.refType||"gridTree"==t.refType?f.GridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder":"tree"==t.refType&&(f.TreeRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder")),f.UsualGridRefActionExt="nccloud.web.arap.ref.before.CrossRuleSqlBuilder",f.itemKey=a,f.pk_org=e.form.getFormItemsValue(l.formId,"pk_org")?e.form.getFormItemsValue(l.formId,"pk_org").value:null,f}}})),e.meta.setMeta(i),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(!(e&&t&&a&&a.template&&a.context))return;var r=a.template,o=a.context,l=o.pk_org,n=o.org_Name,i=null,s=null;null!=a.context.paramMap&&null!=a.context.paramMap.transtype&&null!=a.context.paramMap.transtype_name&&(i=a.context.paramMap.pk_transtype,s=a.context.paramMap.transtype_name);var d=null;if(null!=a.template.query)var u=a.template.query.queryschemes;if(null!=u&&u.length>0)for(var c=0;c<u.length;c++){var p=u[c];if(1==p.isquickqs){var f=p.renderobj4web;if(null!=f&&f.length>0)for(c=0;c<f.length;c++){if("billdate"==f[c].attrcode){d=f[c].initialvalue;break}if("root"==f[c].attrcode){var b=f[c].children;if(null!=b&&b.length>0)for(var m=0;m<b.length;m++)if("billdate"==b[m].attrcode){d=b[m].initialvalue;break}}}}}r[t].items.map((function(e){"pk_org"==e.attrcode?e.initialvalue={display:n,value:l}:"billdate"==e.attrcode?e.initialvalue=d:"pk_tradetypeid"==e.attrcode&&s&&(e.initialvalue={display:s,value:i})}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=this,o=["pk_deptid","bodys.pk_deptid","pk_deptid_v","bodys.pk_deptid_v","supplier","customer","bodys.supplier","bodys.customer","subjcode","bodys.subjcode","payaccount","bodys.payaccount","recaccount","bodys.recaccount","ordercubasdoc","bodys.ordercubasdoc","pk_psndoc","bodys.pk_psndoc","pk_subjcode","bodys.pk_subjcode","bankrollprojet","bodys.bankrollprojet","cashitem","bodys.cashitem","checkelement","bodys.checkelement","bodys.material","bodys.pk_payterm","bodys.project","bodys.project_task"];if("pk_org"==e)for(var l=0;l<o.length;l++)this.props.search.setSearchValByField(a,o[l],{value:"",display:""});if("bodys.objtype"==e){var n=this.props.meta.getMeta();"F1"==this.billType||"F3"==this.billType||"23E1"==this.billType?(n[a].items.map((function(e){if("bodys.recaccount"==e.attrcode&&null!=r.props.search.getSearchValByField(a,"bodys.objtype")&&null!=r.props.search.getSearchValByField(a,"bodys.objtype")&&null!=r.props.search.getSearchValByField(a,"bodys.objtype").value&&null!=r.props.search.getSearchValByField(a,"bodys.objtype").value.firstvalue){var t=r.props.search.getSearchValByField(a,"bodys.objtype").value.firstvalue;"1"==t||"2"==t||""==t?(e.itemType="refer",e.refcode="uapbd/refer/pub/CustBankAccGridRef/index",e.refName=r.state.json["public-000147"]):"3"==t?(e.itemType="refer",e.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",e.refName=r.state.json["public-000148"]):(e.itemType="refer",e.refcode="uapbd/refer/pub/CustBankAccGridRef/index",e.refName=r.state.json["public-000149"])}return e})),this.props.renderItem("search",a,"bodys.recaccount",null)):"F0"!=this.billType&&"F2"!=this.billType&&"23E0"!=this.billType||(n[a].items.map((function(e){if("bodys.payaccount"==e.attrcode&&null!=r.props.search.getSearchValByField(a,"bodys.objtype")&&null!=r.props.search.getSearchValByField(a,"bodys.objtype")&&null!=r.props.search.getSearchValByField(a,"bodys.objtype").value&&null!=r.props.search.getSearchValByField(a,"bodys.objtype").value.firstvalue){var t=r.props.search.getSearchValByField(a,"bodys.objtype").value.firstvalue;"1"==t?(e.itemType="refer",e.refcode="uapbd/refer/pub/CustBankAccGridRef/index",e.refName=r.state.json["public-000147"]):"3"==t?(e.itemType="refer",e.refcode="uapbd/refer/pubinfo/PsnbankaccGridRef/index",e.refName=r.state.json["public-000148"]):(e.itemType="refer",e.refcode="uapbd/refer/pub/CustBankAccGridRef/index",e.refName=r.state.json["public-000149"])}return e})),this.props.renderItem("search",a,"bodys.payaccount",null))}}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n){t&&(0,r.ajax)({url:"/nccloud/arap/arappub/arapBillLinkReport.do",data:{pk_bill:t,billType:a,objType:n},async:!1,success:function(t){if(t.success){var a=function(e){var t={logic:"and",conditions:[{field:"not_search",oprtype:"=",value:{firstvalue:"",secondvalue:""}}],oprtype:"=",display:null},a={logic:"and",conditions:[]};for(var r in e){var o=e[r];switch(r){case"pk_orgs":t.conditions.push({field:r,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o[0],secondvalue:null}});break;case"repInitContext":l=o.m_headVo.node_code;break;case"showFrontN":case"userObject":case"pk_group":case"syscode":case"alarmDay":break;case"qryObjs":var n=o[0],i=n.values.join(","),s=[n.billFieldName,i.replace(/,/g,"@"),!1,!1];a.conditions.push({field:"queryObjsVal",oprtype:"=",value:{firstvalue:s.join(","),secondvalue:null}});break;case"beginDate":case"endDate":t.conditions.push({field:r,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}});break;case"pk_billtypes":var d=[o.join(",").replace(/,/g,"@")];t.conditions.push({field:r,datatype:"204",isIncludeSub:!1,oprtype:"=",value:{firstvalue:d[0],secondvalue:null}});break;case"nooccur_noshow":case"nobal_nooccur_noshow":t.conditions.push({field:r,datatype:"32",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}});break;default:t.conditions.push({field:r,datatype:"203",isIncludeSub:!1,oprtype:"=",value:{firstvalue:o,secondvalue:null}})}}return{queryInfo:t,custconditions:a}}(t.data);o("sessionStorage","LinkReport",JSON.stringify(a.queryInfo),(function(){})),o("sessionStorage","sessionCustcondition",JSON.stringify(a.custconditions),(function(){})),e.openTo("/nccloud/resources/arap/accountquery/report/balanceData/index.html",{appcode:l,pagecode:l+"page"})}}})};var r=a(1),o=r.viewModel.setGlobalStorage,l=void 0},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),n=(r=l)&&r.__esModule?r:{default:r},i=a(1);a(34);var s=i.base.NCModal,d=i.base.NCButton,u=i.base.NCTable,c=i.base.NCDiv,p=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},""),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jine"},""),children:[{title:n.default.createElement("div",{fieldid:"money"},""),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},"local_money"),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"ye"},""),children:[{title:n.default.createElement("div",{fieldid:"money_bal"},""),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},""),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"scomment"},""),dataIndex:"scomment",key:"scomment",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},""),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jfjine"},""),children:[{title:n.default.createElement("div",{fieldid:"money_de_b"},""),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},""),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"dfjine"},""),children:[{title:n.default.createElement("div",{fieldid:"money_de_h"},""),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},""),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"billTypeName"},""),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},""),dataIndex:"billno",key:"billno",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}],f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.rowClassNameHandler=function(e,t,r){return a.state.selectedRow[t]?"selected":""},a.onRowClick=function(e,t){var r=new Array(a.state.tableData.length);r[t]=!0,a.setState({factoryValue:e,selectedRow:r,record:e})},a.linkBill=function(){var e=a.state.record;e?(0,i.ajax)({url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{billType:e.billType,pk_bill:e.pk_bill},success:function(e){var t=e.data;t?i.pageTo.openTo(t.url,t.condition):(0,i.toast)({color:"warning",content:a.state.json["public-000057"]})}}):(0,i.toast)({color:"warning",content:a.state.json["public-000014"]})},a.totalData=[],a.table="",a.total="",a.totalColumns=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},""),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money"},""),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},""),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_bal"},""),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},""),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:""},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"scomment"},""),dataIndex:"scomment",key:"scomment",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},""),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_b"},""),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},""),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_h"},""),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},""),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billTypeName"},""),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},""),dataIndex:"billno",key:"billno",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}],a.state={tableData:[],record:null,selectedRow:[],json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){p=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},e.state.json["public-000045"]),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jine"},e.state.json["public-000046"]),children:[{title:n.default.createElement("div",{fieldid:"money"},e.state.json["public-000047"]),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},e.state.json["public-000048"]),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"ye"},e.state.json["public-000049"]),children:[{title:n.default.createElement("div",{fieldid:"money_bal"},e.state.json["public-000047"]),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},e.state.json["public-000048"]),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"scomment"},e.state.json["public-000050"]),dataIndex:"scomment",key:"scomment",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},e.state.json["public-000051"]),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"jfjine"},e.state.json["public-000052"]),children:[{title:n.default.createElement("div",{fieldid:"money_de_b"},e.state.json["public-000047"]),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},e.state.json["public-000048"]),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"dfjine"},e.state.json["public-000053"]),children:[{title:n.default.createElement("div",{fieldid:"money_de_h"},e.state.json["public-000047"]),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},e.state.json["public-000048"]),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}}]},{title:n.default.createElement("div",{fieldid:"billTypeName"},e.state.json["public-000054"]),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},e.state.json["public-000055"]),dataIndex:"billno",key:"billno",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}],e.totalColumns=[{title:n.default.createElement("div",{fieldid:"pk_dealnum"},e.state.json["public-000056"]),dataIndex:"pk_dealnum",key:"pk_dealnum",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"pk_dealnum"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money"},e.state.json["public-000047"]),dataIndex:"money",key:"money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money"},e.state.json["public-000048"]),dataIndex:"local_money",key:"local_money",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_bal"},e.state.json["public-000047"]),dataIndex:"money_bal",key:"money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_bal"},e.state.json["public-000048"]),dataIndex:"local_money_bal",key:"local_money_bal",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_bal"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"scomment"},e.state.json["public-000050"]),dataIndex:"scomment",key:"scomment",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"scomment"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"busidate"},e.state.json["public-000051"]),dataIndex:"busidate",key:"busidate",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"busidate"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_b"},e.state.json["public-000047"]),dataIndex:"money_de_b",key:"money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_b"},e.state.json["public-000048"]),dataIndex:"local_money_de_b",key:"local_money_de_b",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"money_de_h"},e.state.json["public-000047"]),dataIndex:"money_de_h",key:"money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"local_money_de_h"},e.state.json["public-000048"]),dataIndex:"local_money_de_h",key:"local_money_de_h",width:100,className:"columnRight",render:function(e,t,a){return n.default.createElement("div",{fieldid:"local_money_de_h"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billTypeName"},e.state.json["public-000054"]),dataIndex:"billTypeName",key:"billTypeName",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billTypeName"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"billno"},e.state.json["public-000055"]),dataIndex:"billno",key:"billno",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"billno"},e||n.default.createElement("span",null," "))}}]}))}})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.combinedExaminationData==this.props.combinedExaminationData)return!1;var a=this.state.tableData,r=0==e.combinedExaminationData.length?[]:e.combinedExaminationData.total;r&&r.length>0&&(this.totalData=[{pk_dealnum:r[0],money:r[1],local_money:r[2],money_bal:r[3],local_money_bal:r[4],scomment:r[5],busidate:r[6],money_de_b:r[7],local_money_de_b:r[8],money_de_h:r[9],local_money_de_h:r[10],billTypeName:r[11],billno:r[12]}]),this.setState({tableData:0==e.combinedExaminationData.length?[]:e.combinedExaminationData.list},(function(){if(t.setState({selectedRow:new Array(a.length)}),t.state.tableData.length>0){var e=t.table.querySelector(".u-table-body"),r=t.total.querySelector(".u-table-body");e.onscroll=function(){r.scrollLeft=e.scrollLeft},r.onscroll=function(){e.scrollLeft=r.scrollLeft}}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,r=t.pk_tradetypeid,o=t.billno,l=this.state.tableData,i="100px",f=document.getElementById("combinedExaminationModelId");if(f){var b=f.querySelector(".u-modal-body");b&&(i=b.offsetHeight-200+"px")}return n.default.createElement("div",null,n.default.createElement(s,{fieldid:"combinedExamination",id:"combinedExaminationModelId",className:"query-modal",show:a,size:"xlg",backdrop:"static",onHide:this.props.handleModel},n.default.createElement(s.Header,{closeButton:!0},n.default.createElement(s.Title,null,""+this.state.json["public-000058"])),n.default.createElement(s.Body,null,n.default.createElement("div",{className:"steps-content"},n.default.createElement("ul",{className:"content-tit"},n.default.createElement("div",{className:"content-tit-tit"},n.default.createElement("li",{className:"tit-tradetype"},n.default.createElement("span",null,this.state.json["public-000059"],"："),n.default.createElement("span",null,r)),n.default.createElement("li",{className:"tit-billno"},n.default.createElement("span",null,this.state.json["public-000060"],"："),n.default.createElement("span",null,o))),n.default.createElement("li",null,n.default.createElement(d,{fieldid:"linkbill",className:"button-primary",style:{float:"right"},onClick:this.linkBill},this.state.json["public-000061"]))),n.default.createElement(c,{fieldid:"ncc",areaCode:c.config.TABLE,className:"table-area"},n.default.createElement(u,{className:"total-rows",columns:p,isDrag:!0,ref:function(t){e.table=ReactDOM.findDOMNode(t)},data:l,style:{marginRight:"20px",height:"350px"},loading:!1,onRowClick:this.onRowClick.bind(this),rowClassName:this.rowClassNameHandler,footer:function(){return n.default.createElement(u,{className:"total-row",ref:function(t){return e.total=ReactDOM.findDOMNode(t)},rowKey:"total",isDrag:!0,data:e.totalData,columns:e.totalColumns,showHeader:!1,scroll:{x:!0,y:"35px"},bodyStyle:{height:"35px"}})},scroll:{x:!0,y:i},bodyStyle:{height:i}}))))))}}]),t}(l.Component);f=(0,i.createPage)({})(f),t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return n.default.createElement(c,Object.assign(t,e))};var o,l=a(2),n=(o=l)&&o.__esModule?o:{default:o},i=a(1);a(37);var s=i.cardCache.setDefData,d=i.high.Refer,u=i.base.NCButton,c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setVisible=function(e){a.setState({visible:e})},a.state={visible:!0,json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this.props,t=e.billtype,a=e.dataSource,r=e.switchTemplate;return n.default.createElement("div",{className:(this.state.visible?"show":"hide")+"  teadetype-lightapp-component"},n.default.createElement("span",null,n.default.createElement(d,{fieldid:"tradetype",placeholder:this.state.json["public-000139"],refName:this.state.json["public-000151"],refCode:"tradetype",refType:"grid",queryGridUrl:"/nccloud/riart/ref/fiBillTypeTableRefAction.do",columnConfig:[{name:[this.state.json["public-000245"],this.state.json["public-000246"]],code:["refcode","refname"]}],queryCondition:{parentbilltype:t},onChange:function(e){s("sessionTradeType",a,e.refcode),s("isSwitchTradeType",a,!0),r&&r()},isMultiSelectedEnabled:!1,clickContainer:n.default.createElement(u,{fieldid:"tradetype",colors:"primary"},this.state.json["public-000139"])})))}}]),t}(l.Component)},function(e,t,a){var r=a(39);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t){e.exports=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.tableId="list",t.yfappcode="20082004",t.yfpagecode="20082004_LIST",t.ysappcode="20062004",t.yspagecode="20062004_LIST"},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.currentTypeAfterFormEvents=void 0;var r=a(1);t.currentTypeAfterFormEvents=function(e,t,a){(0,r.ajax)({url:"/nccloud/arap/ref/ratecontrol.do",async:!1,data:{pk_org:t.form.getFormItemsValue(e,"pk_org")?t.form.getFormItemsValue(e,"pk_org").value:null,pk_currtype:t.form.getFormItemsValue(e,"pk_currtype")?t.form.getFormItemsValue(e,"pk_currtype").value:null,ratekey:"rate"},success:function(a){a.success&&t.form.setFormItemsDisabled(e,{rate:!a.data})}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyAfterEventRenderData=t.headAfterEventRenderData=t.errorDeal=t.renderData=t.formulamsgHint=void 0;var r=a(1),o=a(7);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.formulamsgHint=function(e,t){var a={};a[e.tableId]="cardTable",t.formulamsg&&t.formulamsg instanceof Array&&t.formulamsg.length>0&&e.props.dealFormulamsg(t.formulamsg,a)},t.renderData=function(e,t){t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId]))},t.errorDeal=function(e,t,a,o){var l=String(t),n=l.substring(6,l.length);(0,r.toast)({color:"danger",content:n}),o&&"pk_org"==o&&e.props.resMetaAfterPkorgEdit();var i={};i[o]=a,e.props.form.setFormItemsValue(e.formId,i)},t.headAfterEventRenderData=function(e,t){t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId]),t.data.body&&(0,o.refreshChildVO2HeadVO)(e.props,e.formId,e.tableId),(0,o.calculateHeadMoney)(e))},t.bodyAfterEventRenderData=function(e,t){t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&(e.props.cardTable.updateDataByRowId(e.tableId,t.data.body[e.tableId]),(0,o.refreshChildVO2HeadVO)(e.props,e.formId,e.tableId)),(0,o.calculateHeadMoney)(e))}},function(e,t,a){var r=a(35);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"#combinedExaminationModelId {\n  text-align: center;\n}\n#combinedExaminationModelId .u-table-body {\n  overflow-x: hidden !important;\n}\n#combinedExaminationModelId .u-table-body tr td.columnRight {\n  text-align: right;\n}\n#combinedExaminationModelId .u-modal-dialog .u-modal-content .u-modal-body {\n  padding: 0;\n}\n#combinedExaminationModelId .steps-content .content-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: 10px 0;\n  padding: 0 20px;\n}\n#combinedExaminationModelId .steps-content .content-tit .content-tit-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#combinedExaminationModelId .steps-content .content-tit .content-tit-tit .tit-tradetype {\n  padding-right: 20px;\n}\n#combinedExaminationModelId .steps-content .table-area {\n  margin: 0 20px;\n}\n#combinedExaminationModelId .steps-content .u-table-footer {\n  border-bottom: 1px solid #e9e9e9;\n}\n#combinedExaminationModelId .steps-content .u-table-footer .u-table-body {\n  overflow: auto!important;\n  overflow-y: hidden !important;\n}\n#combinedExaminationModelId .steps-content .total-rows .u-table-header .u-table-thead tr th {\n  text-align: center;\n  border-right: 1px solid #d0d0d0;\n}\n#combinedExaminationModelId .selected {\n  background-color: #e4e4e4;\n}\n",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=e.values;Object.keys(t).map((function(e,a){var r=t[e].value,o=(t[e].display,t[e].scale);null==r||""===r?delete t[e]:t[e]={value:r,scale:o}}))},o=function(e){for(var t=e.length,a=function(t){var a=e[t].values;Object.keys(a).map((function(e){var t=a[e].value,r=(a[e].display,a[e].scale);null==t||""===t?delete a[e]:a[e]={value:t,scale:r}}))},r=0;r<t;r++)a(r)};t.dealCardData=function(e,t){var a=JSON.parse(JSON.stringify(t)),l=a.head[e.formId].rows[0],n=a.body[e.tableId].rows;return r(l,a),o(n,a),a}},function(e,t,a){var r=a(38);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,".teadetype-lightapp-component.hide {\n  display: none;\n}\n.teadetype-lightapp-component.show {\n  display: block;\n}\n",""])},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,".trade-type .refer-wrapper .u-button {\n  font-size: 13px;\n}\n.light-tabs-header .tabs-config {\n  height: 100%;\n  padding-top: 5px;\n}\n.u-tabs-top .u-tabs-content-animated .u-tabs-tabpane {\n  position: relative;\n  overflow: auto;\n}\n",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=d(o),n=(d(a(17)),a(1)),i=a(177),s=a(29);function d(e){return e&&e.__esModule?e:{default:e}}a(182);var u=n.base.NCButton,c=n.base.NCBreadcrumb,p=n.base.NCModal,f=(c.NCBreadcrumbItem,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleShow=function(){for(var e=a.props.editTable.getStatus(a.tableId),t=[],r=[],o=0;o<a.state.allButtonsKey.length;o++){var l=a.state.allButtonsKey[o];switch(l){case"Edit":"browse"==e?t.push(l):r.push(l);break;case"Save":case"Cancel":case"AddLine":"edit"==e?t.push(l):r.push(l)}}a.props.button.setButtonVisible(t,!0),a.props.button.setButtonVisible(r,!1)},a.cancel=function(){a.props.editTable.cancelEdit(a.tableId)},a.closeModel=function(){a.setState({tableData:[],allData:null}),a.props.handleModel()},a.tableId=s.tableId,a.state={allButtonsKey:["Edit","Cancel","AddLine","Save"],tableData:[],allData:null,json:{}},a.Info={isInitTemplate:!0,isEdit:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;(0,n.getMultiLang)({moduleId:"public",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){}))}})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.linkTermData.grid&&e.show&&(this.Info.isEdit=e.linkTermData.isEdit,0==this.state.tableData.length&&e.linkTermData!=this.state.allData&&(this.Info.isInitTemplate&&(this.Info.isInitTemplate=!1,i.initTemplate.call(this,this.props)),this.setState({tableData:e.linkTermData.grid,allData:e.linkTermData},(function(){t.props.editTable.setTableData(t.tableId,e.linkTermData.grid[t.tableId]),e.linkTermData.isEdit?"edit"==t.props.editTable.getStatus(t.tableId)?(t.props.editTable.setStatus(t.tableId,"browse"),t.toggleShow()):t.toggleShow():t.props.button.setButtonVisible(t.state.allButtonsKey,!1)}))))}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.editTable,r=e.button,o=(e.linkTermData,a.createEditTable),n=r.createButtonApp;return l.default.createElement(p,{fieldid:"linkTerm",id:"linkTerm-area",show:t,size:"lg",onHide:this.closeModel,backdrop:"static"},l.default.createElement(p.Header,{closeButton:!0},l.default.createElement(p.Title,null,""+this.state.json["public-000069"])),l.default.createElement(p.Body,null,this.Info.isEdit&&l.default.createElement("div",{className:"table-operation-btn"},n({area:"list_head",buttonLimit:3,onButtonClick:i.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),l.default.createElement("div",{className:"table-area"},l.default.createElement("div",{className:this.Info.isEdit?"":"operation-table"},o(this.tableId,{fieldid:"linkterm",showIndex:!0,onAfterEvent:i.afterEvent.bind(this)})))),l.default.createElement(p.Footer,null,l.default.createElement(u,{fieldid:"close",onClick:this.closeModel}," ",this.state.json["public-000070"]," ")))}}]),t}(o.Component));f=(0,n.createPage)({})(f),t.default=f},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=t.initTemplate=t.buttonClick=void 0;var r=n(a(178)),o=n(a(179)),l=n(a(181));function n(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=r.default,t.initTemplate=o.default,t.afterEvent=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;switch(t){case"Edit":e.editTable.setStatus(this.tableId,"edit"),this.toggleShow();break;case"Cancel":this.cancel(),this.toggleShow();break;case"AddLine":var o=e.seletedPks,l=null;o&&o.length>0&&(l=o[0]),(0,r.ajax)({url:"/nccloud/arap/arappub/termaddrow.do",data:{moduleId:e.moduleId,billType:e.billType,pk_item:l,pk_bill:e.pk_bill},success:function(t){t.data?e.editTable.addRow(a.tableId,void 0,!1,t.data[a.tableId].rows[0].values):e.editTable.addRow(a.tableId,void 0,!1,void 0)}});break;case"Close":this.closeModel();break;case"Save":if(0==e.editTable.getAllData(this.tableId).rows.length)return void(0,r.toast)({color:"warning",content:this.state.json["public-000067"]});var n=e.seletedPks,i=null;n&&n.length>0&&(i=n[0]);var s={model:e.editTable.getAllData(this.tableId),moduleId:e.moduleId,billType:e.billType,pk_item:i,pk_bill:e.pk_bill};(0,r.ajax)({url:"/nccloud/arap/arappub/linktermsave.do",data:s,success:function(t){t.data&&(a.props.setFormTsVal(t.data.ts),a.setState({tableData:t.data.grid},(function(){e.editTable.setTableData(a.tableId,t.data.grid[a.tableId]),e.editTable.setStatus(a.tableId,"browse"),a.toggleShow(),(0,r.toast)({color:"success",content:a.state.json["public-000068"]})})))}})}};var r=a(1);r.base.Message},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;if(e.moduleId){var a=null,r=null,o=e.moduleId;if("2008"==o)a="20082004",r="20082004_LIST";else{if("2006"!=o)return;a="20062004",r="20062004_LIST"}e.createUIDom({pagecode:r,appcode:a},(function(a){if(a){if(a.template){var r=a.template;r=function(e,t,a,r){return t[a].items.push({label:r.state.json["public-000044"],itemtype:"customer",attrcode:"opr",width:"80px",visible:!0,fixed:"right",render:function(t,r,o){var n="browse"===e.editTable.getStatus(a)?[]:["Delete_inner"];return e.button.createOprationButton(n,{area:"list_inner",buttonLimit:3,onButtonClick:function(e,a){return(0,l.default)(e,a,t,r,o)}})}}),t}(e,r,t.tableId,t),e.meta.setMeta(r)}if(a.button){var o=a.button;e.button.setButtons(o)}}}))}};var r,o=a(180),l=(r=o)&&r.__esModule?r:{default:r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o,l){switch(t){case"Delete_inner":e.editTable.deleteTableRowsByRowId(r.tableId,o.rowid,!1)}};a(1);var r=a(29)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o,l,n,i,s){var d=this;if("accRate"==a||"prepay"==a||"insurance"==a||"innerctldeferdays"==a)return;if(isNaN(l[0].oldvalue.value)){if(l[0].newvalue.value==l[0].oldvalue.value)return}else if(Number(l[0].newvalue.value)==Number(l[0].oldvalue.value))return;var u=e.seletedPks,c=null;u&&u.length>0&&(c=u[0]);var p={key:a,model:e.editTable.getAllData(this.tableId),index:n,moduleId:e.moduleId,billType:e.billType,pk_item:c,pk_bill:e.pk_bill};(0,r.ajax)({url:"/nccloud/arap/arappub/termafterevent.do",data:p,success:function(t){t.data&&e.editTable.setTableData(d.tableId,t.data[d.tableId],!1)}})};var r=a(1)},function(e,t,a){var r=a(183);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"#linkTerm-area {\n  background: rgba(0, 0, 0, 0.5);\n  height: auto;\n}\n#linkTerm-area .u-modal-dialog {\n  min-height: 600px;\n}\n#linkTerm-area .u-modal-header {\n  padding: 10px 15px;\n  border-radius: 3px 3px 0px 0px;\n}\n#linkTerm-area .u-modal-header .u-close span {\n  font-size: 22px;\n}\n#linkTerm-area .table-area {\n  padding: 8px 20px 0 20px;\n}\n#linkTerm-area .u-modal-body {\n  padding: 0;\n}\n#linkTerm-area .u-modal-body .table-operation-btn {\n  text-align: right;\n  padding: 5px 17px;\n  margin-top: 10px;\n}\n#linkTerm-area .u-modal-body .u-table-body-inner {\n  overflow: auto;\n}\n#linkTerm-area .u-modal-body .operation-table .u-table-body {\n  min-height: 300px !important;\n}\n",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o,l,n){var i=[];n?a.forEach((function(e){i.push({pk_bill:e.data.values[o].value,billType:e.data.values.pk_billtype.value})})):i=a;(0,r.ajax)({url:"/nccloud/arap/arappub/madebill.do",data:i,success:function(a){a.success&&(r.cacheTools.set(l+a.data.cachekey,a.data.pklist),t.openTo(a.data.url,{status:"edit",n:e.state.json["public-000233"],appcode:a.data.appcode,pagecode:a.data.pagecode,scene:l+a.data.cachekey}))}})};var r=a(1)},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyBill=t.listCopyBill=void 0;var r=a(1),o=a(188);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=function(e,t,a){for(var l=new Map,n=0;n<o.headkey.length;n++)l.set(o.headkey[n],e.values[o.headkey[n]].value);var i=t[0].values.direction.value,s=new Map;if(1==i)for(var d=o.bodykey.concat(o.deBodykey),u=0;u<t.length;u++){for(var c=new Map,f=0;f<d.length;f++)c.set(d[f],t[u].values[d[f]]?t[u].values[d[f]].value:null);s.set(u,c)}if(-1==i)for(var b=o.bodykey.concat(o.crBodykey),m=0;m<t.length;m++){for(var y=new Map,h=0;h<b.length;h++)y.set(b[h],t[m].values[b[h]]?t[m].values[b[h]].value:null);s.set(m,y)}(0,r.ajax)({url:"/nccloud/arap/arappub/processImpMoney.do",async:!1,data:{BillClass:a,head:l,bodys:s},success:function(a){var r=a.data.parent;Object.keys(r).map((function(t){if(r[t]&&e.values[t]&&!e.values[t].display){var a=e.values[t].scale;e.values[t].value=a&&-1!=a?p(r[t],a):r[t]}}));for(var o=a.data.children[0],l=function(e){var a=o[e],r=t[e];Object.keys(a).map((function(e){if(a[e]&&r.values[e]&&!r.values[e].display){var t=r.values[e].scale;r.values[e].value=t&&-1!=t?p(a[e],t):a[e]}}))},n=0;n<o.length;n++)l(n)}})},i=function(e,t,a,r,l,n){var i=r.userId,s=r.userName,d=r.groupId,c=r.groupName,p=r.businessDate;Object.keys(t.values).map((function(e){-1!=o.parentItemKey.indexOf(e)&&(t.values[e].value=null,t.values[e].display=null)})),l==o.IBillFieldGet.YS||l==o.IBillFieldGet.SK||l==o.IBillFieldGet.ZF?(t.values.src_syscode.value=o.FromSystem.AR,t.values.src_syscode.display=e.state.json["public-000218"]):(t.values.src_syscode.value=o.FromSystem.AP,t.values.src_syscode.display=e.state.json["public-000219"]);var f=u(l);if(t.values[f].value=null,l!=o.IBillFieldGet.FK&&l!=o.IBillFieldGet.SK||(t.values.settletype.value=o.ArapBillVOConsts.m_intJSZXZF_NONE,t.values.settletype.display=e.state.json["public-000220"],t.values.settleflag.value=o.ArapBillVOConsts.m_intDJZzzt_Default,t.values.settleflag.display=e.state.json["public-000221"]),t.values.isreded.value=!1,t.values.isrefund.value="N",t.values.pk_group.value=d,t.values.pk_group.display=c,t.values.creator.value=i,t.values.creator.display=s,t.values.creationtime.value=p,t.values.billdate.value=p,t.values.busidate.value=p,t.values.billmaker.value=i,t.values.billmaker.display=s,a){var b=n.billdate;t.values.billdate.value=b,t.values.busidate.value=b,t.values.billstatus.value=o.billstatus.AUDIT,t.values.billstatus.display=e.state.json["public-000222"],t.values.effectdate.value=b,t.values.effectstatus.value=o.effectstatus.EXECUTED,t.values.effectstatus.display=e.state.json["public-000223"],t.values.effectuser.value=i,t.values.effectuser.display=s,t.values.approvestatus.value=o.approvestatus.PASSING,t.values.approvestatus.display=e.state.json["public-000222"],t.values.approver.value=i,t.values.approver.display=s,t.values.approvedate.value=b}else t.values.billstatus.display=e.state.json["public-000224"],t.values.billstatus.value=o.billstatus.SAVE,t.values.effectstatus.value=o.effectstatus.INVALID,t.values.effectstatus.display=e.state.json["public-000225"],t.values.approvestatus.value=o.approvestatus.NOSTATE,t.values.approvestatus.display=e.state.json["public-000226"];var m=n.pk_busitype,y=n.pk_busitypeName;t.values.pk_busitype.value=m,t.values.pk_busitype.display=y},s=function(e,t,a,r,l,n){for(var i=r.groupId,s=r.groupName,d=r.businessDate,f=function(e){var r=t[e];r.status="2",Object.keys(r.values).map((function(e){-1!=o.childrenItemKey.indexOf(e)&&(r.values[e].value=null,r.values[e].display=null)}));var f=c(l);r.values[f].value=o.INDEX_PK+r.values.rowno.value;var b=u(l);if(r.values[b].value=null,r.values.settlemoney.value=p(0,r.values.settlemoney.scale),r.values.settlecurr.value=null,r.values.settlecurr.display=null,r.values.rate.value=p(0,r.values.settlemoney.scale),r.values.grouprate.value=p(0,r.values.settlemoney.scale),r.values.globalrate.value=p(0,r.values.settlemoney.scale),a){var m=n.billdate;r.values.billdate.value=m,r.values.busidate.value=m}else r.values.billdate.value=d,r.values.busidate.value=d;r.values.pk_group.value=i,r.values.pk_group.display=s,l==o.IBillFieldGet.YS||l==o.IBillFieldGet.FK?(r.values.money_bal.value=r.values.money_de.value,r.values.occupationmny.value=r.values.money_de.value,r.values.local_money_bal.value=r.values.local_money_de.value):l!=o.IBillFieldGet.YF&&l!=o.IBillFieldGet.SK||(r.values.money_bal.value=r.values.money_cr.value,r.values.occupationmny.value=r.values.money_cr.value,r.values.local_money_bal.value=r.values.local_money_cr.value)},b=0;b<t.length;b++)f(b)},d=function(e,t,a,l){for(var n=0;n<t.length;n++){if(a==o.ArapConstant.ARAP_FK_BILLCLASS&&t[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_CUSTOMER&&l)return(0,r.toast)({color:"danger",content:e.state.json["public-000240"]}),!0;if(a==o.ArapConstant.ARAP_AP_BILLCLASS&&t[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_CUSTOMER&&l)return(0,r.toast)({color:"danger",content:e.state.json["public-000239"]}),!0;if(a==o.ArapConstant.ARAP_SK_BILLCLASS&&t[n].values.objtype.value==o.ArapConstant.ASSO_OBJ_SUPPLIER&&l)return(0,r.toast)({color:"danger",content:e.state.json["public-000241"]}),!0}return!1},u=function(e){return e==o.IBillFieldGet.YS?"pk_recbill":e==o.IBillFieldGet.YF?"pk_payablebill":e==o.IBillFieldGet.FK?"pk_paybill":e==o.IBillFieldGet.SK?"pk_gatherbill":e==o.IBillFieldGet.ZF?"pk_estipayablebill":e==o.IBillFieldGet.ZS?"pk_estirecbill":void 0},c=function(e){return e==o.IBillFieldGet.YS?"pk_recitem":e==o.IBillFieldGet.YF?"pk_payableitem":e==o.IBillFieldGet.FK?"pk_payitem":e==o.IBillFieldGet.SK?"pk_gatheritem":e==o.IBillFieldGet.ZF?"pk_estipayableitem":e==o.IBillFieldGet.ZS?"pk_estirecitem":void 0},p=function(e,t){if(isNaN(Number(e))||!e)return null;var a=e.toString();if(t>0){var r=a.split(".")[0],o=a.split(".")[1];return o||(o=""),r+"."+(o=o.length<t?o.padEnd(t,"0"):o.substr(0,t))}return a};t.listCopyBill=function(e){(0,r.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:e.props.getUrlParam("id"),pageId:e.getPagecode(),billType:e.billType,type:1,tradeType:e.getPagecode()},success:function(t){e.props.beforeUpdatePage(),t.data&&(t.data.head&&e.props.form.setAllFormValue(l({},e.formId,t.data.head[e.formId])),t.data.body&&e.props.cardTable.setTableData(e.tableId,t.data.body[e.tableId])),e.state.buttonfalg=!0,e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.updatePage(e.formId,e.tableId),e.toggleShow()},error:function(t){e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setTableData(e.tableId,{rows:[]}),e.props.setUrlParam({status:"browse"}),e.props.cardTable.setStatus(e.tableId,"browse"),e.props.form.setFormStatus(e.formId,"browse"),e.toggleShow();var a=String(t),o=a.substring(6,a.length);(0,r.toast)({color:"danger",content:o})}})},t.copyBill=function(e,t){var a=e.props.createMasterChildData(t,e.formId,e.tableId),o=a.head[e.formId].rows[0],u=a.body[e.tableId].rows,c=o.values.billclass.value,p=o.values.isrefund.value;if(!d(e,u,c,p)){var f=(0,r.getBusinessInfo)(),b=o.values.isinit.value,m="";(0,r.ajax)({url:"/nccloud/arap/arappub/getBusitypeAndBilldate.do",async:!1,data:{isInit:b,pk_org:o.values.pk_org.value,pk_billtype:o.values.pk_billtype.value,pk_tradetype:o.values.pk_tradetype.value,creator:o.values.creator.value},success:function(e){m=e.data}}),e.props.beforeUpdatePage(),i(e,o,b,f,c,m),s(e,u,b,f,c,m),n(o,u,c),e.props.form.setAllFormValue(l({},e.formId,a.head[e.formId])),e.props.cardTable.setTableData(e.tableId,a.body[e.tableId]),e.props.setUrlParam({status:"add",type:"copy"}),e.state.buttonfalg=!0,e.props.resMetaAfterPkorgEdit(),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!1}),e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.updatePage(e.formId,e.tableId),e.toggleShow()}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ArapConstant={ARAP_POWER_CODE:"fi",ARAP_AR_BILLCLASS:"ys",ARAP_AP_BILLCLASS:"yf",ARAP_SK_BILLCLASS:"sk",ARAP_FK_BILLCLASS:"fk",ARAP_ZS_BILLCLASS:"zs",ARAP_ZF_BILLCLASS:"zf",ASSO_OBJ_CUSTOMER:"0",ASSO_OBJ_SUPPLIER:"1",ASSO_OBJ_DEPT:"2",ASSO_OBJ_BUSIMAN:"3",ASSO_OBJ_ALL:"9"},t.parentItemKey=["isreded","outbusitype","payman","paydate","isonlinepay","officialprintuser","officialprintdate","settlenum","approvenote","modifiedtime","creationtime","creator","modifier","isflowbill","confirmuser","billno","billdate","billstatus","operator","approver","approvestatus","approvedate","lastapproveid","isnetpayready","lastadjustuser","signuser","signyear","signperiod","settleflag","settletype","effectstatus","effectuser","effectdate","src_syscode","approvedate","signuser","busidate","signdate","isforce","commpayenddate","commpaybegindate","isfromindependent","invoiceno","sddreversalflag","reversalreason","payreason","failurereason","sddreversaler","sddreversaldate","creditrefstd","ts","coordflag","isrefund"],t.childrenItemKey=["payflag","top_tradetype","src_tradetype","checkdirection","transferdate","src_itemid","rowtype","top_itemid","top_billid","billno","coordflag","ispaytermmodified","pk_ssitem","top_billtype","transferflag","src_billid","src_billtype","dstlsubcs","isverifyfinished","pausetransact","billdate","payman","paydate","verifyfinisheddate","innerorderno","purchaseorder","invoiceno","occupationmny","busidate","contractno","commpaystatus","commpaytype","refuse_reason","paystaus","commpaytype","commpaystatus","refuse_reason","commpayer","isrefused","confernum","checkno","checkno_display","checktype","bankrelated_code","payreason","batchcode","pk_batchcode","settlemoney","settlecurr","ts","transerial"],t.IBillFieldGet={YS:"ys",YF:"yf",SK:"sk",FK:"fk",ZS:"zs",ZF:"zf",F0:"F0",F1:"F1",F2:"F2",F3:"F3",DE:"DE",DF:"DF",F0S:"23F0",F1C:"23F1",F2S:"23F2",F3C:"23F3",E0:"23E0",E1:"23E1"},t.FromSystem={AR:"0",AP:"1",CMP:"2",SO:"3",PO:"4",FTS:"5",NET:"6",CFBM:"8",XTDJ:"9",CDMA:"10",XBGL:"12",TB:"13",TO:"16",WBJHPT:"17",ZJJX:"18",IC:"19",CT:"20",YS:"24",PS:"7",AM:"104",WSBX:"105",CR09:"109"},t.ArapBillVOConsts={m_intJSZXZF_NetBank:"5",m_intJSZXZF_NONE:"0",m_intJSZXZF_HAND:"3",m_intJSZXZF_BCenter:"10",m_intDJZzzt_Default:"0",m_intDJZzzt_Succeed:"1",m_intDJZzzt_Fail:"-1",m_intDJZzzt_Ongoing:"2",m_intDJZzzt_partly:"11"},t.billstatus={UNCOMFIRM:"9",SAVE:"-1",AUDIT:"1",AUDITING:"2",TEMPEORARY:"-99",SIGN:"8"},t.effectstatus={EXECUTED:"10",INVALID:"0"},t.approvestatus={NOSTATE:"-1",NOPASS:"0",PASSING:"1",GOINGON:"2",COMMIT:"3"},t.INDEX_PK="index_0",t.headkey=["pk_org","pk_group","billdate","pk_currtype","billclass"],t.bodykey=["pk_org","pk_group","buysellflag","top_billtype","pk_currtype","taxprice","direction","taxrate","occupationmny","money_bal","local_money_bal"],t.crBodykey=["globalcrebit","globalnotax_cre","globaltax_cre","groupcrebit","groupnotax_cre","grouptax_cre","local_money_cr","local_notax_cr","local_tax_cr","money_cr","notax_cr","quantity_cr"],t.deBodykey=["globaldebit","globalnotax_de","globaltax_de","groupdebit","groupnotax_de","grouptax_de","local_money_de","local_notax_de","local_tax_de","money_de","notax_de","quantity_de"]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.autoAddLineKeys=["money_de","money_cr"]},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.formId="head",t.tableId="bodys",t.leftarea="left",t.nodekey="card",t.billType="F0",t.tradeType="D0",t.dataSource="fi.arap.recbill.20060RBM",t.pkname="pk_recbill",t.linkPageId="20060RBM_LIST_LINK"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.searchId="query",t.tableId="list",t.nodekey="list",t.billType="F0",t.tradeType="D0",t.dataSource="fi.arap.recbill.20060RBM",t.pkname="pk_recbill",t.searchKey="pk_recbill_search"},,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactButton=function(e,t){var a=void 0,r=void 0;(a=function e(t,a){if(t)return t;var r=!0,o=!1,l=void 0;try{for(var n,i=a[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var s=n.value;if("Add"==s.key)t=s;else if(0==s.children.length){if("Add"==s.key){t=s;break}}else if(t=e(t,s.children))break}}catch(e){o=!0,l=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw l}}return t}(a,e))&&(a.children&&a.children.length>0&&(r=a.children[0]),r&&t&&t.length>0&&(r.children=r.children.concat(t)))},t.getTransferInfo=function(e,t){var a=e.Info.pullBillInfoVOAry,r=void 0;if(a)for(var o=0;o<a.length;o++){var l=a[o];if(l.src_billtype===t){r=l;break}}return r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o,l){var n=void 0,i=void 0,s=void 0,d=void 0,u=void 0,c=void 0;a.data?(n=a.data.values.pk_org.value,i=a.data.values.pk_group.value,s=a.data.values.pk_billtype.value,d=a.data.values.pk_tradetype.value,u=a.data.values.billdate.value,c=a.data.values.isrefund?a.data.values.isrefund.value:null):(n=a.rows[0].values.pk_org.value,i=a.rows[0].values.pk_group.value,s=a.rows[0].values.pk_billtype.value,d=a.rows[0].values.pk_tradetype.value,u=a.rows[0].values.billdate.value,c=a.rows[0].values.isrefund?a.rows[0].values.isrefund.value:null);if(c&&1==c){if(s&&"F1"==s)return void(0,r.toast)({color:"warning",content:e.state.json["public-000239"]});if(s&&"F3"==s)return void(0,r.toast)({color:"warning",content:e.state.json["public-000240"]})}var p="2006"==l.substring(0,4)?"AR":"AP",f=[{pk_group:i,pk_org:n,relationID:o,pk_billtype:d}],b={messagevo:[{pk_system:p,relationid:o,busidate:u,pk_org:n,pk_group:i,pk_billtype:d}],desbilltype:["C0"],srcbilltype:d};(0,r.ajax)({url:"/nccloud/arap/arappub/linkvouchar.do",data:f,async:!1,success:function(a){if(a.success){var o=a.data.src;if("_LinkVouchar2019"==o)if(a.data.des){if(a.data.pklist)return 1==a.data.pklist.length?void t.openTo(a.data.url,{status:"browse",appcode:a.data.appcode,pagecode:a.data.pagecode,id:a.data.pklist[0],n:e.state.json["public-000231"],backflag:"noback"}):(r.cacheTools.set(a.data.cachekey,a.data.pklist),void t.openTo(a.data.url,{status:"browse",appcode:a.data.appcode,pagecode:a.data.pagecode,scene:l+o,n:e.state.json["public-000231"]}))}else r.cacheTools.set(l+o,a.data.pklist);else"_Preview2019"==o&&r.cacheTools.set(l+o,b);t.openTo(a.data.url,{status:"browse",appcode:a.data.appcode,pagecode:a.data.pagecode,scene:l+o,n:e.state.json["public-000232"]})}}})};var r=a(1)},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accAdd=function(e,t){var a,r,o;try{a=e.toString().split(".")[1].length}catch(e){a=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return(e*(o=Math.pow(10,Math.max(a,r)))+t*o)/o},t.Subtr=function(e,t){var a,r,o;try{a=e.toString().split(".")[1].length}catch(e){a=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return((e*(o=Math.pow(10,Math.max(a,r)))-t*o)/o).toFixed(a>=r?a:r)},t.accMul=function(e,t){var a=0,r=e.toString(),o=t.toString();try{a+=r.split(".")[1].length}catch(e){}try{a+=o.split(".")[1].length}catch(e){}return Number(r.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,a)},t.accDiv=function(e,t){}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cardFieldsEditable=t.billEditProperties=t.fctToArapFieldEditable=t.applyToF3FieldsEditable=t.F0ToF3FieldsEditable=t.dealCommisionPayField=t.objtypeEditable=void 0;var r=a(1);t.objtypeEditable=function(e,t,a){var r=e.form.getFormItemsValue(t,"pk_billtype")?e.form.getFormItemsValue(t,"pk_billtype").value:null,o=(e.form.getFormItemsValue(t,"objtype")&&e.form.getFormItemsValue(t,"objtype").value,e.form.getFormItemsValue(t,"isrefund")?e.form.getFormItemsValue(t,"isrefund").value:null);("F1"==r&&o||"F3"==r&&o)&&(e.form.setFormItemsDisabled(t,{objtype:!0,customer:!0}),e.cardTable.setColEditableByKey(a,["objtype","customer"],!0))},t.dealCommisionPayField=function(e,t,a){var r=!!e.form.getFormItemsValue(t,"isforce")&&e.form.getFormItemsValue(t,"isforce").value,o=e.form.getFormItemsValue(t,"pk_billtype")?e.form.getFormItemsValue(t,"pk_billtype").value:null,l=e.form.getFormItemsValue(t,"supplier")?e.form.getFormItemsValue(t,"supplier").value:null,n=e.form.getFormItemsValue(t,"customer")?e.form.getFormItemsValue(t,"customer").value:null;if("F2"==o||"F3"==o){var i="settlement"==e.getUrlParam("src");(r||i)&&(e.form.setFormItemsDisabled(t,{pk_org:!0,objtype:!0,supplier:!0,customer:!0,pk_currtype:!0,rate:!0,payaccount:!0,recaccount:!0,money:!0,local_money:!0,grouplocal:!0,grouprate:!0,globallocal:!0,globalrate:!0,commpaybegindate:!0,commpayenddate:!0,isforce:!0}),e.cardTable.setColEditableByKey(a,["objtype","supplier","customer","pk_currtype","rate","grouprate","globalrate","payaccount","recaccount","commpayer","commpaystatus","commpaytype","money_de","local_money_de","quantity_de","money_bal","local_money_bal","quantity_bal","local_tax_de","notax_de","local_notax_de","groupdebit","grouptax_de","groupnotax_de","globaldebit","globaltax_de","globalnotax_de","quantity_cr","local_money_cr","money_cr","local_tax_cr","notax_cr","local_notax_cr","groupcrebit","grouptax_cre","groupnotax_cre","globalcrebit","globaltax_cre","globalnotax_cre","occupationmny","price","groupbalance","globalbalance","taxprice","caltaxmny","nosubtax"],!0)),l||"F3"!=o||(e.form.setFormItemsDisabled(t,{supplier:!1}),e.cardTable.setColEditableByKey(a,["supplier"],!1)),n||"F2"!=o||(e.form.setFormItemsDisabled(t,{customer:!1}),e.cardTable.setColEditableByKey(a,["customer"],!1))}},t.F0ToF3FieldsEditable=function(e,t,a){e.form.setFormItemsDisabled(t,{objtype:!0,pk_currtype:!0}),e.cardTable.setColEditableByKey(a,["objtype","pk_currtype"],!0)},t.applyToF3FieldsEditable=function(e,t,a){e.form.setFormItemsDisabled(t,{pk_org:!0,pk_currtype:!0,billdate:!0,supplier:!0}),e.cardTable.setColEditableByKey(a,["pk_currtype","billdate","supplier","prepay","purchaseorder","invoiceno","contractno","quantity_de","pu_org","pu_deptid","pu_psndoc"],!0),(e.form.getFormItemsValue(t,"payaccount")?e.form.getFormItemsValue(t,"payaccount").value:null)&&(e.form.setFormItemsDisabled(t,{payaccount:!0}),e.cardTable.setColEditableByKey(a,["payaccount"],!0))},t.fctToArapFieldEditable=function(e,t,a){var r=e.getUrlParam("srcbilltype");!r||"FCT1"!=r&&"FCT2"!=r||e.form.setFormItemsDisabled(t,{pk_org:!0})},t.billEditProperties=function(e,t,a,o){(0,r.ajax)({url:"/nccloud/arap/arappub/billCanEditProperties.do",data:{pk_bill:t,billType:a,appcode:o},success:function(t){t.success&&(e.state.buttonfalg=!0,e.props.resMetaAfterPkorgEdit(),t.data&&t.data.head&&(e.props.form.setFormItemsDisabled(e.formId,t.data.head),e.headBack=t.data.headBack),t.data&&t.data.body&&(e.props.cardTable.setColEditableByKey(e.tableId,t.data.body,!0),e.bodyBack=t.data.body),e.headBack&&!t.data&&(e.props.form.setFormItemsDisabled(e.formId,e.headBack),e.props.cardTable.setColEditableByKey(e.tableId,e.bodyBack,!1)),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!0}))}})},t.cardFieldsEditable=function(e){var t=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId),a="",r="";if(t&&t.body&&t.body[e.tableId]&&t.body[e.tableId].rows){var o=t.body[e.tableId].rows;a=o[0].values.top_billtype.value,r=o[0].values.pk_billtype.value}var l=[],n=[];if(!a||"4A2F"!=a&&"4BL0"!=a&&"4BL3"!=a||"F0"!=r?!a||"4A3F"!=a&&"4A3H"!=a||"F1"!=r?!a||"4A18"!=a&&"4A23"!=a&&"4A24"!=a&&"4A49"!=a||(l=["pk_currtype","rate"],n=["pk_currtype","rate","money_de","local_money_de","local_notax_cr","notax_de","local_notax_de","money_cr","local_money_cr","local_tax_cr","notax_cr","local_notax_cr"]):(l=["billclass","isinit","billdate","syscode","src_syscode","billstatus","billmaker","pk_busitype","pk_psndoc","supplier","pk_currtype","objtype","pk_org_v","pk_fiorg_v","pk_pcorg_v","sett_org_v","pk_org","pk_pcorg","sett_org","outbusitype","pk_group","creationtime","creator","pk_billtype","pk_tradetype"],n=["pk_org","pk_fiorg","pk_pcorg","pk_pcorg_v","pk_org_v","pk_fiorg_v","sett_org_v","sett_org","supplier","equipmentcode","billdate","pk_group","pk_billtype","billclass","pk_tradetype","busidate","objtype","direction","pk_currtype","pk_psndoc","local_money_cr","money_cr","money_bal","local_money_bal","price","taxprice","top_billid","top_itemid","top_billtype","top_tradetype","src_tradetype","src_billtype","src_billid","src_itemid","pk_payterm","assetpactno","contractno","groupcrebit","globalcrebit","groupbalance","globalbalance","project"]):(l=["pk_org","pk_fiorg","pk_pcorg","sett_org","pk_org_v","pk_fiorg_v","pk_pcorg_v","sett_org_v","outbusitype","pk_group","creationtime","creator","pk_billtype","pk_tradetype","billclass","isinit","billdate","syscode","src_syscode","billstatus","billmaker","pk_busitype","pk_psndoc","customer","pk_currtype","objtype"],n=["pk_org","pk_pcorg","pk_fiorg","sett_org","pk_pcorg_v","pk_org_v","pk_fiorg_v","sett_org_v","customer","equipmentcode","billdate","pk_group","pk_billtype","billclass","pk_tradetype","busidate","objtype","direction","pk_currtype","pk_psndoc","money_de","local_money_de","money_bal","local_money_bal","notax_de","local_notax_de","price","taxprice","top_billid","top_itemid","top_billtype","top_tradetype","src_tradetype","src_billtype","src_billid","src_itemid","pk_payterm","assetpactno","groupdebit","globaldebit","groupbalance","globalbalance","project"]),l&&l.length>0&&n&&n.length>0){for(var i={},s=0;s<l.length;s++){i[l[s]]=!0}e.props.beforeUpdatePage(),e.props.form.setFormItemsDisabled(e.formId,i),e.props.cardTable.setColEditableByKey(e.tableId,n,!0),e.props.updatePage(e.formId,e.tableId)}}},,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this.props.getSearchParam("c"),r=this.getPagecode();this.props.getUrlParam("srcbilltype")?p.call(this,e,a,r):c(this,e,a,r,t)},t.dealOutToGather=p;var r,o=a(1),l=a(306),n=(r=l)&&r.__esModule?r:{default:r},i=a(191),s=a(6),d=a(12),u=a(8);o.cardCache.getDefData;function c(e,t,a,r,l){var c=(0,o.excelImportconfig)(t,"arap",i.billType,!0,"",{appcode:a,pagecode:e.getExportPageCode()}),p=r;t.createUIDom({pagecode:r,appcode:a,reqDataQueryallbtns:{rqUrl:"/arap/arappub/queryallbtns.do",rqJson:'{\n  "pagecode": "'+r+'",\n  "appcode": "'+a+'"\n,\n  "billtype": "'+i.billType+'"\n,\n  "tradetype": "'+p+'"\n}',rqCode:"button"},reqDataQuerypage:{rqUrl:"/arap/arappub/querypage.do",rqJson:'{\n  "pagecode": "'+r+'",\n  "appcode": "'+a+'"\n}',rqCode:"template"}},(function(a){if(a){if(!a.template[i.tableId])return;if(a.template){var r=a.template;r=function(e,t,a,r){var o=t.getUrlParam("status");return a[i.formId].status=o,a[i.tableId].status=o,a[i.tableId].items.push({label:e.state.json["receivablebill-000020"],itemtype:"customer",attrcode:"opr",width:d.OperationColumn,visible:!0,fixed:"right",render:function(a,r,o){var l=(0,s.cardBodyAndInnerButtonVisible)(e,e.state.buttonfalg,r.expandRowStatus);return t.button.createOprationButton(l,{area:"card_inner",buttonLimit:3,onButtonClick:function(t,l){return(0,n.default)(e,t,l,a,r,o)}})}}),a}(e,t,r),t.meta.setMeta(r)}if(a.button&&a.button.button){var o=a.button.button,p=a.button.pullbillinfo;(0,s.getButtonsKey)(o,e.Info.allButtonsKey),e.Info.pullBillInfoVOAry=p,t.button.setButtons(o),t.button.setUploadConfig("ImportData",c)}a.context&&((0,u.loginContext)(a.context),(0,u.getContext)(u.loginContextKeys.transtype)&&e.refs.tradetypeBtn&&e.refs.tradetypeBtn.setVisible(!1)),l&&l()}}))}function p(e,t,a){var r=this,l="",n={};"35"==this.props.getUrlParam("srcbilltype")&&(l="/nccloud/arap/recbill/arsubtorecbill.do",n={pk_bills:o.cacheTools.get("arsubToF0Pks"),pageId:a}),(0,o.ajax)({url:l,data:n,success:function(l){l.data?(a=l.data.head[r.formId].rows[0].values.pk_tradetype.value,r.data=l.data,c(r,e,t,a,r.initShow)):(r.props.form.EmptyAllFormValue(r.formId),r.props.cardTable.setTableData(r.tableId,{rows:[]}),(0,o.toast)({color:"danger",content:r.state.json["receivablebill-000072"]}))}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WholeVerify=t.BodyVerify=void 0;var r=a(1),o=a(220),l=void 0,n=void 0,i=void 0;t.BodyVerify=function(e,t,a,o,s,d){var u=(0,r.getBusinessInfo)().businessDate,c=e.cardTable.getCheckedRows(a);if(0!=c.length)if(1==c.length){var p=e.form.getAllFormValue(t).rows[0].values,f=c[0].data.values,b=!0;if(u<e.form.getFormItemsValue(t,"billdate").value.substring(0,10)&&(b=!1),b){var m=!0,y=c[0].data.values.pausetransact.value,h=e.form.getFormItemsValue(t,"effectstatus").value,v=1*c[0].data.values.occupationmny.value;if(10==h){if(0==v&&(m=!1),10==h&&!m)return void(0,r.toast)({color:"warning",content:d.state.json["public-000154"]});if(y)return void(0,r.toast)({color:"warning",content:d.state.json["public-000155"]})}var g=null;switch(f.objtype.value){case"0":g=f.customer;break;case"1":g=f.supplier;break;case"2":g=f.pk_deptid_v;break;case"3":g=f.pk_psndoc}var _={pk_bill:p[o],pkBill:o,pk_org:p.pk_org,pk_item:c[0].data.values[s].value,billType:p.pk_billtype,ts:p.ts,objtype:f.objtype,objTypeValue:g,customer:p.customer,supplier:p.supplier,pk_deptid:p.pk_deptid_v,pk_psndoc:p.pk_psndoc,occupationmnySum:v,pk_tradetype:p.pk_tradetype,pageId:e.getSearchParam("p"),appcode:e.getSearchParam("c"),effectstatus:h,scene:e.getUrlParam("scene")};switch(o){case"pk_payablebill":case"pk_paybill":l="20080PREV",n="20080NOWV",i="20082002";break;case"pk_recbill":case"pk_gatherbill":l="20060PREV",n="20060NOWV",i="20062002"}var k=n,I="/nowv";0==h&&(k=l,I="/prev");var w=e.getUrlParam("scene"),T="appcode="+i+"&pagecode="+k+"&c="+i+"&p="+k+"&scene="+w+"&transAppCode="+e.getUrlParam("appcode")+"&transPageCode="+e.getUrlParam("pagecode")+"&Id="+JSON.stringify(p[o]);b&&m&&!y&&(e.ViewModel.setData("WholeVerifyDatas",_),window.top===window.parent?e.pushTo(I,{appcode:i,pagecode:k,transAppCode:e.getSearchParam("c"),transPageCode:e.getSearchParam("p"),scene:w,Id:p[o]}):(window.location.hash=I+"?"+T,window.parent.location.hash=I+"?"+T))}else(0,r.toast)({color:"warning",content:d.state.json["public-000153"]})}else(0,r.toast)({color:"warning",content:d.state.json["public-000156"]});else(0,r.toast)({color:"warning",content:d.state.json["public-000152"]})},t.WholeVerify=function(e,t,a,s,d){var u=(0,r.getBusinessInfo)().businessDate,c=e.form.getAllFormValue(t).rows[0].values,p=e.form.getFormItemsValue(t,"effectstatus").value,f=e.cardTable.getAllRows(a,!1),b=!0,m=e.form.getFormItemsValue(t,"billdate").value.substring(0,10),y=Date.parse(m);if(Date.parse(u)<y&&(b=!1),b){var h=!0;if(f.length>0)var v=f[0].values.objtype.value;var g="customer";switch(v){case"0":g="customer";break;case"1":g="supplier";break;case"2":g="pk_deptid_v";break;case"3":g="pk_psndoc"}for(var _=0;_<f.length;_++)if(f[_].values.objtype.value!=v){h=!1;break}if(h){var k=!0;if(f.length>0)var I=f[0].values[g].value;if(h)for(_=0;_<f.length;_++)if(f[_].values[g].value!=I){k=!1;break}if(k){var w=!0;if(f.length>0)v=f[0].values.pk_currtype.value;for(_=0;_<f.length;_++)if(f[_].values.pk_currtype.value!=v){w=!1;break}if(w){var T=0;if(f.length>0)for(_=0;_<f.length;_++)T=(0,o.accAdd)(T,1*f[_].values.occupationmny.value);var C=!0,x=!0;if(10==p){if(0==T)return x=!1,void(0,r.toast)({color:"warning",content:d.state.json["public-000160"]});for(_=0;_<f.length;_++)if(1==f[_].values.pausetransact.value){C=!1;break}if(!C)return void(0,r.toast)({color:"warning",content:d.state.json["public-000161"]})}var S=null;switch(c.objtype.value){case"0":S=c.customer;break;case"1":S=c.supplier;break;case"2":S=c.pk_deptid_v;break;case"3":S=c.pk_psndoc}var B={pk_bill:c[s],pkBill:s,pk_org:c.pk_org,pk_item:null,billType:c.pk_billtype,ts:c.ts,objtype:c.objtype,objTypeValue:S,customer:c.customer,supplier:c.supplier,pk_deptid:c.pk_deptid_v,pk_psndoc:c.pk_psndoc,occupationmnySum:T,pk_tradetype:c.pk_tradetype,pageId:e.getSearchParam("p"),appcode:e.getSearchParam("c"),effectstatus:p,scene:e.getUrlParam("scene")};switch(s){case"pk_payablebill":case"pk_paybill":l="20080PREV",n="20080NOWV",i="20082002";break;case"pk_recbill":case"pk_gatherbill":l="20060PREV",n="20060NOWV",i="20062002"}var E=n,R="/nowv";0==p&&(E=l,R="/prev");var P=e.getUrlParam("scene"),D="appcode="+i+"&pagecode="+E+"&c="+i+"&p="+E+"&scene="+P+"&transAppCode="+e.getUrlParam("appcode")+"&transPageCode="+e.getUrlParam("pagecode")+"&Id="+JSON.stringify(c[s]);h&&k&&b&&w&&C&&x&&(e.ViewModel.setData("WholeVerifyDatas",B),window.top===window.parent?e.pushTo(R,{appcode:i,pagecode:E,transVerifyDatas:JSON.stringify(B),transAppCode:e.getSearchParam("c"),transPageCode:e.getSearchParam("p"),scene:P,Id:c[s]}):(window.location.hash=R+"?"+D,window.parent.location.hash=R+"?"+D))}else(0,r.toast)({color:"warning",content:d.state.json["public-000159"]})}else(0,r.toast)({color:"warning",content:d.state.json["public-000158"]})}else(0,r.toast)({color:"warning",content:d.state.json["public-000158"]})}else(0,r.toast)({color:"warning",content:d.state.json["public-000157"]})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.updatePandC=function(e){var t=e.props.ViewModel.getData("WholeVerifyDatas"),a=window.parent.location.hash.split("?")[1],r=a&&a.split("&");if(r&&r instanceof Array&&r.length>0){var o=r.map((function(e){if(-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array){if("ifr"===e.split("=")[0]){var a=decodeURIComponent(decodeURIComponent(e.split("=")[1])).split("#")[0]+"#/card";e="ifr="+encodeURIComponent(encodeURIComponent(a))}return"p"===e.split("=")[0]&&(e="p="+t.pageId),"c"===e.split("=")[0]&&(e="c="+t.appcode),e}})).join("&");window.parent.location.hash="#/ifr?"+o,e.props.setUrlParam({id:t.pk_bill.value})}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,l,n,i,s,d){var u=r.cacheTools.get("checkedData"),c=void 0;u&&(c={fipLink:u,pageId:e.getSearchParam("p")});(0,r.ajax)({url:"/nccloud/arap/arappub/queryBillCardByPK.do",data:c,success:function(t){var r=t.success;t.data;if(r&&t.data){var u=t.data[0].head[l].rows[0].values[a].value;e.addUrlParam({id:u}),e.setUrlParam({pk_tradetype:t.data[0].head[l].rows[0].values.pk_tradetype.value}),o(i,e.getUrlParam("id"),t.data[0],l,s),t.data[0].head&&e.form.setAllFormValue(function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a;return e}({},l,t.data[0].head[l])),t.data[0].body&&e.cardTable.setTableData(n,t.data[0].body[n]),d.toggleShow()}}})};var r=a(1);var o=r.cardCache.updateCache},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,l,n,i,s,d){var u=e.getUrlParam("pk_src"),c=void 0;u&&(c={dest_billtype:t,pk_src:u,pageId:e.getSearchParam("p")});(0,r.ajax)({url:"/nccloud/arap/arappub/cmpLinkArapCard.do",data:c,success:function(t){var r=t.success;t.data;if(r&&t.data){var u=t.data[0].head[l].rows[0].values[a].value;e.addUrlParam({id:u}),e.setUrlParam({pk_tradetype:t.data[0].head[l].rows[0].values.pk_tradetype.value}),o(i,e.getUrlParam("id"),t.data[0],l,s),t.data[0].head&&e.form.setAllFormValue(function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a;return e}({},l,t.data[0].head[l])),t.data[0].body&&e.cardTable.setTableData(n,t.data[0].body[n]),d.toggleShow()}}})};var r=a(1);var o=r.cardCache.updateCache},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=r.cacheTools.get("checkedData"),o=void 0;a&&(o={fipLink:a,pageId:e.getSearchParam("p")});(0,r.ajax)({url:"/nccloud/arap/arappub/queryGridByPK.do",data:o,success:function(a){var r=a.success,o=a.data;r&&(o?e.table.setAllTableData(t,o[t]):e.table.setAllTableData(t,{rows:[]}))}})};var r=a(1);r.cardCache.updateCache},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var o=e.getUrlParam("pk_src"),l=void 0;o&&(l={dest_billtype:a,pk_src:o,pageId:e.getSearchParam("p")});(0,r.ajax)({url:"/nccloud/arap/arappub/cmpLinkArapList.do",data:l,success:function(a){var r=a.success,o=a.data;r&&(o?e.table.setAllTableData(t,o[t]):e.table.setAllTableData(t,{rows:[]}))}})};var r=a(1)},,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t,a={times:1,num:0},r=e<0;if(t=e,Math.floor(t)===t)return a.num=e,a;var o=e+"",l=o.indexOf("."),n=o.substr(l+1).length,i=Math.pow(10,n),s=parseInt(Math.abs(e)*i+.5,10);return a.times=i,r&&(s=-s),a.num=s,a}function t(t,a,r,o){var l=e(t),n=e(a),i=l.num,s=n.num,d=l.times,u=n.times,c=d>u?d:u;switch(o){case"add":return(d===u?i+s:d>u?i+s*(d/u):i*(u/d)+s)/c;case"subtract":return(d===u?i-s:d>u?i-s*(d/u):i*(u/d)-s)/c;case"multiply":return i*s/(d*u);case"divide":return i/s*(u/d)}}return{add:function(e,a,r){return t(e,a,0,"add")},subtract:function(e,a,r){return t(e,a,0,"subtract")},multiply:function(e,a,r){return t(e,a,0,"multiply")},divide:function(e,a,r){return t(e,a,0,"divide")}}}();t.floatObj=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),n=(r=l)&&r.__esModule?r:{default:r},i=a(1);a(255);var s=i.base.NCModal,d=i.base.NCTable,u=i.base.NCDiv,c="",p=[{title:n.default.createElement("div",{fieldid:"a"},""),dataIndex:"a",key:"a",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"a"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"b"},""),dataIndex:"b",key:"b",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"c"},""),dataIndex:"c",key:"c",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"c"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"d"},""),dataIndex:"d",key:"d",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"d"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"e"},""),dataIndex:"e",key:"e",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"e"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"f"},""),dataIndex:"f",key:"f",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"f"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"g"},""),dataIndex:"g",key:"g",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"g"},e||n.default.createElement("span",null," "))}}],f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getTableData=function(){var e={},t=[],r={pk_bill:c,billType:"F0",pageId:"20060RBM_CARD"};(0,i.ajax)({url:"/nccloud/arap/recbill/linkQueryTax.do",data:r,success:function(r){var o=r.data,l=r.success;if(l){var n={};o.body.bodys.rows.forEach((function(a){n=a.values,e.a=n.customer.display,e.b=n.taxcodeid.display,n.taxrate.display?e.c=n.taxrate.display:e.c=n.taxrate.value,e.d=n.taxtype.display,e.e=n.buysellflag.display,(e.f=n.caltaxmny.display)?e.f=n.caltaxmny.display:e.f=n.caltaxmny.value,(e.g=n.local_tax_de.display)?e.g=n.local_tax_de.display:e.g=n.local_tax_de.value,t.push(JSON.parse(JSON.stringify(e)))})),a.setState({tableData:t})}else(0,i.toast)({content:a.state.json["receivablebill-000061"],color:"warning"})}})},a.state={tableData:[],json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"receivablebill",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){p=[{title:n.default.createElement("div",{fieldid:"a"},e.state.json["receivablebill-000054"]),dataIndex:"a",key:"a",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"a"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"b"},e.state.json["receivablebill-000055"]),dataIndex:"b",key:"b",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"b"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"c"},e.state.json["receivablebill-000056"]),dataIndex:"c",key:"c",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"c"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"d"},e.state.json["receivablebill-000057"]),dataIndex:"d",key:"d",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"d"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"e"},e.state.json["receivablebill-000058"]),dataIndex:"e",key:"e",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"e"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"f"},e.state.json["receivablebill-000059"]),dataIndex:"f",key:"f",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"f"},e||n.default.createElement("span",null," "))}},{title:n.default.createElement("div",{fieldid:"g"},e.state.json["receivablebill-000060"]),dataIndex:"g",key:"g",width:100,render:function(e,t,a){return n.default.createElement("div",{fieldid:"g"},e||n.default.createElement("span",null," "))}}]}))}})}},{key:"componentWillReceiveProps",value:function(e){c=e.pk_recbill,""!=e.pk_recbill&&e.show&&this.getTableData()}},{key:"render",value:function(){var e=this.props.show,t=this.state.tableData;return n.default.createElement("div",null,n.default.createElement(s,{fieldid:"taxation",id:"ModalId",className:"query-modal",show:e,size:"lg",onHide:this.props.handleModel,backdrop:"static"},n.default.createElement(s.Header,{closeButton:!0},n.default.createElement(s.Title,null,""+this.state.json["receivablebill-000062"])),n.default.createElement(s.Body,null,n.default.createElement(u,{fieldid:"ncc",areaCode:u.config.TABLE,className:"steps-content"},n.default.createElement(d,{columns:p,data:t,isDrag:!0,style:{marginRight:"20px"},scroll:{x:p.length>6?100+10*(p.length-6)+"%":"100%",y:492},loading:!1})))))}}]),t}(l.Component);t.default=f},function(e,t){e.exports=o},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,h=(0,v.getContext)(v.loginContextKeys.transtype);switch(t){case s.headButton.Refund:(0,r.ajax)({url:"/nccloud/arap/arappub/refund.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,r.toast)({color:"success",title:"退款成功"}),C.call(a,e)}});break;case s.headButton.CancelRefund:(0,r.ajax)({url:"/nccloud/arap/arappub/cancelrefund.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,r.toast)({color:"success",title:"取消退款成功"}),C.call(a,e)}});break;case s.headButton.Save:this.saveBill("/nccloud/arap/arappub/save.do");break;case s.headButton.Edit:x.call(this);break;case s.headButton.Copy:(0,y.copyBill)(this,this.getPagecode());break;case s.headButton.TaxChecked:this.handleTaxInformation();break;case s.headButton.Delete:(0,r.promptBox)({color:"warning",title:this.state.json["receivablebill-000016"],content:this.state.json["receivablebill-000017"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:this.delConfirm});break;case s.headButton.Cancel:(0,r.promptBox)({color:"warning",title:this.state.json["receivablebill-000012"],content:this.state.json["receivablebill-000018"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:this.cancel});break;case s.headButton.Add:var g=k("sessionTradeType",o.dataSource);h?g=h:g||(g=this.getPagecode()),g!=this.getPagecode()?(e.setUrlParam({status:"add",pagecode:g}),c.default.call(this,this.props)):e.setUrlParam({status:"add",pagecode:g}),this.initAdd();break;case s.headButton.Pausetrans:this.pause("/nccloud/arap/arappub/pause.do");break;case s.headButton.Cancelpause:this.pause("/nccloud/arap/arappub/cancelpause.do");break;case s.headButton.TempSave:this.saveBill("/nccloud/arap/arappub/tempsave.do");break;case s.headButton.SaveAndCommit:this.saveBill("/nccloud/arap/arappub/saveandcommit.do");break;case s.headButton.Commit:this.Info.tipUrl="/nccloud/arap/arappub/commit.do",this.commitAndUncommit();break;case s.headButton.Uncommit:this.Info.tipUrl="/nccloud/arap/arappub/uncommit.do",this.commitAndUncommit();break;case s.headButton.LinkAprv:this.setState({showApproveDetail:!0});break;case s.headButton.LinkConfer:(0,r.ajax)({url:"/nccloud/arap/arappub/linkconfer.do",async:!1,data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType},success:function(t){var a=t.data;a&&e.openTo(a.url,a.condition)}});break;case s.headButton.MadeBill:var w=[{pk_bill:e.form.getFormItemsValue(o.formId,"pk_recbill").value,billType:o.billType,tradeType:e.form.getFormItemsValue(o.formId,"pk_tradetype").value}];(0,m.default)(this,e,w,"",e.getSearchParam("c"));break;case s.headButton.BodyVerify:(0,p.BodyVerify)(e,this.formId,this.tableId,"pk_recbill","pk_recitem",this);break;case s.headButton.WholeVerify:(0,p.WholeVerify)(e,this.formId,this.tableId,"pk_recbill",this);break;case s.headButton.BillLinkQuery:this.setState({showBillTrack:!0});break;case s.headButton.LinkTbb:(0,r.ajax)({url:"/nccloud/arap/arappub/linktbb.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType},success:function(e){e.success&&(a.Info.tbbLinkSourceData=e.data,a.setState({isTbbLinkshow:!0}))}});break;case s.headButton.LinkBal:(0,f.default)(this.props,this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,this.billType,this.props.form.getFormItemsValue(this.formId,"objtype").value);break;case s.headButton.LinkVouchar:(0,b.default)(this,e,this.props.form.getAllFormValue(this.formId),this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,this.props.getSearchParam("c"));break;case s.headButton.RedBack:var B={pk_bill:this.props.getUrlParam("id"),ts:this.props.form.getFormItemsValue(this.formId,"ts").value,pageId:this.getPagecode(),billType:this.billType,tradeType:this.getPagecode()};(0,r.ajax)({url:"/nccloud/arap/arappub/redback.do",data:B,success:function(t){a.props.beforeUpdatePage(),t.data.head&&a.props.form.setAllFormValue(_({},a.formId,t.data.head[a.formId])),t.data.body&&a.props.cardTable.setTableData(a.tableId,t.data.body[a.tableId]),e.setUrlParam({status:"add",id:a.props.getUrlParam("id"),type:"redBack"}),a.state.buttonfalg=!0,a.props.cardTable.setStatus(a.tableId,"edit"),a.props.form.setFormStatus(a.formId,"edit"),a.props.form.setFormItemsDisabled(a.formId,{pk_org:!0}),a.props.updatePage(a.formId,a.tableId),a.toggleShow(),a.props.button.setButtonVisible([s.headButton.TempSave],!1)}});break;case s.headButton.Generate:(0,n.generate)(this);break;case s.headButton.LinkTerm:var E=this.props.cardTable.getCheckedRows(this.tableId),R=[];0!=E.length&&E.forEach((function(e){R.push(e.data.values.pk_recitem.value)})),(0,r.ajax)({url:"/nccloud/arap/arappub/linkterm.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType,pk_items:R,moduleId:"2006"},success:function(e){if(e.success){var t=e.data;a.Info.selectedPKS=R,a.Info.linkTermData=t,a.handleLinkTerm()}}});break;case s.headButton.LinkDeal:(0,r.ajax)({url:"/nccloud/arap/arappub/linkdeal.do",data:{pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,billType:this.billType},success:function(e){if(e.success){var t=e.data;a.Info.combinedExaminationData=t,a.handleCombined()}}});break;case s.headButton.ReceiptCheck:if("add"==e.getUrlParam("status"))return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000037"]});(P={}).pk_billid=e.getUrlParam("id"),P.pk_billtype=this.props.form.getFormItemsValue(this.formId,"pk_billtype").value,P.pk_tradetype=this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value,P.pk_org=this.props.form.getFormItemsValue(this.formId,"pk_org").value,(0,i.imageView)(P,"iweb");break;case s.headButton.ReceiptScan:if("add"==e.getUrlParam("status"))return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000038"]});var P,D=this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value,A=e.createMasterChildData(D,o.formId,o.tableId);(P={}).pk_billid=e.getUrlParam("id"),P.pk_billtype=A.head.head.rows[0].values.pk_billtype.value,P.pk_tradetype=A.head.head.rows[0].values.pk_tradetype.value,P.pk_org=A.head.head.rows[0].values.pk_org.value,P.BillType=A.head.head.rows[0].values.pk_tradetype.value,P.BillDate=A.head.head.rows[0].values.creationtime.value,P.Busi_Serial_No=A.head.head.rows[0].values.pk_recbill.value,P.OrgNo=A.head.head.rows[0].values.pk_org.value,P.BillCode=A.head.head.rows[0].values.billno.value,P.OrgName=A.head.head.rows[0].values.pk_org.display,P.Cash=A.head.head.rows[0].values.money.value,(0,i.imageScan)(P,"iweb");break;case s.headButton.Print:this.onPrint();break;case s.headButton.Output:this.printOutput();break;case s.headButton.OfficalPrint:this.officalPrintOutput();break;case s.headButton.CancelPrint:this.cancelPrintOutput();break;case s.headButton.ExportData:this.state.forceRender&&this.setState({forceRender:!1});var F=e.getUrlParam("id"),j=[];j.push(F),this.Info.selectedPKS=j,this.props.modal.show("exportFileModal");break;case s.headButton.AttachManage:if("add"==e.getUrlParam("status")||"copy"==e.getUrlParam("copyFlag")||"redBack"==e.getUrlParam("writebackFlag"))return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000019"]});this.setState({showUploader:!0,target:null});break;case s.headButton.Refresh:(0,r.ajax)({url:"/nccloud/arap/arappub/cardRefresh.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType},success:function(e){(0,r.toast)({color:"success",title:a.state.json["receivablebill-000069"]}),C.call(a,e)},error:function(e){a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]}),T(o.pkname,a.props.getUrlParam("id"),o.dataSource),a.toggleShow();var t=String(e),l=t.substring(6,t.length);(0,r.toast)({color:"danger",content:l})}});break;case s.headButton.SpecialInvoice:S.call(this,0);break;case s.headButton.GeneralInvoice:S.call(this,1);break;case s.headButton.ElectronicInvoice:S.call(this,2);break;case s.headButton.OilSpecialInvoice:S.call(this,3);break;case s.headButton.OilGeneralInvoice:S.call(this,4);break;case s.headButton.OilElectronicInvoice:S.call(this,5);break;case s.headButton.RedInvoice:var O=this.props.form.getFormItemsValue(this.formId,"money")?this.props.form.getFormItemsValue(this.formId,"money").value:0,V=this.props.form.getFormItemsValue(this.formId,"customer")?this.props.form.getFormItemsValue(this.formId,"customer").display:null;if(O>=0)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000073"]});if(!V)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000074"]});var q=null,U=function(e){var t=null,a=!1,o=e.props.form.getFormItemsValue(e.formId,"pk_recbill")?e.props.form.getFormItemsValue(e.formId,"pk_recbill").value:null,l=e.props.form.getFormItemsValue(e.formId,"pk_billtype")?e.props.form.getFormItemsValue(e.formId,"pk_billtype").value:null,n=e.props.cardTable.getRowsByIndexs(e.tableId,0);if(n){var i=n[0].values.top_billtype?n[0].values.top_billtype.value:null;l===i&&(t=n[0].values.top_billid?n[0].values.top_billid.value:null)}return(0,r.ajax)({url:"/nccloud/arap/recbill/querybulebill.do",data:{pk_bill:o,billType:l},async:!1,success:function(e){},error:function(e){a=!0;var t=String(e.message);(0,r.toast)({color:"danger",content:t})}}),{pkBillBlue:t,isExit:a}}(this);if(U.isExit)return;var M=U.pkBillBlue;M&&(q={pkBillBlue:M,amountRed:l.floatObj.multiply(O,-1),customer:V}),this.invoiceComponent.setBillParams({pkBill:this.props.getUrlParam("id"),tradeType:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").value:null,billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null,invoiceIinformation:q,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null},(function(){a.invoiceComponent.redRush.show()}));break;case s.headButton.MaintainTaxInvoice:this.invoiceComponent.setBillParams({pkBill:this.props.getUrlParam("id"),tradeType:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").value:null,billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null},(function(){a.invoiceComponent.linkSituation.show()}));break;case s.headButton.LinkTaxInvoice:this.invoiceComponent.setBillParams({pkBill:this.props.getUrlParam("id"),tradeType:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").value:null,billType:this.props.form.getFormItemsValue(this.formId,"pk_billtype")?this.props.form.getFormItemsValue(this.formId,"pk_billtype").value:null},(function(){a.invoiceComponent.linkInvoice.show()}));break;case s.bodyButton.AddLine:if(null!=this.props.form.getFormItemsValue(this.formId,"pk_org").value&null!=this.props.form.getFormItemsValue(this.formId,"pk_currtype").value){var N=e.cardTable.getNumberOfRows(this.tableId);(0,r.ajax)({url:"/nccloud/arap/recbill/addline.do",data:this.props.createMasterChildData(this.getPagecode(),this.formId,this.tableId),success:function(e){e.data&&(e.data.head&&a.props.form.setAllFormValue(_({},a.formId,e.data.head[a.formId])),e.data.body&&a.props.cardTable.addRow(a.tableId,N,e.data.body[a.tableId].rows[0].values))}})}break;case s.bodyButton.DelLine:(0,n.delLine)(this),this.onSelected();break;case s.bodyButton.CopyLine:(0,n.copyLine)(this,o.dataSource)&&this.setState({buttonfalg:!1},(function(){(0,u.cardBodyControl)(e,a.state.buttonfalg,a)}));break;case s.bodyButton.PasteLine:(0,n.pasteLine)(this);break;case s.bodyButton.PasteToEndLine:(0,n.pasteToEndLine)(this,o.dataSource);break;case s.bodyButton.CancelLine:this.setState({buttonfalg:!0},(function(){(0,u.cardBodyControl)(e,a.state.buttonfalg,a)})),this.onSelected();break;default:var L=(0,d.getTransferInfo)(this,t);L&&(0,r.ajax)({url:"/nccloud/arap/arappub/queryrelatedapp.do",data:{billType:L.src_billtype},success:function(t){if(t){I(L.src_billtype+L.transtypes[0],"transfer.dataSource",L.busitypes);var r=k("sessionTradeType",o.dataSource);h?r=h:r||(r=a.getPagecode());var l="/"+L.src_billtype;e.pushTo(l,{src_appcode:t.data.appcode,src_tradetype:L.transtypes[0],dest_billtype:a.billType,dest_tradetype:r})}}})}},t.refreshBill=C,t.cardBillEdit=x;var r=a(1),o=a(191),l=a(246),n=a(7),i=a(28),s=a(5),d=a(201),u=a(6),c=g(a(236)),p=a(237),f=g(a(24)),b=g(a(202)),m=g(a(184)),y=a(187),h=a(221),v=a(8);function g(e){return e&&e.__esModule?e:{default:e}}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k=r.cardCache.getDefData,I=r.cardCache.setDefData,w=r.cardCache.updateCache,T=r.cardCache.deleteCacheById;function C(e){e.data?(w(o.pkname,this.props.getUrlParam("id"),e.data,this.formId,o.dataSource),e.data.head&&this.props.form.setAllFormValue(_({},this.formId,e.data.head[this.formId])),e.data.body&&this.props.cardTable.setTableData(this.tableId,e.data.body[this.tableId])):(this.props.form.EmptyAllFormValue(this.formId),this.props.cardTable.setTableData(this.tableId,{rows:[]})),this.toggleShow()}function x(){var e=this;this.props.cardTable.selectAllRows(this.tableId,!1);var t=0,a=this.props.getUrlParam("scene"),o=this.props.form.getFormItemsValue(this.formId,"billno").value,l=!0;if("approve"!=a&&"approvesce"!=a||(t=1,(0,r.ajax)({url:"/nccloud/riart/message/list.do",async:!1,data:{billno:o,isread:"N"},success:function(t){t.data&&t.data.total<1&&((0,r.toast)({content:e.state.json["receivablebill-000035"],color:"warning"}),l=!1)}})),"zycl"==a&&(t=2,(0,r.ajax)({url:"/nccloud/ssctp/sscbd/SSCTaskHandlePendingNumAction.do",async:!1,data:{billno:o},success:function(t){t.data&&t.data.total<1&&((0,r.toast)({content:e.state.json["receivablebill-000036"],color:"warning"}),l=!1)}})),l){var n={pk_bill:this.props.getUrlParam("id"),billType:this.billType,sence:t,pageId:this.getPagecode(),appcode:this.props.getSearchParam("c")};(0,r.ajax)({url:"/nccloud/arap/arappub/edit.do",data:n,success:function(t){t.success&&(e.props.setUrlParam({status:"edit"}),e.state.buttonfalg=!0,e.props.cardTable.setStatus(e.tableId,"edit"),e.props.form.setFormStatus(e.formId,"edit"),e.props.resMetaAfterPkorgEdit(),t.data&&t.data.head&&(e.props.form.setFormItemsDisabled(e.formId,t.data.head),e.headBack=t.data.headBack),t.data&&t.data.body&&(e.props.cardTable.setColEditableByKey(e.tableId,t.data.body,!0),e.bodyBack=t.data.body),e.headBack&&!t.data&&(e.props.form.setFormItemsDisabled(e.formId,e.headBack),e.props.cardTable.setColEditableByKey(e.tableId,e.bodyBack,!1)),(0,h.cardFieldsEditable)(e),e.props.form.setFormItemsDisabled(e.formId,{pk_org:!0}),e.toggleShow())}})}}function S(e){var t=this;(0,r.ajax)({url:"/nccloud/arap/recbill/invgenerate.do",data:{pk_bill:this.props.getUrlParam("id"),pageId:this.getPagecode(),billType:this.billType,invoiceType:e},success:function(e){var a=e.success,o=e.data;a&&(o&&o.message?(0,r.toast)({duration:"infinity",color:"success",content:o.message}):(0,r.toast)({color:"success",content:t.state.json["receivablebill-000025"]}))}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,r=this;if(1==e.transferTable.getTransformFormAmount(l.leftarea))return void i.default.call(this,e,t);switch(t){case"Cancel":(0,o.promptBox)({color:"warning",title:this.state.json["receivablebill-000041"],content:this.state.json["receivablebill-000042"],beSureBtnName:this.state.json["receivablebill-000043"],cancelBtnName:this.state.json["receivablebill-000044"],beSureBtnClick:function(){if(a.props.getUrlParam("id")){a.props.setUrlParam({status:"browse"});var t=a.props.getUrlParam("id"),r=c(t,l.dataSource);r&&(a.props.beforeUpdatePage(),a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]}),a.props.form.setAllFormValue(s({},a.formId,r.head[a.formId])),a.props.cardTable.setTableData(a.tableId,r.body[a.tableId]),a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse"),a.props.updatePage(a.formId,a.tableId),a.toggleShow())}else e.transferTable.setTransformFormStatus(l.leftarea,{status:!1,onChange:function(e,t){}})}});break;case"Delete":(0,o.promptBox)({color:"warning",title:this.state.json["receivablebill-000016"],content:this.state.json["receivablebill-000017"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:function(){(0,o.ajax)({url:"/nccloud/arap/arappub/delete.do",data:[{pk_bill:a.props.getUrlParam("id"),ts:a.props.form.getFormItemsValue(a.formId,"ts").value,billType:a.billType}],success:function(t){1==e.transferTable.getTransformFormAmount(l.leftarea)?history.go(-1):(u(l.pkname,e.getUrlParam("id"),l.dataSource),e.transferTable.setTransformFormStatus(l.leftarea,{status:!1,onChange:function(e,t){(0,o.toast)({color:"success",content:r.state.json["receivablebill-000034"]})}}))}})}});break;case"Copy":(0,o.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:e.getUrlParam("id"),ts:this.props.form.getFormItemsValue(this.formId,"ts").value,pageId:this.getPagecode(),billType:this.billType,tradeType:this.getPagecode()},success:function(t){t.data&&(t.data.head&&(a.props.form.EmptyAllFormValue(a.formId),a.props.form.setAllFormValue(s({},a.formId,t.data.head[a.formId]))),t.data.body&&(a.props.cardTable.setTableData(a.tableId,{rows:[]}),a.props.cardTable.setTableData(a.tableId,t.data.body[a.tableId]))),a.props.setUrlParam({status:"add"}),a.props.addUrlParam({operFlag:"copy"}),a.state.buttonfalg=!0,e.resMetaAfterPkorgEdit(),a.props.form.setFormItemsDisabled(a.formId,{pk_org:!1}),a.toggleShow()}});break;default:i.default.call(this,e,t)}},t.setValue=function(e,t){this.props.beforeUpdatePage(),t.data.head&&t.data.head[l.formId]&&e.form.setAllFormValue(s({},l.formId,t.data.head[l.formId]));t.data.body&&t.data.body[l.tableId]&&e.cardTable.updateDataByRowId(this.tableId,t.data.body[this.tableId]);for(var a=this.props.form.getFormItemsValue(this.formId,"pk_recbill").value,r=this.props.createMasterChildData(this.getPagecode(),this.formId,this.tableId),o=[],n=1*this.props.cardTable.getNumberOfRows(this.tableId),i=0;i<n;i++)o.push(this.props.cardTable.getValByKeyAndIndex(this.tableId,i,"top_itemid").value);e.transferTable.savePk(e.getUrlParam("dataSource"),o),"add"==e.getUrlParam("status")?d(a,r,l.formId,l.dataSource):p(l.pkname,a,r,l.formId,l.dataSource);this.props.updatePage(this.formId,this.tableId),this.props.transferTable.setTransformFormStatus(l.leftarea,{status:!0})};var r,o=a(1),l=a(191),n=a(253),i=(r=n)&&r.__esModule?r:{default:r};function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}o.cardCache.setDefData,o.cardCache.getDefData;var d=o.cardCache.addCache,u=(o.cardCache.getNextId,o.cardCache.deleteCacheById),c=o.cardCache.getCacheById,p=o.cardCache.updateCache;o.cardCache.getCurrentLastId},function(e,t,a){var r=a(256);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"#ModalId {\n  background: rgba(0, 0, 0, 0.5);\n  text-align: center;\n}\n#ModalId .u-modal-dialog {\n  min-height: 600px;\n}\n#ModalId .u-modal-header {\n  border-radius: 3px 3px 0px 0px;\n  padding: 10px 15px;\n}\n#ModalId .u-modal-dialog .u-modal-content .u-modal-body {\n  padding: 0;\n}\n#ModalId .u-table-body {\n  min-height: 502px;\n}\n#ModalId .u-table-content {\n  position: relative;\n  min-height: 492px;\n  border-right: none;\n  border-left: none;\n}\n#ModalId .steps-content {\n  padding: 0 20px;\n  min-height: 522px;\n  min-width: 250px;\n  margin-top: 10px;\n}\n#ModalId .steps-content .u-table-header .u-table-thead tr:not(th:last-child) {\n  text-align: center;\n  border-right: 1px solid #d0d0d0;\n}\n#ModalId .steps-action {\n  margin-top: 24px;\n}\n#ModalId .querymodal-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#ModalId .querymodal-tit-close {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  line-height: 20px;\n}\n#ModalId .querymodal-tit-close:hover {\n  cursor: pointer;\n}\n#ModalId .hesuanzhangbu {\n  width: 200px;\n  text-align: left;\n  margin-left: -60px;\n}\n#ModalId .first-page-radio {\n  margin-top: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#ModalId .first-page-radio .radios {\n  margin-left: 50px;\n}\n#ModalId .first-page-radio span {\n  margin-left: 40px;\n}\n#ModalId .last {\n  margin-bottom: 15px;\n}\n#ModalId .u-radio-group .u-radio-label {\n  width: 120px;\n  font-size: 13px;\n  padding-left: 0px;\n}\n#ModalId .form-item-class {\n  width: 200px;\n  background-color: yellow;\n}\n#ModalId .secont-content-footer {\n  margin: 20px 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#ModalId .secont-content-footer span {\n  margin-right: 10px;\n}\n#ModalId .second-radios {\n  margin: 0 0 20px 80px;\n}\n#ModalId .row-class {\n  margin-top: 20px;\n}\n#ModalId .u-label {\n  height: 30px;\n  line-height: 30px;\n  margin: 0 60px 0 0px;\n  min-width: 70px;\n  width: 70px;\n  text-align: right;\n}\n#ModalId .u-input-group .u-form-control {\n  margin-bottom: -9px;\n}\n#ModalId .finance {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 440px;\n}\n#ModalId .finance .finance-refer {\n  width: 360px;\n}\n#ModalId .pub-droplist {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 440px;\n}\n#ModalId .pub-droplist .pub-droplist-cont {\n  width: 360px;\n}\n#ModalId .pub-dreder {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 440px;\n}\n#ModalId .pub-dreder .pub-dreder-cont {\n  width: 360px;\n}\n#ModalId .lable {\n  display: inline-block;\n  height: 30px;\n  line-height: 30px;\n  min-width: 80px;\n  width: 80px;\n  text-align: right;\n}\n",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifierSearchMetas=void 0;var r=a(1);t.modifierSearchMetas=function(e,t,a,o,l,n){return a[e].items.map((function(a){if(a.isShowUnit=!1,"refer"!=a.itemtype)return!0;switch(a.isMultiSelectedEnabled=!0,a.isShowDisabledData=!0,a.unitValueIsNeeded=!1,a.attrcode){case"pk_tradetype":a.refName=n.state.json["public-000151"],a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",parentbilltype:"F0,F1,F2,F3"}};break;case"customer":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}};break;case"supplier":a.isShowDisabledData=!1,a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}};break;case"pk_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}};break;case"pk_psndoc":a.isShowUnit=!0,a.isShowDimission=!0,a.unitCondition=function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}};break;case"pk_costsubj":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}};break;case"material":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l,matcustcode:t.search.getSearchValByField(e,"bodys.matcustcode")?t.search.getSearchValByField(e,"bodys.matcustcode").value.firstvalue:null,GridRefActionExt:"nccloud.web.arap.ref.before.MaterialGridSqlBuilder"}};break;case"ordercubasdoc":a.queryCondition=function(){return"F0"==o?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}:{isDataPowerEnable:"Y",pk_org:l}};break;case"pk_balatype":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_billtype:o,GridRefActionExt:"nccloud.web.arap.ref.before.BalatypeSqlBuilder"}};break;case"sett_org":a.queryCondition=function(){return a.isShowUnit=!1,{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"so_ordertype":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",parentbilltype:o}};break;case"so_transtype":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}};break;case"so_org":a.queryCondition=function(){return"F0"==o||"F2"==o?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}:{isDataPowerEnable:"Y",pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"so_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return a.isShowUnit=!0,"F0"==o||"F2"==o?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}:{isDataPowerEnable:"Y",pk_org:l}};break;case"so_psndoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return a.isShowUnit=!0,"F0"==o||"F2"==o?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}:{busifuncode:"all",isDataPowerEnable:"Y",pk_org:l}};break;case"subjcode":a.queryCondition=function(){var e=null;return(0,r.ajax)({url:"/nccloud/arap/arappub/arapQueryAccountBookAction.do",data:{pk_org:l},async:!1,success:function(t){t.success&&(e=t.data)}}),{isDataPowerEnable:"Y",pk_accountingbook:e,DataPowerOperationCode:"fi",datestr:(0,r.getBusinessInfo)().businessDate}};break;case"pk_pcorg":a.queryCondition=function(){return"F0"==o||"F2"==o?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y"}:{isDataPowerEnable:"Y"}};break;case"pu_org":a.queryCondition=function(){return{isDataPowerEnable:"Y",pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"pu_org_v":a.isShowUnit=!1,a.queryCondition=function(){return{isDataPowerEnable:"Y",pkOrgs:l,VersionStartDate:(0,r.getBusinessInfo)().businessDate,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}};break;case"pu_deptid":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return"F1"==o||"F3"==o?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}:{busifuncode:"all",isDataPowerEnable:"Y",pk_org:l}};break;case"pu_psndoc":a.isShowUnit=!0,a.unitCondition=function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},a.queryCondition=function(){return"F3"==o||"F1"==o?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}:{busifuncode:"all",isDataPowerEnable:"Y",pk_org:l}};break;case"pk_areacl":a.queryCondition=function(){return{isDataPowerEnable:"Y"}};break;case"project":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}};break;case"project_task":a.queryCondition=function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l,project:t.search.getSearchValByField(e,"project")?t.search.getSearchValByField(e,"project").value.firstvalue:null,TreeRefActionExt:"nccloud.web.arap.ref.before.ProjectTaskSqlBuilder"}};break;case"costcenter":a.queryCondition=function(){var a=t.search.getSearchValByField(e,"pk_pcorg")?t.search.getSearchValByField(e,"pk_pcorg").value.firstvalue:null;return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_pcorg:a,pk_org:a,orgType:"pk_profitcenter",TreeRefActionExt:"nccloud.web.arap.ref.before.CostCenterSqlBuilder"}};break;default:a.queryCondition=function(){return{pk_org:l,isDataPowerEnable:"Y"}}}})),t.meta.setMeta(a),!0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,n){var i=e.state,s=i.verificationObj,p=i.pk_tradetype,f=i.objTypeValue,b=i.value;return React.createElement("div",{className:"search-contions nc-theme-gray-area-bgc"},React.createElement("div",{className:"querycons-style"},React.createElement("div",{className:"contions-box contions-box-select"},React.createElement(d,{fieldid:"verificationObj",value:s.display,onChange:function(t){s.display=t.display,s.value=t.value,f={display:null,value:null},e.setState({verificationObj:s,objTypeValue:f})}},t)),React.createElement("div",{className:"contions-box"},React.createElement("div",{className:"refer"},React.createElement("div",{className:"refer-style"},function(e){var t=e.state,a=t.verificationObj,r=t.objTypeValue,l=t.pk_org;switch(a.value){case"0":return React.createElement(o.default,{fieldid:"CustomerDefaultTreeGridRef",tag:"CustomerDefaultTreeGridRef",refcode:"uapbd/refer/customer/CustomerDefaultTreeGridRef/index.js",value:{refname:r.display,refpk:r.value},queryCondition:function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}},isMultiSelectedEnabled:!1,onChange:function(t){r.value=t.refpk,r.display=t.refname,e.setState({objTypeValue:r},(function(){}))},placeholder:r.display||e.state.json["verificationsheet-000000"]});case"1":return React.createElement(o.default,{fieldid:"SupplierRefTreeGridRef",tag:"SupplierRefTreeGridRef",refcode:"uapbd/refer/supplier/SupplierRefTreeGridRef/index.js",value:{refname:r.display,refpk:r.value},queryCondition:function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}},onChange:function(t){r.value=t.refpk,r.display=t.refname,e.setState({objTypeValue:r})},placeholder:r.display||e.state.json["verificationsheet-000001"]});case"2":return React.createElement(o.default,{fieldid:"DeptTreeRef",tag:"DeptTreeRef",refcode:"uapbd/refer/org/DeptTreeRef/index.js",value:{refname:r.display,refpk:r.value},isShowUnit:!0,unitCondition:function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},queryCondition:function(){return{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}},onChange:function(t){r.value=t.refpk,r.display=t.refname,e.setState({objTypeValue:r})},placeholder:r.display||e.state.json["verificationsheet-000002"]});case"3":return React.createElement(o.default,{fieldid:"PsndocTreeGridRef",tag:"PsndocTreeGridRef",refcode:"uapbd/refer/psninfo/PsndocTreeGridRef/index.js",value:{refname:r.display,refpk:r.value},isShowUnit:!0,unitCondition:function(){return{pkOrgs:l,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},queryCondition:function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:l}},onChange:function(t){r.value=t.refpk,r.display=t.refname,e.setState({objTypeValue:r})},placeholder:r.display||e.state.json["verificationsheet-000003"]})}}(e)))),React.createElement("div",{className:"contions-box"},React.createElement("div",{className:"refer"},React.createElement("div",{className:"refer-style"},React.createElement(o.default,{fieldid:"Transtype",tag:"Transtype",refcode:"uap/refer/riart/transtype/index.js",value:{refname:p.display,refpk:p.value},queryCondition:function(){return{parentbilltype:"F0,F1,F2,F3"}},onChange:function(t){p.value=t.refpk,p.display=t.refname,e.setState({pk_tradetype:p})},placeholder:p.display||e.state.json["verificationsheet-000016"]})))),React.createElement("div",{className:"contions-box picker"},React.createElement("div",{className:"refer"},React.createElement("div",{className:"refer-style"},React.createElement(u,{fieldid:"date",format:"YYYY-MM-DD",onChange:function(t){e.setState({value:t})},showClear:!0,showOk:!0,className:"nc-input",value:b,placeholder:e.state.json["verificationsheet-000017"],dateInputPlaceholder:[e.state.json["verificationsheet-000018"],e.state.json["verificationsheet-000019"]]})))),React.createElement("div",{className:"contions-box-query"},React.createElement("div",{className:"refer-query"},React.createElement("div",{className:"search"},a({area:"list_head_query",buttonLimit:3,onButtonClick:l.buttonClick.bind(e,e),popContainer:document.querySelector(".header-button-area")})),React.createElement("div",{className:"heigh-search"},r(n,{isSynInitAdvSearch:!0,clickSearchBtn:l.searchBtnClick.bind(e,e),showAdvBtn:!0,addAdvBody:c.bind(e,e),oid:e.props.meta.oid,onlyShowSuperBtn:!0,replaceSuperBtn:e.state.json["verificationsheet-000024"],advSearchClearEve:l.advSearchClearEve.bind(e,e)}))))))};var r=a(1),o=i(a(10)),l=a(326),n=i(a(330));function i(e){return e&&e.__esModule?e:{default:e}}a(333);var s=r.base.NCDatePicker,d=r.base.NCSelect,u=s.NCRangePicker;function c(e){var t=e.props.ViewModel.getData("WholeVerifyDatas"),a=e.state.schemeData;return React.createElement(n.default,{pkOrg:t&&t.pk_org.value,schemeData:a,handleAddAdvBodyCons:e.handleAddAdvBodyCons})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.updatePaCFV=function(e,t){var a=e.props.ViewModel.getData("WholeVerifyDatas").pkBill,r=void 0,o=void 0,l=void 0;switch(a){case"pk_payablebill":case"pk_paybill":r="20080PREV",o="20080NOWV",l="20082002";break;case"pk_recbill":case"pk_gatherbill":r="20060PREV",o="20060NOWV",l="20062002"}var n=o;"#/prev"==t&&(n=r);var i=window.parent.location.hash.split("?")[1],s=i&&i.split("&");if(s&&s instanceof Array&&s.length>0){var d=s.map((function(e){if(-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array){if("ifr"===e.split("=")[0]){var a=decodeURIComponent(decodeURIComponent(e.split("=")[1])).split("#")[0]+t;e="ifr="+encodeURIComponent(encodeURIComponent(a))}return"p"===e.split("=")[0]&&(e="p="+n),"c"===e.split("=")[0]&&(e="c="+l),e}})).join("&");window.parent.location.hash="#/ifr?"+d}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClick=void 0;var r,o=a(338),l=(r=o)&&r.__esModule?r:{default:r};t.buttonClick=l.default},,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.searchId="20080PBM_query",t.headId="20080PBM_head",t.bodyId="20080PBM_bodys",t.pagecode="20080PBM_TRANSFER",t.mainPageCode="20080PBM_TRANSFERMAIN",t.mainCode="transfermain",t.billType="F1",t.dataSource="fi.arap.payablebill.transfer"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.searchId="20060GBM_query",t.headId="20060GBM_head",t.bodyId="20060GBM_bodys",t.pagecode="20060GBM_TRANSFER",t.mainPageCode="20060GBM_TRANSFERMAIN",t.mainCode="transfermain",t.billType="F2",t.dataSource="fi.arap.gatherbill.transfer"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.searchId="transfer_qry",t.headId="transfer_list",t.bodyId="transfer_card",t.pagecode="400600200_transfer",t.mainPageCode="20060GBM_TRANSFERMAIN",t.mainCode="transfermain",t.billType="Z3",t.dataSource="fi.arap.salebill.transfer"},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),n=x(l),i=a(1),s=a(305),d=a(254),u=x(a(247)),c=a(6),p=x(a(25)),f=x(a(175)),b=a(191),m=a(16),y=a(20),h=a(36),v=a(7),g=a(221),_=x(a(248)),k=a(238),I=a(8),w=x(a(239)),T=x(a(240)),C=x(a(26));function x(e){return e&&e.__esModule?e:{default:e}}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(27);var B=i.base.NCButton,E=(i.base.NCBackBtn,i.base.NCDiv),R=i.base.NCAffix,P=i.high.Inspection,D=i.high.BillTrack,A=i.high.NCUploader,F=i.high.PrintOutput,j=i.high.ApproveDetail,O=i.cardCache.setDefData,V=i.cardCache.getDefData,q=i.cardCache.addCache,U=i.cardCache.getNextId,M=i.cardCache.deleteCacheById,N=i.cardCache.getCacheById,L=i.cardCache.updateCache,G=i.cardCache.getCurrentLastId,K=i.high.ExcelImport,Y=i.high.ApprovalTrans,H=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getPagecode=function(){var e=a.props.getUrlParam("pagecode");return e||(e=a.props.getSearchParam("p")),"20060RBM_CARD_LINK"!=e||a.props.getUrlParam("scene")||a.props.ViewModel.setData("nccloud-router-params",{scene:"linksce"}),e},a.getExportPageCode=function(){var e="20060RBM_CARD";return a.props.getUrlParam("scene")&&(e="20060RBM_CARD_LINK"),"20060RBM_CARD_LINK"!=e||a.props.getUrlParam("scene")||a.props.ViewModel.setData("nccloud-router-params",{scene:"linksce"}),e},a.initShow=function(){if("transfer"===a.props.getUrlParam("type")&&"browse"!=a.props.getUrlParam("status")){var e=a.props.transferTable.getTransferTableSelectedId(a.headId);a.getTransferValue(e)}else if(a.props.getUrlParam("scene")&&"fip"==a.props.getUrlParam("scene"))(0,w.default)(a.props,b.linkPageId,"pk_recbill",a.formId,a.tableId,b.pkname,b.dataSource,a);else if(a.props.getUrlParam("scene")&&"linksce"==a.props.getUrlParam("scene")&&"ftsLinkArap"==a.props.getUrlParam("flag"))(0,T.default)(a.props,a.billType,"pk_recbill",a.formId,a.tableId,b.pkname,b.dataSource,a);else if("copy"===a.props.getUrlParam("type"))(0,i.ajax)({url:"/nccloud/arap/arappub/copy.do",data:{pk_bill:a.props.getUrlParam("id"),pageId:a.getPagecode(),billType:a.billType,type:1,tradeType:a.getPagecode()},success:function(e){a.props.beforeUpdatePage(),e.data&&(e.data.head&&a.props.form.setAllFormValue(S({},a.formId,e.data.head[a.formId])),e.data.body&&a.props.cardTable.setTableData(a.tableId,e.data.body[a.tableId])),a.state.buttonfalg=!0,a.props.cardTable.setStatus(a.tableId,"edit"),a.props.form.setFormStatus(a.formId,"edit"),a.props.updatePage(a.formId,a.tableId),a.toggleShow()},error:function(e){a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]}),a.props.setUrlParam({status:"browse"}),a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse"),a.toggleShow();var t=String(e),r=t.substring(6,t.length);(0,i.toast)({color:"danger",content:r})}});else if("edit"==a.props.getUrlParam("status")||"browse"==a.props.getUrlParam("status")){var t=a.props.getUrlParam("id");if(!t)return void a.toggleShow();(0,i.ajax)({url:"/nccloud/arap/recbill/cardquery.do",data:{pk_bill:t},success:function(e){a.props.beforeUpdatePage(),e.data&&(e.data.head&&a.props.form.setAllFormValue(S({},a.formId,e.data.head[a.formId])),e.data.body&&a.props.cardTable.setTableData(a.tableId,e.data.body[a.tableId])),"edit"==a.props.getUrlParam("status")?((0,g.billEditProperties)(a,a.props.getUrlParam("id"),a.billType,a.props.getSearchParam("c")),(0,g.cardFieldsEditable)(a)):a.state.buttonfalg=null,a.props.getUrlParam("scene")||a.props.setUrlParam({pagecode:e.data.head[a.formId].rows[0].values.pk_tradetype.value});var t=a.props.getUrlParam("status");a.props.cardTable.setStatus(a.tableId,t),a.props.form.setFormStatus(a.formId,t),a.props.updatePage(a.formId,a.tableId),L(b.pkname,a.props.getUrlParam("id"),e.data,a.formId,b.dataSource),a.toggleShow()}})}else"add"==a.props.getUrlParam("status")&&a.props.getUrlParam("srcbilltype")?(a.props.beforeUpdatePage(),a.data.head&&a.props.form.setAllFormValue(S({},a.formId,a.data.head[a.formId])),a.data.body&&a.props.cardTable.setTableData(a.tableId,a.data.body[a.tableId]),a.state.buttonfalg=!0,a.props.cardTable.setStatus(a.tableId,"edit"),a.props.form.setFormStatus(a.formId,"edit"),a.props.updatePage(a.formId,a.tableId),a.toggleShow()):"add"==a.props.getUrlParam("status")?a.initAdd():a.toggleShow()},a.getTransferValue=function(e){if(e){var t={data:e,pageId:a.getPagecode(),destTradetype:a.getPagecode(),srcBilltype:a.props.getUrlParam("srcBilltype")};(0,i.ajax)({url:"/nccloud/arap/arappub/transfer.do",data:t,success:function(e){e&&e.data&&(a.props.transferTable.setTransferListValue(a.leftarea,e.data),(0,g.cardFieldsEditable)(a)),a.toggleShow()}})}else a.props.transferTable.setTransferListValue(a.leftarea,[])},a.synTransferData=function(){if(1!=a.props.transferTable.getTransformFormAmount(a.leftarea)){var e=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId);a.props.transferTable.setTransferListValueByIndex(a.leftarea,e,a.transferIndex)}},a.initAdd=function(e){e||(e=!1),(0,i.ajax)({url:"/nccloud/arap/recbill/initadd.do",data:{isClearPKorg:e,appcode:a.props.getSearchParam("c"),pageId:a.getPagecode(),tradeType:a.getPagecode()},success:function(e){e.data&&(a.props.beforeUpdatePage(),a.props.form.setAllFormValue(S({},a.formId,e.data.head[a.formId])),a.props.cardTable.setTableData(a.tableId,e.data.body[a.tableId]),e.data.head[a.formId].rows[0].values.pk_org.value?(a.props.resMetaAfterPkorgEdit(),a.props.form.setFormItemsDisabled(a.formId,{pk_org:!1}),a.state.buttonfalg=!0):(a.state.buttonfalg=null,a.props.getUrlParam("type")||a.props.initMetaByPkorg()),a.props.form.setFormStatus(a.formId,"edit"),a.props.cardTable.setStatus(a.tableId,"edit"),a.props.updatePage(a.formId,a.tableId));a.toggleShow()},error:function(e){var t=String(e);"browse"!=a.props.getUrlParam("status")&&(a.props.setUrlParam({status:"browse"}),a.props.form.setFormStatus(a.formId,"browse"),a.props.cardTable.setStatus(a.tableId,"browse"),a.toggleShow());var r=t.substring(6,t.length);(0,i.toast)({color:"danger",content:r})}})},a.toggleShow=function(e){var t=a.props.getUrlParam("status");t||(t="browse");var r={};if(e)r=e.rows[0].values;else{var o=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId).head[a.formId];o&&(r=o.rows[0].values)}"browse"!=t?(a.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1}),a.refs.tradetypeBtn&&!(0,I.getContext)(I.loginContextKeys.transtype)&&a.refs.tradetypeBtn.setVisible(!1)):(r.pk_tradetype&&r.pk_tradetype.value?a.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0):a.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0}),a.refs.tradetypeBtn&&!(0,I.getContext)(I.loginContextKeys.transtype)&&a.refs.tradetypeBtn.setVisible(!0));for(var l=[],n=[],i=0;i<a.Info.allButtonsKey.length;i++){(0,c.buttonVisible)(t,r,a.Info.allButtonsKey[i],"card",a)?l.push(a.Info.allButtonsKey[i]):n.push(a.Info.allButtonsKey[i])}"browse"==t?(0,c.initCardBodybrowseControl)(a):(0,c.initCardBodyEditControl)(a.props,r.pk_org?r.pk_org.value:null,a),c.dealTranferBtns.call(a,n),c.dealSrcProjectBtns.call(a,n,a.props.cardTable.getRowsByIndexs(a.tableId,0)),a.props.button.setButtonVisible(l,!0),a.props.button.setButtonVisible(n,!1),a.props.getUrlParam("scene")&&"linksce"!=a.props.getUrlParam("scene")&&"fip"!=a.props.getUrlParam("scene")&&a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1})},a.onSelected=function(){(0,c.onSelectedCardBodyEditControl)(a)},a.delConfirm=function(e,t){(0,i.ajax)({url:"/nccloud/arap/arappub/delete.do",data:[{pk_bill:a.props.getUrlParam("id"),ts:a.props.form.getFormItemsValue(a.formId,"ts").value,billType:b.billType,extype:e,flag:t}],success:function(e){if("1"==e.data.exType)return a.Info.tipContent=e.data.message,a.Info.exType="1",a.Info.flag=!0,void a.props.modal.show("deleteCheck");var t=a.props.getUrlParam("id");M(b.pkname,t,b.dataSource);var r=U(t,b.dataSource);r?("transfer"===a.props.getUrlParam("type")&&a.props.setUrlParam({status:"browse"}),a.props.setUrlParam({id:r}),a.initShow()):(a.props.setUrlParam({id:null}),a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]}),a.toggleShow()),a.clearExType()}})},a.saveBill=function(e,t,r,o){if("/nccloud/arap/arappub/tempsave.do"!=e){var l=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId);if((0,v.delBlankLine)(a,a.tableId,a.billType,l,o),!a.props.form.isCheckNow(a.formId))return;if(!a.props.cardTable.checkTableRequired(a.tableId))return}var n=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId),s={cardData:(0,h.dealCardData)(a,n),uiState:a.props.getUrlParam("status"),extype:t,flag:r};a.props.validateToSave(s.cardData,(function(){(0,i.ajax)({url:e,data:s,success:function(t){var r=null,o=null;if(t.success){if("1"==t.data.exType)return a.Info.tipContent=t.data.message,a.Info.pk_bill=t.data.pk_bill,a.Info.ts=t.data.ts,a.Info.billCard=t.data.billCard,a.Info.tipUrl=null==t.data.pk_bill?e:"/nccloud/arap/arappub/commit.do",a.Info.exType="1",a.Info.flag=!0,void(null==t.data.pk_bill?a.props.modal.show("saveCheck"):a.commitAndUncommit());if("2"==t.data.exType)return a.Info.tipContent=t.data.message,a.Info.pk_bill=t.data.pk_bill,a.Info.ts=t.data.ts,a.Info.billCard=t.data.billCard,a.Info.tipUrl=null==t.data.pk_bill?e:"/nccloud/arap/arappub/commit.do",a.Info.exType="2",a.Info.flag=!0,void(null==t.data.pk_bill?a.props.modal.show("saveCheck"):a.commitAndUncommit());if("3"==t.data.exType)t.data.message;else if(t.data.assignInfo&&t.data.assignInfo.workflow&&("approveflow"==t.data.assignInfo.workflow||"workflow"==t.data.assignInfo.workflow))return a.Info.compositedata=t.data.assignInfo,a.Info.pk_bill=t.data.pk_bill,a.Info.ts=t.data.ts,a.Info.exType=t.data.exType,a.Info.billCard=t.data.billCard,a.Info.tipUrl="/nccloud/arap/arappub/commit.do",void a.setState({compositedisplay:!0});if(t.data){if("transfer"==a.props.getUrlParam("type"))d.setValue.call(a,a.props,t);else{a.props.beforeUpdatePage(),t.data.head&&t.data.head[a.formId]&&(a.props.form.setAllFormValue(S({},a.formId,t.data.head[a.formId])),r=t.data.head[a.formId].rows[0].values.pk_recbill.value,o=t.data.head[a.formId].rows[0].values.pk_tradetype.value),t.data.body&&t.data.body[a.tableId]&&a.props.cardTable.updateDataByRowId(a.tableId,t.data.body[a.tableId]),a.state.buttonfalg=null,a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse"),a.props.updatePage(a.formId,a.tableId);var l=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId);"add"==a.props.getUrlParam("status")?q(r,l,a.formId,b.dataSource):L(b.pkname,r,l,a.formId,b.dataSource),a.props.getUrlParam("type")&&a.props.delUrlParam("type"),a.props.getUrlParam("scene")?a.props.setUrlParam({status:"browse",id:r}):a.props.setUrlParam({status:"browse",id:r,pagecode:o})}t.data.message?(0,i.toast)({color:"danger",content:JSON.stringify(t.data.message)}):(0,i.toast)({color:"success",content:a.state.json["receivablebill-000026"]})}}a.Info.isModelSave&&(a.Info.isModelSave=!1,a.props.cardTable.closeModel(a.tableId)),"transfer"!=a.props.getUrlParam("type")&&a.toggleShow(),a.clearExType()}})}),{table1:"cardTable"},"card")},a.clearExType=function(){a.Info.tipContent="",a.Info.pk_bill=null,a.Info.ts=null,a.Info.tipUrl=null,a.Info.exType=null,a.Info.flag=!1,a.Info.compositedata=null},a.cancelClick=function(){if(null!=a.Info.pk_bill){a.props.getUrlParam("type")&&"transfer"!=a.props.getUrlParam("type")&&a.props.delUrlParam("type"),a.props.beforeUpdatePage(),a.state.buttonfalg=null,a.Info.billCard.head&&a.props.form.setAllFormValue(S({},a.formId,a.Info.billCard.head[a.formId])),a.Info.billCard.body&&a.props.cardTable.updateDataByRowId(a.tableId,a.Info.billCard.body[a.tableId]),a.props.getUrlParam("scene")?a.props.setUrlParam({status:"browse",id:null==a.Info.pk_bill?a.props.getUrlParam("id"):a.Info.pk_bill}):a.props.setUrlParam({status:"browse",id:null==a.Info.pk_bill?a.props.getUrlParam("id"):a.Info.pk_bill,pagecode:a.Info.billCard.head[a.formId].rows[0].values.pk_tradetype.value});var e=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId);a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse"),a.props.updatePage(a.formId,a.tableId),q(b.pkname,e,a.formId,b.dataSource),a.toggleShow()}a.state.compositedisplay&&a.setState({compositedisplay:!1}),a.clearExType()},a.commitAndUncommit=function(){var e=a.Info.tipUrl,t=a.Info.exType,r=a.Info.flag;(0,i.ajax)({url:e,data:{pk_bill:null==a.Info.pk_bill?a.props.getUrlParam("id"):a.Info.pk_bill,ts:null==a.Info.ts?a.props.form.getFormItemsValue(a.formId,"ts").value:a.Info.ts,pageId:a.getPagecode(),billType:a.billType,type:2,extype:t,flag:r,assignObj:a.Info.compositedata},success:function(t){if("1"==t.data.exType){var r=t.data.message;return a.Info.tipContent=r,a.Info.tipUrl=e,a.Info.exType="1",a.Info.flag=!0,void a.props.modal.show("commitAndUncommit")}if(t.data.workflow&&("approveflow"==t.data.workflow||"workflow"==t.data.workflow))return a.Info.compositedata=t.data,a.Info.tipUrl=e,void a.setState({compositedisplay:!0});if(t.success){t.data.head&&a.props.form.setAllFormValue(S({},a.formId,t.data.head[a.formId])),t.data.body&&a.props.cardTable.setTableData(a.tableId,t.data.body[a.tableId]);var o=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId);null==a.Info.pk_bill?L(b.pkname,a.props.getUrlParam("id"),o,a.formId,b.dataSource):(a.props.getUrlParam("type")&&"transfer"!=a.props.getUrlParam("type")&&a.props.delUrlParam("type"),q(b.pkname,o,a.formId,b.dataSource)),"browse"!=a.props.getUrlParam("status")&&(a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse")),a.props.setUrlParam({status:"browse",id:null==a.Info.pk_bill?a.props.getUrlParam("id"):a.Info.pk_bill}),a.state.compositedisplay&&a.setState({compositedisplay:!1}),a.clearExType(),a.toggleShow(),(0,i.toast)({color:"success",content:a.state.json["receivablebill-000025"]})}}})},a.getTableHead=function(e){return n.default.createElement("span",null,a.props.button.createButtonApp({area:"card_body",buttonLimit:3,onButtonClick:s.buttonClick.bind(a),popContainer:document.querySelector(".header-button-area")}))},a.handleTaxInformation=function(){a.setState({isTaxInformationModelShow:!a.state.isTaxInformationModelShow})},a.handleCombined=function(){a.setState({isCombinedExaminationModelShow:!a.state.isCombinedExaminationModelShow})},a.handleLinkTerm=function(){a.setState({isLinkTermModelShow:!a.state.isLinkTermModelShow})},a.closeApprove=function(){a.setState({showApproveDetail:!1})},a.onHideUploader=function(){a.setState({showUploader:!1})},a.setFormTsVal=function(e){a.props.form.setFormItemsValue(a.formId,{ts:{value:e}})},a.pause=function(e){var t=a.props.cardTable.getCheckedRows(a.tableId);if(0!=t.length){var r=[];t.forEach((function(e){r.push(e.data.values.pk_recitem.value)}));var o={pk_items:r,pk_bill:a.props.getUrlParam("id"),ts:a.props.form.getFormItemsValue(a.formId,"ts").value,pageId:a.getPagecode(),billType:a.billType};(0,i.ajax)({url:e,data:o,success:function(e){if(e.data.message?(0,i.toast)({duration:"infinity",color:e.data.PopupWindowStyle,content:e.data.message}):(0,i.toast)({color:"success",content:a.state.json["receivablebill-000025"]}),e.data.billCard){e.data.billCard.head&&a.props.form.setAllFormValue(S({},a.formId,e.data.billCard.head[a.formId])),e.data.billCard.body&&a.props.cardTable.setTableData(a.tableId,e.data.billCard.body[a.tableId]);var t=a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId);L(b.pkname,a.props.getUrlParam("id"),t,a.formId,b.dataSource)}a.onSelected()}})}else(0,i.toast)({color:"success",content:a.state.json["receivablebill-000045"]})},a.cancel=function(){a.props.getUrlParam("type")&&"transfer"!=a.props.getUrlParam("type")&&a.props.delUrlParam("type");var e=a.props.form.getFormItemsValue(a.formId,"pk_org");if(e&&e.value&&""!=e.value||a.props.resMetaAfterPkorgEdit(),a.props.beforeUpdatePage(),a.state.buttonfalg=null,"edit"===a.props.getUrlParam("status")){a.props.setUrlParam({status:"browse"});var t=a.props.getUrlParam("id"),r=N(t,b.dataSource);r?(a.props.form.setAllFormValue(S({},a.formId,r.head[a.formId])),a.props.cardTable.setTableData(a.tableId,r.body[a.tableId]),a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse"),a.props.updatePage(a.formId,a.tableId),a.toggleShow()):a.initShow()}else if("add"===a.props.getUrlParam("status")){var o=a.props.getUrlParam("id");if(o||(o=G(b.dataSource)),null!=o&&null!=o&""!=o){a.props.setUrlParam({status:"browse",id:o});var l=N(o,b.dataSource);if(l){a.props.form.setAllFormValue(S({},a.formId,l.head[a.formId])),a.props.cardTable.setTableData(a.tableId,l.body[a.tableId]);var n=l.head[a.formId].rows[0].values.pk_tradetype.value;a.getPagecode()==n||a.props.getUrlParam("scene")||(a.props.setUrlParam({pagecode:n}),s.initTemplate.call(a,a.props)),a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse"),a.props.updatePage(a.formId,a.tableId),a.toggleShow()}else a.initShow()}else a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]}),a.props.setUrlParam({status:"browse"}),a.props.cardTable.setStatus(a.tableId,"browse"),a.props.form.setFormStatus(a.formId,"browse"),a.props.updatePage(a.formId,a.tableId),a.toggleShow()}},a.onPrint=function(){a.printData.oids=[a.props.getUrlParam("id")],a.printData.nodekey=a.props.form.getFormItemsValue(a.formId,"pk_tradetype").value,(0,i.print)("pdf","/nccloud/arap/arappub/print.do",a.printData)},a.officalPrintOutput=function(){a.printData.oids=[a.props.getUrlParam("id")],a.printData.nodekey=a.props.form.getFormItemsValue(a.formId,"pk_tradetype").value,(0,i.ajax)({url:"/nccloud/arap/arappub/officialPrint.do",data:a.printData,async:!1,success:function(e){e.success&&(0,i.print)("pdf","/nccloud/arap/arappub/print.do",a.printData,!1)}})},a.cancelPrintOutput=function(){a.printData.oids=[a.props.getUrlParam("id")],a.printData.nodekey=a.props.form.getFormItemsValue(a.formId,"pk_tradetype").value,(0,i.ajax)({url:"/nccloud/arap/arappub/cancelPrint.do",data:a.printData,async:!1,success:function(e){e.success&&(0,i.toast)({color:"success",content:e.data})}})},a.printOutput=function(){a.outputData.oids=[a.props.getUrlParam("id")],a.outputData.nodekey=a.props.form.getFormItemsValue(a.formId,"pk_tradetype").value,a.refs.printOutput.open()},a.backList=function(){"linksce"==a.props.getUrlParam("scene")||"fip"==a.props.getUrlParam("scene")?a.props.pushTo("/list",{pagecode:"20060RBM_LIST_LINK",scene:"linksce"}):a.props.pushTo("/list",{pagecode:"20060RBM_LIST"})},a.backTransfer=function(){var e=a.props.getUrlParam("dataSource"),t=V("src_appcode",e),r=(V("src_pagecode",e),"/"+a.props.getUrlParam("srcBilltype"));a.props.pushTo(r,{src_appcode:t,dest_billtype:a.billType,dest_tradetype:a.getPagecode()})},a.saveSureBtnClick=function(){var e=a.Info.tipUrl,t=a.Info.exType,r=a.Info.flag;a.saveBill(e,t,r)},a.deleteBillSureBtnClick=function(){var e=a.Info.exType,t=a.Info.flag;a.delConfirm(e,t)},a.modelSaveClick=function(e,t){a.Info.isModelSave=!0;a.saveBill("/nccloud/arap/arappub/save.do",null,null,t)},a.modelDelRow=function(e,t){(0,v.calculateHeadMoney)(a);var r=a.props.cardTable.getVisibleRows(a.tableId);r&&0!=r.length||a.props.cardTable.closeModel(a.tableId)},a.modelAddRow=function(e,t,r){if(null!=a.props.form.getFormItemsValue(a.formId,"pk_org").value){var o=a.props.cardTable.getNumberOfRows(a.tableId);(0,i.ajax)({url:"/nccloud/arap/recbill/addline.do",data:a.props.createMasterChildData(a.getPagecode(),a.formId,a.tableId),success:function(e){e.data&&(e.data.head&&a.props.form.setAllFormValue(S({},a.formId,e.data.head[a.formId])),e.data.body&&a.props.cardTable.updateDataByIndexs(a.tableId,[{index:o-1,data:{status:2,values:e.data.body[a.tableId].rows[0].values}}]))}})}else(0,i.toast)({color:"warning",content:a.state.json["receivablebill-000027"]})},a.switchTemplate=function(){var e=a.getPagecode(),t=a.props.getSearchParam("c")?a.props.getSearchParam("c"):a.props.getUrlParam("c"),r=V("sessionTradeType",b.dataSource);r||(r=b.tradeType),(0,i.ajax)({url:"/nccloud/arap/arappub/queryallbtns.do",data:{appcode:t,pagecode:e,tradetype:r,billtype:b.billType},success:function(e){var t=e.data;if(t.button){var r=t.button;a.Info.pullBillInfoVOAry=t.pullbillinfo,(0,c.getButtonsKey)(r,a.Info.allButtonsKey),a.props.button.setButtons(r)}}})},a.formId=b.formId,a.tableId=b.tableId,a.billType=b.billType,a.leftarea=b.leftarea,a.transferIndex=0,a.data=null,a.dataSource=b.dataSource,a.pkname=b.pkname,a.invoiceComponent=new _.default,a.state={isTaxInformationModelShow:!1,isCombinedExaminationModelShow:!1,isLinkTermModelShow:!1,isTbbLinkshow:!1,showBillTrack:!1,showUploader:!1,target:null,showApproveDetail:!1,buttonfalg:null,compositedisplay:!1,json:{},forceRender:!0,hideAdd:!1},a.printData={billtype:b.billType,appcode:e.getSearchParam("c"),nodekey:e.getSearchParam("p"),oids:[a.props.getUrlParam("id")],userjson:b.billType},a.outputData={billtype:b.billType,appcode:e.getSearchParam("c"),funcode:e.getSearchParam("c"),nodekey:e.getSearchParam("p"),oids:[a.props.getUrlParam("id")],userjson:b.billType,outputType:"output"},a.Info={allButtonsKey:[],combinedExaminationData:[],linkTermData:[],tbbLinkSourceData:null,currentLocale:"en-US",selectedPKS:[],tipContent:null,tipUrl:null,exType:null,flag:!1,pk_bill:null,ts:null,billCard:null,compositedata:null,isModelSave:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;"20062002"==this.props.getSearchParam("c")&&"approvesce"!=this.props.getSearchParam("scene")&&(0,k.updatePandC)(this);(0,i.getMultiLang)({moduleId:["receivablebill","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){window.onbeforeunload=function(){var t=e.props.getUrlParam("status");if("edit"==t||"add"==t)return""},s.initTemplate.call(e,e.props,e.initShow)}))}})}},{key:"componentDidMount",value:function(){if(this.props.getUrlParam("scene")){var e=this.props.getUrlParam("scene");O("scene",b.dataSource,e);var t=this.getPagecode();O("pagecode",b.dataSource,t)}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"tbbLinkcancel",value:function(){this.setState({isTbbLinkshow:!1})}},{key:"onSubmit",value:function(){}},{key:"render",value:function(){var e,t=this,a=this.props,o=a.cardTable,l=a.form,i=a.cardPagination,d=a.modal,c=(a.button,a.transferTable),h=this.props.BillHeadInfo.createBillHeadInfo,v=this.props.button.getButtons(),g=o.createCardTable,_=i.createCardPagination,k=l.createForm,w="transfer"==this.props.getUrlParam("type"),T=c.createTransferList,x=d.createModal,O=this.state,q=O.showUploader,U=O.target;return w?n.default.createElement("div",{id:"transferCard",className:"nc-bill-transferList"},n.default.createElement(R,{offsetTop:0},n.default.createElement(E,{areaCode:E.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},h({title:this.props.getSearchParam("n")?this.props.getSearchParam("n"):this.state.json["receivablebill-000051"],backBtnClick:function(){t.backTransfer()}})),n.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"card_head",buttonLimit:3,onButtonClick:s.transferButtonClick.bind(this),popContainer:document.querySelector(".header-button-area")}),"bz"==V("scene",b.dataSource)?null:n.default.createElement(B,{fieldid:"canceltransfer",colors:"default",onClick:this.backList},this.state.json["receivablebill-000052"])))),n.default.createElement("div",{className:"nc-bill-transferList-content"},T({headcode:this.formId,bodycode:this.tableId,transferListId:this.leftarea,onTransferItemSelected:function(e,a,r){t.transferIndex=r;var o=a?"browse":"edit";if("browse"==o){var l=e.head[t.formId].rows[0].values.pk_recbill.value;e=null==l?e:N(l,b.dataSource),t.props.setUrlParam({status:"browse"}),t.props.addUrlParam({id:l})}else t.props.setUrlParam({status:"add"}),t.props.delUrlParam("id"),t.state.buttonfalg=!0;t.toggleShow(e.head[t.formId]),t.props.beforeUpdatePage(),t.props.form.setFormStatus(t.formId,o),t.props.cardTable.setStatus(t.tableId,o),t.props.form.setAllFormValue(S({},t.formId,e.head[t.formId])),t.props.cardTable.setTableData(t.tableId,e.body[t.tableId]),t.props.updatePage(t.formId,t.tableId)}}),n.default.createElement("div",{className:"transferList-content-right nc-bill-card"},n.default.createElement("div",{className:"nc-bill-form-area"},k(this.formId,{fieldid:"receivablebill",onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:y.formBeforeEvent.bind(this)})),n.default.createElement("div",{className:"nc-bill-table-area"},g(this.tableId,(S(e={fieldid:"receivablebill",tableHead:this.getTableHead.bind(this,v),modelSave:this.modelSaveClick.bind(this),onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:m.bodyBeforeEvent.bind(this),modelAddRow:this.modelAddRow.bind(this),modelDelRow:this.modelDelRow.bind(this),onSelected:this.onSelected.bind(this),onSelectedAll:this.onSelected.bind(this),showCheck:!0,showIndex:!0,hideAdd:!0,isAddRow:!1},"hideAdd",this.state.hideAdd),S(e,"adaptionHeight",!0),e))),n.default.createElement(p.default,{show:this.state.isCombinedExaminationModelShow,combinedExaminationData:this.Info.combinedExaminationData,pk_tradetypeid:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").display:null,billno:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,handleModel:this.handleCombined.bind(this)}),n.default.createElement(u.default,{show:this.state.isTaxInformationModelShow,pk_recbill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,handleModel:this.handleTaxInformation.bind(this)}),n.default.createElement(f.default,{show:this.state.isLinkTermModelShow,linkTermData:this.Info.linkTermData,handleModel:this.handleLinkTerm.bind(this),moduleId:"2006",billType:this.billType,seletedPks:this.Info.selectedPKS,pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,setFormTsVal:this.setFormTsVal.bind(this)}),n.default.createElement(D,{show:this.state.showBillTrack,close:function(){t.setState({showBillTrack:!1})},pk:this.props.getUrlParam("id"),type:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null}),q&&n.default.createElement(A,{billId:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,target:U,placement:"bottom",onHide:this.onHideUploader,close:function(){return t.closeModal()}}),n.default.createElement(F,{ref:"printOutput",url:"/nccloud/arap/arappub/outPut.do",data:this.outputData,callback:this.onSubmit}),n.default.createElement(j,{show:this.state.showApproveDetail,close:this.closeApprove,billtype:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,billid:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null}),n.default.createElement(P,{show:this.state.isTbbLinkshow,sourceData:this.Info.tbbLinkSourceData,cancel:this.tbbLinkcancel.bind(this)}),x("importModal",{noFooter:!0,className:"import-modal",hasBackDrop:!1}),n.default.createElement(K,r({},Object.assign(this.props),{moduleName:"arap",billType:b.billType,pagecode:this.getExportPageCode(),appcode:this.props.getSearchParam("c"),selectedPKS:this.Info.selectedPKS,exportTreeUrl:"/nccloud/arap/recbill/recbillexport.do",forceRender:this.state.forceRender})),n.default.createElement("div",null,x("saveCheck",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.saveSureBtnClick.bind(this)}),x("deleteCheck",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.deleteBillSureBtnClick.bind(this)}),x("commitAndUncommit",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.commitAndUncommit.bind(this),cancelBtnClick:this.cancelClick.bind(this)}),this.state.compositedisplay?n.default.createElement(Y,{title:this.state.json["receivablebill-000050"],data:this.Info.compositedata,display:this.state.compositedisplay,getResult:this.commitAndUncommit.bind(this),cancel:this.cancelClick.bind(this)}):null)))):n.default.createElement("div",{className:"nc-bill-card"},n.default.createElement("div",{className:"nc-bill-top-area"},n.default.createElement(R,{offsetTop:0},n.default.createElement(E,{areaCode:E.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},h({title:this.props.getSearchParam("n")?this.props.getSearchParam("n"):this.state.json["receivablebill-000051"],backBtnClick:function(){t.backList()}})),n.default.createElement("div",{className:"header-button-area"},this.props.getUrlParam("scene")||(0,I.getContext)(I.loginContextKeys.transtype)?null:n.default.createElement("div",{className:"trade-type"},(0,C.default)({ref:"tradetypeBtn",billtype:"F0",dataSource:b.dataSource,switchTemplate:this.switchTemplate.bind(this)})),this.props.button.createButtonApp({area:"card_head",buttonLimit:3,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),"linksce"!=this.props.getUrlParam("scene")&&"fip"!=this.props.getUrlParam("scene")&&this.props.getUrlParam("scene")?null:n.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},_({handlePageInfoChange:s.pageInfoClick.bind(this),dataSource:b.dataSource})))),n.default.createElement("div",{className:"nc-bill-form-area"},k(this.formId,{fieldid:"receivablebill",onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:y.formBeforeEvent.bind(this)}))),n.default.createElement("div",{className:"nc-bill-bottom-area"},n.default.createElement("div",{className:"nc-bill-table-area"},g(this.tableId,S({fieldid:"receivablebill",tableHead:this.getTableHead.bind(this,v),modelSave:this.modelSaveClick.bind(this),onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:m.bodyBeforeEvent.bind(this),modelAddRow:this.modelAddRow.bind(this),modelDelRow:this.modelDelRow.bind(this),onSelected:this.onSelected.bind(this),onSelectedAll:this.onSelected.bind(this),showCheck:!0,showIndex:!0,adaptionHeight:!0},"adaptionHeight",!0)))),n.default.createElement(u.default,{show:this.state.isTaxInformationModelShow,pk_recbill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,handleModel:this.handleTaxInformation.bind(this)}),n.default.createElement(p.default,{show:this.state.isCombinedExaminationModelShow,combinedExaminationData:this.Info.combinedExaminationData,pk_tradetypeid:this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid")?this.props.form.getFormItemsValue(this.formId,"pk_tradetypeid").display:null,billno:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,handleModel:this.handleCombined.bind(this)}),n.default.createElement(f.default,{show:this.state.isLinkTermModelShow,linkTermData:this.Info.linkTermData,handleModel:this.handleLinkTerm.bind(this),moduleId:"2006",billType:this.billType,seletedPks:this.Info.selectedPKS,pk_bill:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,setFormTsVal:this.setFormTsVal.bind(this)}),n.default.createElement(D,{show:this.state.showBillTrack,close:function(){t.setState({showBillTrack:!1})},pk:this.props.getUrlParam("id"),type:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null}),q&&n.default.createElement(A,{billId:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null,billNo:this.props.form.getFormItemsValue(this.formId,"billno")?this.props.form.getFormItemsValue(this.formId,"billno").value:null,target:U,placement:"bottom",onHide:this.onHideUploader}),n.default.createElement(F,{ref:"printOutput",url:"/nccloud/arap/arappub/outPut.do",data:this.outputData,callback:this.onSubmit}),n.default.createElement(j,{show:this.state.showApproveDetail,close:this.closeApprove,billtype:this.props.form.getFormItemsValue(this.formId,"pk_tradetype")?this.props.form.getFormItemsValue(this.formId,"pk_tradetype").value:null,billid:this.props.form.getFormItemsValue(this.formId,"pk_recbill")?this.props.form.getFormItemsValue(this.formId,"pk_recbill").value:null}),x("importModal",{noFooter:!0,className:"import-modal",hasBackDrop:!1}),n.default.createElement(K,r({},Object.assign(this.props),{moduleName:"arap",billType:b.billType,pagecode:this.getExportPageCode(),appcode:this.props.getSearchParam("c"),selectedPKS:this.Info.selectedPKS,forceRender:this.state.forceRender,exportTreeUrl:"/nccloud/arap/recbill/recbillexport.do"})),n.default.createElement(P,{show:this.state.isTbbLinkshow,sourceData:this.Info.tbbLinkSourceData,cancel:this.tbbLinkcancel.bind(this)}),n.default.createElement("div",null,x("saveCheck",{title:this.state.json["receivablebill-000048"],content:this.Info.tipContent,beSureBtnClick:this.saveSureBtnClick.bind(this)}),x("deleteCheck",{title:this.state.json["receivablebill-000046"],content:this.Info.tipContent,beSureBtnClick:this.deleteBillSureBtnClick.bind(this)}),x("commitAndUncommit",{title:this.state.json["receivablebill-000049"],content:this.Info.tipContent,beSureBtnClick:this.commitAndUncommit.bind(this),cancelBtnClick:this.cancelClick.bind(this)}),this.state.compositedisplay?n.default.createElement(Y,{title:this.state.json["receivablebill-000050"],data:this.Info.compositedata,display:this.state.compositedisplay,getResult:this.commitAndUncommit.bind(this),cancel:this.cancelClick.bind(this)}):null,this.invoiceComponent.createComponent()))}}]),t}(l.Component);H=(0,i.createPage)({})(H),t.default=H},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transferButtonClick=t.initTemplate=t.pageInfoClick=t.afterEvent=t.buttonClick=void 0;var r=s(a(253)),o=s(a(307)),l=s(a(308)),n=s(a(236)),i=s(a(254));function s(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=r.default,t.afterEvent=o.default,t.pageInfoClick=l.default,t.initTemplate=n.default,t.transferButtonClick=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,s,d,u){switch(a){case l.innerButton.open_browse:case l.innerButton.Close_browse:t.cardTable.toggleRowView(o.tableId,d);break;case l.innerButton.open_edit:var c=!1,p=e.props.createMasterChildData(e.getPagecode(),e.formId,e.tableId);if(p&&p.body&&p.body[e.tableId]&&p.body[e.tableId].rows)for(var f=p.body[e.tableId].rows,b=0;b<f.length;b++){var m=f[b].values.top_billid.value,y=f[b].values.top_itemid.value;if(m||y){c=!0;break}}e.setState({hideAdd:c}),t.cardTable.openModel(o.tableId,"edit",d,u);break;case l.innerButton.Copy_inner:(0,n.copyInner)(d,o.dataSource,e),e.setState({buttonfalg:!1},(function(){(0,i.cardBodyControl)(t,e.state.buttonfalg)}));break;case l.innerButton.Insert_inner:var h=t.createMasterChildData(e.getPagecode(),o.formId,o.tableId);h.body[o.tableId].rows=[],(0,r.ajax)({url:"/nccloud/arap/recbill/addline.do",data:h,success:function(e){e.data&&e.data.body?t.cardTable.addRow(o.tableId,u+1,e.data.body.bodys.rows[0].values):t.cardTable.addRow(o.tableId)}});break;case l.innerButton.Delete_inner:(0,n.deleteInner)(e,t,o.tableId,u),e.onSelected();break;case l.innerButton.Paste_inner:(0,n.pasteInner)(e,t,o.dataSource,o.tableId,u)}};var r=a(1),o=a(191),l=a(5),n=a(7),i=a(6);r.cardCache.getDefData,r.cardCache.setDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,u,m,y,h){var v=this;if(u instanceof Array&&u[0].newvalue.value==u[0].oldvalue.value)return;var g=this.getPagecode(),_=0;t==this.formId?_=0:t==this.tableId&&(_=m);if(t==o.formId){var k=null;switch(a){case"pk_org":null==n.value||""==n.value?"transfer"===this.props.getUrlParam("type")?(0,r.promptBox)({color:"warning",title:this.state.json["receivablebill-000009"],content:this.state.json["receivablebill-000071"],beSureBtnName:this.state.json["receivablebill-000011"],noCancelBtn:!0,beSureBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:u})},closeByClickBackDrop:!1}):(0,r.promptBox)({color:"warning",title:this.state.json["receivablebill-000009"],content:this.state.json["receivablebill-000010"],beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:function(){v.props.form.EmptyAllFormValue(v.formId),v.props.cardTable.setTableData(v.tableId,{rows:[]}),v.initAdd(!0)},cancelBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:u})},closeByClickBackDrop:!1}):null!=u.value&&""!=u.value?(0,r.promptBox)({color:"warning",title:this.state.json["receivablebill-000009"],content:this.state.json["receivablebill-000010"],beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:function(){(0,r.ajax)({url:"/nccloud/arap/recbill/cardHeadAfterEdit.do",data:{pageId:g,event:v.props.createHeadAfterEventData(g,v.formId,v.tableId,t,a,n),uiState:v.props.getUrlParam("status")},async:!1,success:function(e){(0,s.renderData)(v,e),(0,s.formulamsgHint)(v,e)},error:function(e){(0,s.errorDeal)(v,e,u,a)}})},cancelBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:u})},closeByClickBackDrop:!1}):(k={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,t,a,n),uiState:this.props.getUrlParam("status")},f.call(this,k,a,u));break;case"customer":k={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,a,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","payaccount","pk_currtype","customer","buysellflag","objtype","direction","pk_billtype","top_billtype","pk_payterm","pk_psndoc","pk_deptid","pk_deptid_v"].concat(d.moneyAndRateFields)),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,k,a,u);break;case"pk_deptid_v":k={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,a,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_deptid","pk_deptid_v","pk_currtype","customer","taxtype","buysellflag","objtype","direction"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,k,a,u);break;case"pk_psndoc":k={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,a,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_psndoc","pk_deptid","pk_deptid_v","isrefused","prepay","isdiscount","objtype","direction","agentreceivelocal"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,k,a,u);break;case"pk_currtype":k={pageId:g,formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,a,n),colValues:(0,i.getColvalues)(this.props,this.tableId,["pk_org","pk_group","pk_currtype","pk_billtype","billdate","rate","grouprate","globalrate","buysellflag","taxprice","local_taxprice","taxrate","occupationmny","money_bal","local_money_bal","globaldebit","globalnotax_de","globaltax_de","groupdebit","groupnotax_de","grouptax_de","local_money_de","local_notax_de","local_tax_de","money_de","notax_de","quantity_de","direction","settlecurr","settlemoney"]),rowids:(0,i.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},f.call(this,k,a,u),(0,l.currentTypeAfterFormEvents)(this.formId,e,a);break;case"subjcode":k={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,t,a,n),uiState:this.props.getUrlParam("status")},f.call(this,k,a,u),this.props.form.setFormItemsValue(this.formId,{subjcode:{value:n.refpk,display:n.dispname}});break;default:k={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,t,a,n),uiState:this.props.getUrlParam("status")},f.call(this,k,a,u)}}if(t==o.tableId){"subjcode"==a&&this.props.cardTable.setValByKeyAndIndex(this.tableId,m,"subjcode",{value:n.refpk,display:n.dispname});var I=(0,i.getColvalues)(this.props,this.tableId,c);(0,r.ajax)({url:"/nccloud/arap/recbill/cardBodyAfterEdit.do",data:{rowindex:0,editindex:_,pageId:g,changedrows:u,tableId:this.tableId,body:e.cardTable.getDataByIndex(this.tableId,_),formEvent:e.createFormAfterEventData(g,this.formId,this.tableId,a,n),uiState:this.props.getUrlParam("status"),colValues:I},async:!1,success:function(t){(0,s.bodyAfterEventRenderData)(v,t),"transfer"==v.props.getUrlParam("type")&&v.synTransferData(),0==m&&"pk_currtype"==a&&(0,l.currentTypeAfterFormEvents)(v.formId,e,"pk_currtype"),(0,s.formulamsgHint)(v,t)},error:function(o){var l=String(o),i=l.substring(6,l.length);"convertException"==i.substring(1,17)?(0,r.promptBox)({color:"warning",title:v.state.json["receivablebill-000015"],content:i.substring(17,i.length),closeByClickBackDrop:!1,beSureBtnClick:function(){p(v,e,m,g,t,a,u,"sure",_,n)},cancelBtnClick:function(){p(v,e,m,g,t,a,u,"cancel",_,n)}}):(v.props.cardTable.setValByKeyAndRowId(v.tableId,m,a,u),(0,r.toast)({color:"danger",content:i}))}}),b.call(this,t,g,a,m)}},t.headFieldAfterRequest=f,t.autoAddline=b;var r=a(1),o=a(191),l=a(32),n=a(189),i=a(7),s=a(33),d=a(9),u=a(7);var c=["customer","taxcodeid","taxrate","taxtype","buysellflag","money_de","local_money_de","notax_de","local_notax_de","local_tax_de"];function p(e,t,a,o,n,d,u,p,f,b){var m=(0,i.getColvalues)(e.props,e.tableId,c);(0,r.ajax)({url:"/nccloud/arap/recbill/cardBodyAfterEdit.do",data:{rowindex:0,editindex:f,pageId:o,changedrows:u,tableId:e.tableId,body:t.cardTable.getDataByIndex(e.tableId,f),formEvent:t.createFormAfterEventData(o,e.formId,e.tableId,d,b),uiState:e.props.getUrlParam("status"),isCalculateConvert:p,colValues:m},async:!1,success:function(r){(0,s.bodyAfterEventRenderData)(e,r),0==a&&"pk_currtype"==d&&(0,l.currentTypeAfterFormEvents)(e.formId,t,"pk_currtype"),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),(0,s.formulamsgHint)(e,r)}})}function f(e,t,a){var o=this;(0,r.ajax)({url:"/nccloud/arap/recbill/cardHeadAfterEdit.do",data:e,async:!1,success:function(e){((0,s.headAfterEventRenderData)(o,e),(0,s.formulamsgHint)(o,e),"pk_org"==t)&&(o.props.form.getFormItemsValue(o.formId,"pk_org").value?(o.props.resMetaAfterPkorgEdit(),o.state.buttonfalg=!0):o.state.buttonfalg=null,o.toggleShow());"transfer"==o.props.getUrlParam("type")&&o.synTransferData()},error:function(e){(0,s.errorDeal)(o,e,a,t)}})}function b(e,t,a,o){var l=this,i=this.props.cardTable.getNumberOfRows(this.tableId);if(e==this.tableId&&i==o+1&&-1!=n.autoAddLineKeys.indexOf(a)&&!(0,u.isExistsTopBill)(this)){var s=this.props.createMasterChildData(t,this.formId,this.tableId);s.body[this.tableId].rows=[],(0,r.ajax)({url:"/nccloud/arap/recbill/addline.do",data:s,async:!1,success:function(e){e.data&&(e.data.head&&l.props.form.setAllFormValue(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},l.formId,e.data.head[l.formId])),e.data.body&&l.props.cardTable.addRow(l.tableId,i,e.data.body[l.tableId].rows[0].values,!1))}})}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;if(t){var r=d(t,l.dataSource),n=this.getPagecode();if(r){if(e.getUrlParam("scene"))e.setUrlParam({id:t});else{var p=r.head[this.formId].rows[0].values.pk_tradetype.value;e.setUrlParam({id:t,pagecode:p}),c("sessionTradeType",l.dataSource,p),n!=p&&i.default.call(this,this.props)}e.form.setAllFormValue(s({},this.formId,r.head[this.formId])),e.cardTable.setTableData(this.tableId,r.body[this.tableId],null,null,!0),this.toggleShow()}else{var f={pk_bill:t};(0,o.ajax)({url:"/nccloud/arap/recbill/cardquery.do",data:f,success:function(r){if(r.data){if(r.data.head&&a.props.form.setAllFormValue(s({},a.formId,r.data.head[a.formId])),r.data.body&&a.props.cardTable.setTableData(a.tableId,r.data.body[a.tableId],null,null,!0),u(l.pkname,t,r.data,a.formId,l.dataSource),e.getUrlParam("scene"))e.setUrlParam({id:t});else{var o=r.data.head[l.formId].rows[0].values.pk_tradetype.value;e.setUrlParam({id:t,pagecode:o}),c("sessionTradeType",l.dataSource,o),n!=o&&i.default.call(a,a.props)}a.toggleShow()}else a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId,{rows:[]})}})}}};var r,o=a(1),l=a(191),n=a(236),i=(r=n)&&r.__esModule?r:{default:r};function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=o.cardCache.getCacheById,u=o.cardCache.updateCache,c=o.cardCache.setDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),n=_(l),i=a(1),s=a(310),d=_(a(247)),u=a(6),c=_(a(25)),p=_(a(175)),f=a(192),b=_(a(241)),m=_(a(242)),y=a(8),h=_(a(26)),v=_(a(22));a(27);var g=_(a(248));function _(e){return e&&e.__esModule?e:{default:e}}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var I=i.high.BillTrack,w=i.high.PrintOutput,T=i.high.Inspection,C=i.high.ApproveDetail,x=i.high.NCUploader,S=i.cardCache.setDefData,B=i.cardCache.getDefData,E=i.cardCache.getCacheById,R=i.cardCache.getCurrentLastId,P=i.high.ExcelImport,D=i.high.ApprovalTrans,A=i.base.NCDiv,F=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getPagecode=function(){var e=null;return r.props.getUrlParam("scene")||"20060RBM_LIST_LINK"==r.props.getSearchParam("p")?(r.props.getUrlParam("scene")||r.props.ViewModel.setData("nccloud-router-params",{scene:"linksce"}),e="20060RBM_LIST_LINK"):e="20060RBM_LIST",e},r.initShow=function(){if(!r.props.table.hasCacheData(f.dataSource))if(r.onSelected(),"widget"==r.props.getUrlParam("src")){var e=i.cacheTools.get("F0widget"),t={pageInfo:r.props.table.getTablePageInfo(r.tableId),queryAreaCode:r.searchId,oid:"0001Z31000000005XG2W",querytype:"tree"},a={pageId:r.props.getSearchParam("p"),queryInfo:t,toDoSearchVO:e};(0,i.ajax)({url:"/nccloud/arap/recbill/querywidget.do",data:a,success:function(e){e.success;var t=e.data;t?r.props.table.setAllTableData(r.tableId,t[r.tableId]):((0,i.toast)({color:"success",content:r.state.json["receivablebill-000053"]}),r.props.table.setAllTableData(r.tableId,{rows:[]})),S(r.tableId,f.dataSource,t)}})}else if("browse"==r.props.getUrlParam("status"))"fip"==r.props.getUrlParam("scene")?(0,b.default)(r.props,r.tableId):"linksce"==r.props.getUrlParam("scene")&&"ftsLinkArap"==r.props.getUrlParam("flag")&&(0,m.default)(r.props,r.tableId,r.billType);else if(r.props.getUrlParam("pk_bills")){var o={pageInfo:r.props.table.getTablePageInfo(r.tableId),queryAreaCode:r.searchId,querytype:"tree"},l={pageId:r.props.getSearchParam("p"),queryInfo:o,pk_bill:r.props.getUrlParam("pk_bills")};(0,i.ajax)({url:"/nccloud/arap/recbill/query.do",data:l,success:function(e){e.success;var t=e.data;t?r.props.table.setAllTableData(r.tableId,t[r.tableId]):((0,i.toast)({color:"success",content:r.state.json["receivablebill-000053"]}),r.props.table.setAllTableData(r.tableId,{rows:[]})),S(r.tableId,f.dataSource,t)}})}B("isSwitchTradeType",f.dataSource)&&r.switchTemplate.call(r)},r.dealBzScence=function(){var e=R(f.dataSource);if(e){var t=E(e,f.dataSource),a=t.head.head.rows[0].values.pk_tradetype.value,o=t.head.head.rows[0].values.pk_recbill.value;r.props.pushTo("/card",{status:"browse",id:o,pagecode:a,scene:"bz"})}else r.props.pushTo("/card",{status:"browse",pagecode:B("pagecode",f.dataSource),scene:"bz"})},r.handleTaxInformation=function(){var e=r.props.table.getCheckedRows(r.tableId);e.length>0?(r.Info.pk_bill=e[0].data.values.pk_recbill.value,r.setState({isTaxInformationModelShow:!r.state.isTaxInformationModelShow})):(0,i.toast)({color:"warning",content:r.state.json["receivablebill-000007"]})},r.onSelected=function(){(0,u.onListButtonControl)(r)},r.handleCombined=function(){r.setState({isCombinedExaminationModelShow:!r.state.isCombinedExaminationModelShow})},r.handleLinkTerm=function(){r.setState({isLinkTermModelShow:!r.state.isLinkTermModelShow})},r.setFormTsVal=function(e){if(r.Info.index){var t={value:e,display:"",scale:-1};r.props.table.setValByKeyAndIndex(r.tableId,r.Info.index,"ts",t)}},r.onPrint=function(){(0,i.print)("pdf","/nccloud/arap/arappub/print.do",r.printData,!1)},r.officalPrintOutput=function(){(0,i.ajax)({url:"/nccloud/arap/arappub/officialPrint.do",data:r.printData,async:!1,success:function(e){e.success&&(0,i.print)("pdf","/nccloud/arap/arappub/print.do",r.printData,!1)}})},r.cancelPrintOutput=function(){(0,i.ajax)({url:"/nccloud/arap/arappub/cancelPrint.do",data:r.printData,async:!1,success:function(e){e.success&&(0,i.toast)({color:"success",content:e.data})}})},r.closeApprove=function(){r.setState({showApproveDetail:!1})},r.printOutput=function(){r.refs.printOutput.open()},r.clearExType=function(){r.Info.exType=null,r.Info.flag=!0,r.Info.compositedata=null,r.Info.tipUrl=null,r.state.compositedisplay&&r.setState({compositedisplay:!1})},r.commitAndUncommit=function(){var e=r.Info.tipUrl,t=r.Info.exType,a=r.Info.flag,o=r.Info.record;(0,i.ajax)({url:e,data:{pk_bill:o.pk_recbill.value,ts:o.ts.value,pageId:r.props.getSearchParam("p"),billType:r.billType,type:1,extype:t,flag:a,assignObj:r.Info.compositedata},success:function(t){if("1"==t.data.exType){var a=t.data.message;return r.Info.tipContent=a,r.Info.exType="1",r.Info.flag=!0,void r.props.modal.show("commitAndUncommit")}if(t.data.workflow&&("approveflow"==t.data.workflow||"workflow"==t.data.workflow))return r.Info.compositedata=t.data,r.Info.tipUrl=e,void r.setState({compositedisplay:!0});t.success&&(r.clearExType(),(0,i.toast)({color:"success",content:r.state.json["receivablebill-000025"]}),r.props.table.updateDataByIndexs(r.tableId,[{index:o.numberindex.value-1,data:{values:t.data[r.tableId].rows[0].values}}]),r.onSelected())}})},r.delConfirm=function(e,t){(0,i.ajax)({url:"/nccloud/arap/arappub/delete.do",data:[{pk_bill:r.Info.pk_bill,ts:r.Info.ts,billType:r.billType,extype:e,index:r.Info.index,flag:t}],success:function(e){var t=e.success,a=e.data;if(t&&a){if("1"==e.data.exType)return r.Info.tipContent=e.data.message,r.Info.exType="1",r.Info.flag=!0,void r.props.modal.show("deleteCheck");(0,i.toast)({color:a.PopupWindowStyle,content:a.errMsg}),r.props.table.deleteTableRowsByIndex(r.tableId,a.successIndexs),r.props.table.deleteCacheId(r.tableId,a.successPKs),r.onSelected(),r.clearExType()}}})},r.deleteBillSureBtnClick=function(){var e=r.Info.exType,t=r.Info.flag;r.delConfirm(e,t)},r.onHideUploader=function(){r.setState({showUploader:!1})},r.switchTemplate=function(){var e=r.getPagecode(),t=r.props.getSearchParam("c")?r.props.getSearchParam("c"):r.props.getUrlParam("c"),a=B("sessionTradeType",f.dataSource);a||(a=f.tradeType),(0,i.ajax)({url:"/nccloud/arap/arappub/queryallbtns.do",data:{appcode:t,pagecode:e,tradetype:a,billtype:f.billType},success:function(e){var t=e.data;if(t.button){var a=t.button;r.Info.pullBillInfoVOAry=t.pullbillinfo,(0,u.getButtonsKey)(a,r.Info.allButtonsKey),r.props.button.setButtons(a)}}})},r.renderCompleteEvent=function(){var e=B(f.searchKey,f.dataSource);if(e&&e.conditions){var t=!0,a=!1,o=void 0;try{for(var l,n=e.conditions[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){var i=l.value;if("billdate"==i.field){var s=[];s.push(i.value.firstvalue),s.push(i.value.secondvalue),r.props.search.setSearchValByField(r.searchId,i.field,{display:i.display,value:s})}else r.props.search.setSearchValByField(r.searchId,i.field,{display:i.display,value:i.value.firstvalue})}}catch(e){a=!0,o=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw o}}}},r.moduleId="2052",r.searchId=f.searchId,r.tableId=f.tableId,r.billType=f.billType,r.pkname=f.pkname;var o=r.props.search,l=o.setSearchValByField,n=o.getAllSearchData;return r.setSearchValByField=l,r.getAllSearchData=n,r.invoiceComponent=new g.default,r.state={isTaxInformationModelShow:!1,isCombinedExaminationModelShow:!1,isLinkTermModelShow:!1,isTbbLinkshow:!1,showApproveDetail:!1,showUploader:!1,target:null,compositedisplay:!1,forceRender:!0,json:{}},r.printData={billtype:f.billType,appcode:e.getSearchParam("c")?e.getSearchParam("c"):e.getUrlParam("c"),nodekey:f.nodekey,oids:null,userjson:f.billType,pageId:e.getSearchParam("p")},r.outputData={billtype:f.billType,appcode:e.getSearchParam("c")?e.getSearchParam("c"):e.getUrlParam("c"),funcode:e.getSearchParam("c")?e.getSearchParam("c"):e.getUrlParam("c"),nodekey:f.nodekey,oids:null,userjson:f.billType,outputType:"output"},r.Info=(k(a={allButtonsKey:[],combinedExaminationData:[],pk_tradetypeid:null,billno:null,linkTermData:[],pk_bill:null,ts:null,approvestatus:null,index:null,tbbLinkSourceData:null,showBillTrack:!1,pk_tradetype:null,selectedPKS:[],tipContent:"",tipUrl:null,exType:null,record:null,flag:!1},"index",null),k(a,"compositedata",null),a),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;if("bz"==B("scene",f.dataSource))this.dealBzScence();else{(0,i.getMultiLang)({moduleId:["receivablebill"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){s.initTemplate.call(e,e.props,e.initShow)}))}})}}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"tbbLinkcancel",value:function(){this.setState({isTbbLinkshow:!1})}},{key:"onSubmit",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=(t.form,t.table),o=(t.button,t.insertTable,t.search),l=t.modal,i=a.createSimpleTable,u=o.NCCreateSearch,b=l.createModal,m=this.state,g=m.showUploader,_=m.target,k=this.props.BillHeadInfo.createBillHeadInfo;return n.default.createElement("div",{className:"nc-bill-list"},n.default.createElement(A,{areaCode:A.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},k({title:this.props.getSearchParam("n")?this.props.getSearchParam("n"):this.state.json["receivablebill-000051"],initShowBackBtn:!1})),n.default.createElement("div",{className:"header-button-area"},this.props.getUrlParam("scene")||(0,y.getContext)(y.loginContextKeys.transtype)?null:n.default.createElement("div",{className:"trade-type"},(0,h.default)({ref:"tradetypeBtn",billtype:"F0",dataSource:f.dataSource,switchTemplate:this.switchTemplate.bind(this)})),this.props.button.createButtonApp({area:"list_head",buttonLimit:3,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),n.default.createElement("div",{className:"nc-bill-search-area"},u(this.searchId,{clickSearchBtn:s.searchBtnClick.bind(this),showAdvBtn:!0,onAfterEvent:v.default.bind(this),renderCompleteEvent:this.renderCompleteEvent})),n.default.createElement("div",{className:"nc-bill-table-area"},i(this.tableId,{fieldid:"recbill",dataSource:f.dataSource,pkname:f.pkname,handlePageInfoChange:s.pageInfoClick,tableModelConfirm:s.tableModelConfirm,showCheck:!0,showIndex:!0,onRowDoubleClick:s.doubleClick.bind(this),onSelected:this.onSelected.bind(this),onSelectedAll:this.onSelected.bind(this),componentInitFinished:function(){e.onSelected()}})),n.default.createElement(d.default,{show:this.state.isTaxInformationModelShow,pk_recbill:this.Info.pk_bill,handleModel:this.handleTaxInformation.bind(this)}),n.default.createElement(c.default,{show:this.state.isCombinedExaminationModelShow,combinedExaminationData:this.Info.combinedExaminationData,pk_tradetypeid:this.Info.pk_tradetypeid,billno:this.Info.billno,handleModel:this.handleCombined.bind(this)}),n.default.createElement(p.default,{show:this.state.isLinkTermModelShow,linkTermData:this.Info.linkTermData,handleModel:this.handleLinkTerm.bind(this),moduleId:"2006",billType:this.billType,pk_bill:this.Info.pk_bill,setFormTsVal:this.setFormTsVal.bind(this)}),n.default.createElement(I,{show:this.state.showBillTrack,close:function(){e.setState({showBillTrack:!1})},pk:this.Info.pk_bill,type:this.Info.pk_tradetype}),n.default.createElement(w,{ref:"printOutput",url:"/nccloud/arap/arappub/outPut.do",data:this.outputData,callback:this.onSubmit}),b("importModal",{noFooter:!0,className:"import-modal",hasBackDrop:!1}),n.default.createElement(P,r({},Object.assign(this.props),{moduleName:"arap",billType:f.billType,pagecode:"20060RBM_CARD",appcode:this.props.getSearchParam("c")?this.props.getSearchParam("c"):this.props.getUrlParam("c"),selectedPKS:this.Info.selectedPKS,exportTreeUrl:"/nccloud/arap/recbill/recbillexport.do",forceRender:this.state.forceRender})),n.default.createElement(C,{show:this.state.showApproveDetail,close:this.closeApprove,billtype:this.Info.pk_tradetype,billid:this.Info.pk_bill}),g&&n.default.createElement(x,{billId:this.Info.pk_bill,billNo:this.Info.billno,target:_,placement:"bottom",onHide:this.onHideUploader}),n.default.createElement(T,{show:this.state.isTbbLinkshow,sourceData:this.Info.tbbLinkSourceData,cancel:this.tbbLinkcancel.bind(this)}),n.default.createElement("div",null,b("commitAndUncommit",{title:this.state.json["receivablebill-000049"],content:this.Info.tipContent,beSureBtnClick:this.commitAndUncommit.bind(this),cancelBtnClick:this.clearExType.bind(this)}),b("deleteCheck",{title:this.state.json["receivablebill-000049"],content:this.Info.tipContent,beSureBtnClick:this.deleteBillSureBtnClick.bind(this)}),this.state.compositedisplay?n.default.createElement(D,{title:this.state.json["receivablebill-000050"],data:this.Info.compositedata,display:this.state.compositedisplay,getResult:this.commitAndUncommit.bind(this),cancel:this.clearExType.bind(this)}):null,this.invoiceComponent.createComponent()))}}]),t}(l.Component);F=(0,i.createPage)({})(F),t.default=F},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=t.doubleClick=t.buttonClick=t.pageInfoClick=t.searchBtnClick=void 0;var r=s(a(311)),o=s(a(312)),l=s(a(313)),n=s(a(314)),i=s(a(315));function s(e){return e&&e.__esModule?e:{default:e}}t.searchBtnClick=r.default,t.pageInfoClick=o.default,t.buttonClick=l.default,t.doubleClick=n.default,t.initTemplate=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;if(t){r.cacheTools.set(e.getSearchParam("c")+this.searchId,t);var i=(0,l.getContext)(l.loginContextKeys.transtype),s=e.table.getTablePageInfo(this.tableId),d=e.search.getQueryInfo(this.searchId);d.pageInfo=s;var u={pageId:e.getSearchParam("p"),queryInfo:d,tradeType:i};n(o.searchId,o.dataSource,u),(0,r.ajax)({url:"/nccloud/arap/recbill/query.do",data:u,success:function(e){var t=e.success,l=e.data;t&&(l?((0,r.toast)({color:"success",content:a.state.json["receivablebill-000031"]+l[a.tableId].allpks.length+a.state.json["receivablebill-000032"]}),a.props.table.setAllTableData(a.tableId,l[a.tableId])):((0,r.toast)({color:"warning",content:a.state.json["receivablebill-000033"]}),a.props.table.setAllTableData(a.tableId,{rows:[]})),n(a.tableId,o.dataSource,l),a.onSelected())}})}};var r=a(1),o=a(192),l=a(8),n=r.cardCache.setDefData;r.cardCache.getDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var l=this;if(a&&0!=a.length){var n={pk_bills:a,pageId:e.getSearchParam("p")};(0,r.ajax)({url:"/nccloud/arap/recbill/querygridbypks.do",data:n,success:function(t){var a=t.success,r=t.data;a&&(r?e.table.setAllTableData(o.tableId,r[o.tableId]):e.table.setAllTableData(o.tableId,{rows:[]})),l.onSelected()}})}};var r=a(1),o=a(192)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,b=(0,c.getContext)(c.loginContextKeys.transtype),w=e.getSearchParam("c");switch(t){case o.headButton.Add:var T=y("sessionTradeType",l.dataSource);b?T=b:T||(T=l.tradeType),e.pushTo("/card",{status:"add",pagecode:T});break;case o.headButton.Commit:g(this,this.props,this.tableId,l.billType,o.headButton.Commit);break;case o.headButton.Uncommit:g(this,this.props,this.tableId,l.billType,o.headButton.Uncommit);break;case o.headButton.Delete:(0,r.promptBox)({color:"warning",title:this.state.json["receivablebill-000016"],content:this.state.json["receivablebill-000070"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["receivablebill-000011"],cancelBtnName:this.state.json["receivablebill-000012"],beSureBtnClick:function(){var t=v(a.props,a.tableId,l.billType);0!=t.length?1==t.length?(a.Info.pk_bill=t[0].pk_bill,a.Info.ts=t[0].ts,a.Info.index=t[0].index,a.delConfirm()):(0,r.ajax)({url:"/nccloud/arap/arappub/delete.do",data:t,success:function(t){var o=t.success,n=t.data;o&&n&&((0,r.toast)({duration:"infinity",color:n.PopupWindowStyle,content:n.errMsg}),e.table.deleteTableRowsByIndex(l.tableId,n.successIndexs),e.table.deleteCacheId(l.tableId,n.successPKs),a.onSelected())}}):(0,r.toast)({color:"warning",content:a.state.json["receivablebill-000029"]})}});break;case o.headButton.LinkAprv:var C=this.props.table.getCheckedRows(this.tableId)[0];C?(this.Info.pk_bill=C.data.values.pk_recbill.value,this.Info.pk_tradetype=C.data.values.pk_tradetype.value,this.setState({showApproveDetail:!0})):(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]});break;case o.headButton.MadeBill:(0,u.default)(this,e,this.props.table.getCheckedRows(this.tableId),"pk_recbill",w,!0);break;case o.headButton.LinkSettleInfo:var x=h(this.props,this.tableId);(0,r.ajax)({url:"/nccloud/arap/arappub/linksettleinfo.do",data:{pk_bill:x.data.values.pk_paybill.value,billType:l.billType},success:function(t){var a=t.success;t.data;a&&e.linkTo("/cmp/settlementmanagement/settlement/card/index.html",{status:"browse",srcid:x.data.values.pk_paybill.value,src:"2008",appcode:"360704SM",pagecode:"360704SM_C01"})},error:function(e){(0,r.toast)({color:"warning",content:e.message})}});break;case o.headButton.LinkVouchar:var S=h(this.props,this.tableId);(0,d.default)(this,e,S,S.data.values.pk_recbill.value,w);break;case o.headButton.LinkConfer:var B=h(this.props,this.tableId);(0,r.ajax)({url:"/nccloud/arap/arappub/linkconfer.do",data:{pk_bill:B.data.values.pk_recbill.value,billType:l.billType},success:function(t){var a=t.data;a&&e.openTo(a.url,a.condition)}});break;case o.headButton.TaxChecked:this.handleTaxInformation();break;case o.headButton.Add_GatherBill:e.linkTo("/arap/gatheringbill/gatheringbill/transfer/index.html",{destTradetype:l.tradeType,pagecode:"20060GBM_TRANSFER"});break;case o.headButton.Print:var E=this.props.table.getCheckedRows(this.tableId);if(0==E.length)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]});var R=[];E.forEach((function(e){R.push(e.data.values.pk_recbill.value)})),this.printData.oids=R,this.printData.nodekey="card",this.onPrint();break;case o.headButton.PrintList:if(E=this.props.table.getCheckedRows(this.tableId),R=[],E.forEach((function(e){R.push(e.data.values.pk_recbill.value)})),0==R.length)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]});this.printData.oids=R,this.printData.nodekey="list",this.onPrint();break;case o.headButton.Output:if(0==(E=this.props.table.getCheckedRows(this.tableId)).length)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]});R=[],E.forEach((function(e){R.push(e.data.values.pk_recbill.value)})),this.outputData.oids=R,this.outputData.nodekey="card",this.printOutput();break;case o.headButton.OfficalPrint:if(0==(E=this.props.table.getCheckedRows(this.tableId)).length)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]});R=[],E.forEach((function(e){R.push(e.data.values.pk_recbill.value)})),this.printData.oids=R,this.printData.nodekey="card",this.officalPrintOutput();break;case o.headButton.CancelPrint:if(0==(E=this.props.table.getCheckedRows(this.tableId)).length)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]});R=[],E.forEach((function(e){R.push(e.data.values.pk_recbill.value)})),this.printData.oids=R,this.printData.nodekey="card",this.cancelPrintOutput();break;case o.headButton.ExportData:this.state.forceRender&&this.setState({forceRender:!1});var P=this.props.table.getCheckedRows(this.tableId);if(R=[],P.forEach((function(e){R.push(e.data.values.pk_recbill.value)})),0==R.length)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]});this.Info.selectedPKS=R,this.props.modal.show("exportFileModal");break;case o.headButton.LinkDeal:var D=h(this.props,this.tableId);(0,r.ajax)({url:"/nccloud/arap/arappub/linkdeal.do",data:{pk_bill:D.data.values.pk_recbill.value,ts:D.data.values.ts.value,billType:this.billType},success:function(e){if(e.success){var t=e.data,r=a.props.table.getCheckedRows(a.tableId)[0].data.values;a.Info.pk_tradetypeid=r.pk_tradetypeid?r.pk_tradetypeid.display:null,a.Info.billno=r.billno?r.billno.value:null,a.Info.combinedExaminationData=t,a.handleCombined()}}});break;case o.headButton.LinkTerm:var A=h(this.props,this.tableId);(0,r.ajax)({url:"/nccloud/arap/arappub/linkterm.do",data:{pk_bill:A.data.values.pk_recbill.value,ts:A.data.values.ts.value,billType:this.billType,moduleId:"2006"},success:function(e){if(e.success){var t=e.data,r=a.props.table.getCheckedRows(a.tableId)[0];a.Info.index=r.index,a.Info.linkTermData=t,a.Info.pk_bill=r.data.values.pk_payablebill?r.data.values.pk_payablebill.value:null,a.handleLinkTerm()}}});break;case o.headButton.LinkTbb:var F=h(this.props,this.tableId);(0,r.ajax)({url:"/nccloud/arap/arappub/linktbb.do",data:{pk_bill:F.data.values.pk_recbill.value,ts:F.data.values.ts.value,billType:this.billType},async:!1,success:function(e){a.Info.tbbLinkSourceData=e.data,a.setState({isTbbLinkshow:!0})}});break;case o.headButton.LinkBal:(0,s.default)(this.props,h(this.props,this.tableId).data.values.pk_recbill.value,this.billType,h(this.props,this.tableId).data.values.objtype.value);break;case o.headButton.BillLinkQuery:var j=h(this.props,this.tableId);this.Info.pk_bill=j.data.values.pk_recbill.value,this.Info.pk_tradetype=j.data.values.pk_tradetype.value,this.setState({showBillTrack:!0});break;case o.headButton.Refresh:var O=y(l.searchId,l.dataSource);O?(0,r.ajax)({url:"/nccloud/arap/recbill/query.do",data:O,success:function(e){var t=e.success,o=e.data;t&&(o?((0,r.toast)({color:"success",title:a.state.json["receivablebill-000069"]}),a.props.table.setAllTableData(a.tableId,o[a.tableId])):((0,r.toast)({color:"success",content:a.state.json["receivablebill-000053"]}),a.props.table.setAllTableData(a.tableId,{rows:[]}))),m(a.tableId,l.dataSource,o),a.onSelected()}}):((0,r.toast)({color:"success",title:this.state.json["receivablebill-000069"]}),this.props.table.setAllTableData(this.tableId,{rows:[]}));break;case o.headButton.ReceiptCheck:var V=h(this.props,this.tableId);(q={}).pk_billid=V.data.values.pk_recbill.value,q.pk_billtype=V.data.values.pk_billtype.value,q.pk_tradetype=V.data.values.pk_tradetype.value,q.pk_org=V.data.values.pk_org.value,(0,i.imageView)(q,"iweb");break;case o.headButton.ReceiptScan:var q,U=h(this.props,this.tableId);(q={}).pk_billid=U.data.values.pk_recbill.value,q.pk_billtype=U.data.values.pk_billtype.value,q.pk_tradetype=U.data.values.pk_tradetype.value,q.pk_org=U.data.values.pk_org.value,q.BillType=U.data.values.pk_tradetype.value,q.BillDate=U.data.values.creationtime.value,q.Busi_Serial_No=U.data.values.pk_recbill.value,q.OrgNo=U.data.values.pk_org.value,q.BillCode=U.data.values.billno.value,q.OrgName=U.data.values.pk_org.display,q.Cash=U.data.values.money.value,(0,i.imageScan)(q,"iweb");break;case o.headButton.AttachManage:var M=h(this.props,this.tableId);this.Info.pk_bill=M.data.values.pk_recbill.value,this.Info.billno=M.data.values.billno.value,this.setState({showUploader:!0,target:null});break;case o.headButton.Refund:_.call(this,this.props);break;case o.headButton.Generate:(0,p.batchGenerate)(this);break;case o.headButton.CancelRefund:k.call(this,this.props);break;case o.headButton.SpecialInvoice:I.call(this,0);break;case o.headButton.GeneralInvoice:I.call(this,1);break;case o.headButton.ElectronicInvoice:I.call(this,2);break;case o.headButton.OilSpecialInvoice:I.call(this,3);break;case o.headButton.OilGeneralInvoice:I.call(this,4);break;case o.headButton.OilElectronicInvoice:I.call(this,5);break;case o.headButton.RedInvoice:if(1!=((Q=h(this.props,this.tableId)).data.values.approvestatus?Q.data.values.approvestatus.value:null))return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000075"]});var N=Q.data.values.money?Q.data.values.money.value:null;if(N>=0)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000073"]});var L=Q.data.values.customer?Q.data.values.customer.display:null;if(!L)return void(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000074"]});var G=Q.data.values.pk_recbill?Q.data.values.pk_recbill.value:null,K=Q.data.values.billno?Q.data.values.billno.value:null,Y=Q.data.values.pk_billtype?Q.data.values.pk_billtype.value:null,H=function(e,t){var a=null,o=!1;return(0,r.ajax)({url:"/nccloud/arap/recbill/querybulebill.do",data:{pk_bill:e,billType:t},async:!1,success:function(e){var t=e.success,r=e.data;t&&(a=r)},error:function(e){o=!0;var t=String(e);(0,r.toast)({color:"danger",content:t})}}),{pkBillBlue:a,isExit:o}}(G,Y);if(H.isExit)return;var z=Q.data.values.pk_tradetypeid?Q.data.values.pk_tradetypeid.value:null,W=H.pkBillBlue,J=null;W&&(J={pkBillBlue:W,amountRed:f.floatObj.multiply(N,-1),customer:L}),this.invoiceComponent.setBillParams({pkBill:G,tradeType:z,billType:Y,invoiceIinformation:J,billNo:K},(function(){a.invoiceComponent.redRush.show()}));break;case o.headButton.MaintainTaxInvoice:G=(Q=h(this.props,this.tableId)).data.values.pk_recbill.value,z=Q.data.values.pk_tradetypeid?Q.data.values.pk_tradetypeid.value:null,Y=Q.data.values.pk_billtype.value;this.invoiceComponent.setBillParams({pkBill:G,tradeType:z,billType:Y},(function(){a.invoiceComponent.linkSituation.show()}));break;case o.headButton.LinkTaxInvoice:var Q;G=(Q=h(this.props,this.tableId)).data.values.pk_recbill.value,z=Q.data.values.pk_tradetypeid?Q.data.values.pk_tradetypeid.value:null,Y=Q.data.values.pk_billtype.value;this.invoiceComponent.setBillParams({pkBill:G,tradeType:z,billType:Y},(function(){a.invoiceComponent.linkInvoice.show()}));break;default:var Z=(0,n.getTransferInfo)(this,t);Z&&(0,r.ajax)({url:"/nccloud/arap/arappub/queryrelatedapp.do",data:{billType:Z.src_billtype},success:function(t){if(t){m(Z.src_billtype+Z.transtypes[0],"transfer.dataSource",Z.busitypes);var a=y("sessionTradeType",l.dataSource);b?a=b:a||(a=l.tradeType);var r="/"+Z.src_billtype;e.pushTo(r,{src_appcode:t.data.appcode,src_tradetype:Z.transtypes[0],dest_billtype:l.billType,dest_tradetype:a})}}})}},t.billRefund=_,t.billCancelRefund=k;var r=a(1),o=a(5),l=a(192),n=a(201),i=a(28),s=b(a(24)),d=b(a(202)),u=b(a(184)),c=a(8),p=a(7),f=a(246);function b(e){return e&&e.__esModule?e:{default:e}}var m=r.cardCache.setDefData,y=r.cardCache.getDefData;var h=function(e,t,a){var o=e.table.getCheckedRows(t);if(o.length>0)return o[0];(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000007"]})},v=function(e,t,a){var r=e.table.getCheckedRows(t),o=[];return r.forEach((function(t){o.push({pk_bill:t.data.values.pk_recbill.value,ts:t.data.values.ts.value,billType:a,index:t.index,pageId:e.getSearchParam("p")})})),o},g=function(e,t,a,l,n){var i=v(t,a,l);if(0!=i.length){var s="";if(n==o.headButton.Commit?s="/nccloud/arap/arappub/batchcommit.do":n==o.headButton.Uncommit&&(s="/nccloud/arap/arappub/batchuncommit.do"),1==i.length&&n==o.headButton.Commit)return e.Info.tipUrl="/nccloud/arap/arappub/commit.do",e.Info.record=t.table.getCheckedRows(a)[0].data.values,e.Info.record.numberindex={scale:0,value:i[0].index+1},void e.commitAndUncommit();(0,r.ajax)({url:s,data:i,success:function(o){var l=o.success,n=o.data;if(l){if(n.grid){var i=n.grid,s=[];for(var d in i)s.push({index:d,data:{values:i[d].values}});t.table.updateDataByIndexs(a,s)}n.message&&((0,r.toast)({duration:"infinity",color:n.PopupWindowStyle,content:n.message}),e.onSelected())}}})}else(0,r.toast)({color:"warning",content:this.state.json["receivablebill-000029"]})};function _(e){var t=this,a=v(this.props,this.tableId,l.billType);(0,r.ajax)({url:"/nccloud/arap/arappub/listrefund.do",data:a,success:function(a){var o=a.success,n=a.data;if(o){if(n.grid){var i=n.grid,s=[];for(var d in i)s.push({index:d,data:{values:i[d].values}});e.table.updateDataByIndexs(l.tableId,s)}n.message&&((0,r.toast)({duration:"infinity",color:n.PopupWindowStyle,content:n.message}),t.onSelected())}}})}function k(e){var t=this,a=v(this.props,this.tableId,l.billType);(0,r.ajax)({url:"/nccloud/arap/arappub/listcancelrefund.do",data:a,success:function(a){var o=a.success,n=a.data;if(o){if(n.pk_bill){var i=n.grid,s=[];for(var d in i)s.push({index:d,data:{values:i[d].values}});e.table.updateDataByIndexs(l.tableId,s)}n.message&&((0,r.toast)({duration:"infinity",color:n.PopupWindowStyle,content:n.message}),t.onSelected())}}})}function I(e){var t=this,a=v(t.props,t.tableId,t.billType);0!=a.length?(a.forEach((function(t){t.invoiceType=e})),(0,r.ajax)({url:"/nccloud/arap/recbill/invlistgenerate.do",data:a,success:function(e){var a=e.success,o=e.data;a&&o.message&&((0,r.toast)({duration:"infinity",color:o.PopupWindowStyle,content:o.message}),t.onSelected())}})):(0,r.toast)({color:"warning",content:"请选中至少一行数据!"})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=this.props.search.getAllSearchData(o.searchId);r&&l(o.searchKey,o.dataSource,r);"linksce"==this.props.getUrlParam("scene")||"fip"==this.props.getUrlParam("scene")?this.props.pushTo("/card",{status:"browse",id:e.pk_recbill.value,pagecode:"20060RBM_CARD_LINK",scene:"linksce"}):this.props.pushTo("/card",{status:"browse",id:e.pk_recbill.value,pagecode:e.pk_tradetype.value})};var r=a(1),o=a(192),l=r.cardCache.setDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,p=this,m=p.getPagecode(),y=e.getSearchParam("c")?e.getSearchParam("c"):e.getUrlParam("c"),h=(0,r.excelImportconfig)(e,"arap",n.billType,!0,"",{appcode:y,pagecode:"20060RBM_CARD"}),v=null!=(a=b("sessionTradeType",n.dataSource))&&null!=a?a:n.tradeType;e.createUIDom({pagecode:m,appcode:y,reqDataQueryallbtns:{rqUrl:"/arap/arappub/queryallbtns.do",rqJson:'{\n  "pagecode": "'+m+'",\n  "appcode": "'+y+'"\n,\n  "billtype": "'+n.billType+'"\n,\n  "tradetype": "'+v+'"\n}',rqCode:"button"},reqDataQuerypage:{rqUrl:"/arap/arappub/querypage.do",rqJson:'{\n  "pagecode": "'+m+'",\n  "appcode": "'+y+'"\n}',rqCode:"template"}},(function(a){if(a){if(!a.template[n.tableId])return;var r=[];if(a.button&&a.button.button){var b=a.button.button,m=a.button.pullbillinfo;p.Info.pullBillInfoVOAry=m,r=(0,l.getInnerButtonkey)(b),(0,l.getButtonsKey)(b,p.Info.allButtonsKey),e.button.setButtons(b),e.button.setPopContent(s.innerButton.Delete_inner,p.state.json["receivablebill-000017"]),e.button.setUploadConfig("ImportData",h)}if(a.template){var y=a.template;(0,u.default)(e,n.searchId,a),y=function(e,t,a,r){if(a[n.tableId].items=a[n.tableId].items.map((function(e,a){return"billno"==e.attrcode&&(e.render=function(e,a,r){return React.createElement("a",{style:{textDecoration:"none",cursor:"pointer"},onClick:function(){var e=t.search.getAllSearchData(n.searchId);e&&f(n.searchKey,n.dataSource,e),"linksce"==t.getUrlParam("scene")||"fip"==t.getUrlParam("scene")?t.pushTo("/card",{status:"browse",id:a.pk_recbill.value,pagecode:"20060RBM_CARD_LINK",scene:"linksce"}):t.pushTo("/card",{status:"browse",id:a.pk_recbill.value,pagecode:a.pk_tradetype.value})}},a&&a.billno&&a.billno.value)}),e})),t.getUrlParam("status")&t.getUrlParam("src"))return a;var i={label:e.state.json["receivablebill-000020"],itemtype:"customer",attrcode:"opr",width:c.OperationColumn,visible:!0,fixed:"right",render:function(a,n,i){for(var s=r||[],d=[],u=0;u<s.length;u++){(0,l.buttonVisible)("browse",n,s[u])&&d.push(s[u])}return t.button.createOprationButton(d,{area:"list_inner",buttonLimit:3,onButtonClick:function(t,r){return(0,o.default)(e,t,r,a,n,i)}})}};return a[n.tableId].items.push(i),a}(p,e,y,r),(0,i.modifierSearchMetas)(n.searchId,e,y,n.billType,a.context.paramMap?a.context.paramMap.transtype:null,p),e.meta.setMeta(y,(function(){null!=a.context.paramMap&&e.search.setSearchValByField(n.searchId,"pk_tradetypeid",{display:a.context.paramMap.transtype_name,value:a.context.paramMap.pk_transtype})}))}a.context&&((0,d.loginContext)(a.context),(0,d.getContext)(d.loginContextKeys.transtype)&&p.refs.tradetypeBtn&&p.refs.tradetypeBtn.setVisible(!1)),t&&t()}}))};var r=a(1),o=p(a(316)),l=a(6),n=a(192),i=a(18),s=a(5),d=a(8),u=p(a(21)),c=a(12);function p(e){return e&&e.__esModule?e:{default:e}}r.base.NCPopconfirm,r.base.NCIcon;var f=r.cardCache.setDefData,b=r.cardCache.getDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(1),l=a(192),n=a(5),i=a(184),s=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,a,r,i,d){t.getSearchParam("p");switch(a){case n.innerButton.Delete_inner:e.Info.pk_bill=i.pk_recbill.value,e.Info.ts=i.ts.value,e.Info.index=d,e.delConfirm();break;case n.innerButton.Edit_inner:(0,o.ajax)({url:"/nccloud/arap/arappub/edit.do",data:{pk_bill:i.pk_recbill.value,billType:l.billType,sence:"0"},success:function(e){e.success&&("linksce"==t.getUrlParam("scene")||"fip"==t.getUrlParam("scene")?t.pushTo("/card",{status:"edit",id:i.pk_recbill.value,pagecode:"20060RBM_CARD_LINK",scene:"linksce"}):t.pushTo("/card",{status:"edit",id:i.pk_recbill.value,pagecode:i.pk_tradetype.value}))}});break;case n.innerButton.Copy_inner:"linksce"==t.getUrlParam("scene")||"fip"==t.getUrlParam("scene")?t.pushTo("/card",{status:"add",id:i.pk_recbill.value,type:"copy",pagecode:"20060RBM_CARD_LINK",scene:"linksce"}):t.pushTo("/card",{status:"add",id:i.pk_recbill.value,type:"copy",pagecode:i.pk_tradetype.value});break;case n.innerButton.Commit_inner:e.Info.tipUrl="/nccloud/arap/arappub/commit.do",e.Info.record=i,e.commitAndUncommit();break;case n.innerButton.Uncommit_inner:e.Info.tipUrl="/nccloud/arap/arappub/uncommit.do",e.Info.record=i,e.commitAndUncommit();break;case n.innerButton.MadeBill_inner:var u=[{pk_bill:i.pk_recbill.value,billType:l.billType,tradeType:i.pk_tradetype.value}];(0,s.default)(e,t,u,"",t.getSearchParam("c"))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(2),i=m(n),s=a(1),d=m(a(318)),u=a(324),c=a(257),p=a(19),f=m(a(258)),b=a(259);function m(e){return e&&e.__esModule?e:{default:e}}a(335);var y=s.base.NCNumber,h=s.base.NCSelect,v=s.base.NCForm,g=s.base.NCTabs,_=s.base.NCDiv,k=v.NCFormItem,I=h.NCOption,w=g.NCTabPane,T=[{value:"0",display:""},{value:"1",display:""},{value:"2",display:""},{value:"3",display:""}],C=void 0,x=null,S=null,B=null,E=null,R="",P="",D=void 0,A=void 0,F=void 0,j=void 0;function O(e){var t=this;e.createUIDom({pagecode:R,appcode:P},(function(a){if(a){if(a.template){var r=a.template;r=function(e,t){return t.table.showindex=!0,t.table.items=t.table.items.map((function(t,a){return"billno"==t.attrcode&&(t.renderStatus="browse",t.render=function(t,a,r){return i.default.createElement("a",{style:{textDecoration:"none",cursor:"pointer"},onClick:function(){!function(e,t){(0,s.ajax)({url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{tradeType:e.values.pk_tradetype.value,pk_bill:e.values.pk_bill.value},success:function(e){t.openTo(e.data.url,e.data.condition)}})}(a,e)}},a.values.billno.value)}),t})),t}(e,r),e.meta.oid=r.query.oid,e.meta.setMeta(r),(0,c.modifierSearchMetas)("query",e,r,A,D,t)}if(a.button){var o=a.button;e.button.setButtons(o)}}}))}var V=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.oldVal="",a.tableId="table",a.this_sett="",a.scale="",a.defScale="",a.state={json:{},verificationObj:{display:"",value:"0"},objTypeValue:{display:null,value:null},pk_tradetype:{display:null,value:null},value:[],settlement:{display:null,value:null},tabKeys:"1",active:1,ts:null,pk_org:null,schemeData:{objType:{display:"",value:0},objTypeValue:{display:"",value:null},pk_tradetype:{display:"",value:null},value:[]}},a.onAfterEvent=a.onAfterEvent.bind(a),a.changeTs=a.changeTs.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;window.onbeforeunload=function(){return""},R=this.props.getSearchParam("p"),P=this.props.getSearchParam("c"),C=this.props.ViewModel.getData("WholeVerifyDatas"),window.top===window.parent&&"20062002"!=P&&"20082002"!=P&&((0,b.updatePaCFV)(this,"#/prev"),R=this.props.getSearchParam("p"),P=this.props.getSearchParam("c")),!window.top===window.parent&&(R=this.props.getUrlParam("pagecode"),P=this.props.getUrlParam("appcode")),null!=C&&(x=C.objtype.display,B=C.objtype.value,S=C.objTypeValue.display,E=C.objTypeValue.value,D=C.pk_org.value,A=C.billType.value,this.setState({ts:C.ts.value,pk_org:D}));(0,s.getMultiLang)({moduleId:["verificationsheet","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){T=[{value:"0",display:e.state.json["verificationsheet-000000"]},{value:"1",display:e.state.json["verificationsheet-000001"]},{value:"2",display:e.state.json["verificationsheet-000002"]},{value:"3",display:e.state.json["verificationsheet-000003"]}],e.setState({verificationObj:{display:x||e.state.json["verificationsheet-000000"],value:B||"0"},objTypeValue:{display:S||"",value:E||null},schemeData:{objType:{display:e.state.json["verificationsheet-000000"],value:0},objTypeValue:{display:"",value:null},pk_tradetype:{display:"",value:null},value:[]}}),null==C&&(0,s.toast)({duration:3,color:"warning",content:e.state.json["verificationsheet-000004"]})}))}})}},{key:"componentDidMount",value:function(){var e=this.state,t=e.value,a=e.schemeData;O.call(this,this.props),this.props.button.setButtonVisible(["Delete"],!1);var r=this.state;r.verificationObj,r.objTypeValue;F=(0,p.businessDate)(),t=[j=(0,p.getPreMonth)(F),F],a.value=[j,F],this.setState({value:t,schemeData:a},(function(){})),null!=C&&this.getData(!1)}},{key:"componentWillUpdate",value:function(e,t){"1"==t.tabKeys&&(0==this.props.editTable.getAllRows("table",!0).length?this.props.button.setButtonDisabled("VerifyLink",!0):this.props.button.setButtonDisabled("VerifyLink",!1))}},{key:"onAfterEvent",value:function(e,t,a,r,o,l,n){var i=n.values.money_bal.value;"this_sett"==a&&(i<0?1*o[0].newvalue.value>1*i&&1*o[0].newvalue.value<0?e.editTable.setValByKeyAndRowId(t,n.rowid,"this_sett",{value:o[0].newvalue.value}):e.editTable.setValByKeyAndRowId(t,n.rowid,"this_sett",{value:i}):1*o[0].newvalue.value>0&&1*o[0].newvalue.value<1*i?e.editTable.setValByKeyAndRowId(t,n.rowid,"this_sett",{value:o[0].newvalue.value}):e.editTable.setValByKeyAndRowId(t,n.rowid,"this_sett",{value:i}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.button,r=t.search,o=t.editTable.createEditTable,l=r.NCCreateSearch,n=this.state,s=n.tabKeys,d=n.settlement,c=a.createButtonApp,p=T.map((function(e){return i.default.createElement(I,{value:e},e.display)})),f=this.props.BillHeadInfo.createBillHeadInfo;return i.default.createElement("div",{id:"RelationId"},i.default.createElement(_,{areaCode:_.config.HEADER,className:"nc-bill-header-area relation-tit nc-theme-common-header-bgc"},i.default.createElement("div",{className:"header-title-search-area"},f({title:this.state.json["verificationsheet-000011"],backBtnClick:function(){e.handleBack()}})),i.default.createElement("div",{className:"title-right"},"1"==s?i.default.createElement("div",{className:"contions"},i.default.createElement("div",{className:"contions-box-set"},i.default.createElement("div",{className:"title-settle nc-theme-common-font-c"},this.state.json["verificationsheet-000012"],"：",i.default.createElement("span",{className:"nc-theme-title-font-c"},this.this_sett))),i.default.createElement("div",{className:"title-rr"},i.default.createElement("div",{className:"contions-box number-style"},i.default.createElement(k,{showMast:!1,labelName:this.state.json["verificationsheet-000010"],isRequire:!0,inline:!0},i.default.createElement(y,{fieldid:"financeNum",style:{"text-align":"left"},className:"bill-instruction-input",value:this.state.settlement.value,scale:this.defScale,onBlur:function(t){1*e.this_sett>0&&(t>=1*e.this_sett||t<=0)&&(d.value=e.this_sett),1*e.this_sett<0&&(t>=0||t<=1*e.this_sett)&&(d.value=e.this_sett),e.setState({settlement:d})},onChange:function(e){d.value=e}}))),i.default.createElement("div",{className:"header-button-area"},c({area:"list_head",buttonLimit:3,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))):i.default.createElement("div",{className:"header-button-area"},c({area:"list_head",buttonLimit:3,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),i.default.createElement("div",{className:"divider nc-theme-area-split-bc"}),i.default.createElement("div",{classname:"content-table"},i.default.createElement("div",{className:"tabs-area"},i.default.createElement(g,{navtype:"turn",contenttype:"moveleft",activeKey:s,defaultActiveKey:"1",onChange:function(t){e.setState({tabKeys:t},(function(){null!=C&&("1"==e.state.tabKeys?(e.handleQueryBtn(),e.props.button.setButtonVisible(["Share","VerifyLink"],!0),e.props.button.setButtonVisible(["Delete"],!1)):(e.child.getData(),e.props.button.setButtonVisible(["Delete","Return"],!0),e.props.button.setButtonVisible(["Share","VerifyLink"],!1)))}))}},this.getNoRelation(o,p,c,l),this.getRelation()))))}}]),t}(n.Component),o=function(){var e=this;this.getData=function(){var t=e.state.settlement,a={objType:B,objTypeValue:C.objTypeValue.value,pk_tradetype:null,beginDate:j,endDate:F},r={queryTreeFormatVO:null,verifyConditionVO:a,pageId:R,pk_bill:C.pk_bill.value,pk_item:C.pk_item,billType:C.billType.value,ts:e.state.ts};(0,s.ajax)({url:"/nccloud/arap/billverify/preVerifyLinkingQuery.do",data:r,success:function(a){var r=a.success,o=a.data;if(r){var l=o.grid;e.state.ts=o.ts,e.defScale=o.scale,e.this_sett=e.handleAccuracy(o.this_sett,o.scale),e.state.settlement.value=e.handleAccuracy(o.this_sett,o.scale),e.setState({settlement:t},(function(){e.getAccuracy(t)})),l&&l.table?(e.props.editTable.setTableData("table",l.table),0==l.table.rows.length?e.props.button.setButtonDisabled("VerifyLink",!0):e.props.button.setButtonDisabled("VerifyLink",!1)):(e.props.editTable.setTableData("table",{rows:[]}),e.props.button.setButtonDisabled("Share",!0))}}})},this.handleQueryBtn=function(){var t=e.state,a=t.verificationObj,r=t.objTypeValue,o=t.pk_tradetype,l=t.value,n=t.settlement,i=void 0;i=l.length>0?{objType:a.value,objTypeValue:r.value,pk_tradetype:o.value,beginDate:l[0],endDate:l[1]}:{objType:a.value,objTypeValue:r.value,pk_tradetype:o.value};var d={pageId:R,pk_bill:C.pk_bill.value,pk_item:C.pk_item,billType:C.billType.value,ts:e.state.ts,verifyConditionVO:i};(0,s.ajax)({url:"/nccloud/arap/billverify/preVerifyLinkingQuery.do",data:d,success:function(t){var a=t.success,r=t.data;if(a){var o=r.grid;e.state.ts=r.ts,e.this_sett=e.handleAccuracy(r.this_sett,r.scale),e.state.settlement.value=e.handleAccuracy(r.this_sett,r.scale),e.setState({settlement:n}),o&&o.table?(e.props.editTable.setTableData("table",o.table),e.props.button.setButtonDisabled("Share",!1),(0,s.toast)({color:"success",content:e.state.json["verificationsheet-000126"]+o.table.rows.length+e.state.json["verificationsheet-000127"]}),e.props.button.setButtonDisabled("VerifyLink",!1)):((0,s.toast)({color:"warning",content:e.state.json["verificationsheet-000125"]}),e.props.editTable.setTableData("table",{rows:[]}),e.props.button.setButtonDisabled(["Share","VerifyLink"],!0))}}})},this.handleShare=function(){for(var t=e.props.editTable.getAllRows("table",!0),a=e.state.settlement.value.replace("-",""),r=[],o=t.length,l=0;l<o;l++)t[l].values.this_sett={value:""},e.props.editTable.setValByKeyAndRowId("table",t[l].rowid,"this_sett",{value:""}),r.push(l);setTimeout((function(){e.props.editTable.selectTableRows("table",r,!1)}),0);for(var n=0;n<o;n++){var i=t[n].values.money_bal.value.replace("-",""),d=t[n].values.money_bal.value;-1==a.indexOf("-")&&(-1==(0,s.sum)(i,"-"+a).indexOf("-")?(t[n].values.this_sett={value:d>0?a:"-"+a},a=(0,s.sum)(a,"-"+i)):(t[n].values.this_sett={value:d},a=(0,s.sum)(a,"-"+i)))}var u=[];for(n=0;n<o;n++)1*t[n].values.this_sett.value!=0&&u.push(n);for(n=0;n<o;n++)t[n].values.this_sett.value&&e.props.editTable.setValByKeyAndRowId("table",t[n].rowid,"this_sett",{value:t[n].values.this_sett.value});setTimeout((function(){e.props.editTable.setStatus("table","edit"),e.props.editTable.setEditableRowKeyByIndex("table",u,"this_sett",!0),e.props.editTable.selectTableRows("table",u,!0)}),0)},this.handleVerification=function(){for(var t=e,a=e.state.settlement,r=e.props.editTable.getCheckedRows("table"),o=0,l=0,n=r.length;l<n;l++)o=(0,s.sum)(o,r[l].data.values.this_sett.value.replace("-",""));if(Number(a.value.replace("-",""))==Number(o.replace(",",""))){var i=[],d=[];for(l=0,n=r.length;l<n;l++){d.push(l);var u=void 0,c=r[l].data.values,p=c.objtype.value;0==p?u=c.customer.value:1==p?u=c.supplier.value:2==p?u=c.pk_deptid.value:3==p&&(u=c.pk_psndoc.value);var f={pk_bill:r[l].data.values.pk_bill.value,pk_item:r[l].data.values.pk_item&&r[l].data.values.pk_item.value||"",billType:r[l].data.values.pk_billtype.value,this_sett:r[l].data.values.this_sett.value,linkedPk:r[l].data.values.linkedPk.value,objTypeValue:u};i.push(f)}var b={pageId:e.props.getSearchParam("p"),pk_bill:C.pk_bill.value,pk_item:C.pk_item,billType:C.billType.value,ts:e.state.ts,this_sett:a.value,linkVOs:i};(0,s.ajax)({url:"/nccloud/arap/billverify/preVerifyLink.do",data:b,success:function(a){var r=a.success;a.data;r&&((0,s.toast)({duration:3,color:"success",content:e.state.json["verificationsheet-000005"]}),t.setState({tabKeys:"2"},(function(){t.child.getData(),t.props.button.setButtonVisible(["Delete","Return"],!0),t.props.button.setButtonVisible(["Share","VerifyLink"],!1)})))}})}else(0,s.toast)({duration:3,color:"warning",title:e.state.json["verificationsheet-000006"],content:e.state.json["verificationsheet-000007"]})},this.onSelectedFn=function(t,a,r,o,l){var n=e.props.editTable.getAllRows(a,!0);e.oldVal="";var i=r.values.money_bal.value;if(l)t.editTable.setStatus("table","edit"),t.editTable.setValByKeyAndRowId("table",n[o].rowid,"this_sett",{value:i}),t.editTable.setEditableRowKeyByIndex("table",o,"this_sett",!0);else{t.editTable.setValByKeyAndRowId("table",n[o].rowid,"this_sett",{value:""}),t.editTable.setEditableRowKeyByIndex("table",o,"this_sett",!1);var s=!0,d=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){if(c.value.selected)return}}catch(e){d=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw u}}t.editTable.setStatus("table","browse")}},this.onSelectedAllFn=function(t,a,r,o){for(var l=e.props.editTable.getAllRows(a,!0),n=[],i=0;i<o;i++){var s=l[i].values.money_bal.value,d=l[i].rowid;n.push(i),r?(t.editTable.setStatus("table","edit"),t.editTable.setValByKeyAndRowId("table",d,"this_sett",{value:s}),t.editTable.setEditableRowKeyByIndex("table",n,"this_sett",!0)):(t.editTable.setValByKeyAndRowId("table",d,"this_sett",{value:""}),t.editTable.setStatus("table","browse"),t.editTable.setEditableRowKeyByIndex("table",n,"this_sett",!1))}},this.handleBack=function(){var t=C?C.pk_bill.value:"",a=C.scene,r=C.appcode,o=C.pageId,l="appcode="+r+"&c="+r+"&p="+o+"&pagecode="+o+"&id="+t+"&scene="+a+"&status=browse";window.top===window.parent?null!=C&&e.props.pushTo("/card",{pagecode:o,appcode:r,id:t,scene:a,status:"browse"}):(window.location.hash="/card?"+l,window.parent.location.hash="/card?"+l)},this.getAccuracy=function(t){var a=t.value;e.scale=a.split(".")[1].length},this.handleAccuracy=function(e,t){return e.split(".")[0]+"."+e.split(".")[1].slice(0,Number(t))},this.getNoRelation=function(t,a,r,o){return i.default.createElement(w,{tab:e.state.json["verificationsheet-000008"],key:"1"},i.default.createElement("div",{className:"divider nc-theme-area-split-bc"}),(0,f.default)(e,a,r,o,"query"),i.default.createElement("div",{className:"no-relation-table"},t("table",{fieldid:"previerify",onAfterEvent:e.onAfterEvent,useFixedHeader:!0,onSelected:e.onSelectedFn,onSelectedAll:e.onSelectedAllFn,showCheck:!0,adaptionHeight:!0})))},this.getRelation=function(){return i.default.createElement(w,{tab:e.state.json["verificationsheet-000009"],key:"2"},i.default.createElement(d.default,{onRef:function(t){e.child=t},changeTs:e.changeTs,ts:e.state.ts}))},this.handleBatchDelete=function(){e.child.handleBatchDelete()},this.changeTs=function(t){e.setState({ts:t})},this.handleAddAdvBodyCons=function(t){e.setState({schemeData:t})},this.handleEmpty=function(){var t=e.state,a=t.objTypeValue,r=t.pk_tradetype,o=t.value;a={display:null,value:null},r={display:null,value:null},o=[],e.setState({objTypeValue:a,pk_tradetype:r,value:o})}},r);V=(0,s.createPage)({mutiLangCode:""})(V),t.default=V},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),n=(r=l)&&r.__esModule?r:{default:r},i=a(1),s=a(319);a(322);var d="",u=void 0,c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getData=function(){var e={pageId:d,pk_bill:u.pk_bill.value,pk_item:u.pk_item,billType:u.billType.value,ts:u.ts.value};(0,i.ajax)({url:"/nccloud/arap/billverify/preVerifyLinkedQuery.do",data:e,success:function(e){var t=e.success,r=e.data;if(t){var o=r.grid;a.props.changeTs(r.ts),o?a.props.editTable.setTableData("table",o.table):a.props.editTable.setTableData("table",{rows:[]})}}})},a.handleBatchDelete=function(){for(var e=a.props.editTable.getCheckedRows("table"),t=[],r=[],o=0,l=e.length;o<l;o++){var n=void 0,s=e[o].data.values,d=s.objtype.value;0==d?n=s.customer.value:1==d?n=s.supplier.value:2==d?n=s.pk_deptid.value:3==d&&(n=s.pk_psndoc.value),t.push(e[o].index);var c={pk_bill:e[o].data.values.pk_bill.value,pk_item:e[o].data.values.pk_item&&e[o].data.values.pk_item.value||"",billType:e[o].data.values.pk_billtype.value,linkedPk:e[o].data.values.linkedPk.value,objTypeValue:n};r.push(c)}var p={pk_bill:u.pk_bill.value,pk_item:u.pk_item,billType:u.billType.value,ts:a.props.ts,linkVOs:r};(0,i.ajax)({url:"/nccloud/arap/billverify/preVerifyCancelLink.do",data:p,success:function(e){e.success&&((0,i.toast)({color:"success",content:a.state.json["verificationsheet-000015"]}),a.props.editTable.deleteTableRowsByIndex("table",t),a.props.changeTs(e.data.ts))}})},a.state={json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"verificationsheet",domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t})}})}},{key:"componentDidMount",value:function(){s.initTemplate.call(this,this.props,this),u=this.props.ViewModel.getData("WholeVerifyDatas"),d=this.props.getSearchParam("p"),this.props.onRef(this),null!=u&&this.getData()}},{key:"render",value:function(){var e=this.props.editTable.createEditTable;return n.default.createElement("div",{className:"nc-bill-list"},n.default.createElement("div",{className:"nc-bill-table-area"},e("table",{fieldid:"trelationtable",useFixedHeader:!0,showCheck:!0})))}}]),t}(l.Component);c=(0,i.createPage)({mutiLangCode:""})(c),t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var r,o=a(320),l=(r=o)&&r.__esModule?r:{default:r};t.initTemplate=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){s=this.props.getSearchParam("p"),i=this.props.getSearchParam("c"),e.createUIDom({pagecode:s,appcode:i},(function(a){if(a){if(a.template){var r=a.template;r=function(e,t,a){d=e.ViewModel.getData("WholeVerifyDatas"),t.table.items=t.table.items.map((function(t,a){return"billno"==t.attrcode&&(t.renderStatus="browse",t.render=function(t,a,r){return React.createElement("a",{style:{textDecoration:"none",cursor:"pointer"},onClick:function(){!function(e,t){(0,o.ajax)({url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{tradeType:e.values.pk_tradetype.value,pk_bill:e.values.pk_bill.value},success:function(e){t.openTo(e.data.url,e.data.condition)}})}(a,e)}},a.values.billno.value)}),t}));var r={label:a.state.json["verificationsheet-000014"],itemtype:"customer",attrcode:"opr",width:"150px",visible:!0,fixed:"right",render:function(t,r,o){var l=void 0,i=r.values,s=i.objtype.value;0==s?l=i.customer.value:1==s?l=i.supplier.value:2==s?l=i.pk_deptid.value:3==s&&(l=i.pk_psndoc.value);var u=[{pk_bill:i.pk_bill.value,pk_item:i.pk_item&&i.pk_item.value||"",billType:i.pk_billtype.value,linkedPk:i.linkedPk.value,objTypeValue:l}],c={pk_bill:d.pk_bill.value,pk_item:d.pk_item,billType:d.billType.value,ts:"",linkVOs:u};return e.button.createOprationButton(["Delete_inner"],{area:"list_inner",buttonLimit:3,onButtonClick:function(e,l){return(0,n.default)(e,l,t,r,o,c,a)}})}};return t.table.items.push(r),t}(e,r,t),e.meta.setMeta(r)}if(a.button){var l=a.button;e.button.setButtons(l),e.button.setPopContent("delete",t.state.json["verificationsheet-000013"])}}}))};var r,o=a(1),l=a(321),n=(r=l)&&r.__esModule?r:{default:r};var i=void 0,s=void 0,d=void 0},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1);t.default=function(e,t,a,o,l,n,i){switch(t){case"Delete_inner":n.ts=e.ts,(0,r.ajax)({url:"/nccloud/arap/billverify/preVerifyCancelLink.do",data:n,success:function(t){t.success&&((0,r.toast)({color:"success",content:i.state.json["verificationsheet-000015"]}),e.editTable.deleteTableRowsByIndex("table",l),e.changeTs(t.data.ts))}})}}},function(e,t,a){var r=a(323);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClick=void 0;var r,o=a(325),l=(r=o)&&r.__esModule?r:{default:r};t.buttonClick=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case r.headButton.VerifyLink:this.handleVerification();break;case r.headButton.Delete:this.handleBatchDelete();break;case r.headButton.Share:this.handleShare()}};var r=a(5)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.advSearchClearEve=t.buttonClick=t.searchBtnClick=void 0;var r=n(a(327)),o=n(a(328)),l=n(a(329));function n(e){return e&&e.__esModule?e:{default:e}}t.searchBtnClick=r.default,t.buttonClick=o.default,t.advSearchClearEve=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.state.schemeData,a=e.props.ViewModel.getData("WholeVerifyDatas"),o=a.effectstatus,l=e.props.getSearchParam("p"),n={objType:t.objType.value,objTypeValue:t.objTypeValue.value,pk_tradetype:t.pk_tradetype.value,beginDate:t.value[0],endDate:t.value[1]},i={queryTreeFormatVO:e.props.search.getQueryInfo("query",!0),verifyConditionVO:n,pageId:l,pk_bill:a.pk_bill.value,pk_item:a.pk_item,billType:a.billType.value,ts:e.state.ts},s=0==o?"/nccloud/arap/billverify/preVerifyLinkingQuery.do":"/nccloud/arap/billverify/nowVerifyQuery.do";(0,r.ajax)({url:s,data:i,success:function(t){var a=t.success,r=t.data;if(a){var o=e.state.settlement,l=r.grid;e.state.ts=r.ts,e.this_sett=Number(r.this_sett).toFixed(r.scale),e.state.settlement.value=Number(r.this_sett).toFixed(r.scale),e.setState({settlement:o}),l&&l[e.tableId]?(e.newTableData=l[e.tableId],e.props.editTable.setTableData(e.tableId,l[e.tableId])):e.props.editTable.setTableData(e.tableId,{rows:[]})}}})};var r=a(1)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){switch(a){case r.headButton.Query:e.handleQueryBtn();break;case r.headButton.Empty:e.handleEmpty()}};var r=a(5)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.state.schemeData;t.objTypeValue={display:null,value:null},t.pk_tradetype={display:null,value:null},t.value=[],e.setState({schemeData:t})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=s(o),n=a(1),i=s(a(10));function s(e){return e&&e.__esModule?e:{default:e}}a(331);var d=n.base.NCFormControl,u=n.base.NCDatePicker,c=n.base.NCRow,p=n.base.NCCol,f=n.base.NCSelect,b=f.NCOption,m=[{value:0,display:""},{value:1,display:""},{value:2,display:""},{value:3,display:""}],y=u.NCRangePicker,h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getConsDatas=function(){return a.state.schemeData},a.getInput=function(e,t){return l.default.createElement("div",{className:"finance"},l.default.createElement("span",{className:"lable"},e),l.default.createElement("div",{className:"finance-refer"},l.default.createElement(d,{fieldid:"input"+t,value:t.value})))},a.getRefer=function(e,t,r,o,n){return l.default.createElement("div",{className:"com-finance"},l.default.createElement("span",{className:"com-lable"},n),l.default.createElement("div",{className:"com-finance-refer"},l.default.createElement("div",{className:"com-refer"},l.default.createElement(i.default,{fieldid:"refer"+r,tag:e,refcode:t,value:{refname:r.display,refpk:r.value},queryCondition:function(){return{parentbilltype:"F0,F1,F2,F3"}},onChange:function(e){r.value=e.refpk,r.display=e.refname,a.props.handleAddAdvBodyCons(o)}}))))},a.getDifferentRefer=function(e,t,r,o){switch(t.value){case 0:return l.default.createElement(i.default,{fieldid:"CustomerDefaultTreeGridRef",tag:"CustomerDefaultTreeGridRef",refcode:"uapbd/refer/customer/CustomerDefaultTreeGridRef/index.js",value:{refname:e.display,refpk:e.value},queryCondition:function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}},isMultiSelectedEnabled:!1,onChange:function(t){e.value=t.refpk,e.display=t.refname,a.props.handleAddAdvBodyCons(o)},placeholder:e.display||a.state.json["verificationsheet-000000"]});case 1:return l.default.createElement(i.default,{fieldid:"SupplierRefTreeGridRef",tag:"SupplierRefTreeGridRef",refcode:"uapbd/refer/supplier/SupplierRefTreeGridRef/index.js",value:{refname:e.display,refpk:e.value},queryCondition:function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}},onChange:function(t){e.value=t.refpk,e.display=t.refname,a.props.handleAddAdvBodyCons(o)},placeholder:e.display||a.state.json["verificationsheet-000001"]});case 2:return l.default.createElement(i.default,{fieldid:"DeptTreeRef",tag:"DeptTreeRef",refcode:"uapbd/refer/org/DeptTreeRef/index.js",value:{refname:e.display,refpk:e.value},isShowUnit:!0,unitCondition:function(){return{pkOrgs:r,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},queryCondition:function(){return{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}},onChange:function(t){e.value=t.refpk,e.display=t.refname,a.props.handleAddAdvBodyCons(o)},placeholder:e.display||a.state.json["verificationsheet-000002"]});case 3:return l.default.createElement(i.default,{fieldid:"PsndocTreeGridRef",tag:"PsndocTreeGridRef",refcode:"uapbd/refer/psninfo/PsndocTreeGridRef/index.js",value:{refname:e.display,refpk:e.value},isShowUnit:!0,unitCondition:function(){return{pkOrgs:r,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}},queryCondition:function(){return{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:r}},onChange:function(t){e.value=t.refpk,e.display=t.refname,a.props.handleAddAdvBodyCons(o)},placeholder:e.display||a.state.json["verificationsheet-000003"]})}},a.getReferShow=function(e,t){var r=a.props.pkOrg,o=e.objType,n=e.objTypeValue,i=e.pk_tradetype;e.value;return l.default.createElement("div",null,l.default.createElement("div",{className:"commons"},l.default.createElement(c,null,l.default.createElement(p,{md:12,xs:12,sm:12},l.default.createElement("div",{className:"com-finance"},l.default.createElement("span",{className:"com-lable"},a.state.json["verificationsheet-000020"]),l.default.createElement("div",{className:"com-finance-refer"},l.default.createElement("div",{className:"com-refer"},l.default.createElement(f,{fieldid:"objType",value:o.display,onChange:function(t){o.display=t.display,o.value=t.value,e.objTypeValue={display:null,value:null},a.props.handleAddAdvBodyCons(e)}},t))))),l.default.createElement(p,{md:12,xs:12,sm:12},l.default.createElement("div",{className:"com-finance"},l.default.createElement("span",{className:"com-lable"},a.state.json["verificationsheet-000021"]),l.default.createElement("div",{className:"com-finance-refer"},l.default.createElement("div",{className:"com-refer"},a.getDifferentRefer(n,o,r,e))))),l.default.createElement(p,{md:12,xs:12,sm:12},a.getRefer("Transtype","uap/refer/riart/transtype/index.js",i,e,a.state.json["verificationsheet-000016"])),l.default.createElement(p,{md:12,xs:12,sm:12},l.default.createElement("div",{className:"com-finance date"},l.default.createElement("span",{className:"com-lable"},a.state.json["verificationsheet-000022"]),l.default.createElement("div",{className:"com-finance-refer"},l.default.createElement("div",{className:"com-refer"},l.default.createElement(y,{fieldid:"date",format:"YYYY-MM-DD",onChange:function(t){e.value=t,a.props.handleAddAdvBodyCons(e)},showClear:!0,showOk:!0,className:"range-fixed",value:e.value,placeholder:a.state.json["verificationsheet-000017"],dateInputPlaceholder:[a.state.json["verificationsheet-000018"],a.state.json["verificationsheet-000019"]]}))))))))},a.state={json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;(0,n.getMultiLang)({moduleId:["verificationsheet","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){m=[{value:0,display:e.state.json["verificationsheet-000000"]},{value:1,display:e.state.json["verificationsheet-000001"]},{value:2,display:e.state.json["verificationsheet-000002"]},{value:3,display:e.state.json["verificationsheet-000003"]}]}))}})}},{key:"render",value:function(){var e=this.props.schemeData,t=m.map((function(e){return l.default.createElement(b,{value:e},e.display)}));return l.default.createElement("div",{id:"common"},this.getReferShow(e,t))}}]),t}(o.Component);t.default=h},function(e,t,a){var r=a(332);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"#common .commons-tit {\n  margin-top: 10px;\n  width: 100%;\n  height: 30px;\n  background-color: #f5f5f5;\n  text-align: left;\n  line-height: 30px;\n  padding-left: 20px;\n}\n#common .commons {\n  font-size: 12px;\n  padding-left: 25px;\n  padding-right: 25px;\n  color: #474d54;\n}\n#common .commons .common-head {\n  margin-top: 10px;\n  margin-right: 50px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#common .commons .u-input-group .u-form-control {\n  margin-bottom: 0px;\n}\n#common .commons .u-form-item {\n  min-height: 0;\n}\n#common .commons .date {\n  margin-bottom: 5px;\n}\n#common .commons .com-finance {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 5px;\n  padding: 5px 0;\n  width: 550px;\n  background-color: #f4f5f7;\n}\n#common .commons .com-finance .com-lable {\n  display: inline-block;\n  height: 30px;\n  line-height: 30px;\n  width: 200px;\n  text-align: left;\n  padding-left: 8px;\n}\n#common .commons .com-finance .com-finance-refer {\n  width: 345px;\n  text-align: left;\n}\n#common .commons .com-finance .com-finance-refer .com-refer {\n  width: 260px;\n}\n#common .commons .com-finance .com-finance-refer .calendar-picker {\n  width: 260px;\n}\n#common .commons .u-label {\n  height: 30px;\n  line-height: 30px;\n  min-width: 90px;\n  width: 90px;\n  text-align: left;\n}\n#common .commons .u-checkbox {\n  width: 130px;\n  height: 14px;\n  border-radius: 2px;\n  line-height: 14px;\n}\n#common .commons .station-position {\n  width: 130px;\n}\n",""])},function(e,t,a){var r=a(334);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,".search-contions {\n  background-color: white;\n  height: 44px;\n}\n.search-contions .querycons-style {\n  height: 44px;\n  padding-left: 20px;\n  padding-right: 3%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.search-contions .querycons-style .contions-box {\n  width: 16%;\n  height: 30px;\n}\n.search-contions .querycons-style .contions-box-query {\n  width: 33.5%;\n  height: 30px;\n  margin-left: -1%;\n}\n.search-contions .querycons-style .contions-box-query .refer-query {\n  margin-left: 1.4%;\n}\n.search-contions .querycons-style .contions-box-query .refer-query .heigh-search {\n  height: 30px;\n  float: left;\n  -webkit-transform: translate(-11px, 0);\n          transform: translate(-11px, 0);\n  margin-top: -1px;\n  margin-left: -3px;\n}\n.search-contions .querycons-style .contions-box-query .refer-query .search {\n  float: left;\n}\n.search-contions .querycons-style .contions-box-query .refer-query .search .button-app-wrapper {\n  display: inline-block;\n  height: 30px;\n}\n.search-contions .search > span > button:nth-child(2) {\n  margin-right: 0px;\n}\n.refer .span-obj {\n  width: 60px;\n  height: 30px;\n}\n.refer-query {\n  width: 100%;\n  height: 30px;\n  margin-left: 2%;\n}\n.settlement {\n  width: 100%;\n  height: 50px;\n  border-radius: 10px;\n  border: 1px solid #cccccc;\n  background: white;\n  margin-top: 5px;\n  padding-top: 10px;\n  padding-left: 5px;\n  padding-right: 10px;\n  margin-bottom: 5px;\n}\n.u-select .u-select-selection {\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  height: 30px !important;\n}\n.search-area-contant {\n  min-width: 10px;\n  margin: 0;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.NC_CreateSearch .lightapp-component-search .search-component-rowArea {\n  min-width: 166px;\n  padding: 1px 0 0 15px;\n}\n",""])},function(e,t,a){var r=a(336);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"#RelationId {\n  width: 100%;\n}\n#RelationId .u-tabs-nav-container {\n  font-size: 14px;\n  line-height: 1.5;\n  overflow: hidden;\n  white-space: nowrap;\n  outline: none;\n  zoom: 1;\n  padding-left: 20px;\n}\n#RelationId .relation-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background-color: white;\n  padding: 0 20px;\n}\n#RelationId .relation-tit .number-style .u-form-error.show {\n  display: none;\n}\n#RelationId .relation-tit .title-left {\n  height: 25px;\n  font-size: 16px;\n  font-family: MicrosoftYaHei;\n  color: #111111;\n  line-height: 25px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#RelationId .relation-tit .title-left .title-style {\n  font-weight: normal;\n  font-size: 16px;\n  height: 32px;\n  line-height: 32px;\n}\n#RelationId .relation-tit .title-right {\n  height: 54px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#RelationId .relation-tit .title-right .title-rr {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#RelationId .relation-tit .title-right .contions {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n#RelationId .relation-tit .title-right .contions .contions-box-set {\n  width: 35%;\n  height: 30px;\n  float: left;\n  margin-right: 3%;\n}\n#RelationId .relation-tit .title-right .contions .contions-box-set .title-settle {\n  height: 30px;\n  line-height: 30px;\n  text-align: right;\n  -webkit-transform: translate(-6px, 0);\n          transform: translate(-6px, 0);\n}\n#RelationId .relation-tit .title-right .contions .contions-box {\n  min-width: 200px;\n  height: 30px;\n  margin-right: 1px;\n}\n#RelationId .relation-tit .title-right .contions .contions-box .u-input-group-outer {\n  max-width: 125px !important;\n}\n#RelationId .relation-tit .title-right .contions .contions-box .u-form-item > div:nth-child(1) .u-input-group-outer {\n  width: 125px;\n}\n#RelationId .relation-tit .title-right .contions .contions-box .u-label {\n  text-align: right;\n  padding-right: 5px;\n  font-size: 14px;\n  padding-top: 7px;\n  -webkit-transform: translate(0px, -10px);\n          transform: translate(0px, -10px);\n}\n#RelationId .title-right {\n  width: 80%;\n  padding-left: 11%;\n}\n#RelationId .u-tabs .u-tabs-bar,\n#RelationId .u-tabs .u-tabs-nav-container {\n  font-size: 14px;\n  line-height: 1.5;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  position: relative;\n  white-space: nowrap;\n  outline: none;\n  zoom: 1;\n}\n@media screen and (max-width: 1281px) {\n  #RelationId .title-right {\n    width: 80%;\n    padding-left: 10%;\n  }\n}\n@media screen and (min-width: 1282px) and (max-width: 1439px) {\n  #RelationId .title-right {\n    width: 80%;\n    padding-left: 9.6%;\n  }\n}\n@media screen and (min-width: 1440px) and (max-width: 1920px) {\n  #RelationId .title-right {\n    width: 80%;\n    padding-left: 11%;\n  }\n}\n#RelationId .divider {\n  border-bottom: 1px solid #d0d0d0;\n}\n#RelationId .calendar-picker {\n  width: 100%;\n}\n",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(2),i=y(n),s=a(1),d=a(260),u=y(a(339)),c=a(220),p=a(257),f=y(a(258)),b=a(19),m=a(259);function y(e){return e&&e.__esModule?e:{default:e}}a(349);var h=s.base.NCSelect,v=s.base.NCForm,g=s.base.NCDiv,_=s.base.NCNumber,k=v.NCFormItem,I=h.NCOption,w=[{value:"0",display:""},{value:"1",display:""},{value:"2",display:""},{value:"3",display:""}],T=void 0,C=null,x=null,S=null,B=null,E="",R="",P=void 0,D=void 0,A=void 0,F=void 0,j=void 0,O=void 0,V=function(e,t){e.createUIDom({pagecode:E,appcode:R},(function(a){if(a){if(a.template){var r=a.template;r=function(e,t){return t.table.showindex=!0,t.table.items=t.table.items.map((function(t){return"billno"==t.attrcode&&(t.renderStatus="browse",t.render=function(t,a){return i.default.createElement("a",{style:{textDecoration:"none",cursor:"pointer"},onClick:function(){!function(e,t){(0,s.ajax)({url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{tradeType:e.values.pk_tradetype.value,pk_bill:e.values.pk_bill.value},success:function(e){t.openTo(e.data.url,e.data.condition)}})}(a,e)}},a.values.billno.value)}),t})),t}(e,r),e.meta.oid=r.query.oid,e.meta.setMeta(r),(0,p.modifierSearchMetas)("query",e,r,D,P,t)}if(a.button){var o=a.button;e.button.setButtons(o)}}}))};var q=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.oldVal="",a.tableId="table",a.this_sett="",a.defScale="",a.transferDatas={},a.state={json:{},verificationObj:{display:"",value:"0"},objTypeValue:{display:null,value:null},pk_tradetype:{display:null,value:null},value:[],settlement:{display:null,value:null},pk_org:null,isSupplementModelShow:!1,modelData:{},ts:null,scale:"",schemeData:{objType:{display:"",value:0},objTypeValue:{display:"",value:null},pk_tradetype:{display:"",value:null},value:[]}},a.handleSupplement=a.handleSupplement.bind(a),a.onAfterEvent=a.onAfterEvent.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;window.onbeforeunload=function(){return""},null!=(T=this.props.ViewModel.getData("WholeVerifyDatas"))&&(C=T.objtype.display,S=T.objtype.value,x=T.objTypeValue.display,B=T.objTypeValue.value,P=T.pk_org.value,D=T.billType.value,this.setState({ts:T.ts.value,pk_org:P})),V(this.props,this),E=this.props.getSearchParam("p"),R=this.props.getSearchParam("c"),window.top===window.parent&&"20062002"!=R&&"20082002"!=R&&((0,m.updatePaCFV)(this,"#/nowv"),E=this.props.getSearchParam("p"),R=this.props.getSearchParam("c")),!window.top===window.parent&&(E=this.props.getUrlParam("pagecode"),R=this.props.getUrlParam("appcode"));(0,s.getMultiLang)({moduleId:["verificationsheet","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){w=[{value:"0",display:e.state.json["verificationsheet-000000"]},{value:"1",display:e.state.json["verificationsheet-000001"]},{value:"2",display:e.state.json["verificationsheet-000002"]},{value:"3",display:e.state.json["verificationsheet-000003"]}],e.setState({verificationObj:{display:C||e.state.json["verificationsheet-000000"],value:S||"0"},objTypeValue:{display:x||"",value:B||null},schemeData:{objType:{display:e.state.json["verificationsheet-000000"],value:0},objTypeValue:{display:"",value:null},pk_tradetype:{display:"",value:null},value:[]}}),null==T&&(0,s.toast)({duration:3,color:"warning",content:e.state.json["verificationsheet-000004"]})}))}})}},{key:"componentDidMount",value:function(){var e=this.state,t=e.value,a=e.schemeData;A=(0,b.businessDate)(),t=[F=(0,b.getPreMonth)(A),A],a.value=[F,A],this.setState({value:t,schemeData:a}),null!=T&&this.getData(),j=this.props.getUrlParam("transPageCode"),O=this.props.getUrlParam("transAppCode"),!window.top===window.parent&&(j=this.props.getUrlParam("pagecode"),O=this.props.getUrlParam("appcode"))}},{key:"onAfterEvent",value:function(e,t,a,r,o){var l=o.values.money_bal.value;"this_sett"==a&&(l<0?1*r[0].newvalue.value>1*l&&1*r[0].newvalue.value<0?e.editTable.setValByKeyAndRowId(t,o.rowid,"this_sett",{value:r[0].newvalue.value}):e.editTable.setValByKeyAndRowId(t,o.rowid,"this_sett",{value:l}):1*r[0].newvalue.value>0&&1*r[0].newvalue.value<1*l?e.editTable.setValByKeyAndRowId(t,o.rowid,"this_sett",{value:r[0].newvalue.value}):e.editTable.setValByKeyAndRowId(t,o.rowid,"this_sett",{value:l}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.button,r=t.search,o=t.editTable,l=r.NCCreateSearch,n=o.createEditTable,s=a.createButtonApp,c=w.map((function(e){return i.default.createElement(I,{value:e},e.display)})),p=this.state.settlement,f=this.props.BillHeadInfo.createBillHeadInfo;return i.default.createElement("div",{id:"RelationNowId"},i.default.createElement(g,{areaCode:g.config.HEADER,className:"nc-bill-header-area relation-tit nc-theme-common-header-bgc"},i.default.createElement("div",{className:"header-title-search-area"},f({title:this.state.json["verificationsheet-000100"],backBtnClick:function(){e.handleBack()}})),i.default.createElement("div",{className:"title-right"},i.default.createElement("div",null),i.default.createElement("div",{className:" contions-box-set "},i.default.createElement("div",{className:"title-settle nc-theme-common-font-c"},this.state.json["verificationsheet-000012"],"：",i.default.createElement("span",{className:"nc-theme-title-font-c"},this.this_sett))),i.default.createElement("div",{className:"title-rr"},i.default.createElement("div",{className:"contions-box number-style"},i.default.createElement(k,{showMast:!1,labelName:this.state.json["verificationsheet-000010"],isRequire:!0,inline:!0},i.default.createElement(_,{fieldid:"financeNum",style:{"text-align":"left"},className:"bill-instruction-input",value:p.value,scale:this.defScale,onBlur:function(t){1*e.this_sett>0&&(t>=1*e.this_sett||t<=0)&&(p.value=e.this_sett),1*e.this_sett<0&&(t>=0||t<=1*e.this_sett)&&(p.value=e.this_sett),e.setState({settlement:p})},onChange:function(e){p.value=e}}))),i.default.createElement("div",{className:"header-button-area"},s({area:"list_head",buttonLimit:4,onButtonClick:d.buttonClick.bind(this)}))))),i.default.createElement("div",{className:"divider nc-theme-area-split-bc"}),i.default.createElement("div",null,this.getNoRelation(c,s,n,l)),i.default.createElement(u.default,{show:this.state.isSupplementModelShow,handleModel:this.handleSupplement,modelData:this.state.modelData,makeUpSelectData:this.getCheckedDatas(),transferCardData:this.transferDatas,createButtonApp:s}))}}]),t}(n.Component),o=function(){var e=this;this.getModelData=function(t){e.setState({modelData:t})},this.getData=function(){var t=e.state,a=t.ts,r=t.settlement,o={queryTreeFormatVO:null,verifyConditionVO:{objType:S,objTypeValue:T&&T.objTypeValue.value,pk_tradetype:null,beginDate:F,endDate:A},pageId:E,pk_bill:T&&T.pk_bill.value,pk_item:T&&T.pk_item,billType:T&&T.billType.value,ts:a};(0,s.ajax)({url:"/nccloud/arap/billverify/nowVerifyQuery.do",data:o,success:function(t){var o=t.success,l=t.data;if(o){var n=l.grid;e.state.ts=l.ts,e.defScale=l.scale,e.this_sett=e.handleAccuracy(l.this_sett,l.scale),e.state.settlement.value=e.handleAccuracy(l.this_sett,l.scale),e.setState({settlement:r,ts:a},(function(){e.getAccuracy(r,l.scale)})),n&&n.table?e.props.editTable.setTableData("table",n.table):(e.props.editTable.setTableData("table",{rows:[]}),e.props.button.setButtonDisabled("Share",!0))}}})},this.getAccuracy=function(t,a){var r=t.value,o=void 0;o=-1!=r.indexOf(".")?r.split(".")[1].length:a,e.setState({scale:o})},this.handleQueryBtn=function(){var t=e.state,a=t.verificationObj,r=t.objTypeValue,o=t.pk_tradetype,l=t.value,n=t.ts,i=void 0;i=l.length>0?{objType:a.value,objTypeValue:r.value,pk_tradetype:o.value,beginDate:l[0],endDate:l[1]}:{objType:a.value,objTypeValue:r.value,pk_tradetype:o.value};var d={pageId:E,pk_bill:T.pk_bill.value,pk_item:T.pk_item,billType:T.billType.value,ts:n,verifyConditionVO:i};(0,s.ajax)({url:"/nccloud/arap/billverify/nowVerifyQuery.do",data:d,success:function(t){var a=t.success,r=t.data;if(a){var o=r.grid;e.state.ts=r.ts,e.this_sett=e.handleAccuracy(r.this_sett,r.scale),e.state.settlement.value=e.handleAccuracy(r.this_sett,r.scale),e.setState({ts:n}),o&&o.table?(e.props.editTable.setTableData("table",o.table),e.props.button.setButtonDisabled("Share",!1),(0,s.toast)({color:"success",content:e.state.json["verificationsheet-000126"]+o.table.rows.length+e.state.json["verificationsheet-000127"]})):((0,s.toast)({color:"warning",content:e.state.json["verificationsheet-000125"]}),e.props.editTable.setTableData("table",{rows:[]}),e.props.button.setButtonDisabled("Share",!0))}}})},this.handleAccuracy=function(e,t){return e.split(".")[0]+"."+e.split(".")[1].slice(0,Number(t))},this.handleSupplement=function(){e.transferDatas=e.getVerifyNowData(),e.props.ViewModel.setData("transferCardData",e.transferDatas)},this.handleEmpty=function(){var t=e.state,a=t.objTypeValue,r=t.pk_tradetype,o=t.value;a={display:null,value:null},r={display:null,value:null},o=[],e.setState({objTypeValue:a,pk_tradetype:r,value:o})},this.handleAddAdvBodyCons=function(t){e.setState({schemeData:t})},this.handleShare=function(){for(var t=e.props.editTable.getAllRows("table",!0),a=e.state.settlement.value.replace("-",""),r=[],o=t.length,l=0;l<o;l++)t[l].values.this_sett={value:""},e.props.editTable.setValByKeyAndRowId("table",t[l].rowid,"this_sett",{value:""}),r.push(l);setTimeout((function(){e.props.editTable.selectTableRows("table",r,!1)}),0);for(var n=0;n<o;n++){var i=t[n].values.money_bal.value.replace("-",""),d=t[n].values.money_bal.value;-1==a.indexOf("-")&&(-1==(0,s.sum)(i,"-"+a).indexOf("-")?(t[n].values.this_sett={value:d>0?a:"-"+a},a=(0,s.sum)(a,"-"+i)):(t[n].values.this_sett={value:d},a=(0,s.sum)(a,"-"+i)))}var u=[];for(n=0;n<o;n++)1*t[n].values.this_sett.value!=0&&u.push(n);for(n=0;n<o;n++)t[n].values.this_sett.value&&e.props.editTable.setValByKeyAndRowId("table",t[n].rowid,"this_sett",{value:t[n].values.this_sett.value});setTimeout((function(){e.props.editTable.setStatus("table","edit"),e.props.editTable.setEditableRowKeyByIndex("table",u,"this_sett",!0),e.props.editTable.selectTableRows("table",u,!0)}),0)},this.getCheckedDatas=function(){for(var t=[],a=e.props.editTable.getCheckedRows("table"),r=0,o=a.length;r<o;r++){var l=void 0,n=a[r].data.values,i=n.objtype.value;0==i?l=n.customer.value:1==i?l=n.supplier.value:2==i?l=n.pk_deptid.value:3==i&&(l=n.pk_psndoc.value);var s={pk_bill:a[r].data.values.pk_bill.value,pk_item:a[r].data.values.pk_item&&a[r].data.values.pk_item.value||"",billType:a[r].data.values.pk_billtype.value,this_sett:a[r].data.values.this_sett.value,objTypeValue:l};t.push(s)}return t},this.getVerifyNowData=function(){for(var t=e.state.settlement,a=e.props.editTable.getCheckedRows("table"),r=0,o=a.length,l=0;l<o;l++)r=(0,c.accAdd)(r,Math.abs(1*a[l].data.values.this_sett.value));var n=[];if(Math.abs(t.value)!=r){for(l=0;l<o;l++){var i=void 0,d=a[l].data.values,u=d.objtype.value;0==u?i=d.customer.value:1==u?i=d.supplier.value:2==u?i=d.pk_deptid.value:3==u&&(i=d.pk_psndoc.value);var p={pk_bill:a[l].data.values.pk_bill.value,pk_item:a[l].data.values.pk_item&&a[l].data.values.pk_item.value||"",billType:a[l].data.values.pk_billtype.value,this_sett:a[l].data.values.this_sett.value,linkedPk:a[l].data.values.linkedPk.value,objTypeValue:i};n.push(p)}return e.setState({isSupplementModelShow:!e.state.isSupplementModelShow}),{pageId:e.props.getSearchParam("p"),pk_bill:T.pk_bill.value,pk_item:T.pk_item,billType:T.billType.value,ts:T.ts.value,this_sett:t.value,linkVOs:n}}(0,s.toast)({duration:3,color:"warning",title:e.state.json["verificationsheet-000006"],content:e.state.json["verificationsheet-000099"]})},this.handleCancellation=function(){for(var t=e.state.settlement,a=e.props.editTable.getCheckedRows("table"),r=a.length,o="",l=0;l<r;l++)o=(0,s.sum)(o,a[l].data.values.this_sett.value.replace("-",""));if(Number(t.value.replace("-",""))==Number(o.replace(",",""))){var n=[];for(l=0;l<r;l++){var i=void 0,d=a[l].data.values,u=d.objtype.value;0==u?i=d.customer.value:1==u?i=d.supplier.value:2==u?i=d.pk_deptid.value:3==u&&(i=d.pk_psndoc.value);var c={pk_bill:a[l].data.values.pk_bill.value,pk_item:a[l].data.values.pk_item&&a[l].data.values.pk_item.value||"",billType:a[l].data.values.pk_billtype.value,this_sett:a[l].data.values.this_sett.value,linkedPk:a[l].data.values.linkedPk.value,objTypeValue:i};n.push(c)}var p={pageId:e.props.getSearchParam("p"),pk_bill:T.pk_bill.value,pk_item:T.pk_item,billType:T.billType.value,ts:e.state.ts,this_sett:t.value,linkVOs:n},f=e.props.getUrlParam("scene"),b="appcode="+O+"&pagecode="+j+"&c="+O+"&p="+j+"&scene="+f+"&id="+T.pk_bill.value+"&status=browse";(0,s.ajax)({url:"/nccloud/arap/billverify/nowVerify.do",data:p,success:function(t){var a=t.success;a&&(window.top===window.parent?e.props.pushTo("/card",{id:T.pk_bill.value,pagecode:j,appcode:O,p:j,c:O,status:"browse"}):(window.location.hash="/card?"+b,window.parent.location.hash="/card?"+b))}})}else(0,s.toast)({duration:3,color:"warning",title:e.state.json["verificationsheet-000006"],content:e.state.json["verificationsheet-000007"]})},this.onSelectedFn=function(t,a,r,o,l){var n=e.props.editTable.getAllRows(a);e.oldVal="";var i=r.values.money_bal.value;if(l)t.editTable.setStatus("table","edit"),t.editTable.setValByKeyAndRowId("table",n[o].rowid,"this_sett",{value:i}),t.editTable.setEditableRowKeyByIndex("table",o,"this_sett",!0);else{t.editTable.setValByKeyAndRowId("table",n[o].rowid,"this_sett",{value:""}),t.editTable.setEditableRowKeyByIndex("table",o,"this_sett",!1);var s=!0,d=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){if(c.value.selected)return}}catch(e){d=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(d)throw u}}t.editTable.setStatus("table","browse")}},this.onSelectedAllFn=function(t,a,r,o){for(var l=e.props.editTable.getAllRows(a),n=[],i=0;i<o;i++){var s=l[i].values.money_bal.value,d=l[i].rowid;n.push(i),r?(t.editTable.setStatus("table","edit"),t.editTable.setValByKeyAndRowId("table",d,"this_sett",{value:s}),t.editTable.setEditableRowKeyByIndex("table",n,"this_sett",!0)):(t.editTable.setValByKeyAndRowId("table",d,"this_sett",{value:""}),t.editTable.setStatus("table","browse"),t.editTable.setEditableRowKeyByIndex("table",n,"this_sett",!1))}},this.getNoRelation=function(t,a,r,o){return i.default.createElement("div",null,(0,f.default)(e,t,a,o,"query"),i.default.createElement("div",{className:"table-area"},r("table",{fieldid:"verifynow",onAfterEvent:e.onAfterEvent,useFixedHeader:!0,onSelected:e.onSelectedFn,onSelectedAll:e.onSelectedAllFn,showCheck:!0,adaptionHeight:!0})))},this.handleBack=function(){var t=T?T.pk_bill.value:"",a=e.props.getUrlParam("scene"),r=T.appcode,o=T.pageId,l="appcode="+r+"&c="+r+"&pagecode="+o+"&id="+t+"&scene="+a+"&status=browse";window.top===window.parent?null!=T&&e.props.pushTo("/card",{pagecode:o,appcode:r,id:t,scene:a,status:"browse"}):(window.location.hash="/card?"+l,window.parent.location.hash="/card?"+l)}},r);q=(0,s.createPage)({mutiLangCode:""})(q),t.default=q},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;switch(t){case o.headButton.MakeUp:var l=e.ViewModel.getData("WholeVerifyDatas"),n={pk_bill:null==l.pk_bill?null:l.pk_bill.value,pk_item:null==l.pk_item?null:l.pk_item,billType:null==l.billType?null:l.billType.value,this_sett:this.state.settlement.value,linkVOs:this.getCheckedDatas()||[]};(0,r.ajax)({url:"/nccloud/arap/billverify/varyMoneyPanel.do",data:n,success:function(e){e.success&&(a.getModelData(e.data),a.handleSupplement())}});break;case o.headButton.NowVerify:this.handleCancellation();break;case o.headButton.Share:this.handleShare();break;case o.headButton.Return:this.handleBack();break;case o.modelButton.Bill:this.handleConfirm();break;case o.modelButton.Cancel:this.handleCancel()}};var r=a(1),o=a(5)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=d(o),n=a(1),i=d(a(10)),s=a(260);a(340);a(342);function d(e){return e&&e.__esModule?e:{default:e}}var u=n.base.NCModal,c=n.base.NCFormControl,p=n.base.NCSelect,f=p.NCOption,b=[{value:"0",display:""},{value:"2",display:""},{value:"3",display:""}],m=[{value:"1",display:""},{value:"2",display:""},{value:"3",display:""}],y=void 0,h=void 0,v=void 0,g=void 0,_=void 0,k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleConfirm=function(){var e=a,t=a.state.schemeData,r=t.contactObj,o=t.transactionType,l=t.supplementMoney,i=t.objName,s=t.budgetObj,d=t.settlementMethod,u=t.supplementMoneyType,c={billType:u.value,tradeType:o.code,tradeTypeid:o.value,m_dVaryYb:l.value,m_dVaryBb:null,m_iWldx:r.value,m_sHbbm:null,supplier:null,m_sBmbm:null,m_sYwybm:null,pk_subjcode:s.value,pj_jsfs:d.value};switch(r.value){case"0":c.m_sHbbm=i.value;break;case"1":c.supplier=i.value;break;case"2":c.m_sBmbm=i.value;break;case"3":c.m_sYwybm=i.value}o.code?((0,n.ajax)({url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{billType:u.value,tradeType:o.code,pk_bill:h.pk_bill.value},success:function(t){var r={JumpcardDatas:{pk_bill:null==h.pk_bill?null:h.pk_bill.value,pk_item:null==h.pk_item?null:h.pk_item,billType:h.billType.value,this_sett:null==h.occupationmnySum?null:h.occupationmnySum,result:3,pageId:o.code,ts:h.ts.value,linkVOs:a.linkVOs||[],pk_subjcode:s.value,pj_jsfs:d.value,varyMoneyFilterVO:c},transferCardDatas:a.props.ViewModel.getData("transferCardData"),transferData:h};if(e.props.ViewModel.setData("transToCardDatas",r),window.top===window.parent)e.props.pushTo("/nowvcard",{pagecode:o.code,appcode:t.data.condition.appcode,tradeType:o.code,billType:u.value,status:"edit",pageCode:g,appCode:_,scene:a.props.getUrlParam("scene")});else{var l=a.props.getUrlParam("scene"),n="pagecode="+o.code+"&appcode="+t.data.condition.appcode+"&tradeType="+o.code+"&billType="+u.value+"&scene="+l+"&pageCode="+g+"&appCode="+_+"&p="+o.code+"&c="+t.data.condition.appcode+"&status=edit";window.location.hash="/nowvcard?"+n,window.parent.location.hash="/nowvcard?"+n}}}),a.props.handleModel()):(0,n.toast)({color:"warning",content:a.state.json["verificationsheet-000131"]})},a.handleCancel=function(){var e=a.state.schemeData;e.transactionType={display:null,value:null,code:null},e.supplementMoney={display:"",value:""},a.setState({schemeData:e}),a.props.handleModel()},a.getRefer=function(e,t,r,o,n,s){return l.default.createElement("div",{className:"finance"},l.default.createElement("span",{className:"lable nc-theme-common-font-c"},n),l.default.createElement("div",{className:"finance-refer"},l.default.createElement(i.default,{fieldid:"finance",tag:e,refcode:t,value:{refname:r.display,refpk:r.value},onChange:function(e){r.value=e.refpk,r.display=e.refname,a.setState({mainData:o},(function(){1==s&&a.state.mainData.transactionType.value&&a.getTransTypeData()}))},queryCondition:function(){return"InoutBusiClassTreeRef"==e||"BalanceTypeGridRef"==e?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:null==h.pk_org?null:h.pk_org.value}:void 0}})))},a.getTranstypeRefer=function(e,t,r,o,n,s){return l.default.createElement("div",{className:"finance"},l.default.createElement("span",{className:"lable nc-theme-common-font-c"},l.default.createElement("span",{className:"xing"},"*"),n),l.default.createElement("div",{className:"finance-refer"},l.default.createElement(i.default,{fieldid:"tradetype",tag:e,refcode:t,value:{refname:r.display,refpk:r.value},onChange:function(e){r.value=e.refpk,r.display=e.refname,r.code=e.refcode,a.setState({mainData:o},(function(){1==s&&a.state.mainData.transactionType.value&&a.getTransTypeData()}))},queryCondition:function(){if("Transtype"==e)return"F0"==h.billType.value||"F2"==h.billType.value?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",parentbilltype:"F0,F2"}:{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",parentbilltype:"F1,F3"}}})))},a.getReferr=function(e,t,r,o,n,s){var d=a.props.ViewModel.getData("WholeVerifyDatas");return l.default.createElement(i.default,{fieldid:"WholeVerifyDatas",tag:e,refcode:t,value:{refname:r.display,refpk:r.value},onChange:function(e){r.value=e.refpk,r.display=e.refname,a.setState({mainData:o})},placeholder:r.display||n,isShowUnit:s,unitCondition:function(){return"DeptTreeRef"==e||"PsndocTreeGridRef"==e?{pkOrgs:null==d.pk_org?null:d.pk_org.value,TreeRefActionExt:"nccloud.web.arap.ref.before.OrgSqlBuilder"}:void 0},queryCondition:function(){return"SupplierRefTreeGridRef"==e?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:null==d.pk_org?null:d.pk_org.value}:"DeptTreeRef"==e||"PsndocTreeGridRef"==e?{busifuncode:"all",DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:null==d.pk_org?null:d.pk_org.value}:"CustomerDefaultTreeGridRef"==e?{DataPowerOperationCode:"fi",isDataPowerEnable:"Y",pk_org:null==d.pk_org?null:d.pk_org.value}:void 0}})},a.getDifferentRefer=function(e){var t=e.contactObj,r=e.objName;switch(t.value){case"0":return a.getReferr("CustomerDefaultTreeGridRef","uapbd/refer/customer/CustomerDefaultTreeGridRef/index.js",r,e,a.state.json["verificationsheet-000000"],!1);case"1":return a.getReferr("SupplierRefTreeGridRef","uapbd/refer/supplier/SupplierRefTreeGridRef/index.js",r,e,a.state.json["verificationsheet-000001"],!1);case"2":return a.getReferr("DeptTreeRef","uapbd/refer/org/DeptTreeRef/index.js",r,e,a.state.json["verificationsheet-000002"],!1);case"3":return a.getReferr("PsndocTreeGridRef","uapbd/refer/psninfo/PsndocTreeGridRef/index.js",r,e,a.state.json["verificationsheet-000003"],!1)}},a.getTransTypeData=function(){var e=a.state.schemeData,t={tradeType:e.transactionType.value};(0,n.ajax)({url:"/nccloud/arap/billverify/getbillType.do",data:t,success:function(t){t.success&&(a.state.schemeData.supplementMoneyType.value=t.data,a.state.schemeData.contactObj=y.contactObj,a.state.schemeData.objName=y.objName,a.setState({schemeData:e},(function(){for(var t=y.transactionType,r={},o=0,l=t.length;o<l;o++)r[t[o].display]=t[o].value;switch(a.state.schemeData.supplementMoneyType.value){case"F0":a.state.schemeData.supplementMoney.value=r.F0,a.setState({schemeData:e});break;case"F1":a.state.schemeData.supplementMoney.value=r.F1,a.setState({schemeData:e});break;case"F2":a.state.schemeData.supplementMoney.value=r.F2,a.setState({schemeData:e});break;case"F3":a.state.schemeData.supplementMoney.value=r.F3,a.setState({schemeData:e});break;case"":a.state.schemeData.supplementMoney.value=r[""],a.setState({schemeData:e})}})))}})},a.getInput=function(e,t){return l.default.createElement("div",{className:"finance"},l.default.createElement("span",{className:"lable nc-theme-common-font-c"},e),l.default.createElement("div",{className:"finance-refer"},l.default.createElement(c,{fieldid:"input"+t,value:t.value})))},a.linkVOs=[],a.transferCardDatas={},a.state={json:{},selectedValue:"",schemeData:{contactObj:{display:"",value:""},objName:{display:"",value:""},transactionType:{display:null,value:null,code:null},supplementMoney:{display:"",value:""},budgetObj:{display:"",value:""},settlementMethod:{display:"",value:""},supplementMoneyType:{value:null}}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;(0,n.getMultiLang)({moduleId:["verificationsheet","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){b=[{value:"0",display:e.state.json["verificationsheet-000000"]},{value:"1",display:e.state.json["verificationsheet-000001"]},{value:"2",display:e.state.json["verificationsheet-000002"]},{value:"3",display:e.state.json["verificationsheet-000003"]}],m=[{value:"0",display:e.state.json["verificationsheet-000000"]},{value:"1",display:e.state.json["verificationsheet-000001"]},{value:"2",display:e.state.json["verificationsheet-000002"]},{value:"3",display:e.state.json["verificationsheet-000003"]}],e.setState({selectedValue:e.state.json["verificationsheet-000107"]}),null!=(h=e.props.ViewModel.getData("WholeVerifyDatas"))&&(v=h.billType.value)}))}})}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.schemeData;this.linkVOs=e.makeUpSelectData,this.transferCardDatas=e.transferCardData,e.modelData&&(t.objName=e.modelData.objName,this.setState({schemeData:t}))}},{key:"componentDidMount",value:function(){var e=this.state.schemeData,t=e.contactObj;g=this.props.getSearchParam("p"),_=this.props.getSearchParam("c"),"F1"==v||"F3"==v?(t.display=this.state.json["verificationsheet-000001"],t.value="1"):(t.display=this.state.json["verificationsheet-000000"],t.value="0"),this.setState({schemeData:e}),g=this.props.getUrlParam("transPageCode"),_=this.props.getUrlParam("transAppCode"),!window.top===window.parent&&(g=this.props.getUrlParam("pagecode"),_=this.props.getUrlParam("appcode")),"bz"==this.props.getUrlParam("scene")&&(g=this.props.getUrlParam("transPageCode"),_=this.props.getUrlParam("transAppCode"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,r=t.createButtonApp,o=this.state.schemeData,n=o.transactionType,i=o.supplementMoney,d=o.budgetObj,c=o.settlementMethod,h=o.contactObj;y=this.props.modelData;var g=("F1"==v||"F3"==v?m:b).map((function(e){return l.default.createElement(f,{value:e},e.display)}));return l.default.createElement("div",null,l.default.createElement(u,{fieldid:"compensation",id:"supplemodalId",className:"query-modal",show:a,onHide:this.handleCancel,backdrop:!0},l.default.createElement(u.Header,{closeButton:!0},l.default.createElement(u.Title,null,""+this.state.json["verificationsheet-000111"]),l.default.createElement(u.Title,null," ",this.state.json["verificationsheet-000111"]," ")),l.default.createElement(u.Body,null,l.default.createElement("div",{className:"steps-content"},l.default.createElement("div",null,this.getTranstypeRefer("Transtype","uap/refer/riart/transtype/index.js",n,o,this.state.json["verificationsheet-000016"],1)),l.default.createElement("div",null,this.getInput(this.state.json["verificationsheet-000108"],i)),l.default.createElement("div",null,l.default.createElement("div",{className:"finance"},l.default.createElement("span",{className:"lable nc-theme-common-font-c"},this.state.json["verificationsheet-000112"]),l.default.createElement("div",{className:"finance-refer"},l.default.createElement(p,{fieldid:"contactObj",value:h.display&&h.display,onChange:function(t){h.display=t.display,h.value=t.value,o.objName={display:null,value:null},e.setState({schemeData:o})}},g)))),l.default.createElement("div",null,y&&y.objName&&l.default.createElement("div",{className:"finance"},l.default.createElement("span",{className:"lable nc-theme-common-font-c"},this.state.json["verificationsheet-000021"]),l.default.createElement("div",{className:"finance-refer"},this.getDifferentRefer(o)))),l.default.createElement("div",null,this.getRefer("InoutBusiClassTreeRef","uapbd/refer/fiacc/InoutBusiClassTreeRef/index.js",d,o,this.state.json["verificationsheet-000109"])),l.default.createElement("div",null,this.getRefer("BalanceTypeGridRef","uapbd/refer/sminfo/BalanceTypeGridRef/index.js",c,o,this.state.json["verificationsheet-000110"])))),l.default.createElement(u.Footer,null,r({area:"list_bottom",buttonLimit:4,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))))}}]),t}(o.Component);k=(0,n.createPage)({})(k),t.default=k},function(e,t,a){var r=a(341);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"#supplemodalId {\n  text-align: center;\n}\n#supplemodalId .u-modal-content {\n  width: 522px;\n}\n#supplemodalId .u-modal-header {\n  color: white;\n}\n#supplemodalId .steps-content {\n  min-height: 230px;\n  min-width: 150px;\n  padding-bottom: 35px;\n}\n#supplemodalId .finance {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 270px;\n  position: relative;\n}\n#supplemodalId .finance .finance-refer {\n  width: 180px;\n}\n#supplemodalId .finance .xing {\n  color: red;\n  position: absolute;\n  left: 42px;\n  top: 2px;\n}\n#supplemodalId .pub-droplist {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 15px;\n  width: 270px;\n}\n#supplemodalId .pub-droplist .pub-droplist-cont {\n  width: 180px;\n}\n#supplemodalId .lable {\n  display: inline-block;\n  height: 30px;\n  line-height: 30px;\n  min-width: 100px;\n  width: 100px;\n  text-align: right;\n  margin-right: 16px;\n}\n",""])},function(e,t,a){"use strict";(function(t){var r=a(344);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(e,t){if(e===t)return 0;for(var a=e.length,r=t.length,o=0,l=Math.min(a,r);o<l;++o)if(e[o]!==t[o]){a=e[o],r=t[o];break}return a<r?-1:r<a?1:0}function l(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var n=a(345),i=Object.prototype.hasOwnProperty,s=Array.prototype.slice,d="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function c(e){return!l(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var p=e.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function b(e){if(n.isFunction(e)){if(d)return e.name;var t=e.toString().match(f);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(d||!n.isFunction(e))return n.inspect(e);var t=b(e);return"[Function"+(t?": "+t:"")+"]"}function h(e,t,a,r,o){throw new p.AssertionError({message:a,actual:e,expected:t,operator:r,stackStartFunction:o})}function v(e,t){e||h(e,!0,t,"==",p.ok)}function g(e,t,a,r){if(e===t)return!0;if(l(e)&&l(t))return 0===o(e,t);if(n.isDate(e)&&n.isDate(t))return e.getTime()===t.getTime();if(n.isRegExp(e)&&n.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(c(e)&&c(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(l(e)!==l(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,a,r){if(null==e||null==t)return!1;if(n.isPrimitive(e)||n.isPrimitive(t))return e===t;if(a&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=_(e),l=_(t);if(o&&!l||!o&&l)return!1;if(o)return e=s.call(e),t=s.call(t),g(e,t,a);var i,d,u=w(e),c=w(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),d=u.length-1;d>=0;d--)if(u[d]!==c[d])return!1;for(d=u.length-1;d>=0;d--)if(i=u[d],!g(e[i],t[i],a,r))return!1;return!0}(e,t,a,r))}return a?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function k(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function I(e,t,a,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof a&&(r=a,a=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(a&&a.name?" ("+a.name+").":".")+(r?" "+r:"."),e&&!o&&h(o,a,"Missing expected exception"+r);var l="string"==typeof r,i=!e&&o&&!a;if((!e&&n.isError(o)&&l&&k(o,a)||i)&&h(o,a,"Got unwanted exception"+r),e&&o&&a&&!k(o,a)||!e&&o)throw o}p.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=m(y((t=this).actual),128)+" "+t.operator+" "+m(y(t.expected),128),this.generatedMessage=!0);var a=e.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,a);else{var r=new Error;if(r.stack){var o=r.stack,l=b(a),n=o.indexOf("\n"+l);if(n>=0){var i=o.indexOf("\n",n+1);o=o.substring(i+1)}this.stack=o}}},n.inherits(p.AssertionError,Error),p.fail=h,p.ok=v,p.equal=function(e,t,a){e!=t&&h(e,t,a,"==",p.equal)},p.notEqual=function(e,t,a){e==t&&h(e,t,a,"!=",p.notEqual)},p.deepEqual=function(e,t,a){g(e,t,!1)||h(e,t,a,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,a){g(e,t,!0)||h(e,t,a,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,a){g(e,t,!1)&&h(e,t,a,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function e(t,a,r){g(t,a,!0)&&h(t,a,r,"notDeepStrictEqual",e)},p.strictEqual=function(e,t,a){e!==t&&h(e,t,a,"===",p.strictEqual)},p.notStrictEqual=function(e,t,a){e===t&&h(e,t,a,"!==",p.notStrictEqual)},p.throws=function(e,t,a){I(!0,e,t,a)},p.doesNotThrow=function(e,t,a){I(!1,e,t,a)},p.ifError=function(e){if(e)throw e},p.strict=r((function e(t,a){t||h(t,!0,a,"==",e)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var w=Object.keys||function(e){var t=[];for(var a in e)i.call(e,a)&&t.push(a);return t}}).call(this,a(343))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t,a){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var a,i,s=n(e),d=1;d<arguments.length;d++){for(var u in a=Object(arguments[d]))o.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var c=0;c<i.length;c++)l.call(a,i[c])&&(s[i[c]]=a[i[c]])}}return s}},function(e,t,a){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),a={},r=0;r<t.length;r++)a[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return a},o=/%[sdj%]/g;t.format=function(e){if(!h(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(i(arguments[a]));return t.join(" ")}a=1;for(var r=arguments,l=r.length,n=String(e).replace(o,(function(e){if("%%"===e)return"%";if(a>=l)return e;switch(e){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch(e){return"[Circular]"}default:return e}})),s=r[a];a<l;s=r[++a])m(s)||!_(s)?n+=" "+s:n+=" "+i(s);return n},t.deprecate=function(a,r){if(void 0!==e&&!0===e.noDeprecation)return a;if(void 0===e)return function(){return t.deprecate(a,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return a.apply(this,arguments)}};var l,n={};function i(e,a){var r={seen:[],stylize:d};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(a)?r.showHidden=a:a&&t._extend(r,a),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),u(r,e,r.depth)}function s(e,t){var a=i.styles[t];return a?"["+i.colors[a][0]+"m"+e+"["+i.colors[a][1]+"m":e}function d(e,t){return e}function u(e,a,r){if(e.customInspect&&a&&w(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var o=a.inspect(r,e);return h(o)||(o=u(e,o,r)),o}var l=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(h(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}if(y(t))return e.stylize(""+t,"number");if(b(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,a);if(l)return l;var n=Object.keys(a),i=function(e){var t={};return e.forEach((function(e,a){t[e]=!0})),t}(n);if(e.showHidden&&(n=Object.getOwnPropertyNames(a)),I(a)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return c(a);if(0===n.length){if(w(a)){var s=a.name?": "+a.name:"";return e.stylize("[Function"+s+"]","special")}if(g(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(k(a))return e.stylize(Date.prototype.toString.call(a),"date");if(I(a))return c(a)}var d,_="",T=!1,C=["{","}"];(f(a)&&(T=!0,C=["[","]"]),w(a))&&(_=" [Function"+(a.name?": "+a.name:"")+"]");return g(a)&&(_=" "+RegExp.prototype.toString.call(a)),k(a)&&(_=" "+Date.prototype.toUTCString.call(a)),I(a)&&(_=" "+c(a)),0!==n.length||T&&0!=a.length?r<0?g(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special"):(e.seen.push(a),d=T?function(e,t,a,r,o){for(var l=[],n=0,i=t.length;n<i;++n)B(t,String(n))?l.push(p(e,t,a,r,String(n),!0)):l.push("");return o.forEach((function(o){o.match(/^\d+$/)||l.push(p(e,t,a,r,o,!0))})),l}(e,a,r,i,n):n.map((function(t){return p(e,a,r,i,t,T)})),e.seen.pop(),function(e,t,a){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1];return a[0]+t+" "+e.join(", ")+" "+a[1]}(d,_,C)):C[0]+_+C[1]}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,a,r,o,l){var n,i,s;if((s=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?i=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(i=e.stylize("[Setter]","special")),B(r,o)||(n="["+o+"]"),i||(e.seen.indexOf(s.value)<0?(i=m(a)?u(e,s.value,null):u(e,s.value,a-1)).indexOf("\n")>-1&&(i=l?i.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+i.split("\n").map((function(e){return"   "+e})).join("\n")):i=e.stylize("[Circular]","special")),v(n)){if(l&&o.match(/^\d+$/))return i;(n=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=e.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=e.stylize(n,"string"))}return n+": "+i}function f(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function h(e){return"string"==typeof e}function v(e){return void 0===e}function g(e){return _(e)&&"[object RegExp]"===T(e)}function _(e){return"object"==typeof e&&null!==e}function k(e){return _(e)&&"[object Date]"===T(e)}function I(e){return _(e)&&("[object Error]"===T(e)||e instanceof Error)}function w(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(a){if(v(l)&&(l=e.env.NODE_DEBUG||""),a=a.toUpperCase(),!n[a])if(new RegExp("\\b"+a+"\\b","i").test(l)){var r=e.pid;n[a]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",a,r,e)}}else n[a]=function(){};return n[a]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=b,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=h,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=g,t.isObject=_,t.isDate=k,t.isError=I,t.isFunction=w,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=a(347);var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),x[e.getMonth()],t].join(" ")}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",S(),t.format.apply(t,arguments))},t.inherits=a(348),t._extend=function(e,t){if(!t||!_(t))return e;for(var a=Object.keys(t),r=a.length;r--;)e[a[r]]=t[a[r]];return e};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var a=new Error("Promise was rejected with a falsy value");a.reason=e,e=a}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(E&&e[E]){var t;if("function"!=typeof(t=e[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,a,r=new Promise((function(e,r){t=e,a=r})),o=[],l=0;l<arguments.length;l++)o.push(arguments[l]);o.push((function(e,r){e?a(e):t(r)}));try{e.apply(this,o)}catch(e){a(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),E&&Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=E,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function a(){for(var a=[],r=0;r<arguments.length;r++)a.push(arguments[r]);var o=a.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var l=this,n=function(){return o.apply(l,arguments)};t.apply(this,a).then((function(t){e.nextTick(n,null,t)}),(function(t){e.nextTick(R,t,n)}))}return Object.setPrototypeOf(a,Object.getPrototypeOf(t)),Object.defineProperties(a,r(t)),a}}).call(this,a(346))},function(e,t){var a,r,o=e.exports={};function l(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(a===setTimeout)return setTimeout(e,0);if((a===l||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:l}catch(e){a=l}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(e){r=n}}();var s,d=[],u=!1,c=-1;function p(){u&&s&&(u=!1,s.length?d=s.concat(d):c=-1,d.length&&f())}function f(){if(!u){var e=i(p);u=!0;for(var t=d.length;t;){for(s=d,d=[];++c<t;)s&&s[c].run();c=-1,t=d.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];d.push(new b(e,t)),1!==d.length||u||i(f)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},function(e,t,a){var r=a(350);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"#RelationNowId {\n  width: 100%;\n}\n#RelationNowId .lightapp-component-editTable {\n  position: absolute;\n  width: 100%;\n}\n#RelationNowId .relation-tit {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background-color: white;\n  padding: 0 20px;\n}\n#RelationNowId .relation-tit .number-style .u-form-error.show {\n  display: none;\n}\n#RelationNowId .relation-tit .title-left {\n  height: 25px;\n  font-size: 16px;\n  font-family: MicrosoftYaHei;\n  color: #111111;\n  line-height: 25px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#RelationNowId .relation-tit .title-left .title-style {\n  font-weight: normal;\n  font-size: 16px;\n  height: 32px;\n  line-height: 32px;\n}\n#RelationNowId .relation-tit .title-right {\n  height: 54px;\n  padding-left: 10%;\n  -webkit-box-flex: 1;\n      -ms-flex: auto;\n          flex: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#RelationNowId .relation-tit .title-right .title-rr {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  min-width: 421px;\n}\n#RelationNowId .relation-tit .title-right .contions-box-set {\n  width: 35%;\n  height: 30px;\n  float: left;\n  margin-right: 3%;\n}\n#RelationNowId .relation-tit .title-right .contions-box-set .title-settle {\n  height: 30px;\n  line-height: 30px;\n  text-align: right;\n  -webkit-transform: translate(-6px, 0);\n          transform: translate(-6px, 0);\n}\n#RelationNowId .relation-tit .title-right .contions-box {\n  min-width: 200px;\n  height: 30px;\n  margin-right: 1px;\n}\n#RelationNowId .relation-tit .title-right .contions-box .u-input-group-outer {\n  max-width: 125px !important;\n}\n#RelationNowId .relation-tit .title-right .contions-box .u-form-item > div:nth-child(1) .u-input-group-outer {\n  width: 125px;\n}\n#RelationNowId .relation-tit .title-right .contions-box .u-label {\n  text-align: right;\n  padding-right: 5px;\n  font-size: 14px;\n  padding-top: 7px;\n  -webkit-transform: translate(0px, -10px);\n          transform: translate(0px, -10px);\n}\n@media screen and (max-width: 1281px) {\n  #RelationNowId .relation-tit .title-right {\n    width: 69.5%;\n  }\n}\n@media screen and (min-width: 1282px) and (max-width: 1439px) {\n  #RelationNowId .relation-tit .title-right {\n    width: 65.3%;\n  }\n}\n@media screen and (min-width: 1440px) and (max-width: 1920px) {\n  #RelationNowId .relation-tit .title-right {\n    width: 62%;\n  }\n}\n#RelationNowId .relation-tit .u-input-group {\n  width: 125px;\n}\n#RelationNowId .divider {\n  border-bottom: 1px solid #d0d0d0;\n}\n#RelationNowId .table-area {\n  margin-top: 6px;\n  min-height: 400px;\n}\n#RelationNowId .query {\n  width: 100%;\n  height: 50px;\n  border-radius: 10px;\n  border: 1px solid #cccccc;\n  background: white;\n  margin-top: 5px;\n  padding-top: 10px;\n  padding-left: 5px;\n  padding-right: 10px;\n  font-size: 12px;\n}\n#RelationNowId .query .span-style {\n  width: 90px;\n}\n#RelationNowId .u-input-group .u-form-control {\n  margin-bottom: -11px;\n}\n#RelationNowId .u-form-item {\n  min-height: 0;\n}\n#RelationNowId .lightapp-component-editTable {\n  position: absolute;\n  min-height: 200px;\n  left: 0px;\n}\n#RelationNowId .calendar-picker {\n  width: 100%;\n}\n#RelationNowId .NC_CreateSearch .lightapp-component-search {\n  display: inline-block;\n  margin-bottom: 0px;\n  width: 50px;\n}\n#RelationNowId .u-row {\n  margin-left: 0px;\n  margin-right: -15px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(2),i=(r=n)&&r.__esModule?r:{default:r},s=a(1),d=a(20),u=a(16),c=a(352);function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=s.base.NCButton,b=(s.base.NCButtonGroup,["MONEY_DE","LOCAL_MONEY_DE","QUANTITY_DE","MONEY_BAL","LOCAL_MONEY_BAL","QUANTITY_BAL","LOCAL_TAX_DE","NOTAX_DE","LOCAL_NOTAX_DE","GROUPDEBIT","GROUPTAX_DE","GROUPNOTAX_DE","GLOBALDEBIT","GLOBALTAX_DE","GLOBALNOTAX_DE","QUANTITY_CR","LOCAL_MONEY_CR","MONEY_CR","LOCAL_TAX_CR","NOTAX_CR","LOCAL_NOTAX_CR","GROUPCREBIT","GROUPTAX_CRE","GROUPNOTAX_CRE","GLOBALCREBIT","GLOBALTAX_CRE","GLOBALNOTAX_CRE","OCCUPATIONMNY","PRICE","GROUPBALANCE","GLOBALBALANCE","TAXPRICE","CALTAXMNY","NOSUBTAX","MONEY","GROUPLOCAL","GLOBALLOCAL","PK_CURRTYPE","PK_TRADETYPE","PK_TRADETYPEID","PK_BILLTYPE","RATE","GROUPRATE","GLOBALRATE"].map((function(e,t,a){return e.toLowerCase()}))),m=void 0,y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getDatas=function(){var e=a.props.ViewModel.getData("transToCardDatas").JumpcardDatas;(0,s.ajax)({url:"/nccloud/arap/billverify/varyMoney.do",data:e,success:function(e){e.data?(e.data.head&&(a.props.form.setAllFormValue(p({},a.formId,e.data.head[a.formId])),a.props.form.setFormItemsDisabled(a.formId,{pk_org:!0,pk_currtype:!0,approvestatus:!0,approvedate:!0,approvedated:!0,billstatus:!0,effectstatus:!0,effectuser:!0,creator:!0,effectdate:!0,src_syscode:!0,pk_org_v:!0,rate:!0,globalrate:!0,grouprate:!0})),e.data.body&&(a.props.cardTable.setStatus(a.tableId,"edit"),a.props.cardTable.setTableData(a.tableId,e.data.body[a.tableId]),setTimeout((function(){a.props.cardTable.setColEditableByKey(a.tableId,b,!0)}),500))):(a.props.form.setAllFormValue(p({},a.formId,{rows:[{values:{}}]})),a.props.cardTable.setTableData(a.tableId,{rows:[{values:{}}]}))}})},a.handleConfirm=function(){if(a.props.form.isCheckNow(a.formId)&&a.props.cardTable.checkTableRequired(a.tableId)){var e=a.props.ViewModel.getData("transToCardDatas").transferCardDatas,t=a.props.ViewModel.getData("transToCardDatas").transferData,r=null==t.pk_bill?null:t.pk_bill.value,l=o({cardData:a.props.createMasterChildData(a.pageId,a.formId,a.tableId)},e),n=a.props.getUrlParam("scene"),i=1;"approve"!=n&&"approvesce"!=n&&"zycl"!=n||(i=3),(0,s.ajax)({url:"/nccloud/arap/billverify/varyMoneyConfirm.do",data:l,success:function(e){var o;(0,s.ajax)((p(o={url:"/nccloud/arap/arappub/linkarapbill.do",async:!1,data:{pk_bill:null==t.pk_bill?null:t.pk_bill.value,tradeType:t.pk_tradetype.value,sence:i}},"async",!1),p(o,"success",(function(e){if(a.props.setUrlParam({status:"browse"}),window.top===window.parent)a.props.pushTo("/card",{pagecode:a.props.getUrlParam("pageCode"),appcode:a.props.getUrlParam("appCode"),id:r,scene:a.props.getUrlParam("scene"),status:"browse"});else{var t="pagecode="+e.data.condition.pagecode+"&appcode="+e.data.condition.appcode+"&scene="+n+"&p="+e.data.condition.pagecode+"&c="+e.data.condition.appcode+"&id="+r+"&status=browse";window.location.hash="/card?"+t,window.parent.location.hash="/card?"+t}})),o))}})}},a.handleCancel=function(){var e=a.props.ViewModel.getData("transToCardDatas").transferData;a.props.ViewModel.setData("WholeVerifyDatas",e);var t="20060NOWV",r="20062002";if("F1"!=m&&"F3"!=m||(t="20080NOWV",r="20082002"),window.top===window.parent)a.props.pushTo("/nowv",{pagecode:t,appcode:r});else{var o=a.props.getUrlParam("scene"),l="pagecode="+a.props.getUrlParam("pageCode")+"&appcode="+a.props.getUrlParam("appCode")+"&scene="+o+"&p="+a.props.getUrlParam("pageCode")+"&c="+a.props.getUrlParam("appCode");window.location.hash="/nowv?"+l,window.parent.location.hash="/nowv?"+l}},a.formId="head",a.tableId="bodys",a.pageId=a.props.getUrlParam("tradeType"),a.state={json:{}},a.handleConfirm=a.handleConfirm.bind(a),a.handleCancel=a.handleCancel.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;(0,s.getMultiLang)({moduleId:["verificationsheet","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t})}})}},{key:"componentDidMount",value:function(){c.initTemplate.call(this,this.props),this.getDatas(),m=this.props.getUrlParam("billType")}},{key:"render",value:function(){var e=this.props,t=e.cardTable,a=e.form.createForm,r=this.props.BillHeadInfo.createBillHeadInfo,o=t.createCardTable;return i.default.createElement("div",{className:"nc-bill-card"},i.default.createElement("div",{className:"nc-bill-top-area"},i.default.createElement("div",{className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},r({title:"F0"==m?this.state.json["verificationsheet-000040"]:"F1"==m?this.state.json["verificationsheet-000041"]:"F2"==m?this.state.json["verificationsheet-000044"]:"F3"==m?this.state.json["verificationsheet-000043"]:"",initShowBackBtn:!1})),i.default.createElement("div",{class:"header-button-area"},i.default.createElement(f,{fieldid:"sure",colors:"primary",onClick:this.handleConfirm},this.state.json["verificationsheet-000103"]),i.default.createElement(f,{fieldid:"cancel",onClick:this.handleCancel},this.state.json["verificationsheet-000049"]))),i.default.createElement("div",{className:"nc-bill-form-area"},a(this.formId,{fieldid:"verifynow",onBeforeEvent:d.formBeforeEvent.bind(this),onAfterEvent:c.afterEvent.bind(this,m)}))),i.default.createElement("div",{className:"nc-bill-bottom-area"},i.default.createElement("div",{className:"nc-bill-table-area"},o(this.tableId,{fieldid:"verifynow",onBeforeEvent:u.bodyBeforeEvent.bind(this),onAfterEvent:c.afterEvent.bind(this,m),adaptionHeight:!0}))))}}]),t}(n.Component);y=(0,s.createPage)({orderOfHotKey:["head","bodys"]})(y),t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=t.initTemplate=void 0;var r=l(a(353)),o=l(a(354));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.afterEvent=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this.props.getUrlParam("billType"),a=this.props.getUrlParam("pagecode"),r=this.props.getUrlParam("appcode"),o=this.props.getUrlParam("tradeType");e.createUIDom({pagecode:a,appcode:r,reqDataQueryallbtns:{rqUrl:"/arap/arappub/queryallbtns.do",rqJson:'{\n  "pagecode": "'+a+'",\n  "appcode": "'+r+'"\n,\n  "billtype": "'+t+'"\n,\n  "tradetype": "'+o+'"\n}',rqCode:"button"},reqDataQuerypage:{rqUrl:"/arap/arappub/querypage.do",rqJson:'{\n  "pagecode": "'+a+'",\n  "appcode": "'+r+'"\n}',rqCode:"template"}},(function(t){if(t&&t.template){var a=t.template;!function(e,t){var a=e.getUrlParam("status");t.head.status=a}(e,a),e.meta.setMeta(a)}}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,p,f,b,m,y,h){var v=this;switch(e){case"F0":s="/nccloud/arap/recbill/cardHeadAfterEdit.do",d="/nccloud/arap/recbill/cardBodyAfterEdit.do";break;case"F1":s="/nccloud/arap/payablebill/cardheadafteredit.do",d="/nccloud/arap/payablebill/cardbodyafteredit.do";break;case"F2":s="/nccloud/arap/gatheringbill/cardheadafteredit.do",d="/nccloud/arap/gatheringbill/cardbodyafteredit.do";break;case"F3":s="/nccloud/arap/paybill/cardheadafteredit.do",d="/nccloud/arap/paybill/cardbodyafteredit.do"}if(b instanceof Array&&b[0].newvalue.value==b[0].oldvalue.value)return;var g=this.props.getUrlParam("pagecode"),_=0;a==this.formId?_=0:a==this.tableId&&(_=m);if(a==this.formId){var k=null;switch(p){case"pk_org":null==f.value||""==f.value?"transfer"===this.props.getUrlParam("type")?(0,r.promptBox)({color:"warning",title:this.state.json["payablebill-000033"],content:this.state.json["payablebill-000064"],beSureBtnName:this.state.json["payablebill-000040"],noCancelBtn:!0,beSureBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:b})},closeByClickBackDrop:!1}):(0,r.promptBox)({color:"warning",title:this.state.json["payablebill-000033"],content:this.state.json["payablebill-000034"],beSureBtnName:this.state.json["payablebill-000040"],cancelBtnName:this.state.json["payablebill-000009"],beSureBtnClick:function(){v.props.form.EmptyAllFormValue(v.formId),v.props.cardTable.setTableData(v.tableId,{rows:[]}),v.initAdd(!0)},cancelBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:b})},closeByClickBackDrop:!1}):null!=b.value&&""!=b.value?(0,r.promptBox)({color:"warning",title:this.state.json["payablebill-000033"],content:this.state.json["payablebill-000034"],beSureBtnName:this.state.json["payablebill-000040"],cancelBtnName:this.state.json["payablebill-000009"],beSureBtnClick:function(){(0,r.ajax)({url:s,async:!1,data:{pageId:g,event:v.props.createHeadAfterEventData(g,v.formId,v.tableId,a,p,f),uiState:v.props.getUrlParam("status")},success:function(e){(0,n.renderData)(v,e),(0,n.formulamsgHint)(v,e)},error:function(e){(0,n.errorDeal)(v,e,b,p)}})},cancelBtnClick:function(){v.props.form.setFormItemsValue(v.formId,{pk_org:b})},closeByClickBackDrop:!1}):(k={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,a,p,f),uiState:this.props.getUrlParam("status")},c.call(this,k,p,b));break;case"supplier":k={pageId:g,formEvent:t.createFormAfterEventData(g,this.formId,this.tableId,p,f),colValues:(0,l.getColvalues)(this.props,this.tableId,["pk_org","payaccount","pk_currtype","supplier","buysellflag","objtype","direction","pk_billtype","top_billtype"].concat(i.moneyAndRateFields)),rowids:(0,l.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,k,p,b);break;case"payaccount":k={pageId:g,formEvent:t.createFormAfterEventData(g,this.formId,this.tableId,p,f),colValues:(0,l.getColvalues)(this.props,this.tableId,["pk_org","payaccount","pk_currtype","supplier","buysellflag","objtype","direction","pk_billtype"].concat(i.moneyAndRateFields)),rowids:(0,l.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,k,p,b);break;case"pk_deptid_v":k={pageId:g,formEvent:t.createFormAfterEventData(g,this.formId,this.tableId,p,f),colValues:(0,l.getColvalues)(this.props,this.tableId,["pk_org","pk_deptid","pk_deptid_v","pk_currtype","customer","taxtype","buysellflag","objtype","direction"]),rowids:(0,l.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,k,p,b);break;case"pk_psndoc":k={pageId:g,formEvent:t.createFormAfterEventData(g,this.formId,this.tableId,p,f),colValues:(0,l.getColvalues)(this.props,this.tableId,["pk_org","pk_psndoc","pk_deptid","pk_deptid_v","isrefused","prepay","isdiscount","objtype","direction","agentreceivelocal"]),rowids:(0,l.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,k,p,b);break;case"pk_currtype":k={pageId:g,formEvent:t.createFormAfterEventData(g,this.formId,this.tableId,p,f),colValues:(0,l.getColvalues)(this.props,this.tableId,["pk_org","pk_group","pk_currtype","pk_billtype","billdate","rate","buysellflag","taxprice","local_taxprice","taxrate","occupationmny","money_bal","local_money_bal","globalcrebit","globalnotax_cre","globaltax_cre","groupcrebit","groupnotax_cre","grouptax_cre","local_money_cr","local_notax_cr","local_tax_cr","money_cr","notax_cr","quantity_cr"]),rowids:(0,l.getRowIds)(this.props,this.tableId),uiState:this.props.getUrlParam("status")},c.call(this,k,p,b),(0,o.currentTypeAfterFormEvents)(this.formId,t,p);break;default:k={pageId:g,event:this.props.createHeadAfterEventData(g,this.formId,this.tableId,a,p,f),uiState:this.props.getUrlParam("status")},c.call(this,k,p,b)}}a==this.tableId&&(0,r.ajax)({url:d,data:{rowindex:0,editindex:_,pageId:g,changedrows:b,tableId:this.tableId,body:t.cardTable.getDataByIndex(this.tableId,_),formEvent:t.createFormAfterEventData(g,this.formId,this.tableId,p,f),uiState:this.props.getUrlParam("status")},async:!1,success:function(e){(0,n.bodyAfterEventRenderData)(v,e),"transfer"==v.props.getUrlParam("type")&&v.synTransferData(),0==m&&"pk_currtype"==p&&(0,o.currentTypeAfterFormEvents)(v.formId,t,"pk_currtype"),(0,n.formulamsgHint)(v,e)},error:function(e){var o=String(e),l=o.substring(6,o.length);"convertException"==l.substring(1,17)?(0,r.promptBox)({color:"warning",title:v.state.json["payablebill-000004"],content:l.substring(17,l.length),closeByClickBackDrop:!1,beSureBtnClick:function(){u(v,t,m,g,a,p,b,"sure",_,f)},cancelBtnClick:function(){u(v,t,m,g,a,p,b,"cancel",_,f)}}):(v.props.cardTable.setValByKeyAndRowId(v.tableId,m,p,b),(0,r.toast)({color:"danger",content:l}))}})},t.headFieldAfterRequest=c;var r=a(1),o=a(32),l=a(7),n=a(33),i=a(9),s=void 0,d=void 0;function u(e,t,a,l,i,s,u,c,p,f){(0,r.ajax)({url:d,data:{rowindex:0,editindex:p,pageId:l,changedrows:u,tableId:e.tableId,body:t.cardTable.getDataByIndex(e.tableId,p),formEvent:t.createFormAfterEventData(l,e.formId,e.tableId,s,f),uiState:e.props.getUrlParam("status"),isCalculateConvert:c},async:!1,success:function(r){(0,n.bodyAfterEventRenderData)(e,r),"transfer"==e.props.getUrlParam("type")&&e.synTransferData(),0==a&&"pk_currtype"==s&&(0,o.currentTypeAfterFormEvents)(e.formId,t,"pk_currtype"),(0,n.formulamsgHint)(e,r)}})}function c(e,t,a){var o=this;(0,r.ajax)({url:s,data:e,async:!1,success:function(e){((0,n.headAfterEventRenderData)(o,e),(0,n.formulamsgHint)(o,e),"pk_org"==t)&&(o.props.form.getFormItemsValue(o.formId,"pk_org").value?(o.props.resMetaAfterPkorgEdit(),o.state.buttonfalg=!0):o.state.buttonfalg=null,o.toggleShow());"transfer"==o.props.getUrlParam("type")&&o.synTransferData()},error:function(e){(0,n.errorDeal)(o,e,a,t)}})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(462)},function(e,t,a){"use strict";var r,o,l,n=a(1),i=a(463),s=(r=i)&&r.__esModule?r:{default:r};o=s.default,l="app",(0,n.RenderRouter)(o,l)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(1),l=a(309),n=(r=l)&&r.__esModule?r:{default:r};var i=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,304,7))})),s=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,317,7))})),d=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,337,7))})),u=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,351,7))})),c=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,464,7))})),p=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,470,7))})),f=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,476,7))}));o.useJS.setConfig({"fct/bill/ar/transfer/index":"../../../../fct/bill/ar/transfer/index.js","aum/insur/compensationtransfer/source/index":"../../../../aum/insur/compensationtransfer/source/index.js","aum/reduce/saletransfer/source/index":"../../../../aum/reduce/saletransfer/source/index.js","alo/rent/settle-rectransfer/source/index":"../../../../alo/rent/settle-rectransfer/source/index.js"});var b=(0,o.useJS)(["fct/bill/ar/transfer/index"],(function(e){return e})),m=(0,o.useJS)(["aum/insur/compensationtransfer/source/index"],(function(e){return e})),y=(0,o.useJS)(["aum/reduce/saletransfer/source/index"],(function(e){return e})),h=(0,o.useJS)(["alo/rent/settle-rectransfer/source/index"],(function(e){return e})),v=[{path:"/",component:n.default,exact:!0},{path:"/list",component:n.default},{path:"/card",component:i},{path:"/prev",component:s},{path:"/nowv",component:d},{path:"/nowvcard",component:u},{path:"/F1",component:c},{path:"/F2",component:p},{path:"/Z3",component:f},{path:"/FCT2",component:b},{path:"/4A49",component:m},{path:"/4A18",component:y},{path:"/4A2F",component:h}];t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=c(o),n=(c(a(17)),a(1)),i=a(465),s=a(468),d=a(274),u=c(a(22));function c(e){return e&&e.__esModule?e:{default:e}}var p=n.spaCache.setDefData,f=(n.spaCache.getDefData,n.base.NCBackBtn,n.base.NCToggleViewBtn),b=n.base.NCDiv,m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.transfer=function(){p("src_appcode",d.dataSource,a.props.getUrlParam("src_appcode")),p("src_pagecode",d.dataSource,d.pagecode),a.props.pushTo("/card",{status:"add",type:"transfer",srcBilltype:d.billType,dataSource:d.dataSource,pagecode:a.props.getUrlParam("dest_tradetype")})},a.backList=function(){var e=a.props.getUrlParam("dest_billtype"),t=null;e&&("F0"==e?t="20060RBM_LIST":"F1"==e?t="20080PBM_LIST":"F2"==e?t="20060GBM_LIST":"F3"==e&&(t="20080EBM_LIST")),a.props.pushTo("/list",{pagecode:t})},a.searchId=d.searchId,a.headId=d.headId,a.bodyId=d.bodyId,a.pagecode=d.pagecode,a.appcode=e.getSearchParam("c"),a.state={expand:!0,json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;(0,n.getMultiLang)({moduleId:["payablebill","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){(0,e.props.transferTable.hasCache)(d.dataSource)||e.props.transferTable.setTransferTableValue(d.headId,d.bodyId,[],"pk_payablebill","pk_payableitem"),i.initTemplate.call(e,e.props,e.initShow)}))}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.transferTable,r=t.button,o=t.search.NCCreateSearch,n=(r.createButton,a.createTransferTable),c=(a.createTransferList,a.getTransformFormDisplay,this.props.BillHeadInfo.createBillHeadInfo);return l.default.createElement("div",{id:"pay-transferList",className:"nc-bill-list"},l.default.createElement(b,{areaCode:b.config.HEADER,className:"nc-bill-header-area"},l.default.createElement("div",{className:"header-title-search-area"},c({title:this.state.json["payablebill-000061"],backBtnClick:function(){e.backList()}})),l.default.createElement("div",{className:"header-button-area"},l.default.createElement(f,{expand:this.state.expand,onClick:function(){e.props.meta.getMeta()[d.mainCode]?i.initTemplate.call(e,e.props):(0,i.initTemplateFull)(e.props),e.props.transferTable.changeViewType(d.headId);var t=!e.state.expand;e.setState({expand:t})}}))),l.default.createElement("div",{className:"nc-bill-search-area"},o(d.searchId,{clickSearchBtn:s.searchBtnClick.bind(this),onAfterEvent:u.default.bind(this)})),l.default.createElement("div",{className:"nc-bill-transferTable-area"},n({fieldid:"payablebill",dataSource:d.dataSource,headTableId:d.headId,bodyTableId:d.bodyId,fullTableId:d.mainCode,transferBtnText:this.state.json["payablebill-000060"],containerSelector:"#transferList",onTransferBtnClick:this.transfer})))}}]),t}(o.Component);m=(0,n.createPage)({})(m),t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplateFull=t.initTemplate=void 0;var r=l(a(466)),o=l(a(467));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.initTemplateFull=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:l.pagecode,appcode:e.getUrlParam("src_appcode")},(function(a){if(a){if(a.template){(0,i.default)(e,l.searchId,a);var r=a.template;(0,o.modifierSearchMetas)(l.searchId,e,r,l.billType,null,t),e.meta.setMeta(r)}if(a.button){var n=a.button;e.button.setButtons(n)}}}))};a(1);var r,o=a(18),l=a(274),n=a(21),i=(r=n)&&r.__esModule?r:{default:r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.createUIDom({pagecode:r.mainPageCode,appcode:e.getUrlParam("src_appcode")},(function(t){if(t&&t.template){var a=t.template;e.meta.setMeta(a)}}))};a(1);var r=a(274)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchBtnClick=void 0;var r,o=a(469),l=(r=o)&&r.__esModule?r:{default:r};t.searchBtnClick=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;if(this.props.search.getAllSearchData(o.searchId)){var t={queryInfo:this.props.search.getQueryInfo(o.searchId),appCode:this.props.getUrlParam("src_appcode"),pageId:o.pagecode,src_billtype:o.billType,dest_tradetype:this.props.getUrlParam("dest_tradetype"),busitype:n(o.billType+this.props.getUrlParam("src_tradetype"),"transfer.dataSource")};(0,r.ajax)({url:"/nccloud/arap/arappub/transferquery.do",data:t,success:function(t){t.data?(e.props.transferTable.setTransferTableValue(o.headId,o.bodyId,t.data,"pk_payablebill","pk_payableitem"),l("searchData",o.dataSource,t.data)):(e.props.transferTable.setTransferTableValue(o.headId,o.bodyId,[],"pk_payablebill","pk_payableitem"),(0,r.toast)({content:e.state.json["payablebill-000059"],color:"warning"}))}})}};var r=a(1),o=a(274),l=r.spaCache.setDefData,n=r.spaCache.getDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=c(o),n=a(1),i=a(471),s=a(474),d=a(275),u=c(a(22));function c(e){return e&&e.__esModule?e:{default:e}}var p=n.spaCache.setDefData,f=(n.spaCache.getDefData,n.base.NCBackBtn,n.base.NCToggleViewBtn),b=n.base.NCDiv,m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.transfer=function(){p("src_appcode",d.dataSource,a.props.getUrlParam("src_appcode")),p("src_pagecode",d.dataSource,d.pagecode),a.props.pushTo("/card",{status:"add",type:"transfer",srcBilltype:d.billType,dataSource:d.dataSource,pagecode:a.props.getUrlParam("dest_tradetype")})},a.backList=function(){var e=a.props.getUrlParam("dest_billtype"),t=null;e&&("F0"==e?t="20060RBM_LIST":"F1"==e?t="20080PBM_LIST":"F2"==e?t="20060GBM_LIST":"F3"==e&&(t="20080EBM_LIST")),a.props.pushTo("/list",{pagecode:t})},a.searchId=d.searchId,a.headId=d.headId,a.bodyId=d.bodyId,a.pagecode=d.pagecode,a.appcode=e.getSearchParam("c"),a.state={expand:!0,json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;(0,n.getMultiLang)({moduleId:["gatheringbill","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){(0,e.props.transferTable.hasCache)(d.dataSource)||e.props.transferTable.setTransferTableValue(d.headId,d.bodyId,[],"pk_gatherbill","pk_gatheritem"),i.initTemplate.call(e,e.props,e.initShow)}))}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.transferTable,r=(t.button,t.search.NCCreateSearch),o=a.createTransferTable,n=this.props.BillHeadInfo.createBillHeadInfo;return l.default.createElement("div",{id:"transferList",className:"nc-bill-list"},l.default.createElement(b,{areaCode:b.config.HEADER,className:"nc-bill-header-area"},l.default.createElement("div",{className:"header-title-search-area"},n({title:this.state.json["gatheringbill-000057"],backBtnClick:function(){e.backList()}})),l.default.createElement("div",{className:"header-button-area"},l.default.createElement(f,{expand:this.state.expand,onClick:function(){e.props.meta.getMeta()[d.mainCode]?i.initTemplate.call(e,e.props):(0,i.initTemplateFull)(e.props),e.props.transferTable.changeViewType(d.headId);var t=!e.state.expand;e.setState({expand:t})}}))),l.default.createElement("div",{className:"nc-bill-search-area"},r(d.searchId,{clickSearchBtn:s.searchBtnClick.bind(this),onAfterEvent:u.default.bind(this)})),l.default.createElement("div",{className:"nc-bill-transferTable-area"},o({fieldid:"gatheringbill",dataSource:d.dataSource,headTableId:d.headId,bodyTableId:d.bodyId,fullTableId:d.mainCode,transferBtnText:this.state.json["gatheringbill-000056"],containerSelector:"#transferList",onTransferBtnClick:this.transfer})))}}]),t}(o.Component);m=(0,n.createPage)({})(m),t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplateFull=t.initTemplate=void 0;var r=l(a(472)),o=l(a(473));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.initTemplateFull=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:l.pagecode,appcode:e.getUrlParam("src_appcode")},(function(a){if(a){if(a.template){(0,i.default)(e,l.searchId,a);var r=a.template;(0,o.modifierSearchMetas)(l.searchId,e,r,l.billType,null,t),e.meta.setMeta(r)}if(a.button){var n=a.button;e.button.setButtons(n)}}}))};a(1);var r,o=a(18),l=a(275),n=a(21),i=(r=n)&&r.__esModule?r:{default:r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.createUIDom({pagecode:r.mainPageCode,appcode:e.getUrlParam("src_appcode")},(function(t){if(t&&t.template){var a=t.template;e.meta.setMeta(a)}}))};a(1);var r=a(275)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchBtnClick=void 0;var r,o=a(475),l=(r=o)&&r.__esModule?r:{default:r};t.searchBtnClick=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;if(this.props.search.getAllSearchData(o.searchId)){var t={queryInfo:this.props.search.getQueryInfo(o.searchId),appCode:this.props.getUrlParam("src_appcode"),pageId:o.pagecode,src_billtype:o.billType,dest_tradetype:this.props.getUrlParam("dest_tradetype"),busitype:n(o.billType+this.props.getUrlParam("src_tradetype"),"transfer.dataSource")};(0,r.ajax)({url:"/nccloud/arap/arappub/transferquery.do",data:t,success:function(t){t.data?(e.props.transferTable.setTransferTableValue(o.headId,o.bodyId,t.data,"pk_gatherbill","pk_gatheritem"),l("searchData",o.dataSource,t.data)):(e.props.transferTable.setTransferTableValue(o.headId,o.bodyId,[],"pk_gatherbill","pk_gatheritem"),(0,r.toast)({content:e.state.json["gatheringbill-000055"],color:"warning"}))}})}};var r=a(1),o=a(275),l=r.spaCache.setDefData,n=r.spaCache.getDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=c(o),n=a(1),i=a(477),s=a(480),d=a(276),u=c(a(22));function c(e){return e&&e.__esModule?e:{default:e}}var p=n.spaCache.setDefData,f=(n.spaCache.getDefData,n.base.NCBackBtn,n.base.NCToggleViewBtn),b=n.base.NCDiv,m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.transfer=function(){p("src_appcode",d.dataSource,a.props.getUrlParam("src_appcode")),p("src_pagecode",d.dataSource,d.pagecode),a.props.pushTo("/card",{status:"add",type:"transfer",srcBilltype:d.billType,dataSource:d.dataSource,pagecode:a.props.getUrlParam("dest_tradetype")})},a.backList=function(){var e=a.props.getUrlParam("dest_billtype"),t=null;e&&("F0"==e?t="20060RBM_LIST":"F1"==e?t="20080PBM_LIST":"F2"==e?t="20060GBM_LIST":"F3"==e&&(t="20080EBM_LIST")),a.props.pushTo("/list",{pagecode:t})},a.searchId=d.searchId,a.headId=d.headId,a.bodyId=d.bodyId,a.pagecode=d.pagecode,a.appcode=e.getSearchParam("c"),a.state={expand:!0,json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;(0,n.getMultiLang)({moduleId:["salebill","public"],domainName:"arap",currentLocale:"simpchn",callback:function(t){e.setState({json:t},(function(){(0,e.props.transferTable.hasCache)(d.dataSource)||e.props.transferTable.setTransferTableValue(d.headId,d.bodyId,[],"pk_ct_sale","pk_ct_sale_b"),i.initTemplate.call(e,e.props,e.initShow)}))}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.transferTable,r=(t.button,t.search.NCCreateSearch),o=a.createTransferTable,n=this.props.BillHeadInfo.createBillHeadInfo;return l.default.createElement("div",{id:"transferList",className:"nc-bill-list"},l.default.createElement(b,{areaCode:b.config.HEADER,className:"nc-bill-header-area"},l.default.createElement("div",{className:"header-title-search-area"},n({title:this.state.json["salebill-000057"],backBtnClick:function(){e.backList()}})),l.default.createElement("div",{className:"header-button-area"},l.default.createElement(f,{expand:this.state.expand,onClick:function(){e.props.meta.getMeta()[d.mainCode]?i.initTemplate.call(e,e.props):(0,i.initTemplateFull)(e.props),e.props.transferTable.changeViewType(d.headId);var t=!e.state.expand;e.setState({expand:t})}}))),l.default.createElement("div",{className:"nc-bill-search-area"},r(d.searchId,{clickSearchBtn:s.searchBtnClick.bind(this),onAfterEvent:u.default.bind(this)})),l.default.createElement("div",{className:"nc-bill-transferTable-area"},o({fieldid:"salebill",dataSource:d.dataSource,headTableId:d.headId,bodyTableId:d.bodyId,fullTableId:d.mainCode,transferBtnText:this.state.json["salebill-000056"],containerSelector:"#transferList",onTransferBtnClick:this.transfer})))}}]),t}(o.Component);m=(0,n.createPage)({})(m),t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplateFull=t.initTemplate=void 0;var r=l(a(478)),o=l(a(479));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.initTemplateFull=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:l.pagecode,appcode:e.getUrlParam("src_appcode")},(function(a){if(a){if(a.template){(0,i.default)(e,l.searchId,a);var r=a.template;(0,o.modifierSearchMetas)(l.searchId,e,r,l.billType,null,t),e.meta.setMeta(r)}if(a.button){var n=a.button;e.button.setButtons(n)}}}))};a(1);var r,o=a(18),l=a(276),n=a(21),i=(r=n)&&r.__esModule?r:{default:r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.createUIDom({pagecode:r.mainPageCode,appcode:e.getUrlParam("src_appcode")},(function(t){if(t&&t.template){var a=t.template;e.meta.setMeta(a)}}))};a(1);var r=a(276)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchBtnClick=void 0;var r,o=a(481),l=(r=o)&&r.__esModule?r:{default:r};t.searchBtnClick=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;if(this.props.search.getAllSearchData(o.searchId)){var t={queryInfo:this.props.search.getQueryInfo(o.searchId),appCode:this.props.getUrlParam("src_appcode"),pageId:o.pagecode,src_billtype:o.billType,dest_tradetype:this.props.getUrlParam("dest_tradetype"),busitype:n(o.billType+this.props.getUrlParam("src_tradetype"),"transfer.dataSource")};(0,r.ajax)({url:"/nccloud/arap/arappub/cttransferquery.do",data:t,success:function(t){t.data?(e.props.transferTable.setTransferTableValue(o.headId,o.bodyId,t.data,"pk_ct_sale","pk_ct_sale_b"),l("searchData",o.dataSource,t.data)):(e.props.transferTable.setTransferTableValue(o.headId,o.bodyId,[],"pk_ct_sale","pk_ct_sale_b"),(0,r.toast)({content:e.state.json["salebill-000055"],color:"warning"}))}})}};var r=a(1),o=a(276),l=r.spaCache.setDefData,n=r.spaCache.getDefData}])}));